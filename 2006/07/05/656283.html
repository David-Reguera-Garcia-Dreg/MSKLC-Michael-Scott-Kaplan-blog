<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/07/05/656283.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Custom code pages?</title></head><body>
<h1>Custom code pages?</h1>
<p><em>by Michael S. Kaplan, published on 2006/07/05 04:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/07/05/656283.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>There is an old expression about a person being like a dog with a bone -- meaning that they really want to keep at something in particular, and they don't want to let it go. </FONT></P>
<P><FONT face=Tahoma>We have something similar here in <A href="http://blogs.msdn.com/michkap">this blog</A>, and it is regular reader Ivan Petrov, who is really looking for a way to extend code pages, and he has asked the question in <STRONG><A href="http://archives.miloush.net/michkap/archive/2005/02/06/368081.html">various</A></STRONG> <STRONG><A href="http://archives.miloush.net/michkap/archive/2006/01/27/517732.html">ways</A></STRONG> in the past. They are interesting questions, and the issues tied up in them are also interesting, though the answers are not always what he might like. :-(</FONT></P>
<P><FONT face=Tahoma>The latest question, in the Suggestion Box:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman" size=2>It will be possible some day to add custom Codepages in Windows? Because, as we can see here: <BR><A href="http://www-03.ibm.com/servers/eserver/iseries/software/globalization/codepages.html">http://www-03.ibm.com/servers/eserver/iseries/software/globalization/codepages.html</A>, <BR><BR>and here: <BR><BR><A href="http://www.i18nguy.com/unicode/codepages.html">http://www.i18nguy.com/unicode/codepages.html</A> <BR><BR>there're too many Codepages not supported by Microsoft. <BR><BR>Regards, <BR>Ivan. </FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>As I have mentioned <A href="http://archives.miloush.net/michkap/archive/2005/03/01/382289.html"><STRONG>before</STRONG></A>, code pages are never going to be enough, though. The answer here, the only answer, is Unicode. Given the limited use of all code pages that are not "default system code pages" of a locale making the utility of most of the code pages on Windows pretty limited anyway, the ability to add more such code pages would be of even more limited use. </FONT></P>
<P><FONT face=Tahoma>Certainly the migration of legacy data into Unicode is an interesting scenario, and one that in a past life as a consultant I have often worked on, providing short term and long term solutions. The need to do such transformations conformant to various national and industrial standards has existed for quite some time, and will likely continue to exist. </FONT></P>
<P><FONT face=Tahoma>Hell, if you think about many of IBM's EBCDIC code pages, they were often provide by IBM for customer needs to do such mappings. It is a business for everyone, really....</FONT></P>
<P><FONT face=Tahoma><STRONG>Does that make it important to support custom code pages on Windows at some point? </STRONG></FONT></P>
<P><FONT face=Tahoma>Well, maybe -- if a compelling case can be made for such data migration -- I have heard rumor that IBM has in the past produced EBCDIC code pages for individual customers, so clearly many companies have felt such pressures before.</FONT></P>
<P><FONT face=Tahoma><STRONG>More important than the opening up of functionality that does not exist today on Windows but which such opening up has been happening, such as the work that has happened with fonts, keyboards, and locales? </STRONG></FONT></P>
<P><FONT face=Tahoma>Well,&nbsp;maybe not -- since mappings such as the ones on the IBM site or on Tex's&nbsp;are hardly out of the reach of&nbsp;developers today....</FONT></P>
<P><FONT face=Tahoma>The big use that we all have for code pages is actually as <STRONG><A href="http://archives.miloush.net/michkap/archive/2005/05/10/416129.html">repetoire definitions</A></STRONG> -- because in this world where it is hard to know what letters are important to a language, such a standard is a good indication of what <EM>someone</EM> felt was a reasonable subset!</FONT></P>
<P><FONT face=Tahoma>In the meantime, the owner of encodings on Windows is likely to have thoughts on the issue (though the first answer to just about any question about code pages from him is <STRONG>Use Unicode!</STRONG>), so you can <A href="http://blogs.msdn.com/shawnste/">Shawn</A> if you are curious. :-)</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> <STRONG><FONT size=9>Ó¸</FONT></STRONG> <EM>(<A href="http://www.fileformat.info/info/unicode/char/04f8">U+04f8</A>, a.k.a. CYRILLIC CAPITAL LETTER YERU WITH DIARESIS)</EM></FONT></P>
<hr/><p><a id="656759" href="#656759">#</a> <strong>Nick Lamb</strong> on 5 Jul 2006 6:25 AM:</p><div style="margin-left: 1em">I don't know about Ivan specifically, but most people who want support for other character encodings are looking to process existing data, &quot;Use Unicode&quot; may be hindsight, or even anachronism from that perspective and either way not a useful answer.<br><br>On other modern platforms the OS provides a comprehensive translation API, on Win32 the best on offer seems to be the MultiByte/WideChar family which are pretty miserable even before considering that they're limited to a small subset of the existing encodings.<br><br>So, what's GIFT doing to deliver &quot;industry-leading, high-quality, extensible APIs&quot; in this space? What if anything will be delivered in Vista?</div>
<p><a id="656761" href="#656761">#</a> <strong>ML</strong> on 5 Jul 2006 6:33 AM:</p><div style="margin-left: 1em">What's wrong with UTF-8?</div>
<p><a id="656924" href="#656924">#</a> <strong>Michael S. Kaplan</strong> on 5 Jul 2006 10:24 AM:</p><div style="margin-left: 1em">Hi Nick -- asked and answered, dude. No new support in Vista. But WideCharToMultiByte and MultiByteToWideChar&nbsp;<STRONG>are</STRONG> comprehensive in the support of codepages that have been used to support hundreds of thousands of apps run by millions of users of older versions of Windows....</div>
<p><a id="656926" href="#656926">#</a> <strong>Michael S. Kaplan</strong> on 5 Jul 2006 10:24 AM:</p><div style="margin-left: 1em">Hi ML -- Nothing is wrong with UTF-8. <br><br>And nothing is wrong with UTF-32. <br><br>And nothing is wrong with UTF-16. <br><br>They are all forms of Unicode. And different platforms have different defaults; each one of those platforms has the right to choose that default without needing to re-choose in 15 years. :-)</div>
<p><a id="657451" href="#657451">#</a> <strong>Dean Harding</strong> on 5 Jul 2006 10:26 PM:</p><div style="margin-left: 1em">&gt; I have heard rumor that IBM has in the past produced EBCDIC code pages for individual customers<br><br>That's a very mainframe-ey thing to do. When your customer pays several million dollars for your solution, producing a custom encoding for them makes sense. But when you pay $100 (or whatever it is in US$) for Windows, it doesn't make so much sense.<br><br>And that's basically what Ivan is asking. I mean, like Michael says, for anything but data migration, you should use Unicode - and I don't think there will be many arguments against that. So that just leaves data migration. Now, if your &quot;custom&quot; codepage is a simple 1-1 mapping of bytes to Unicode codepoints, then you don't need anything in the OS to do it - it's pretty trivial with a bit of perl script or something. If it's more complex (for example, a multi-byte codepage) then there's nothing really &quot;general&quot; that the OS can provide anyway, because the codepage could be coded any old way at all...</div>
<p><a id="657741" href="#657741">#</a> <strong>John Elliott</strong> on 6 Jul 2006 7:14 AM:</p><div style="margin-left: 1em">According to<br><br><a rel="nofollow" target="_new" href="http://www.mail-archive.com/fd-dev@topica.com/msg00075.html">http://www.mail-archive.com/fd-dev@topica.com/msg00075.html</a><br><br>there is a 'private use' range of codepage IDs: 0xFF00-0xFFFD. &nbsp;That'll come in handy for a CPI file I'm creating.<br></div>
<p><a id="657763" href="#657763">#</a> <strong>KJK::Hyperion</strong> on 6 Jul 2006 7:31 AM:</p><div style="margin-left: 1em">Yes it is possible to add custom codepages, and no, it isn't a good idea. The 50000 range is designed with custom codepages in mind. With very little reversing you can figure out you need a DLL which exports a single function called NlsDllCodePageTranslation, whose prototype is documented indirectly. Drawbacks of 50000-range codepages: they only work in Win32. The whole low level, such as filesystems and the kernel in general, will be completely oblivious to your custom codepage. Michael has already noted this about ISCII codepages (which are in the 50000 range)</div>
<p><a id="657876" href="#657876">#</a> <strong>Michael S. Kaplan</strong> on 6 Jul 2006 10:14 AM:</p><div style="margin-left: 1em">Indirectly, <A href="http://msdn.microsoft.com/library/en-us/intl/unicode_NlsDllCodePageTranslation.asp">huh</A>? :-) <BR><BR>But I know what you mean, and you are right about the limitations....</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2007/05/19 <a href="http://archives.miloush.net/michkap/archive/2007/05/19/2735895.html">Custom code pages? Redux</a></p><p>2007/01/04 <a href="http://archives.miloush.net/michkap/archive/2007/01/04/1392691.html">Whither intl.inf in Vista?</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/07/06/656351.html" title="Not technically wrong">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/07/05/656199.html" title="The one with all of the language info">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-07-05">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/07/05/656283.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>