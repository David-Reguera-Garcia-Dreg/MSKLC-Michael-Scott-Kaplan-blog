<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/07/07/658498.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Results of the 'Time Zone Scenario Feedback' feared</title></head><body>
<h1>Results of the 'Time Zone Scenario Feedback' feared</h1>
<p><em>by Michael S. Kaplan, published on 2006/07/07 03:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/07/07/658498.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Over on the <A href="http://blogs.msdn.com/bclteam/">BCLTeam blog</A>, Anthony Moore has posted <A href="http://blogs.msdn.com/bclteam/archive/2006/07/05/657242.aspx">Time Zone Scenario Feedback Wanted</A>. </FONT></P>
<P><FONT face=Tahoma>Now I have mentioned before in connection with this hole issue about how <STRONG><A href="http://archives.miloush.net/michkap/archive/2006/04/03/567489.html">Time zones make me cringe</A></STRONG>.</FONT></P>
<P><FONT face=Tahoma>As I look at the potential list of features that Anthony has listed, I have not been cured of the cringe problem; if anything I am more nervous. :-(</FONT></P>
<P><FONT face=Tahoma>My opinion, for what it is worth:</FONT></P>
<UL>
<LI><FONT face=Tahoma><STRONG>NO</STRONG> functionality to affect the machine settings should be integrated into the BCL. These are settings that have huge potential affects on applications even in their current form&nbsp;(like I&nbsp;mentioned <A href="http://archives.miloush.net/michkap/archive/2006/04/05/568208.html"><STRONG>here</STRONG></A>); if all it takes is a few lines of managed code then the platform is being opened up to a potential nightmare from which schedules may never fully recover;</FONT> 
<LI><FONT face=Tahoma><STRONG>Special care</STRONG> should be taken to make sure that Win32 settings and its UI is extended, and that its is not supplanted -- the vast majority of users still have that&nbsp;UI and its consequences to deal with in user and kernel mode; sloppiness here will lead to problems like "managed app brings down AD install" and worse;</FONT>
<LI><FONT face=Tahoma><STRONG>Slowing down</STRONG> is probably pretty important at this point -- developers do not tend to answer questions like "Do you want feature X added?" with anything other than YES. Any full steam ahead feedback push is guaranteed to generate the wrong answers here.</FONT></LI></UL>
<P><FONT face=Tahoma>My cringing is mainly because there seems to be a strong desire to make sure that all of the features that can be added might be, rather than a cautious approach that perhaps slowly works to add features so there is time to assess the consequences more fully, for both users and developers.</FONT></P>
<P><FONT face=Tahoma>I still have hopes that the right thing will happen here, but when the wish list is put in front of everyone for them to rate, it makes it sound like there may be some wrongness if the ratings are high enough for this <STRONG>most requested feature</STRONG>.... :-(</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma><FONT color=#ff1493><EM>This post brought to you by</EM> <STRONG><FONT size=6>a</FONT></STRONG> </FONT><EM><FONT color=#ff1493>(</FONT><A href="http://www.fileformat.info/info/unicode/char/0061">U+0061</A><FONT color=#ff1493>, a.k.a. LATIN SMALL LETTER A)</FONT></EM></FONT></P>
<hr/><p><strong>Mihai</strong> on 7 Jul 2006 4:38 AM:</p><div style="margin-left: 1em">Why not solve easier things, like for instace not having Windows change my time without asking when DST changes. I boot multiple partitions, sometimes multiple hdd (with various language OS) and each one changes my clock, so sometime I end up with a 5-6 hours offset.<br><br>Why not store a flag in CMOS saying &quot;is DST already!&quot;<br><br>Especially that the flag is in CMOS for about 20 years now :-)<br>(see CMOS layout, bit 0 of RTC status register B (0x0b))<br>Don't you think is time for Windows to learn about it and use it?<br><br>And no, is not about i18n, and not in you backyard, I know :-)<br></div>
<p><strong>Michael S. Kaplan</strong> on 7 Jul 2006 8:30 AM:</p><div style="margin-left: 1em">Hi Mihai, <BR><BR>These are all suggestions for the OS (and the hardware) -- not ones that can be done in the BCL, either. :-) <BR><BR>I think that means you agree with me!</div>
<p><strong>Mihai</strong> on 7 Jul 2006 4:20 PM:</p><div style="margin-left: 1em">I think I agree with you.<br>All features sound cool, if they can get them right, BUT:<br><br>1. Some of the features are impossible to get right with the current info<br>ie when time goes back because the DST changes, there is a one hour interval when you cannot say what time really is, unless you also get the info that DST is in effect or not)<br><br>2. Historical time zone is kind half the story, historical calendar info would also be nice (but a pain to do for Hijri)<br><br>3. Some of the features belong in Win32<br><br>4. Stuff like &quot;2006-07-06T08:49:00+05:00&quot; has no time zone info, so there is no data about what DST rules apply<br><br>In general, I agree with your arguments in &quot;Time zones make me cringe.&quot;<br>I would like to see the tough problems solved by the OS, but better nothing than a buggy solution.<br></div>
<p><strong>Ruben</strong> on 8 Jul 2006 5:11 PM:</p><div style="margin-left: 1em">Well, part of the problem is that they've been postponing this stuff for ages (.NET or OS, take your pick). Many applications actually need a little more than just the current time zone. Even if it's just enumerating the existing time zones (and using them!) <br><br>And forcing everybody to come up with their own implementation seems silly: in practice, that's even more buggy!<br><br>In fact, I don't really know where the OS should come in. Is there a process-level TZ switch? If not, then the entire argument is moot. The OS provides basic time zones, and each process gets the default time zone. You want to use another? Then use it. Only your .NET TZ-aware functions would be the wiser. <br><br>Same thing happens with .NET's CultureInfo. My XP box has no notion of 'custom' regional settings. Except my .NET 2.0 apps, that is.<br><br>So regardless of the course taken, _something_ is better than nothing.<br><br>(Unless, Michael, your greatest fear comes out, and they goof up monumentally. I truly hope not.)<br><br>Oh, and they shouldn't allow any API to change the user's time zone, or the preinstalled time zones. There's only one entity that should be allowed to change the user's time zone, and that is the user. And there's only one entity that should change the preinstalled time zones, and that is MS. <br><br>(And they should, for once. Even if it's just for the Common Wealth Games in Australia. For some reason, my time zone settings no longer line up with the official rules in Australia, because I don't live in Australia; some of my friends might, thankyouverymuch.)</div>
<p><strong>Mihai</strong> on 8 Jul 2006 7:10 PM:</p><div style="margin-left: 1em">&lt;&lt;Well, part of the problem is that they've been postponing this stuff for ages (.NET or OS, take your pick).&gt;&gt;<br><br>I would definitely want the OS to do it, and do it right, instead of each programmer out there (including me) trying and getting it wrong :-)<br><br>But I would like to make sure is done correctly, and at the right level.<br><br>I know enough .NET, but most of my programming is still Win32, and I would hate to see this functionality added to .NET and not to Win32.<br><br>And I see no technical reason why do it .NET only.<br></div>
<p><strong>Maurits [MSFT]</strong> on 9 Jul 2006 3:44 PM:</p><div style="margin-left: 1em">User feedback is a good thing. &nbsp;Slavish devotion to user feedback is bad, but have faith in the judgment of the team.<br><br>&gt; Stuff like &quot;2006-07-06T08:49:00+05:00&quot; has no time zone info, so there is no data about what DST rules apply<br><br>There are several problems to be solved.<br>The string you mention does uniquely identify a particular instant in time, which is (IMHO) the most important of the problems. &nbsp;Nothing can possibly work if this is broken.<br><br>Adding DST rules is best done at the locale level, and requires constant vigilance as the whims of politicians play havoc with the scientific basis of time measurement.<br><br>It is, first and foremost, important to know &quot;When Something Happens.&quot;<br>It is /secondarily/ of import to know &quot;How to Spell That Instant.&quot;<br>It is only thirdly of importance to support pseudo-cyclic intervals like &quot;Every Sunday at 2:30 AM, 'local time'&quot;</div>
<p><strong>Mihai</strong> on 10 Jul 2006 6:27 PM:</p><div style="margin-left: 1em">&lt;&lt;Stuff like &quot;2006-07-06T08:49:00+05:00&quot; has no time zone info, so there is no data about what DST rules apply&gt;&gt;<br><br>&lt;&lt;The string you mention does uniquely identify a particular instant in time, which is (IMHO) the most important of the problems. &nbsp;Nothing can possibly work if this is broken. &gt;&gt;<br><br>This is the main problem: the strings like the one above DO NOT uniquely identify a particular instant in time.<br><br>Problem 1: same string can represent two different times<br>Ex: &quot;2006-10-29T01:30:00-08:00&quot;<br>And let's say we know we are in CA (not part of the info in string)<br>Since &quot;in fall, clocks fall back from 1:59 a.m. to 1:00 a.m&quot;, it is not possible to determine if &quot;this&quot; 1:30 is before or after the DST started. That night you have 1:30 twice.<br><br>Problem 2: time zone &amp; DST rules are not part of the string<br>Ex: &quot;2006-07-06T08:49:00-07:00&quot;<br>Is there a DST in effect or not? If I am in Arizona, there is no DST.<br>But the Navajo Nation ubserves DST even in Arizona.<br>And there is also nothing telling us this is about Arizona.<br>Ex: &quot;2006-07-06T08:49:00-05:00&quot;<br>Is there a DST in effect or not? I don't even know if I am in NY or somewhere in South America.<br><br>So yes, you can parse the string, but have no clue how to convert to UTC, because there is no time zone info. -07:00 is not enough to tell you where you are.<br></div>
<p><strong>Michael S. Kaplan</strong> on 10 Jul 2006 7:09 PM:</p><div style="margin-left: 1em">There is also the difference between Win32 and .NET to consider here, in addition to the points Mihai is making. :-)</div>
<p><strong>Dean Harding</strong> on 10 Jul 2006 8:15 PM:</p><div style="margin-left: 1em">&gt; &quot;2006-10-29T01:30:00-08:00&quot;<br>&gt; And let's say we know we are in CA (not part of the info in string)<br>&gt; Since &quot;in fall, clocks fall back from 1:59 a.m. to 1:00 a.m&quot;, it is not possible to determine if<br>&gt; &quot;this&quot; 1:30 is before or after the DST started. That night you have 1:30 twice. <br><br>Not true, when DST is in effect, your offset from UTC changes. In Sydney, our &quot;normal&quot; UTC offset is +10 but with daylight savings it's +11.<br><br>So 1:30 before daylight savings finished would be &quot;2006-04-02T02:30:00+11&quot;, and &quot;2006-04-02T02:30:00+10&quot; is the 1:30 after it finished.<br><br>You have to remember that when daylight savings time is in effect, you're actully in a different timezone to when it is not in effect. So when it is not in effect, I am in AEST, which is +10 from UTC. And when it is in effect, I am in AEDT, which is +11 from UTC.<br><br>So, &quot;2006-04-02T02:30:00+11&quot; really DOES represent a single instance in time. But that is not the problem - the problem is what you mentioned: it doesn't actually tell you WHERE that time was taken. It doesn't tell you whether you're in Sydney during DST, or in Vanuatu (which is where I wish I was!) in standard time.</div>
<p><strong>Richard</strong> on 13 Jul 2006 11:18 AM:</p><div style="margin-left: 1em">&gt; NO functionality to affect the machine settings should be integrated into the BCL. <br><br>I agree... because effect of exposing this to application code is just going to create pain.<br><br>An example from the world of VBA: <a rel="nofollow" target="_new" href="http://thedailywtf.com/forums/thread/81275.aspx">http://thedailywtf.com/forums/thread/81275.aspx</a></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/06/29 <a href="http://archives.miloush.net/michkap/archive/2008/06/29/8667900.html">Did someone break GetTimeZoneInformation in XP?</a></p><p>2007/02/13 <a href="http://archives.miloush.net/michkap/archive/2007/02/13/1671523.html">An opportunity to start down the right [long ]path</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/07/08/656437.html" title="Avoiding the cognitive fake out">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/07/07/658464.html" title="Can you handle tfeL-ot-thgiR Scripts?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-07-07">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/07/07/658498.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>