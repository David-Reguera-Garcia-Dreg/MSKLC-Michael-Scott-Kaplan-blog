<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/07/22/675085.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Behind the return of the Unicode IME</title></head><body>
<h1>Behind the return of the Unicode IME</h1>
<p><em>by Michael S. Kaplan, published on 2006/07/22 16:09 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/07/22/675085.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Nick Lamb is a regular reader who often keeps me on my toes. </FONT></P>
<P><FONT face=Tahoma>In response to my recent post <STRONG><A href="http://archives.miloush.net/michkap/archive/2006/07/20/671835.html">Return of the Unicode IME</A></STRONG>, Nick <A href="http://archives.miloush.net/michkap/archive/2006/07/20/671835.html#675031">commented</A>&nbsp;[line breaks inserted by me]:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman" size=2>Can users expect the final version to go beyond the BMP? <BR><BR>Also it seems short-sighted to skip characters that are unused but might perhaps be allocated later. The principle of forwards compatibility seems to argue in favour of allowing these characters despite the modest increase in file size. <BR><BR>It makes sense not to allow the user to enter U+FFFE since it does not and will never exist, but why not allow e.g. U+0620 which might some day get allocated? </FONT></P></BLOCKQUOTE></BLOCKQUOTE>
<P><FONT face=Tahoma>These are some really excellent thoughts, and since they represent decisions for what to do with this sample that I really have to sort out how to proceed, I thought it might make sense to talk about them right here at SIAO. :-)</FONT></P>
<P><FONT face=Tahoma>For the first version, I actually had written a small C# program that walked through the Unicode range and used the previously discussed .NET 2.0 <A href="http://archives.miloush.net/michkap/archive/2005/01/28/362305.html">CharUnicodeInfo</A> <A href="http://archives.miloush.net/michkap/archive/2005/09/09/462934.html">class</A> to get all of the code points that were&nbsp;neither <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationunicodecategoryclasstopic.asp">UnicodeCategory</A>.OtherNotAssigned nor <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationunicodecategoryclasstopic.asp">UnicodeCategory</A>.Control, 0x000 to 0xffff.</FONT></P><FONT face=Tahoma>
<P><FONT face=Tahoma>The issue of supplementary characters was actually the one that delayed the post by over a week, interestingly enough. </FONT></P>
<P><FONT face=Tahoma>The first version of the IME had every single assigned Unicode code point from 0x0000 to 0x10ffff, minus the C0 and C1 controls. </FONT></P>
<P><FONT face=Tahoma>The file was over 7mb in size, which seemed a little bigger than I wanted to start with!</FONT></P>
<P><FONT face=Tahoma>So I started by just trimming out the Plane 15 and Plane 16 Private Usea Area characters, as it did seem like these could be left out for now and I figured they could always be added&nbsp;back later.</FONT></P>
<P>I rejected the idea of being "consistent" in my PUA treatment and getting rid of everything in <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationunicodecategoryclasstopic.asp">UnicodeCategory</A>.PrivateUse.&nbsp;Because despite the bias I seem to show in posts like <A href="http://archives.miloush.net/michkap/archive/2005/09/26/473738.html"><STRONG>The PUA? P.U.!</STRONG></A>&nbsp;and <A href="http://archives.miloush.net/michkap/archive/2006/05/31/612544.html"><STRONG>Keeping out the Undesirables</STRONG></A>, I am not trying to punish people who are using it....</P>
<P><FONT face=Tahoma>Anyway, this made a file that was about 3mb in size, which seemed okay (I had alredy decide to provide a zipped version of the file anyway by that point).</FONT></P>
<P><FONT face=Tahoma>But then I started using the file that included these Plane 1, 2, and 14 characters....</FONT></P>
<P><FONT face=Tahoma>What I noticed was how annoying it was to have so much of the 1### an 2### characters not automatically being inserted since there were a ton of potential characters that were asctually 1#### and 2#### characters -- it really made the whole IME unusable for some significant pieces of the Basic Multilingual Plane! </FONT></P>
<P><FONT face=Tahoma>I realized that that the Plane 15 and 16 PUA that I had stripped out before I even tried the IME would have the same type of problem, adding a whole bunch of f#### and 10#### type characters to the mix.</FONT></P>
<P><FONT face=Tahoma>So anyway, for the initial beta, I decided to take them all out. I am thinking about the issue and what to do though -- I am leaning toward putting them all under a special prefix like maybe <STRONG>S</STRONG> so you would type <STRONG>S10001</STRONG> to get LINEAR B SYLLABLE B038 E inserted. </FONT></P>
<P>This is of course not a perfect solution since it means more to type, and an even bigger file.</P>
<P>Another solution that occurred to me was having separate files for the separate planes, but that solution seemed somewhat unsatisfying to me, and the idea of one for the BMP and one for everything else was only slightly better; it still seemed like th wrong way to go.</P>
<P><FONT face=Tahoma>Anyone have any thoughts here on&nbsp;either solution? And on what might be the best character to use if the prefix idea is used? Or another idea entirely?</FONT></P>
<P></FONT><FONT face=Tahoma>The&nbsp;other issues he raises are all kind of related, and they make me want to misquote <A href="http://www.imdb.com/name/nm0001368/">Ernie Hudson</A>&nbsp;from Congo and say "The Unicode tribe has many levels of 'unassigned'. A code value isn't unassigned until UTC completely stops&nbsp;assigning characters." :-)</FONT></P>
<P><FONT face=Tahoma>What I mean is that as</FONT><FONT face=Tahoma> far as I can&nbsp;recall there is no specific Unicode property that distinguishes between e.g. <A href="http://www.fileformat.info/info/unicode/char/0620">0x0620</A> (not yet allocated) and <A href="http://www.fileformat.info/info/unicode/char/ffff">0xFFFF</A> (perpetually reserved), so a bit more work would have to go in to allow one but not the other (assuming the list is captured somewhere).</FONT></P>
<P><FONT face=Tahoma>And then there are those "kinda" reserved slots that there is no way to fill them with characters in the actual block but maybe when real estate gets tight enough *might* be used for something unrelated... that is not captured anywhere, really. The code point assignments I&nbsp;am referring to here&nbsp;would likely be very controversial in both the UTC and in WG2. It makes me less eager to try and sort through and categorize the <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationunicodecategoryclasstopic.asp">UnicodeCategory</A>.OtherNotAssigned characters....</FONT></P>
<P><FONT face=Tahoma>If nothing else I'd hate to&nbsp;end up&nbsp;having&nbsp;battles with people about the issue. :-)</FONT></P>
<P><FONT face=Tahoma>So, thoughts? I am definitely interested in feedback here for the next update of the input method....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> <FONT face=Code2001 size=8><STRONG>êÄÅ</STRONG></FONT> <EM>(<A href="http://www.fileformat.info/info/unicode/char/10001">U+10001</A>, a.k.a. </EM></FONT><EM><FONT face=Tahoma color=#ff1493>LINEAR B SYLLABLE B038 E)</FONT></EM></P>
<hr/><p><a id="675118" href="#675118">#</a> <strong>Tom Gewecke</strong> on 22 Jul 2006 4:57 PM:</p><div style="margin-left: 1em">How about using the prefix 0 (zero) for the BMP?</div>
<p><a id="675127" href="#675127">#</a> <strong>Michael S. Kaplan</strong> on 22 Jul 2006 5:06 PM:</p><div style="margin-left: 1em"><EM><STRONG>&nbsp;&nbsp;&nbsp; How about using the prefix 0 (zero) for the BMP? </STRONG></EM><BR><BR><BR>That is an interesting possibilty, Tom. <BR><BR>Though I would hate to lose the ability to type four things for the BMP code points (plus if it ever does support plane 15 there are many 0f### chars there -- leading to a whole bunch of confusion for all of the 0fXX chars in the BMP).</div>
<p><a id="677203" href="#677203">#</a> <strong>Michael S. Kaplan</strong> on 24 Jul 2006 6:03 PM:</p><div style="margin-left: 1em">Any other thoughts? C'mon pepple, this is *your* beta!</div>
<p><a id="677868" href="#677868">#</a> <strong>Tom Gewecke</strong> on 25 Jul 2006 9:35 AM:</p><div style="margin-left: 1em">Is there any way &nbsp;to make the IM require a return or a space or other character to mark the end the number sequence, so nothing would happen until the user &nbsp;typed that?</div>
<p><a id="677869" href="#677869">#</a> <strong>Michael S. Kaplan</strong> on 25 Jul 2006 9:38 AM:</p><div style="margin-left: 1em">That is how it was originally working, but I wanted to make it like the original Unicode IME where that was not required. <BR><BR>Which is not to say I am completely wed to that idea -- do you think it would be better to require the commit step to insert the character?</div>
<p><a id="677894" href="#677894">#</a> <strong>Tom Gewecke</strong> on 25 Jul 2006 10:32 AM:</p><div style="margin-left: 1em">Yes, I think that a commit step would be fine. &nbsp; In OS X, which has a similar IM, you have to input both surrogates to go beyond the BMP, which is &nbsp;of course terrible.</div>
<p><a id="7186856" href="#7186856">#</a> <strong>John Cowan</strong> on 21 Jan 2008 1:52 PM:</p><div style="margin-left: 1em"><p>The Unicode property that U+FFFF has and U+0620 does not is, of course, Noncharacter_Code_Point in file <a rel="nofollow" target="_new" href="http://www.unicode.org/Public/UNIDATA/PropList.txt">http://www.unicode.org/Public/UNIDATA/PropList.txt</a> . &nbsp;This list should be stable.</p></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/06/21 <a href="http://archives.miloush.net/michkap/archive/2008/06/21/8632391.html">Back to Sri Lanka (conceptually)</a></p><p>2008/01/21 <a href="http://archives.miloush.net/michkap/archive/2008/01/21/7178421.html">Behold the Table Driven Text Service, Part 0 (You have to start somewhere!)</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/07/23/675957.html" title="Garden Path Menus">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/07/22/674270.html" title="We&#39;re off on the road to Korea! We certainly do get around...">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-07-22">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/07/22/675085.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>