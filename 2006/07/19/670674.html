<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/07/19/670674.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Your data will be released, unharmed</title></head><body>
<h1>Your data will be released, unharmed</h1>
<p><em>by Michael S. Kaplan, published on 2006/07/19 03:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/07/19/670674.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>In response to the recent post <STRONG><A href="http://archives.miloush.net/michkap/archive/2006/07/17/667809.html">Appreciation, embarrassment, and redirecting thanks</A></STRONG>, that MVP Omi I mentioned in relation to Bengali sent me an email: </FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face=Arial>Are you going to change the rendering engine somehow? I mean if I press ড় it will become ড + ় = ড় ? Please don't do it. ড় is a independent consonant and nothing should apply on it.<BR><BR>Please read a controversy from: </FONT><A href="http://bugzilla.wikimedia.org/show_bug.cgi?id=5948"><FONT face=Arial>http://bugzilla.wikimedia.org/show_bug.cgi?id=5948</FONT></A></P></BLOCKQUOTE></BLOCKQUOTE>
<P><FONT face=Tahoma>This is not what I said (or what I meant) when I said: </FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face=Verdana>I also think I added a few of those canonical equivalences into the table&nbsp;(like ড় == ড়, a.k.a.&nbsp;</FONT><A href="http://www.fileformat.info/info/unicode/char/09dc"><FONT face=Verdana>U+09dc</FONT></A><FONT face=Verdana> == </FONT><A href="http://www.fileformat.info/info/unicode/char/09a1"><FONT face=Verdana>U+09a1</FONT></A><FONT face=Verdana> </FONT><A href="http://www.fileformat.info/info/unicode/char/09bc"><FONT face=Verdana>U+09bc</FONT></A><FONT face=Verdana>).</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>What I was talking about was making sure that when comparisons are made that involved sequences like the one above that have a canonical equivalance to (and which happen to be visually indistinguishable from) another string that they will be treated as if they were equal. </FONT></P>
<P><FONT face=Tahoma>But no part&nbsp;of that comparison operation done with the Bengali locale or culture, whether done with <A href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/resources/strings/stringreference/stringfunctions/comparestringex.asp">CompareStringEx</A>, <A href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/resources/strings/stringreference/stringfunctions/comparestring.asp">CompareString</A>, <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcompareinfoclasscomparetopic.asp">CompareInfo.Compare</A>, or any of the functions/methods that call them, will do anything to the string to modify what is put in the backing store. </FONT></P>
<P><FONT face=Tahoma>Now with that said, the simple fact is that <A href="http://www.fileformat.info/info/unicode/char/09dc"><FONT face=Verdana>U+09dc</FONT></A><FONT face=Verdana>&nbsp;is canonically equivalent to&nbsp;</FONT><A href="http://www.fileformat.info/info/unicode/char/09a1"><FONT face=Verdana>U+09a1</FONT></A><FONT face=Verdana> </FONT><A href="http://www.fileformat.info/info/unicode/char/09bc"><FONT face=Verdana>U+09bc</FONT></A>. And because of that,&nbsp;it is quite possible&nbsp;(throughout the entire world wide web and across all the many software products out there) to run across those who follow the principle of normalizing strings to some consistent form, and doing so consistently. </FONT></P>
<P><FONT face=Tahoma>Hell, there are a few people who believe so strongly in normalizing early and often that they make religious fundamentalist extremists seem mild and dull. </FONT></P>
<P><FONT face=Tahoma>Even Microsoft, in cases of working within standards like IDN and XML and others, may be normalizing a string or two. </FONT></P>
<P><FONT face=Tahoma>And while this can make a native speaker of a language unhappy (as it clearly has in this case), it is important to not place too much stock on this issue as a problem,&nbsp;because it is really not.</FONT></P>
<P><FONT face=Tahoma>The issue is similar to one I often bring up related to canonical equivalence, with <A href="http://www.fileformat.info/info/unicode/char/00e5">U+00e5</A> (<STRONG>å</STRONG>)&nbsp;being canonically equivalent to <A href="http://www.fileformat.info/info/unicode/char/0061">U+0061</A> <A href="http://www.fileformat.info/info/unicode/char/030a">U+030a</A> (<STRONG>å</STRONG>). This too is an equivalence that is&nbsp;annoying for a native speaker of a language that considers <A href="http://www.fileformat.info/info/unicode/char/00e5">U+00e5</A> to be a helluva lot more than the letter <STRONG>a</STRONG> with some shmutz on top of it -- <A href="http://www.fileformat.info/info/unicode/char/00e5">U+00e5</A>&nbsp;is a unique letter on its own that deserves more than to be assaulted with a deadly function, right?</FONT></P>
<P><FONT face=Tahoma>But it is not about all that.</FONT></P>
<P><FONT face=Tahoma>In the end,&nbsp;<STRONG>å</STRONG> can often look like <STRONG>å</STRONG>, and <STRONG><FONT size=4>ড়</FONT></STRONG> can often look like <STRONG><FONT size=4>ড়</FONT></STRONG>. Normalization does not destroy language through the equivalance, and neither does collation. Both technologies are simply working to make sure that no matter what is the preferred normalization form in which data is created that they will be treated as being the same. Since they can look the same, this is&nbsp;neither insult nor injury to the language; in fact, it frees one up to not be concerned about them not being treated as equal even if a normalizing process happens to do something to the string....</FONT></P>
<P><FONT face=Tahoma>It is not a bug, and it is not something to worry about. In any language....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM>&nbsp;<FONT size=6><STRONG>ড়</STRONG></FONT> <EM>(<A href="http://www.fileformat.info/info/unicode/char/09dc">U+09dc</A>, a.k.a. BENGALI LETTER RRA)</EM></FONT></P>
<hr/><p><a id="670836" href="#670836">#</a> <strong>legolas</strong> on 19 Jul 2006 6:30 AM:</p><div style="margin-left: 1em">Ok, I don't get it (and I'd like to, since the SW I'm working on at work currently has problems with canonical-decomposed comparisons).<br><br>MVP Omi complains that there is a difference between U+09dc and U+09a1 U+09bc, but Unicode says they are the same? They sure look the same to me... So what is the difference, and why would a user care how that character is represented in the internal unicode representation? (How would that be different for them from any other internal representation, say whatever non-unicode encoding would exist for Bengali, like Shift-Jis exists for Japanese).</div>
<p><a id="671546" href="#671546">#</a> <strong>Michael S. Kaplan</strong> on 19 Jul 2006 12:23 PM:</p><div style="margin-left: 1em">Hi legolas, <br><br>Think about the example of &#229; -- if you speak a language that considers that to NOT be any kind of 'a' or sort like any kind of 'a' or be ever treated like any kind of 'a', then you are quite naturally unhappy with anyone who claims that it is equivalent to anything that is 'a' combined with anything else. <br><br>It is easy to see how someone can take such a claim as insulting to a language that has been around much longer than Unicode, or even computers.....</div>
<p><a id="671934" href="#671934">#</a> <strong>legolas</strong> on 19 Jul 2006 6:48 PM:</p><div style="margin-left: 1em">Aha, I see, funny though that anyone would be sensitive to the way a computer represents a language internally. Oh well, thanks for enlightning me ;-)</div>
<p><a id="672060" href="#672060">#</a> <strong>Dean Harding</strong> on 19 Jul 2006 9:18 PM:</p><div style="margin-left: 1em">Heh, clearly you don't subscribe to the Unicode mailing list :p</div>
<p><a id="672105" href="#672105">#</a> <strong>SDiZ</strong> on 19 Jul 2006 10:24 PM:</p><div style="margin-left: 1em">I believe Unicode Specification is wrong. I means, not properly designed.<br><br>What does unicode codes? Does it code glyphs, or does it code characters?<br>The old draft tell me it's coding the characters, that's why we have all those Han-Unification stuff...<br><br>But later, they introduce the surrogate &quot;pairs&quot; (oh, well.. they are not pairs, but also triples, quads and ..... ) as if they are coding the glyph. Of course they realize this would generate duplications.... so they introduce normalizations.. <br>Suddently, all unicode-complaint programs have to ship a large table just to compare if two string is equal.<br><br>And then, they introduce the language tagging....<br><br>I must say unicode specification was wrong since version 1.0 when they introduce the UCS2 stuffs, limiting the total number of &nbsp;caharacter in the world. <br><br>The pairs and extensions are not the soluation, but an ugly hack. I believe you know this better then I.<br><br>As a CJK user, I have to support unicode anyway. It's much easier to file a bug report saying &quot;your program does not support unicode&quot; then filing hundreds of bug reports on each of the encoding exists in the world.</div>
<p><a id="672108" href="#672108">#</a> <strong>SDiZ</strong> on 19 Jul 2006 10:29 PM:</p><div style="margin-left: 1em">&gt; &nbsp;have a canonical equivalance to (and which happen to be visually indistinguishable from) another string that they will be treated as if they were equal.<br><br>I have to say..<br>character X visually indistinguishable from character Y in typographical &nbsp;variance A, does not means they are visually indistinguishable in variance B....<br><br>with Vitnam Han glyphs including to unicode, I can see some potential problem on &quot;CJKV&quot; Han unification....</div>
<p><a id="672551" href="#672551">#</a> <strong>legolas</strong> on 20 Jul 2006 7:00 AM:</p><div style="margin-left: 1em">Ok, so re-reading all this, and the original wikipedia bug (which I hadn't read before, sorry ;-), I understand this: the unicode decomposition for these characters, when rendered, does not quite produce the glyph the composed character produces, in some fonts (on the wikipedia bug, I see the difference, here I don't), although the difference certainly looks small.<br><br>So what Omi is arguing for on wikipedia really amounts to a 'bug' in the unicode spec? I know what these decompositions are, and I certainly see the theoretical desire to use a canonical form (which may even practically allow to use memcmp to see if something is exactly equivalent?). I'm not completely sure why these decompositions exist (I would think for drawing a char when the font does not have such a char), and I do not understand why the decomposed form would be canonical over the composed form.<br><br>Sorry if this is turning into a unicode 101, if it is, let me know or maybe consider it for a future post!</div>
<p><a id="672742" href="#672742">#</a> <strong>Michael S. Kaplan</strong> on 20 Jul 2006 10:38 AM:</p><div style="margin-left: 1em">Actually, the claim is non-specific as to which is &quot;preferred&quot; -- some platforms, like Microsoft, usually prefer normalization form C (composed) and others, like Apple, usually prefer normalization form D. <br><br>Omi is not arguing this based on the appearance as much as he is on the linguistic preference for the single composed code point that he feels should not be deconstructed. In that view, the fact that they do not always look the same is verification that they are right, not proof....</div>
<p><a id="773354" href="#773354">#</a> <strong>Rifat</strong> on 27 Sep 2006 3:05 AM:</p><div style="margin-left: 1em">He (Omi) always does this kind of work without understanding the real issue...</div>
<p><a id="776595" href="#776595">#</a> <strong>Omi</strong> on 29 Sep 2006 2:16 AM:</p><div style="margin-left: 1em">Well if U+09dc and U+09a1+U+09bc are same, then why I cannot find U+09a1+U+09bc if I search for U+09dc?<br><br>I agree that I know nothing about normalization, but as a end user, don't you think this is a simple question can be asked?</div>
<p><a id="776597" href="#776597">#</a> <strong>Michael S. Kaplan</strong> on 29 Sep 2006 2:22 AM:</p><div style="margin-left: 1em">Actually, in Vista you can. Which is the whole point. :-)</div>
<p><a id="778055" href="#778055">#</a> <strong>Richard Wordingham</strong> on 30 Sep 2006 7:47 AM:</p><div style="margin-left: 1em">The term 'referred' has an interesting consequence which seems to have been overlooked. &nbsp;In this particular case:<br><br>&lt;U+09a1, U+09bc&gt; is both NFC and NFD.<br><br>&lt;U+09dc&gt; is only normalised in a non-standard normalisation. &nbsp;Therefore it cannot occur in text that has been normalised to a standard normalisation.</div>
<p><a id="778185" href="#778185">#</a> <strong>Michael S. Kaplan</strong> on 30 Sep 2006 10:14 AM:</p><div style="margin-left: 1em">Hi Richard, <br><br>I do not use the term, so I think maybe you meant 'preferred' here? :-) <br><br>But of course not everything and not everyone normalizes, and people will definitely have their preferences. My point is that no matter what you type in, it will work -- both before normalization and even after it, if it happens.....</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2006/09/13 <a href="http://archives.miloush.net/michkap/archive/2006/09/13/752086.html">MSKLC and Vista? MSKLC and 64-bit? Darn, we're 0 for 2....</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/07/20/671835.html" title="Return of the Unicode IME">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/07/18/669795.html" title="A new version of Unicode is released, and it&#39;s all five by five">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-07-19">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/07/19/670674.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>