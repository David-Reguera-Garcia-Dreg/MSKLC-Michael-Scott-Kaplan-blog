<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/07/10/661427.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>The PUA isn't complex enough</title></head><body>
<h1>The PUA isn't complex enough</h1>
<p><em>by Michael S. Kaplan, published on 2006/07/10 10:52 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/07/10/661427.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma><A href="http://www.gameset.com/">Bob Richmond</A> asks in the Suggestion Box: </FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman" size=2>UniScribe, Opentype, Unicode versions, and the PUA <BR><BR>As I understand it, Uniscribe divides text into runs and applies OpenType features on a script specific basis. If the script is unknown (for instance when characters belong to a new or upcoming version of Unicode not yet coded in Uniscribe, or belongs to a PUA), the features may not be applied. For example, if a font defines a ligature on E000 and E001 in BMP/PUA, this is ignored in Word 2003 etc. etc. By contrast, Adobe CS2 applies the ligature anyway, presumably on the principle that this is the intended behaviour of the font. <BR><BR>The naturally makes me ask the questions: Why doesn't UniScribe just apply the features on an unknown string? How can the user of an application such as Word make sense of this behavior? If I want to write Coptic (not in the Word language list yet), what behaviour should I expect? Are Vista/Office 2007 any different in these areas? <BR><BR>As far as I can tell, not a subject documented very well online so an interesting topic to address. <BR><BR>For me this is not just a curiousity. I'm working on implementation issues for Ancient Egyptian (c.f. UTC Nov 2005) so have 1000+ characters whose OpenType features are ignored by most non-Adobe apps in Windows! </FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>Bob is making some very good points here. I mean, it is clear if you look at <STRONG><A href="http://archives.miloush.net/michkap/archive/2006/05/31/612544.html">this post</A></STRONG> and <STRONG><A href="http://archives.miloush.net/michkap/archive/2005/09/26/473738.html">this one</A></STRONG> that there is a mild anti-PUA bias, even ignoring the issues that Bon raises.</FONT></P>
<P><FONT face=Tahoma>But in the case of Uniscribe the issue is not quite as <EM>intentional</EM> as in the NLS case, and I am perhaps naive to believe that intent should actually be given some weight in deciding how bad someone or something is. :-)</FONT></P>
<P><FONT face=Tahoma>I'll start by quoting a bit from Robert A. Heinlein's Stranger in a Strange Land, to act as something of a hint as to the issue here:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face=Garamond>IN THE VOLANT LAND OF LAPUTA, according to the journal of Lemuel Gulliver recounting his Travels into Several Remote Nations of the World, no person of importance ever listened or spoke without the help of a servant, known as a "climenole" in Laputian – or "flapper" in rough English translation, as such a Servant's only duty was to flap the mouth and ears of his master with a dried bladder whenever, in the opinion of the servant, it was desirable for his master to speak or listen.<BR>&nbsp;&nbsp;&nbsp;Without the consent of his flapper it was impossible to gain the attention of any Laputian of the master class.</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>For some more hints on what is going on, you can look at <STRONG><A href="http://archives.miloush.net/michkap/archive/2006/05/31/611340.html">Did he say shaping? It's not in the script!</A></STRONG>.</FONT></P>
<P><FONT face=Tahoma>The central issue in that post is the fact that in some code paths the Latin script is being treated as complex, and in some others it is not.</FONT></P>
<P><FONT face=Tahoma>The central issue in the case of the Private Use Area, on the other hand, is that it is not being treated as complex in any code path. The Uniscribe's "flapper" is not considering it text that Uniscribe needs to see.</FONT></P>
<P><FONT face=Tahoma>In the end, the&nbsp;result of text being considered a&nbsp;"comprex script" on Windows is that Uniscribe will be used to render it, even when Uniscribe is not called directly.</FONT></P>
<P><FONT face=Tahoma>Which means that if you have a program that calls Uniscribe directly, you can get what you want here (in fact, if you use the <A href="http://archives.miloush.net/michkap/archive/2006/06/16/634291.html"><STRONG>new OpenType-feature friendly functions</STRONG></A>, you can get the various optional OpenType features that Bob was thinkiing about supported!).</FONT></P>
<P><FONT face=Tahoma>But as it is currently conceived, lots of "non-complex" text is not going to be going through Uniscribe....</FONT></P>
<P><FONT face=Tahoma>This is a complex issue to address due to the complex nature of the relationship between GDI and Uniscribe:</FONT></P>
<P><FONT face=Tahoma>1) Through LPK.DLL&nbsp;and similar&nbsp;Uniscribe 'flappers'&nbsp;(method described in part <STRONG><A href="http://archives.miloush.net/michkap/archive/2006/02/07/526359.html">here</A></STRONG>), the decision that the flapper makes about calling Uniscribe when someone calls GDI is made (thus sometimes GDI calls Uniscribe).</FONT></P>
<P><FONT face=Tahoma>2) Uniscribe itself farms out the actual rendering job of the text it has processed back to GDI (thus sometimes Uniscribe calls GDI).</FONT></P>
<P><FONT face=Tahoma>But the flapper is really there for a reason -- because&nbsp;</FONT><FONT face=Tahoma>even if a decision were made to treat all rendering as complex, there would be some pretty global performance and backcompat issues. </FONT></P>
<P><FONT face=Tahoma>Which is not say the problem is unsolvable; I'm just saying it is not trivial. And the decision to make the Uniscribe flappers a bit more open is one&nbsp;that is often debated, rather heavily.</FONT></P>
<P><FONT face=Tahoma>In Vista, many more scripts are considered "complex" so there is effort to improve this situation. And it can only keep getting better over time....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> </FONT><FONT color=#ff1493 size=6><STRONG></STRONG></FONT><FONT face=Tahoma color=#ff1493> <EM>(<A href="http://www.fileformat.info/info/unicode/char/e234">U+e234</A>, a.k.a. a Private Use Character)</EM></FONT></P>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/07/11/661966.html" title="Printing TrueType as graphics">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/07/09/660704.html" title="It&#39;s gonna be Lincicome vs. Inkster">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-07-10">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/07/10/661427.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>