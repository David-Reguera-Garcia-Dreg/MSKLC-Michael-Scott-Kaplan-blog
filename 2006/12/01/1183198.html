<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/12/01/1183198.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>What's in a name? (once more)</title></head><body>
<h1>What's in a name? (once more)</h1>
<p><em>by Michael S. Kaplan, published on 2006/12/01 04:08 -08:00, original URI: http://blogs.msdn.com/michkap/archive/2006/12/01/1183198.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostOld -->
<p>Not all of Microsoft's customers who&nbsp;are involved with software&nbsp;development understand about localizability.</p> <p>This is something for which they should be held blameless, since not all of Microsoft's employees who&nbsp;are involved with software&nbsp;development understand about localizability. :-)</p> <p>I was reminded of both of these things the other day when the following customer question happened to pass my field of vision:</p> <blockquote> <p>I would appreciate if you could get us local names of the "NT AUTHORITY\System" account for all different language Windows Oss. The following article lists some of them but the list probably is not full.<br><br>We just need the entire list. We use an API to get the localized name but would like to have a work around if the API call fails.<br><br>Thank you very much,<br>Vladimir<br><br><a href="http://msdn2.microsoft.com/en-us/library/ms143504.aspx">Setting Up Windows Service Accounts</a></p></blockquote> <p>Ok, so obviously one can point to blog posts like <a href="http://archives.miloush.net/michkap/archive/2005/12/27/507404.html"><strong>Administrator vs. Administrateur, et. al.</strong></a> and such, and one can talk about using well-known SIDs and the LookupaccountSID function and so forth.</p> <p>In fact this is what some people did.</p> <p>But&nbsp;clearly we are fighting an uphill battle when topics in SQL Server 2005 Books Online provide tables like this one:</p> <table style="background-color: #cccccc" width="100%" border="1"> <tbody> <tr> <th>Language </th> <th>Name for Local Service </th> <th>Name for Network Service </th> <th>Name for Local System </th> <th>Name for Admin Group </th></tr> <tr> <td> <p>English</p> <p>Simplified Chinese</p> <p>Traditional Chinese</p> <p>Korean</p> <p>Japanese</p></td> <td> <p>NT AUTHORITY\LOCAL SERVICE</p></td> <td> <p>NT AUTHORITY\NETWORK SERVICE</p></td> <td> <p>NT AUTHORITY\SYSTEM</p></td> <td> <p>BUILTIN\Administrators</p></td></tr> <tr> <td> <p>German</p></td> <td> <p>NT-AUTORITÄT\LOKALER DIENST</p></td> <td> <p>NT-AUTORITÄT\NETZWERKDIENST</p></td> <td> <p>NT-AUTORITÄT\SYSTEM</p></td> <td> <p>VORDEFINIERT\Administratoren</p></td></tr> <tr> <td> <p>French</p></td> <td> <p>AUTORITE NT\SERVICE LOCAL</p></td> <td> <p>AUTORITE NT\SERVICE RÉSEAU</p></td> <td> <p>AUTORITE NT\SYSTEM</p></td> <td> <p>BUILTIN\Administrateurs</p></td></tr> <tr> <td> <p>Italian</p></td> <td> <p>NT AUTHORITY\SERVIZIO LOCALE</p></td> <td> <p>NT AUTHORITY\SERVIZIO DI RETE</p></td> <td> <p>NT AUTHORITY\SYSTEM</p></td> <td> <p>BUILTIN\Administrators</p></td></tr> <tr> <td> <p>Spanish</p></td> <td> <p>NT AUTHORITY\SERVICIO LOC</p></td> <td> <p>NT AUTHORITY\SERVICIO DE RED</p></td> <td> <p>NT AUTHORITY\SYSTEM</p></td> <td> <p>BUILTIN\Administradores</p></td></tr> <tr> <td> <p>Russian</p></td> <td> <p>NT AUTHORITY\LOCAL SERVICE</p></td> <td> <p>NT AUTHORITY\NETWORK SERVICE</p></td> <td> <p>NT AUTHORITY\SYSTEM</p></td> <td> <p>BUILTIN\Администраторы</p></td></tr></tbody></table> <p>Now this is not evil in and of itself, but it really describes nothing of what is underneath these names.</p> <p>And most importantly, it says nothing of the all-important issue regarding the fact that these account names can be changed, and often are changed for security reasons.</p> <p>In the end, any dependence on a list like this is a recipe for trouble. And including it in the form that they did is just a bad idea. </p> <p>The argument for wanting the list is that they want it in case the Win32 API function fails. But how far is using an account name going to get a person if the Win32 API security related functions are failing?</p> <p>The solution is described in KB 157234 (<a href="http://support.microsoft.com/kb/157234">How to deal with localized and renamed user and group names</a>), with a title that underscores the importance of the issue (though personally I would have put the word "localized" second since some people might skip it without reading the whole title if they figure it does not apply to them!).</p> <p>But the answer to the question in the title (<strong>What's in a name?</strong>) is really both everything and nothing....</p> <p>SQL Server Books Online needs to do better with this sort of thing. I think it is great when PSS picks up the slack and covers an issue well, because it is their job to do that when product groups screw up. But in an ideal world, we don't make them work as hard as we tend ro do, if you know what I mean. :-)</p> <p>&nbsp;</p> <p><font color="#ff0080"><em>This post brought to you by</em>&nbsp;А <em>(<a href="http://www.fileformat.info/info/unicode/char/0410">U+0410</a>, CYRILLIC CAPITAL LETTER A)</em></font></p>
<hr/><p><a id="1183235" href="#1183235">#</a> <strong>Pavanaja U B</strong> on Friday, December 01, 2006 7:29 AM:</p><div style="margin-left: 1em"><P>&gt;not all of Microsoft's employees who are involved with software development understand about localizability</P>
<P>Agreed. In fact, the statement should be "not all of Microsoft's employees who are involved with software development understand <STRONG>the importance</STRONG> of localizability". A case in point is the set of new technologies that comprise .NET 3.0. I am talking about WPF, which as of now does not support complex script rendering. The new flagship graphics suite Expression from Microsoft is based on WPF. Naturally that also does not support Indic (complex script). I wish I were wrong here.</P>
<P>-Pavanaja</P></div>
<p><a id="1183262" href="#1183262">#</a> <strong>Michael S. Kaplan</strong> on Friday, December 01, 2006 7:36 AM:</p><div style="margin-left: 1em"><p>Actually, I believe you are mistaken on that point. Avalon (WPF) supports complex scripts and even complex OpenType features more fully than anything else in managed or unmanaged code that is currently available.....</p></div>
<p><a id="1185483" href="#1185483">#</a> <strong>Markus Freericks</strong> on Friday, December 01, 2006 12:23 PM:</p><div style="margin-left: 1em"><p>I still don't understand why it is necessary to translate such internal account names at all. To me (as a german-speaking user), the name &quot;NT-AUTORIT&#196;T&quot; is in no way &quot;better&quot; or &quot;easier to understand&quot; than &quot;NT AUTHORITY&quot; -- it doesn't _mean_ anything; it is just a piece of techno-gibberish.</p></div>
<p><a id="1186102" href="#1186102">#</a> <strong>Peter</strong> on Friday, December 01, 2006 1:47 PM:</p><div style="margin-left: 1em"><p>IMHO, you're dead wrong. &nbsp;One common reason for a simple table is so that us poor devs can actually have a fighting chance to figure out what's different between different systems. &nbsp;This table (combined with some hint as to how the table was generated) goes a long way to making our software actually work.</p></div>
<p><a id="1186986" href="#1186986">#</a> <strong>Michael S. Kaplan</strong> on Friday, December 01, 2006 5:05 PM:</p><div style="margin-left: 1em"><p>Since the table:</p>
<p>1) provided no such hints</p>
<p>2) did not even mention the rename issue</p>
<p>3) did not hint that there were more</p>
<p>I disagree with the premise of the argument you are making, Peter.</p>
<p>A fuller example with a code sample that explained ALL the issues, I would support. What they provide now is incomplete, unhelpful, and misleading...</p></div>
<p><a id="1192272" href="#1192272">#</a> <strong>Luke</strong> on Saturday, December 02, 2006 2:57 AM:</p><div style="margin-left: 1em"><p>This post has me thinking about some code I have written that calls CreateService. Most of the services I create end up with an NT AUTHORITY\Network Service start identity. I have been passing the string NT AUTHORITY\Network Service based on documentation available at: </p>
<p><a rel="nofollow" target="_new" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/createservice.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/createservice.asp</a></p>
<p>and</p>
<p><a rel="nofollow" target="_new" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/networkservice_account.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/networkservice_account.asp</a></p>
<p>Which seems to indicate that NT AUTHORITY\Network Service is not ever localized. My question is - should I be using a SID (S-1-5-20</p>
<p>) instead?</p></div>
<p><a id="1192471" href="#1192471">#</a> <strong>Dean Harding</strong> on Saturday, December 02, 2006 3:47 AM:</p><div style="margin-left: 1em"><p>According to MSDN (<a rel="nofollow" target="_new" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/localservice_account.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/localservice_account.asp</a>):</p>
<p>&quot;The name of the account in all locales is NT AUTHORITY\LOCALSERVICE&quot;</p>
<p>It says the same thing about Network Service as well (here: <a rel="nofollow" target="_new" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/networkservice_account.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/networkservice_account.asp</a>)</p>
<p>And again about LocalSystem (here: <a rel="nofollow" target="_new" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/localsystem_account.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/localsystem_account.asp</a>)</p>
<p>So who is right?</p></div>
<p><a id="1192531" href="#1192531">#</a> <strong>Michael S. Kaplan</strong> on Saturday, December 02, 2006 4:11 AM:</p><div style="margin-left: 1em"><p>Well, &quot;NT AUTHORITY&quot; is often localized , even if account names are not. So it seems like it would make sense to always use the SIDs....</p></div>
<p><a id="1194465" href="#1194465">#</a> <strong>Michael S. Kaplan</strong> on Saturday, December 02, 2006 3:34 PM:</p><div style="margin-left: 1em"><p>I may agree with Markus that &quot;NT-AUTORIT&#196;T&quot; is no better or worse than &quot;NT AUTHORITY&quot; but that presumes that everyone is comfortable with English here. To which I guess I'd raise two objections:</p>
<p>1) Not everyone wants to see English -- some look at it is an American company that is insensitive to their language;</p>
<p>2) Not everyone even understands English;</p>
<p>The common phrase people like to use is about &quot;the next million users&quot; and the most obvious source of that pool of people who would either buy Windows or buy something else may have as their only blocking factor the fact that they really don't know English at all.</p>
<p>So although I agree with the sentiment that Markus raised and that both &quot;NT-AUTORIT&#196;T&quot; and &quot;NT AUTHORITY&quot; both look like arbitrary symbols that have no real meaning, thus translatation takes meaningless and turns it into translated meaningless, I can't ignore that translated meaningless acutally DOES mean something to some people -- it means the effort is being made.</p>
<p>Which to some people means everything. :-)</p></div>
<p><a id="1196636" href="#1196636">#</a> <strong>Dean Harding</strong> on Saturday, December 02, 2006 8:50 PM:</p><div style="margin-left: 1em"><p>&gt; So it seems like it would make sense to always use the SIDs</p>
<p>Can you confirm whether that's actually true, though? Because the CreateService documentation is pretty clear that you can use hard-coded strings, which is what I've been doing. If it is true, then perhaps we to amend the documentation?</p></div>
<p><a id="1197885" href="#1197885">#</a> <strong>Michael S. Kaplan</strong> on Sunday, December 03, 2006 12:49 AM:</p><div style="margin-left: 1em"><P>Well, the Books Online article is telling the truth about the fact that some of these service names are localized, and you cannot use MUI to test out whether this is the case, since they are not localized in the MUI version when it is installed atop English as <A class="" href="http://archives.miloush.net/michkap/archive/2005/12/27/507404.html"><STRONG>this post</STRONG></A> indicates.</P>
<P>But perhaps in the localized versions where this is an issue either (1) the code is smart enough to accept both names, or (2) the localized names are just for display within the UI but would never be used in code, or (3) the CreateService et. al. docs are wrong.</P>
<P>And then mix with this the fact that (4) in Vista every version of Windows is in its on way an MUI version which may change the lay of the land here entirely....</P>
<P>Then, consider the fact that (5) the results may be different across different versions.</P>
<P>Finally, (6) the rename issue masy still be an issue here.</P>
<P>Given all of these issues, it seems until the whole issue is clarified that one should either:</P>
<P>a) be willing to test all of these scenarios in localized versions of NT4, Win2000, Winxp, and Vista, or</P>
<P>b) one should use the SIDs for self-defensive purposes.</P>
<P>But I agree that the docs are very unclear about this issue and should be clarified to avoid the confusion. I will stand by my advice as the guaranteed way to avoid problems in light of unclear documentation, but I much prefer to push things as pure best practices rather than scare tactics/fear of the unknown....</P></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/06/11 <a href="http://archives.miloush.net/michkap/archive/2008/06/11/8590956.html">You almost want a cease-and-desist order put out about the docs</a></p><p>2008/05/06 <a href="http://archives.miloush.net/michkap/archive/2008/05/06/8461897.html">By some accounts, the names can be changed</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/12/02/1192456.html" title="A lot of alliteration about terrific times trying to type Tifinagh">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/12/01/1181859.html" title="Curious Georg[ian] gets a LIP">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-12">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-12-01">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/12/01/1183198.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>