<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/11/08/1032747.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>What the hell is MFCENU.DLL?</title></head><body>
<h1>What the hell is MFCENU.DLL?</h1>
<p><em>by Michael S. Kaplan, published on 2006/11/08 04:23 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/11/08/1032747.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<FONT face=Tahoma size=3>
<P>Now we saw the other day in <A class="" href="http://archives.miloush.net/michkap/default.aspx" mce_href="../../../../default.aspx"><STRONG>MFC + Spanish version of Windows = Oops!</STRONG></A> one of the costs of MFC's localized DLL model that depends on the <A class="" href="http://msdn.microsoft.com/library/en-us/intl/nls_34rz.asp" mce_href="http://msdn.microsoft.com/library/en-us/intl/nls_34rz.asp">GetLocaleInfo</A> LOCALE_SABBREVLANGNAME for the name of the satellite DLL to use, a problem that adds a very interesting dependency on LOCALE_SABBREVLANGNAME that means we could probably not ever change one of those values, even to fix a bug that someone really wanted us to (such as some&nbsp;might prefer, as I pointed out in <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/09/27/773341.html" mce_href="http://archives.miloush.net/michkap/archive/2006/09/27/773341.html">LOCALE_SABBREVLANGNAME is more than just an ISO-639 code</A></STRONG>).</P>
<P>The other day someone stumbled on another example of a problem in the model....</P>
<P>The question from Jason went something like this:</P>
<BLOCKQUOTE><FONT face="Times New Roman,Times" size=2>
<P>When my customer is loading their MFC application, they notice that it looks for MFCENU.DLL.&nbsp; Is this a resource DLL for English resources?&nbsp; Is there any documentation on this DLL?<BR><BR>They are using Visual Studio .NET 2003.&nbsp; Their customer is using an English (Canada) locale.&nbsp; What they noticed was that MFCENU.DLL was attempted to be loaded every time their process started.&nbsp; When it was not found, the application worked fine anyway.&nbsp; The problem was that they had slow UNC paths in their PATH environment variable.&nbsp; The customer is asking what MFCENU.DLL is and what the effect of having it (or not having it) is going to have on the application.&nbsp; Our guess is that it is some type of resource DLL for localization and that if it is not present, you default to English (US)?<BR><BR>I’m just looking for confirmation on this what the DLL is and why MFC looks for it every time the application runs.&nbsp; Thanks!</P></FONT></BLOCKQUOTE>
<P>Fellow Technical Lead Dave Bartolomeo had the answer here:</P>
<BLOCKQUOTE><FONT face="Times New Roman,Times" size=2>
<P>You’ve guessed correctly.&nbsp; IIRC, MFC creates a list of languages to search for based on the current UI language.&nbsp; In your case, it probably looks for Canadian English (MFCENC.dll), followed by US English (MFCENU.dll), and if neither of those works, it settles for whatever is built into the MFC DLL itself (which is US English).&nbsp; Since MFC isn’t localized into Canadian English, there is no MFCENC.dll, and since the US English resources are already baked into the MFC DLL itself, MFC doesn’t ship an MFCENU. So, the fact that MFCENU.dll is missing is expected, and shouldn’t impact the behavior of the application (other than the cost of looking for it and not finding it).</P></FONT></BLOCKQUOTE>
<P mce_keep="true">Now of course there is the problem Jason's customer was hitting with the network path being polled for a DLL that is never expected to be there, but beyond that I think it probably a bad thing that MFC decided to agree with me in its heart of hearts with my <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/10/06/796078.html" mce_href="http://archives.miloush.net/michkap/archive/2006/10/06/796078.html">Random irreverent thoughts about the Ultimate Fallback</A></STRONG>, yet did not bother to build in the smarts to make it easy to avoid looking for DLLs that are not expected. And I mean a way that does not involve compiling one's own copy of MFC to do the work, of course. :-)</P>
<P mce_keep="true"><EM>(By the way, the MUI development manager disagrees with my ultimate fallback opinions due to the serviceability problems it can cause, though given all of the effort that MUI goes to in order to avoid perf. issues with random path polling by not using the path to find resource DLLs, he might agree with me that the MFC model may not be doing the best thing there!)</EM></P>
<P mce_keep="true">I'll see if I can talk soon about the efforts we went to in custom cultures to avoid&nbsp;the&nbsp;same type of&nbsp;problem, and maybe even talk more about the solutions that MUI developed for the resource loader in Vista....</P>
<P mce_keep="true">&nbsp;</P>
<P mce_keep="true"><FONT color=#ff00ff><EM>This post brought to you by</EM>&nbsp;<STRONG><FONT size=6>ໜ</FONT></STRONG> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/0edc" mce_href="http://www.fileformat.info/info/unicode/char/0edc">U+0edc</A>, a.k.a. LAO HO NO)</EM></FONT></P></FONT>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/11/08/1037769.html" title="Keeping it simple while working on MSKLC">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/11/07/1013908.html" title="When it comes to duration, the little things can mean a lot">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-11">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-11-08">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/11/08/1032747.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>