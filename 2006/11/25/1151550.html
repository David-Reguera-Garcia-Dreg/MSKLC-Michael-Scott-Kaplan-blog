<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/11/25/1151550.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Punctuation... now, isn't that SPECIAL [weights] ?</title></head><body>
<h1>Punctuation... now, isn't that SPECIAL [weights] ?</h1>
<p><em>by Michael S. Kaplan, published on 2006/11/26 02:31 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/11/25/1151550.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<FONT face="Segoe UI,Tahoma" size=3>
<P>Well, apologies to Dana Carvey and all, but actually, it isn't!</P>
<P>The other day when I talked about <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/11/16/1086283.html" mce_href="http://archives.miloush.net/michkap/archive/2006/11/16/1086283.html">The problem of string comparisons, WORD sorts, and the minus that is treated like the hyphen</A></STRONG>, Oleg was thinking about the documentation for sort keys in LCMspString and maybe even asbout my post <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2004/12/30/344389.html" mce_href="http://archives.miloush.net/michkap/archive/2004/12/30/344389.html">How do sort keys work?</A></STRONG>. And he realized that prior mappings that explained how sort keys worked had a flaw in them. After I pointed out that special weights were actually for some particular differnces in Kana,&nbsp;Oleg <A class="" href="http://archives.miloush.net/michkap/archive/2006/11/16/1086283.html#1141413" mce_href="http://archives.miloush.net/michkap/archive/2006/11/16/1086283.html#1141413">commented</A>:</P>
<BLOCKQUOTE><FONT face="Times New Roman,Times" size=2>
<P>Then example string could be <FONT size=4>SO-DIMMソケット×2</FONT>.<BR><BR>The sort key for this string is:<BR><BR><FONT face="courier new,courier" size=1><STRONG>&nbsp;&nbsp;&nbsp; 0e 91 0e 7c 0e 1a 0e 32 0e 51 0e 51 22 16 22 0d 22 1c 22 1e 08 1c 0c 33 01 01 12 12 12 12 12 12 01 c6 c6 c4 ff 02 c4 c4 c4 c4 ff ff 01 80 0f 06 82 00<BR></STRONG></FONT><BR>In this key "Special weights" piece is:<BR><BR><FONT face="courier new,courier" size=1><STRONG>&nbsp;&nbsp;&nbsp; c6 c6 c4 ff 02 c4 c4 c4 c4 ff ff<BR></STRONG></FONT><BR>and the "punctuation weights" piece is:<BR><BR><FONT face="courier new,courier" size=1><STRONG>&nbsp;&nbsp;&nbsp; 80 0f 06 82<BR></STRONG></FONT><BR>And the LCMapString with the LCMAP_SORTKEY flag stores a sort key in the buffer, as an array of byte values in the following format:<BR><BR><FONT face="courier new,courier" size=1><STRONG>&nbsp;&nbsp;&nbsp; [all Unicode sort weights] 0x01 [all Diacritic weights] 0x01 [all Case weights] 0x01 [all Special weights] 0x01 [Punctuation weights] 0x00<BR></STRONG></FONT><BR>"Punctuation weights" piece is specific for WORD sort and contains information about hyphen/apostrophe characters.<BR><BR>Is this correct description now?</P></FONT></BLOCKQUOTE>
<P>&nbsp;Indeed, Oleg's description is correct here. Because punctuation weights are not special weights. And THIS is how sort keys really work....</P>
<UL>
<LI>UW -- PRIMARY weights --&nbsp;Unicode a.k.a.&nbsp;alphabetic&nbsp;weights, in almost all cases two bytes per sort element</LI>
<LI>DW -- SECONDARY weights&nbsp;-- Usually diacritic weight, but also other second order&nbsp;distinctions</LI>
<LI>CW -- TERTIARY weights -- Usually case weight, but also other third-order distinctions like final forms</LI>
<LI>SW -- QUADERNARY weights -- Specific Kana differences, sometimes internally thought of as "Extra weights" or XW.</LI>
<LI>PW -- QUINTINARY weights -- Specific punctuation differences in WORD sorting</LI></UL>
<P mce_keep="true">I'll try to get onto updating the documentation to give a slightly abbreviated version of this in future updates. :-)</P>
<P mce_keep="true">&nbsp;</P>
<P mce_keep="true"><FONT color=#ff00ff><EM>This post brought to you by</EM>&nbsp;<STRONG><FONT size=6>ソ</FONT></STRONG> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/30bd" mce_href="http://www.fileformat.info/info/unicode/char/30bd">U+30bd</A>, a.k.a. KATAKANA LETTER SO)</EM></FONT></P></FONT>
<hr/><p><strong>test</strong> on 2 Sep 2008 3:03 AM:</p><div style="margin-left: 1em"><p>Some common dependent markers are: after, although, as, as if, because, before, even if, even though, if, in order to, since, though, unless, until, whatever, when, whenever, whether, and while.</p></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/06/10 <a href="http://archives.miloush.net/michkap/archive/2010/06/10/10021417.html">WORD SORT...Why'd it have to be...WORD SORT?</a></p><p>2007/10/30 <a href="http://archives.miloush.net/michkap/archive/2007/10/30/5774614.html">EXPECTED is in the eye of the [non-expecting type of ]expectant</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/11/26/1154440.html" title="Math in Unicode is hard. So let&#39;s have Murray make it easier!">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/11/25/1148516.html" title="Even if they aren&#39;t talking international, at least they aren&#39;t stomping international!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-11">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-11-25">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/11/25/1151550.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>