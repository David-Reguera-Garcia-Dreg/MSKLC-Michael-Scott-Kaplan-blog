<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/11/01/916477.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>If you add enough characters to a sort, intuitive distinction can suffer</title></head><body>
<h1>If you add enough characters to a sort, intuitive distinction can suffer</h1>
<p><em>by Michael S. Kaplan, published on 2006/11/01 03:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/11/01/916477.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<FONT face=Tahoma size=3>
<P>I have decided that I need to channel the spirit of the father of comedian of Emo Phillips&nbsp;and <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2005/11/13/492179.html" mce_href="http://archives.miloush.net/michkap/archive/2005/11/13/492179.html">juxtapose</A></STRONG> a few concepts that have been going on in this blog for the last few years. :-)</P>
<P>First, near the beginning of the blog in November of 2004, I explained the answer I give to people when <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2004/11/30/272207.html" mce_href="http://archives.miloush.net/michkap/archive/2004/11/30/272207.html">They ask me "why is my Korean text in random order?"</A></STRONG>. It boiled down to secondary distinctions being used to tell the difference between two Hanja that both have the same Hangul pronunciation, an issue that actually even increases a bit in Vista when the work to add over 20,000 "K2" Hanja to the Korean sorting tables took place but which has in any case existed for as long as the Hangul sort has existed in Windows.</P>
<P>Then in May of last year when I talked about <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2005/05/05/414845.html" mce_href="http://archives.miloush.net/michkap/archive/2005/05/05/414845.html">A few of the gotchas of CompareString</A></STRONG>, I&nbsp;went&nbsp;through secondary distinctions and the impact of NORM_IGNORENONSPACE a bit more (among other things). </P>
<P>Last December I decided to focus a bit more on the whole issue when I answered in a bit more detail the question <A class="" href="http://archives.miloush.net/michkap/archive/2005/12/29/508045.html" mce_href="http://archives.miloush.net/michkap/archive/2005/12/29/508045.html"><STRONG>What's a secondary distinction?</STRONG></A>, and really dug into how when it is a real linguistic feature (rather than a case like Korean Hangul/Hanja where it is principally done for the sake of making room in the weight table), it is a feature that a native reader of a language will understand even if they cannot fully describe it, and which a naive user will expect while being even less able to explain it well.</P>
<P>Then yesterday when I took that naive case an combined&nbsp;it with <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/03/25/560416.html" mce_href="http://archives.miloush.net/michkap/archive/2006/03/25/560416.html">this post</A></STRONG>, and showed it&nbsp;doing things that are perhaps less intuitive (in the post <A class="" href="http://archives.miloush.net/michkap/archive/2006/10/31/906323.html" mce_href="http://archives.miloush.net/michkap/archive/2006/10/31/906323.html"><STRONG>"àèìòù" &lt; "äëïöü" but "àèìòù " &gt; "äëïöü"</STRONG></A>), I showed how even what is intuitive can easily become non-intuitive. In case you read that post and want to avoid getting hung up on the space, you can put a period or any symbol there instead; you will get the same results.</P>
<P>In Vista, where over 20,000 Hanja were added to the Korean locale's sort, this large number is dwarfed by the additions of other locales, such as the over 37,000 Han added to the Taiwanese stroke count sort or over 28,000 Han added to the Bopomofo sort. Or the over 41,000 Han added to the PRC's Pinyin-based sort table, or even the almost 50,000 Han added to the PRC stroke count table. And remembering that the primary weights have just a single 16bit WORD per sort element to deal with and that this space is shared with every other script, there simply isn't enough room to fit everything and give them all a primary weight. So, like with Korean, the effort was made to put like ideographic elements together, as follows:</P>
<UL>
<LI>Korean Hangul sort-- Each unique Hangul&nbsp;syllable has a primary weight; all Hanja that share that Hangul syllable's pronunciation&nbsp;are given a unique&nbsp;secondary weight under the&nbsp;that Hangul syllable, covering nearly 40,000 characters&nbsp;when you look at all of the Hangul plus all of the Hanja.</LI>
<LI>Pinyin (pronunciation) sort for China - Each unique Pinyin pronunciation (sound plus tone value)&nbsp;has its own primary weight; the stroke count and order are used as a secondary weight to break ties, covering over 62,000 ideographs when all is said and done.</LI>
<LI>Stroke count sort for China - each unique stroke&nbsp;count and order&nbsp;(I'll talk more about these another day)&nbsp;is given a primary weight, with the underlying code point value being used to break ties and provided with secondary weight, for a total of over 70,000 ideographs.</LI>
<LI>Bopomofo sort for Taiwan - Each unique Bopomofo pronunciation plus total stroke value is given its own primary weight, with code point order used to provide secondary distinctions and break ties (Bopomofo pronunciation alone&nbsp;could not be used, as this led to only 1,370 unique pronunciations, some sharing over 500 ideographs!). This led to over 48,000 ideographs being covered.</LI>
<LI>Stroke count order for Taiwan - Since only 46 unique total stroke counts existed in the data and no information about stroke order was provided, half of the primary weight was based on the stroke count and the other half (plus sometimes the diacritic weight) are used to help break ties. The total number of ideographs covered is over 54,000. Of the five listed here this is the least satisfying in terms of data provided to help make useful primary and secondary distinctions,&nbsp;and some thought is being made for the future in how to make those distinction more meaningful since there are times that the order will be less intuitive. For most uses, however, the sort will still be of use, especially if the NORM_IGNORENONSPACE flag is not used.</LI></UL>
<P>This only scratches the surface of the different ways one might wish to collate CJK ideographs, and in each case the struggle to determine what makes up a primary and what makes up a secondary distinction is not a trivial one. The results will not always be as intuitive as a native speaker/reader of a language might expect, a fact that will drive future versions to work to get even better information about expected cause for distinctions....</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM> <FONT size=6>〇</FONT> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/3007" mce_href="http://www.fileformat.info/info/unicode/char/3007">U+3007</A>, a.k.a. IDEOGRAPHIC NUMBER ZERO)</EM></FONT></P></FONT>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2007/09/24 <a href="http://archives.miloush.net/michkap/archive/2007/09/24/5085893.html">A&P of Sort Keys, part 11 (aka It's not like ideographic sorts were developed idiopathically)</a></p><p>2007/02/15 <a href="http://archives.miloush.net/michkap/archive/2007/02/15/1667070.html">On distinctions that are primarily with [and without] difference</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/11/01/919328.html" title="Where will Michael be?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/10/31/906323.html" title="&quot;àèìòù&quot; &lt; &quot;äëïöü&quot; but &quot;àèìòù &quot; > &quot;äëïöü&quot;">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-11">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-11-01">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/11/01/916477.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>