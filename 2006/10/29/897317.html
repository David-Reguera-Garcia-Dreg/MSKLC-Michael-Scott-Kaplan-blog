<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/10/29/897317.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>SQL Server: compatibility collations vs. Window collations</title></head><body>
<h1>SQL Server: compatibility collations vs. Window collations</h1>
<p><em>by Michael S. Kaplan, published on 2006/10/29 15:47 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/10/29/897317.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<FONT face=Tahoma size=3>
<P>The other day when I talked about <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/10/27/878277.html" mce_href="http://archives.miloush.net/michkap/archive/2006/10/27/878277.html">When collations collide</A></STRONG>, John Ingres <A class="" href="http://archives.miloush.net/michkap/archive/2006/10/27/878277.html#880353" mce_href="http://archives.miloush.net/michkap/archive/2006/10/27/878277.html#880353">commented</A>: </P><FONT face="Times New Roman,Times" size=2>
<BLOCKQUOTE>
<P>We've been looking at the implications of moving our database from<BR><BR>&nbsp;&nbsp;&nbsp; SQL_Latin1_General_CP1_xxxx<BR><BR>to <BR><BR>&nbsp;&nbsp;&nbsp; Latin1_General_xxx<BR><BR>since it is the recommended practice to use Windows collations instead of the legacy SQL collation but this is a large change affecting more than 30 applications and over a hundred production systems and I have been investigating differences between those two collations and information is extremely scarce. Is there a source of information with detailed information? Of course, we will test exhaustively but subtle differences in sort order for example are not always easily apparent.<BR><BR>thanks<BR><BR>John&nbsp;</P></BLOCKQUOTE></FONT>
<P>There is really no single source of info John, but as the question becomes more and more common for people to ask, it will become more and more important for the folks on the SQL Server team to provide some of those answers (and to provide more consistent messaging around the right collation to use).</P>
<P>(That the defaults&nbsp;will also need to change for those times that the SQL Server product itself is using for its server default collation goes without saying!)</P>
<P>In the meantime, I have posted here about some of the real problems with the legacy SQL_* collations in posts like these:</P>
<UL>
<LI><A class="" href="http://archives.miloush.net/michkap/archive/2005/11/08/490305.html" mce_href="http://archives.miloush.net/michkap/archive/2005/11/08/490305.html"><STRONG>SQL Compatibility collations are a bit too retro for me</STRONG></A></LI>
<LI><A class="" href="http://archives.miloush.net/michkap/archive/2006/06/02/615509.html" mce_href="http://archives.miloush.net/michkap/archive/2006/06/02/615509.html"><STRONG>It is only of SECONDARY importance</STRONG></A></LI>
<LI><A class="" href="http://archives.miloush.net/michkap/archive/2006/06/02/615536.html" mce_href="http://archives.miloush.net/michkap/archive/2006/06/02/615536.html"><STRONG>Je, for sure, from Sweden</STRONG></A></LI>
<LI><A class="" href="http://archives.miloush.net/michkap/archive/2006/06/06/618798.html" mce_href="http://archives.miloush.net/michkap/archive/2006/06/06/618798.html"><STRONG>Unicode and SQL Collations have nothing to do with each other</STRONG></A></LI>
<LI><A class="" href="http://archives.miloush.net/michkap/archive/2006/06/02/615571.html" mce_href="http://archives.miloush.net/michkap/archive/2006/06/02/615571.html"><STRONG>What the @!#$% is the TERTIARY_WEIGHTS() function for?</STRONG></A></LI></UL>
<P>and others as well. I mean, there is room for improvement in the Windows collations too (and there are posts that point out some of the issues there) but they are all much easier to deal with than the ones embedded in the SQL compatibility collations, which even at their best are just a mess that will never be changed or addressed or fixed.</P>
<P>Some of these&nbsp;posts focus on the international support of these legacy items, which ranges&nbsp;from lame to meager. But other posts focus more on a lot of the consistency problems with these collations, which simply don't match user expectations. They are definitely something to really think about getting rid of, if you can....</P>
<P>But I don't want to let the SQL Server team off the hook here -- they really need to provide more information on the differences here if they want people to migrate. Their solution is more compatible with prior versions than the one used in the Unicode changes from Jet Red 3.5 to 4.0 (they simply moved from all strings being non-Unicode to all strings being Unicode, period, and I can recall a conversation I had with Ken Whistler a few year back where I pointed this out and he was even more horrifed than I was!). </P>
<P>But some effort to underscore the benefits and especially the migration issues and differences to expect is really the least they can do at this point (in fact I'd say this a long overdue work item).</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM> <FONT size=6>áˆ­</FONT> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/122d" mce_href="http://www.fileformat.info/info/unicode/char/122d">U+122d</A>, a.k.a. ETHIOPIC SYLLABLE RE)</EM></FONT></P></FONT>
<hr/><p><a id="898930" href="#898930">#</a> <strong>John Ingres</strong> on 29 Oct 2006 6:41 PM:</p><div style="margin-left: 1em"><p>Thanks for answering!</p></div>
<p><a id="1064855" href="#1064855">#</a> <strong>John Ingres</strong> on 12 Nov 2006 6:27 PM:</p><div style="margin-left: 1em"><p>Thanks for your comments and links!</p>
<p>BTW, while testing some databases converted to windows collation I found an undocumented scary thing; obvious if you think about it for more than 1 second but much too easy to forget:</p>
<p>Changing the db collation affect aggregates used with TOP clauses. TOP is always affected by the ORDER BY, which in turn is affected by the collation. Add a MIN(str_column) or MAX(str_column) to the mix and you have a nasty hard to detect bug.</p></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/11/11 <a href="http://archives.miloush.net/michkap/archive/2008/11/11/9056745.html">Trying to ignore the small stuff is harder, if you're Arabic</a></p><p>2008/05/23 <a href="http://archives.miloush.net/michkap/archive/2008/05/23/8536649.html">SQL vs. Windows collations: the tricycle versus the Porsche</a></p><p>2007/10/25 <a href="http://archives.miloush.net/michkap/archive/2007/10/25/5686727.html">Not all in sync quite yet (aka SQL and the CLR and Windows and .NET)</a></p><p>2007/10/10 <a href="http://archives.miloush.net/michkap/archive/2007/10/10/5391882.html">Collations (SQL Compat. vs. Windows) -- not so subtle in the difference department</a></p><p>2006/12/07 <a href="http://archives.miloush.net/michkap/archive/2006/12/07/1232220.html">SQL and the CLR: Part 1 (the things we can make work well)</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/10/30/897681.html" title="If you are more sensitive, you&#39;ll pick up on more problems">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/10/29/893652.html" title="Why don&#39;t the keyboards select themselves when you install them?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-10">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-10-29">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/10/29/897317.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>