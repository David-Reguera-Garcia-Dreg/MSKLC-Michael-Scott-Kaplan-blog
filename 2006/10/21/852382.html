<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/10/21/852382.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Is Font.FontFamily localized?</title></head><body>
<h1>Is Font.FontFamily localized?</h1>
<p><em>by Michael S. Kaplan, published on 2006/10/21 05:31 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/10/21/852382.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<FONT face=Tahoma size=3>
<P>Michael (a different Michael, not me) asks: </P>
<BLOCKQUOTE><FONT face="Times New Roman,Times" size=2>
<P>Is Font.FontFamily localized?<BR><BR>We are doing string comparisons and wanted to use the correct culture info (CurrentCulture, CurrentUICulture, etc).</P></FONT></BLOCKQUOTE>
<P>Some here will recall that I talked about part of the issue&nbsp;last year in <A class="" href="http://archives.miloush.net/michkap/archive/2005/02/26/380867.html" mce_href="http://archives.miloush.net/michkap/archive/2005/02/26/380867.html"><STRONG>East Asian Font Names</STRONG></A> and earlier this year in&nbsp;<A class="" href="http://archives.miloush.net/michkap/archive/2006/02/13/530814.html" mce_href="http://archives.miloush.net/michkap/archive/2006/02/13/530814.html"><STRONG>Getting all of the localized names of a font</STRONG></A>. While (as that first post points out) both the English name and the localized name will be accepted in a font creation&nbsp;function in GDI, I don't know if anyone has ever made the same claim about either GDI+ or WPF (Avalon). That could be something to try out (seeing if both <STRONG><FONT face="MS Gothic,Tahoma">ＭＳ ゴシック</FONT></STRONG> and <STRONG><FONT face="MS Gothic,Tahoma">MS Gothic</FONT></STRONG> work in GDI+ and Avalon, both in the Japanese system locale case and the non-Japanese system locale case).</P>
<P>Now none of this will help with the actual issue here, which is not font creation but the comparison of names. In this particular case, when trying to compare font names returned by <A class="" href="http://msdn2.microsoft.com/en-us/library/system.drawing.font.fontfamily.aspx" mce_href="http://msdn2.microsoft.com/en-us/library/system.drawing.font.fontfamily.aspx">Font.FontFamily</A>, neither <A class="" href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcultureinfoclasscurrentculturetopic.asp" mce_href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcultureinfoclasscurrentculturetopic.asp">CurrentCulture</A> nor <A class="" href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcultureinfoclasscurrentuiculturetopic.asp" mce_href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcultureinfoclasscurrentuiculturetopic.asp">CurrentUICulture</A> are good options for comparison of the names. Because you really don't want behavior that is going to change based on system settings. In fact, if you simply use <A class="" href="http://msdn2.microsoft.com/en-us/library/e6883c06.aspx" mce_href="http://msdn2.microsoft.com/en-us/library/e6883c06.aspx">String.Compare</A> with the <A class="" href="http://msdn2.microsoft.com/en-us/library/system.stringcomparison.aspx" mce_href="http://msdn2.microsoft.com/en-us/library/system.stringcomparison.aspx">StringComparison.OrdinalIgnoreCase</A> option, you will mostly have the best results....</P>
<P>I say mostly because if different names can be returned then how good any comparison method works will depend on the strategy in place to handle the fact that the same font can return different family names. The best way to handle it would really depend on the application in question and its needs, and can vary from one extreme of never caring at all (because both names were created in the same session so they will be identical no matter what they are) to the middle solution of checking both names to the other extreme of using code like in that <A class="" href="http://archives.miloush.net/michkap/archive/2006/02/13/530814.html" mce_href="http://archives.miloush.net/michkap/archive/2006/02/13/530814.html"><STRONG>localized font names</STRONG></A>&nbsp;post and grabbing them on the fly. Which is best will depend entirely on the circumstances....</P>
<P mce_keep="true">&nbsp;</P>
<P mce_keep="true"><FONT color=#ff00ff><EM>This post brought to you by</EM> ゴ <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/30b4" mce_href="http://www.fileformat.info/info/unicode/char/30b4">U+30b4</A>, a.k.a. KATAKANA LETTER GO)</EM></FONT></P></FONT>
<hr/><p><strong>Carl</strong> on 21 Oct 2006 7:13 AM:</p><div style="margin-left: 1em"><p>Would you happen to know what kind of font names are accepted by the various Explorers, Internet? I've had a lot of trouble getting Japanese fonts to be accepted by the various browsers. In the end, I've settled on just saying the name of the font twice in my .css files in hopes that at least one version will be accepted by someone. Also, does IE support the '@charset &quot;utf-8&quot;;' element in CSS, or am I wasting my time by adding that? When I tested it before, it seems like it doesn't help much, so I broke down and converted the Unicode into the &quot;\codepoint&quot; escaped format as so:</p>
<p>font-family: &quot;\ff24\ff26\ff30\96b7\66f8\4f53&quot;, DFPLeiSho-SB, serif;</p>
<p>Personally, I find this whole business of fonts having multiple names that are only supported by some browsers in some OSes for some language setting -- but not other! -- a bit tedious. ;-)</p></div>
<p><strong>Michael S. Kaplan</strong> on 21 Oct 2006 12:13 PM:</p><div style="margin-left: 1em"><p>Hi Carl, </p>
<p>Yes, sometimes that is all you can do (since lots of programs might do things like enumerate them and not accept anything outside the enumeration). </p>
<p>Personally, I think the multiple names things is a pretty bad design decision on the part of the font foundry, when it occurs....</p>
</div>
<p><strong>Rosyna</strong> on 21 Oct 2006 2:55 PM:</p><div style="margin-left: 1em"><p>I wonder, how does matching fonts via localized names work for &quot;bad fonts&quot;. Evil fonts that report something like &quot;Geneva CY&quot; for the English name and &quot;Geneva&quot; for the Cyrillic name? If you do a search for &quot;Geneva&quot; which one would it pick if the current culture thingy is Russian McDealie?</p>
<p>These are the questions that keep me awake at night.</p>
</div>
<p><strong>Michael S. Kaplan</strong> on 21 Oct 2006 3:53 PM:</p><div style="margin-left: 1em"><p>It would never be based on CurrentCulture; it might be based on the UI language of Windows (which is what CurrentUICulture is based on), but still I would not use that for string comparisons (since there is no guarasnteed match between the name and the collation).</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/07/11 <a href="http://archives.miloush.net/michkap/archive/2008/07/11/8720555.html">On installing and removing fonts, Part 4: The easiest part is the addition!</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/10/21/854225.html" title="Will your laptop battery explode? Check the number and maybe you&#39;ll recall....">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/10/21/852262.html" title="It might be getting a little less embarrassing">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-10">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-10-21">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/10/21/852382.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>