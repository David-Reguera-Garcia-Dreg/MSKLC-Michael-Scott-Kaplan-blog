<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/10/09/807446.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Where the hell did Replacement Locales come from?</title></head><body>
<h1>Where the hell did Replacement Locales come from?</h1>
<p><em>by Michael S. Kaplan, published on 2006/10/09 03:00 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/10/09/807446.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<font face="Tahoma" size="3"> <p>Not too long ago, I was talking to a developer who was looking at an issue with Replacement Locales on Windows who pointed out that they simply saw no real purpose for them (the actual language was a bit more raw then that, but it was not terribly original or else I'd quote it here just for color!).</p> <p>Now I have talked about Replacement Cultures/Replacement Locales in the past (like in <a href="http://archives.miloush.net/michkap/archive/2006/03/20/555288.html"><strong>this post</strong></a>) and Cathy and I have mentioned them in one of the articles we wrote (<a href="http://msdn.microsoft.com/msdnmag/issues/05/10/Globalization/default.aspx">this one</a>). It is a subject that both Shawn (e.g. <a href="http://blogs.msdn.com/shawnste/archive/2006/02/28/540936.aspx">here</a> and <a href="http://blogs.msdn.com/shawnste/archive/2006/02/20/535805.aspx">here</a>) and Kieran (e.g. <a href="http://blogs.msdn.com/kierans/archive/2006/08/09/693453.aspx">here</a>) have talked about as well. I thought it would be nice to give a little bit of historical context behind their creation....</p> <p>The early, initial checkin of custom cultures (the technology upon which custom locales were later based) did not allow one to override the name of an existing culture -- either a custom one that had already been created or a built-in culture provided by Microsoft. The reason was fairly simple -- the LCID was a read-only property, and no one was excited about getting into the business of allowing custom LCID values, and no one wanted to make <font face="Consolas,Courier New,Lucida Console,Courier" color="#8080c0"><strong>new CultureInfo(0x0409)</strong></font> behave differently than <font face="Consolas,Courier New,Lucida Console,Courier" color="#8080c0"><strong>new CultureInfo("en-US")</strong></font>.&nbsp;</p> <p>Underlying the admittedly simplistic&nbsp;issue was as general unease about the data underlying 0x0409 and "en-US" as well (not to mention all the other locales!), a nervousness about what people might expect in the way of stability of results. </p> <p>Given all of the different ways that users could customize so many of the culture/locale settings for their selected user locale in Windows, in most cases that unease would be limited to just the items that could not be overridden. But the feeling of unease was a reasonable one, even if it was not rigidly defined (people felt very little pressing need to define it once the decision was not to do it!).</p> <p>Unfortunately, this made one of the very important problems (one which drove custom cultures and custom locales as a feature) impossible to address -- the need to make easy updates quickly when scenarios came up&nbsp;such as a country moving to use the Euro. If one could no longer ask for a culture by the old name and get the update, then nothing would actually have been updated, in some really important situations.</p> <p>After some initial suggested limitations came up in an early conversation between Shawn and I, and recognizing the importance of this scenario, some effort was made to go to different groups throughout the company to see what properties of locales and cultures they were making assumptions about.</p> <p>An unhealthy number of them had assumptions about date/time/number/currency formats, but it was easy to point out how they would already have problems in the case of the user's default locale. However, specific groups like ESENT (Jet Blue) and SQL Server and Office had dependencies on items such as collation support and code pages. </p> <p>It was somewhat heartening that most of the items came up in that initial conversation I had with Shawn, it was a good indication that&nbsp;we were&nbsp;on the right track with the modification of the feature?</p> <p>These types of items are never overridable by users within the setting of a particular locale, so it seemed reasonable if a plan was to be formed to freeze those settings and not allow them to be changed. That small set of features and the connection between name and LCID seemed like the best items to freeze if one was trying to replace a built-in culture, even if they were a bit more open in the case of a custom culture that was not trying to override a built in one.</p> <p>And thus replacement locales were born!</p> <p>Would these limitations be there forever? </p> <p>Who knows? Maybe they are a limited-number-of-versions, <a href="http://archives.miloush.net/michkap/archive/2005/03/14/395177.html"><strong>your locale code is on the roof</strong></a> type limitation to give people time to realize that if they are not allowing for the fact that these settings change that they my have bugs....</p> <p>Now since that time,&nbsp;when various PMs and testers (and in one case a tester who became a&nbsp;PM)&nbsp;came on board to the NLS team and owned either locales or some area affected by locales, at some point it seemed almost inevitable that they would openly ask what the point of replacement locales was (though unlike the developer I mentioned earlier, PMs are usually a bit more polite in their language!). </p> <p>It seemed almost one of the developmental stages of dev,&nbsp;PM, and test&nbsp;in this area to question the feature once they understood enough about locales to feel that these particular ones did not seem to fit as neatly into the picture. It was even true of the team that did the work on the <a href="http://archives.miloush.net/michkap/archive/2006/02/21/535813.html"><strong>Locale Builder</strong></a>, as they were ramping up.&nbsp;Which for me at least made it a happy event as having people understand an area makes their success working in the area so much more likely. :-)</p> <p>And that is why we have replacement cultures and replacement locales, and why they have the limitations that they do.</p> <p>&nbsp;</p> <p><font color="#ff00ff"><em>This post brought to you by</em> <strong><font size="6">â‚¬</font></strong> <em>(<a href="http://www.fileformat.info/info/unicode/char/20ac">U+20ac</a>, a.k.a. EURO SIGN)</em></font></p></font>
<hr/><p><strong>Elsebeth</strong> on 9 Oct 2006 8:40 AM:</p><div style="margin-left: 1em">I just have to point out one of my pet peeves, overcorrected use of "I" instead of "me": <br/>"an early conversation between Shawn and I"<br/>Otherwise, really good information :-)</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2009/08/17 <a href="http://archives.miloush.net/michkap/archive/2009/08/17/9871988.html">On not looking at Uyghur through a Chinese prism</a></p><p>2006/11/22 <a href="http://archives.miloush.net/michkap/archive/2006/11/22/1122416.html">Fixing the sample code for getting ELK cultures on other platforms</a></p><p>2006/10/09 <a href="http://archives.miloush.net/michkap/archive/2006/10/09/810148.html">Don't cry for me [for 24 hours] Argentina....</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/10/09/810148.html" title="Don&#39;t cry for me [for 24 hours] Argentina....">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/10/08/806138.html" title="The return of double secret Unicode!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-10">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-10-09">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/10/09/807446.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>