<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/10/06/795575.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>What do those marks do again?</title></head><body>
<h1>What do those marks do again?</h1>
<p><em>by Michael S. Kaplan, published on 2006/10/06 03:00 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/10/06/795575.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<font face="Tahoma" size="3"> <p>The question went something like this:</p> <blockquote><font face="Times New Roman,Times" size="2"> <p>Recently we had to make the date returned by GetDateFormat() to be LTR/RTL compliant and hence we are specifying DATE_LTRREADING/ DATE_RTLREADING in the flags for the same. It looks like with this flag, GetDateFormat() returns the date with some non-text characters embedded in it (like 0x200e for LTR and 0x200f for RTL). This fails the further processing of the returned date string. Can you please help us in the following: </p> <ol> <li>Is this by design?  <li>What should I do to get a normal text string from the string returned by GetDateFormat()? I donâ€™t see character replacement a very neat option!</li></ol></font></blockquote> <p>The answer to the first question is of course yes! As I have&nbsp;mentioned <a href="http://archives.miloush.net/michkap/archive/2006/01/21/515793.html"><strong>in</strong></a> <a href="http://archives.miloush.net/michkap/archive/2006/02/08/527375.html"><strong>the</strong></a> <a href="http://archives.miloush.net/michkap/archive/2006/09/01/735817.html"><strong>past</strong></a>, the whole point of these flags is to insert <a href="http://www.fileformat.info/info/unicode/char/200e">U+200e</a> (a.k.a. LEFT-TO-RIGHT MARKER)&nbsp;or <a href="http://www.fileformat.info/info/unicode/char/200f">U+200f</a> (a.k.a. RIGHT-TO-LEFT MARKER), depending on what flag you pass. It doesn't make sense to request that an NLS API function like <a href="http://msdn.microsoft.com/library/en-us/intl/nls_5w6s.asp">GetDateFormat</a>&nbsp;perform an action but then later to be unhappy about the action being petrformed..... </p> <p>The second question kind of suggests an easy&nbsp;bit of code -- just loop through&nbsp;the string, copying it character by character, and with each occurrence of the&nbsp;one of formatting characters, you simply don't copy it over. Given how small the strings are, this should be fairly straightforward. :-)</p> <p>Now over in the managed world, where there is locale sensitive formattig <strong>and</strong> parsing, the ability to insert these characters does not exist (presumably if it were ever added as an option for date formatting,&nbsp; date parsing would be modified to know about the characters, too). But for noew in the managed world you are kind of on your own with this type of situation....</p> <p>Though on the whole, to help with the original question, I think it is important to understand what a flag does before simply adding it.&nbsp;Just as in life, doing "the right thing" without understanding the context of why it is "the right thing to do" is simply not going to get a person very far....</p> <p>&nbsp;</p> <p><font color="#ff0080"><em>This post brought to you by U+200e and U+200f (a.k.a. LEFT-TO-RIGHT MARKER and RIGHT-TO-LEFT MARKER)</em></font></p></font>
<hr/><p><a id="816047" href="#816047">#</a> <strong>benkaras</strong> on 11 Oct 2006 1:59 AM:</p><div style="margin-left: 1em"><p>I just had to write such a stripping function to prepare a formatted string for a Unicode-&gt;OEM conversion. &nbsp;Check my post to see just how easy it is:</p>
<p><a rel="nofollow" target="_new" href="http://blogs.msdn.com/benkaras/archive/2006/10/10/Properties-coding-expedition-_2D00_-Stripping-characters.aspx">http://blogs.msdn.com/benkaras/archive/2006/10/10/Properties-coding-expedition-_2D00_-Stripping-characters.aspx</a></p>
</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/10/06/796078.html" title="Random irreverent thoughts about the Ultimate Fallback">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/10/05/792889.html" title="The fonts are no charge, but the OS they are in has to cost something">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-10">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-10-06">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/10/06/795575.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>