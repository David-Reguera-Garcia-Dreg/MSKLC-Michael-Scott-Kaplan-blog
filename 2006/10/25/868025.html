<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/10/25/868025.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Out of [implied] range</title></head><body>
<h1>Out of [implied] range</h1>
<p><em>by Michael S. Kaplan, published on 2006/10/25 03:31 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/10/25/868025.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<FONT face=Tahoma size=3>
<P>The question was something like: </P>
<BLOCKQUOTE><FONT face="Times New Roman,Times" size=2>
<P>I have a japnese OS and japnese .net installed on it. The DateTime format is set to gregorian calendar in japnese and&nbsp;when I execute the following piece of code I am getting an argumentoutofrange exception. Any idea what could be the problem <BR><BR>Console.Writeline(constants.Data.SqlTypes.SqlDateTime.MinValue); <BR><BR>However If I do it by providing cultureinfo.invariantculture to the string things appear to work fine. Is it the case that minvalue is culture independent and cant really be converted to a String in certain cultures like JPN?</FONT></P></BLOCKQUOTE>
<P>As a first step, looking at my prior post <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/05/14/597278.html" mce_href="http://archives.miloush.net/michkap/archive/2006/05/14/597278.html">Long Live the Emperor</A></STRONG>, it has the earliest supported date in the Japanese Emperor calendar as being August 9th, 1868.</P>
<P>As a next step, <A class="" href="http://archives.miloush.net/michkap/archive/2006/05/14/597278.html" mce_href="http://archives.miloush.net/michkap/archive/2006/05/14/597278.html">System.Data.SqlTypes.SqlDateTime.MinValue</A> has as its earliest&nbsp;supported date January 1, 1753.</P>
<P>So clearly, the most likely explanation for the problem here is that the Gregorian calendar is not what is being used here. </P>
<P>Perhaps this is actually a good object lesson about being careful about default data type coercions (such as this one between SqlDateTime and System.String) -- because it can be hard to predict how that coercion might happen across multiple people and multiple versions....</P>
<P>So let's see if we can figure out what did happen. Obviously the .NET Framework felt comfortable with the coercion, so it must have figured it would be lossless. Let's start by looking at all of the <A class="" href="http://msdn2.microsoft.com/en-us/library/system.console.writeline.aspx" mce_href="http://msdn2.microsoft.com/en-us/library/system.console.writeline.aspx">Console.WriteLine() overloads</A>....</P>
<P>Hmmmm. No DateTime overload. Ok, let's go to the <A class="" href="http://msdn2.microsoft.com/en-us/library/system.datetime.tostring.aspx" mce_href="http://msdn2.microsoft.com/en-us/library/system.datetime.tostring.aspx">DateTime.ToString overloads</A>....</P>
<P>Aha! If you do not pass a CultureInfo object (which obviously the implicit call does not), then you do not get any special overrides based on the CultureInfo object that has been modified to use the Gregorian calendar. But according to the <A class="" href="http://msdn2.microsoft.com/en-us/library/k494fzbf.aspx" mce_href="http://msdn2.microsoft.com/en-us/library/k494fzbf.aspx">DateTime.ToString() topic</A>, "The value of the current <B>DateTime</B> object is formatted using the general date and time format specifier ('G').", described in <A class="" href="http://msdn2.microsoft.com/en-us/library/az4se3k1.aspx" mce_href="http://msdn2.microsoft.com/en-us/library/az4se3k1.aspx">Standard DateTime Format Strings</A> as representing "...a combination of the short date (d) and short time (t) patterns, separated by a space." Which maybe it is doing, but it does not mention what CultureInfo it will be using, or whether overrides/changes in the CultureInfo will be used. </P>
<P>Or maybe the person asking the question did not actually set the calendar to Gregorian properly, and everything is working as expected?</P>
<P>An interesting problem not documented terribly well, in any case&nbsp;-- and a great argument to be explicit when it comes to formats? :-)</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by </EM>&nbsp;<STRONG><FONT face="Mongolian Baiti" size=6>á †</FONT></STRONG> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/1806" mce_href="http://www.fileformat.info/info/unicode/char/1806">U+1806</A>, a.k.a. MONGOLIAN TODO SOFT HYPHEN)</EM></FONT></P></FONT>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/09/14 <a href="http://archives.miloush.net/michkap/archive/2010/09/14/10061557.html">Using a culture's format, without using that culture to format?</a></p><p>2007/07/21 <a href="http://archives.miloush.net/michkap/archive/2007/07/21/3991927.html">Theory vs. practice in software development</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/10/25/871264.html" title="It is a challenge to make ClearType irrelevant">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/10/24/867880.html" title="Sometimes in the future &#39;ANSI&#39; is really going to be unsupported!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-10">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-10-25">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/10/25/868025.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>