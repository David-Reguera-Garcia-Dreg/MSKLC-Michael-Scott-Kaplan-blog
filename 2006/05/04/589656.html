<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/05/04/589656.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Sort the words, sort the strings</title></head><body>
<h1>Sort the words, sort the strings</h1>
<p><em>by Michael S. Kaplan, published on 2006/05/04 03:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/05/04/589656.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Last night a colleague asked me via email:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman" size=2>Hi Michael,<BR><BR></FONT><FONT face="Times New Roman" size=2>I have the following line&nbsp;<BR><BR></FONT><FONT face="Times New Roman"><FONT size=2><FONT face="Courier New"><STRONG>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("A &gt; B ? = {0}", CultureInfo.CurrentCulture.CompareInfo.Compare("kok-in", "ko-kr", CompareOptions.None));</STRONG></FONT><BR><BR></FONT></FONT><FONT face="Times New Roman" size=2>And current culture is en-US<BR><BR></FONT><FONT size=2><FONT face="Times New Roman">This line printing<BR><BR></FONT><FONT face="Courier New"><STRONG>A &gt;&nbsp;B ? = -1<BR></STRONG></FONT><BR></FONT><FONT face="Times New Roman" size=2>Which means "kok-in" &lt; "ko-kr"<BR><BR></FONT><FONT face="Times New Roman" size=2>I think this is wrong. Right?</FONT></P></BLOCKQUOTE></BLOCKQUOTE>
<P><FONT face=Tahoma>I have actually talked about string sorts vs. words sorts in the past in posts like <A HREF="http://archives.miloush.net/michkap/archive/2005/05/05/414845.html">this one</A>, though it raises an interesting question in terms of usability.</FONT></P>
<P><FONT face=Tahoma>The easy argument? Well, in that <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcompareinfoclasscomparetopic.asp">CompareInfo.Compare</A> call above, just use <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcompareoptionsclasstopic.asp">CompareOptions</A>.StringSort rather than <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcompareoptionsclasstopic.asp">CompareOptions</A>.None. </FONT></P><FONT face=Tahoma>
<P><FONT face=Tahoma>However, in this particular case,&nbsp;the behavior&nbsp;was causing a problem when using SortedList with&nbsp;.NET Framework&nbsp;culture names as keys. Because the scenarios for which the word sort behavior is intuitive do not have among them a scenario like hyphenated tokens of 2-3 characters each. And although the string sort behavior works better here (since treating the hyphen as a <A HREF="http://archives.miloush.net/michkap/archive/2005/01/19/356280.html">symbol</A>&nbsp;will give the behavior&nbsp;most would&nbsp;expect, in this scenario), there&nbsp;is actually a problem with that approach, namely the fact that t</FONT>he <A href="http://msdn2.microsoft.com/en-us/library/system.collections.sortedlist.aspx">SortedList class</A> does not give an easy way to apply the flag. To use it, you have to do something like implement an <A href="http://msdn2.microsoft.com/en-us/library/system.collections.icomparer.aspx">IComparer</A> with a Compare call that uses the flag, which is the most common operation in the world....</P>
<P>This is made more complicated by the problems I pointed out previously in the post&nbsp;<A HREF="http://archives.miloush.net/michkap/archive/2005/04/14/408116.html">On approaching international programming....</A></P>
<P>Taking a step back, the names of the two sorts (string sort vs. word sort) do not give good clues in the words as to what each one does, anyway. So without docs, it would be hard to figure out which one to use in the first place!</P>
<P>The fact that the SortedList does not contain easy ways to get at these settings makes it (in my opnion) just a little less sorted, if you know what I mean. :-)</P>
<P>&nbsp;</P>
<P><FONT color=#ff1493><EM>This post brought to you by</EM> "A" <EM>(<A href="http://www.fileformat.info/info/unicode/char/0041/index.htm">U+0041</A>, LATIN CAPITAL LETTER A)</EM></FONT></FONT></P>
<hr/><p><strong>Maurits [MSFT]</strong> on 4 May 2006 11:48 AM:</p><div style="margin-left: 1em">So a word-sort of a language list would mix major language groupings!<br><br>string sorted list:<br><br>cd-aa<br>cd-ee<br>cd-ss<br><br>cde-bb<br>cde-mm<br><br>word sorted list:<br><br>cd-aa<br>cde-bb<br>cd-ee<br>cde-mm<br>cd-ss<br></div>
<p><strong>Michael S. Kaplan</strong> on 4 May 2006 12:38 PM:</p><div style="margin-left: 1em">Well, that is why I was pointing out that this particular list needs a string sort! :-)</div>
<p><strong>Maurits [MSFT]</strong> on 4 May 2006 12:45 PM:</p><div style="margin-left: 1em">I suppose another way around it would be to map all the two-character major-language codes to their three-character ISO 639 equivalents prior to sorting<br><a rel="nofollow" target="_new" href="http://en.wikipedia.org/wiki/List_of_ISO_639_codes">http://en.wikipedia.org/wiki/List_of_ISO_639_codes</a><br><br>Then the hyphens would all be in the fourth position and have no impact on the sort.</div>
<p><strong>Michael S. Kaplan</strong> on 4 May 2006 1:07 PM:</p><div style="margin-left: 1em">Actually, this would &nbsp;have two fairly blocking problems:<br><br>1) the two letter is not a 100% subset of the three letter;<br>2) The three letter would not create valid cultures in the cases where the change is made;</div>
<p><strong>Maurits [MSFT]</strong> on 4 May 2006 2:00 PM:</p><div style="margin-left: 1em">&gt; the two letter is not a 100% subset of the three letter<br><br>I don't think anyone's going to stick up for Serbo-Croatian now that Slobodan Milošević has passed on. &nbsp;As a legacy measure, it could map to hbs per ISO 639-3<br><br>&gt; The three letter would not create valid cultures in the cases where the change is made<br><br>That sounds like a bug, actually. &nbsp;Surely the culture code should recognize the equivalence of &quot;en&quot; and &quot;eng&quot;?</div>
<p><strong>Michael S. Kaplan</strong> on 4 May 2006 2:16 PM:</p><div style="margin-left: 1em">Sorry Maurits -- the culture names are identifiers, like LCIDs. I'll be blogging about this soon though, never fear. ;-)</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/09/07 <a href="http://archives.miloush.net/michkap/archive/2010/09/07/10058112.html">Refusing to ignore some particular character's width isn't [always] an act of discrimination…</a></p><p>2007/09/20 <a href="http://archives.miloush.net/michkap/archive/2007/09/20/5008305.html">A&P of Sort Keys, part 9 (aka Not always transitive, but punctual and punctuating)</a></p><p>2007/05/06 <a href="http://archives.miloush.net/michkap/archive/2007/05/06/2448753.html">One product's feature is another product's bug -- just ask 'em!</a></p><p>2006/11/16 <a href="http://archives.miloush.net/michkap/archive/2006/11/16/1086283.html">The problem of string comparisons, WORD sorts, and the minus that is treated like the hyphen</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/05/04/590167.html" title="Getting the wrong keyboard in Access?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/05/01/587340.html" title="A bit about the &#39;Single World Wide Binary&#39;">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-05">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-05-04">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/05/04/589656.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>