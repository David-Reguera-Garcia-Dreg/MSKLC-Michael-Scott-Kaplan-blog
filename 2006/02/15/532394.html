<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/02/15/532394.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Every character has a story #19: U+200c and U+200d (ZERO WIDTH [NON] JOINER)</title></head><body>
<h1>Every character has a story #19: U+200c and U+200d (ZERO WIDTH [NON] JOINER)</h1>
<p><em>by Michael S. Kaplan, published on 2006/02/15 11:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/02/15/532394.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>In the world of </FONT><FONT face=Tahoma>Unicode, it is small irony that what&nbsp;usually causes the most emails to be exchanged and the most documents to be written are the characters that have no actual visible representation.</FONT></P>
<P><FONT face=Tahoma>Whether it is <A href="http://www.fileformat.info/info/unicode/char/feff">U+feff</A> (a.k.a. ZERO WIDTH NO BREAK SPACE, a.k.a. <A HREF="http://archives.miloush.net/michkap/archive/2005/01/20/357028.html">the BOM</A>), <A href="http://www.fileformat.info/info/unicode/char/200e">U+200e</A>/<A href="http://www.fileformat.info/info/unicode/char/200f">U+200f</A> (a.k.a. LEFT-TO-RIGHT MARKER/RIGHT-TO-LEFT MARKER), or many of the others, it is these characters that often have the most dangerous and&nbsp;</FONT><FONT face=Tahoma>troublesome influence on surrounding text.</FONT></P>
<P><FONT face=Tahoma>I am going to talk about two more of them now....</FONT></P>
<P><FONT face=Tahoma>They are:</FONT></P>
<UL>
<LI><FONT face=Tahoma><A href="http://www.fileformat.info/info/unicode/char/200c">U+200c</A> (ZERO WIDTH NON-JOINER)</FONT></LI>
<LI><FONT face=Tahoma><A href="http://www.fileformat.info/info/unicode/char/200d">U+200d</A> (ZERO WIDTH JOINER)</FONT></LI></UL>
<P><FONT face=Tahoma>Now these characters each have a simple purpose -- the former is to <EM>suggest</EM> that the characters preceding it and following it should not try to join or ligate, and the latter is to <EM>suggest</EM> that the characters preceding it and following it should try to join or ligate.</FONT></P>
<P><FONT face=Tahoma>If you have neither then it is something that basically up to the font and rendering engine what they want to do based on their impression of the desired behavior.</FONT></P>
<P><FONT face=Tahoma>And if the font and/or shaping engine wish to ignore the suggestion, they are free to do so at will -- which they often will do if they do not have any specific behavior within their understanding of the two characters.</FONT></P>
<P><FONT face=Tahoma>ZWJ and ZWNJ&nbsp;are <STRONG>only</STRONG> supposed to be used to suggest visual distinctions, not ones that would change the meaning or interpretation of the characters.</FONT></P>
<P><FONT face=Tahoma>They are thus supposed to be ignored in&nbsp;things like the <A href="http://www.unicode.org/reports/tr10/">Unicode Collation Algorithm</A>&nbsp;</FONT><FONT face=Tahoma>and outright stripped in things like <A href="ftp://ftp.rfc-editor.org/in-notes/rfc3454.txt">StringPrep</A>.</FONT></P>
<P><FONT face=Tahoma>The problem is that sometimes they do convey semantic meaning or content.</FONT></P>
<P><FONT face=Tahoma>Like in the native Sinhalese word for Sri Lanka, which is the first of these two strings and requires a ZERO WIDTH JOINER:</FONT></P>
<P><FONT face=Tahoma><IMG src="http://trigeminal.fmsinc.com/images/Sinhala_Vista.jpg"></FONT></P>
<P><FONT face=Tahoma>Now tell me if you think that the first one -- which is the name and needs a <A href="http://www.fileformat.info/info/unicode/char/200d">U+200d</A>) looks different enough from the second to be considered a significant difference to native readers.</FONT></P>
<P><FONT face=Tahoma>Definitely an example where a linguistic&nbsp;distinction controlling&nbsp;how a language is rendered can quickly become a political one!</FONT></P>
<P><FONT face=Tahoma>Or an reported analagous situation with <A href="http://www.fileformat.info/info/unicode/char/200c">U+200c</A>&nbsp;and Myanmar. Or perhaps the&nbsp;several reported cases where Farsi appears to show similar issues.</FONT></P>
<P><FONT face=Tahoma>I suppose the&nbsp; conclusion of all this is simple enough: <STRONG>one person's ignorable suggestions&nbsp;are another person's crucial directions</STRONG>. :-)</FONT></P>
<P><FONT face=Tahoma>Obviously this is an issue that needs to be figured out, especially with <A href="http://www.unicode.org/reports/tr36/">UTR #36</A> and <A href="http://www.unicode.org/reports/tr39/">UTR #39</A> being relied on so heavily to provide guidance on how consumers of Unicode who want to avoid spoofing and other issues.</FONT></P>
<P><FONT face=Tahoma>Preferably in a way that not offend anyone linguistically, or politically.</FONT></P>
<P><FONT face=Tahoma>But look out for those invisible characters. As we learned in the movie Small Soldiers, they are like&nbsp;the wind. Just because you can't see something doesn't mean it's not there....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma><EM><FONT color=#ff1493>This post brought to you by</FONT></EM> </FONT><FONT face=Tahoma><FONT face=Tahoma><A href="http://www.fileformat.info/info/unicode/char/200c">U+200c</A> <EM><FONT color=#ff1493>and</FONT></EM> <A href="http://www.fileformat.info/info/unicode/char/200d">U+200d</A> <EM><FONT color=#ff1493>(a.k.a. </FONT></EM></FONT></FONT><FONT face=Tahoma><EM><FONT color=#ff1493><FONT face=Tahoma>ZERO WIDTH NON-JOINER and </FONT><FONT face=Tahoma>ZERO WIDTH JOINER)</FONT></FONT></EM></FONT></P>
<hr/><p><a id="533011" href="#533011">#</a> <strong>Yosuke HASEGAWA</strong> on 16 Feb 2006 12:56 AM:</p><div style="margin-left: 1em">Using ZERO WIDTH (NON) JOINER or ZWNBSP(BOM) to filename or registory key and values, you can create several files that appearance is the same name.<br><br>This may cause visual problems in security domain. So I hope to disable using Unicode control characters for filename in Windows.<br>Of course, Bidi control characters such as &quot;RLO&quot; too.<br></div>
<p><a id="533229" href="#533229">#</a> <strong>Michael S. Kaplan</strong> on 16 Feb 2006 9:17 AM:</p><div style="margin-left: 1em">Well, take a look at <a rel="nofollow" target="_new" href="http://archives.miloush.net/michkap/archive/2006/02/16/533226.html">http://blogs.msdn.com/michkap/archive/2006/02/16/533226.aspx</a> which talks about this issue a bit -- definitely more complicated than disallowing a few characters! :-)</div>
<p><a id="580458" href="#580458">#</a> <strong>UdaraG</strong> on 21 Apr 2006 4:24 AM:</p><div style="margin-left: 1em">Hi Michael;<br><br>Firstly, I am a Sri Lankan who uses Sinhala as my mother tongue, and was quite fascinated to see your use of the same in the example above!<br><br>Secondly, I am at the early stages of developing a Sinhala IME for the PocketPC, and am having problems in sending the ZWJ along with leading/trailing characters so that it could be correctly interpreted and rendered on, say Pocket Word.<br><br>1. I imported the Sinhala character range from a Unicode-compatible font (called &quot;Malithi Web&quot;) into the standard MS Tahoma font, which I have copied over to the PPC.<br>2. With a rudimentary IME developed in eVC 4.0, I did a IMCallback.SendString() for the Unicode string {0x0DC1, 0x0DCA, 0x200D, 0x0DBB, 0x0DD3, NULL}.<br><br>Though this should give me (as I understood) the first form in your example above, it actually gives me the second non-ligated form with a verical bar (which I presume to be the ZWJ) drawn in between the two characters!<br><br>What am I doing wrong?<br>Should I use IMCallback.SendCharEvents() instead?<br>Can you please point me to some code samples?<br><br>Thanks and regards,<br>Udara</div>
<p><a id="580583" href="#580583">#</a> <strong>Michael S. Kaplan</strong> on 21 Apr 2006 9:05 AM:</p><div style="margin-left: 1em">Hi Udara,<br><br>I see a few problems with what you have mentioned here:<br><br>&quot;I imported the Sinhala character range from a Unicode-compatible font (called &quot;Malithi Web&quot;) into the standard MS Tahoma font&quot;<br><br>Of course the licensing concern is a very real one -- I do not know whether it is legal to modify Tahoma in such a way?<br><br>Beyond that, there is the problem of making sure all of the opentype tables are moved over properly. It is not enough to be 'Unicode-compatible' as Arial in Win95 is that; what is important is the right OT table info.<br><br>And beyond that, see <a rel="nofollow" target="_new" href="http://archives.miloush.net/michkap/archive/2005/05/19/420145.html">http://blogs.msdn.com/michkap/archive/2005/05/19/420145.aspx</a> which points out that Uniscribe is not present in every WinCE install, even if it is of the latest version.<br><br>Of course beyond all that would be the question of whether the updates for Sinhala that were added so recently are in the CE version of Uniscribe. They may not have the XPSP2/ELK/Vista updates just yet....</div>
<p><a id="592281" href="#592281">#</a> <strong>UdaraG</strong> on 8 May 2006 7:42 AM:</p><div style="margin-left: 1em">Hi Michael;<br>Thanks for the prompt reply, and extremely sorry for the much delayed follow up!<br><br>Yes, I do understand the licensing concerns very well - myself being a software developer... - the only reason I modified the Tahoma font was since I had a small problem getting the font linking to work. :-)<br><br>Now everything is perfect, expect for the ligatures - of which Sinhala language has a number of. I have tried so many devices and WinCE OS versions, including the very latest, but to no avail!<br><br>My conclusion is what you guessed right at the start - &quot;updates for Sinhala that were added so recently are NOT in the CE version of Uniscribe&quot;.<br><br>1. Is there a way to ascertain this from anybody at MS, so that I need not worry about this any further?<br><br>2. From the ref-link you provided above, looks like i have no option short of moulding out an OS image (with WinCE Platform Builder) with Sinhala language support.<br>What may be the next steps in building support for a custom language (Sinhala) with WinCE PB?<br>Assuming I work fulltime on it ,may be even burning some midnight oil :-), what's the effort/time estimate look like? I do have extensive C/C++ experience with me, and have already downloaded the evaluation copy of WinCE PB (my employer is hoping to buy it soon).<br>However, this is my first stint with WinCE PB, and am expecting a considerable learning curve.<br><br>Thanks and regards,<br>Udara</div>
<p><a id="592374" href="#592374">#</a> <strong>Michael S. Kaplan</strong> on 8 May 2006 10:20 AM:</p><div style="margin-left: 1em">Well, the shaping engine support will not yet be there in the CE Uniscribe, so there really is no way to make it all happen just yet. <BR><BR>I do not know the timeline for updates on the mobile platform, but if I find out, I'll post about it....</div>
<p><a id="593459" href="#593459">#</a> <strong>UdaraG</strong> on 9 May 2006 4:11 AM:</p><div style="margin-left: 1em">Thanks very much, Michael!</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2015/07/08 <a href="http://archives.miloush.net/michkap/archive/2015/07/08/8770668856267196695.html">Fixing up broken and semi broken blog posts, as needed?</a></p><p>2007/10/14 <a href="http://archives.miloush.net/michkap/archive/2007/10/14/5448243.html">The subtle difference between ශ්රී ලංකාව and ශ්‍රීලංකාව</a></p><p>2006/09/25 <a href="http://archives.miloush.net/michkap/archive/2006/09/25/768715.html">Why don't all the half forms sort right?</a></p><p>2006/02/17 <a href="http://archives.miloush.net/michkap/archive/2006/02/17/533929.html">What do you get when you combine a base character with a buttload of diacritics?</a></p><p>2006/02/16 <a href="http://archives.miloush.net/michkap/archive/2006/02/16/533226.html">Ignoring a problem does not make it go away....</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/02/16/533226.html" title="Ignoring a problem does not make it go away....">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/02/15/531653.html" title="Mixing MLang and Uniscribe">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-02">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-02-15">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/02/15/532394.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
</html>