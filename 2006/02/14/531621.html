<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/02/14/531621.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>A Read-Only, Modified CultureInfo?</title></head><body>
<h1>A Read-Only, Modified CultureInfo?</h1>
<p><em>by Michael S. Kaplan, published on 2006/02/14 03:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/02/14/531621.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Elliot asked:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman" size=2><EM>Apologies if this is the wrong alias for this question or if this question has been asked before.&nbsp; I’m running into some strange behavior and I’m trying to figure out if I’m doing something wrong, if this is by design, or if there may be some other problem.&nbsp; I find that when I call the ReadOnly() method on a CultureInfo object it resets the ShortDatePattern of the internal DateTimeFormatInfo object to “M/d/yyyy” even if I’ve set it differently.&nbsp; So, for example:&nbsp;</EM></FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Courier New" size=2><STRONG>CultureInfo ci = new CultureInfo("en-US");<BR>ci.DateTimeFormat.ShortDatePattern = "yyyy/MM/dd";<BR>ci = CultureInfo.ReadOnly(ci);</STRONG></FONT></P>
<P><FONT face="Courier New" color=#008000 size=2><STRONG>// ci.DateTimeFormat.ShortDatePattern is now "M/d/yyyy"</STRONG></FONT></P></BLOCKQUOTE>
<P><FONT face="Times New Roman" size=2><EM>I can’t figure out why this is happening.&nbsp; I could understand if when making the CultureInfo read only the CultureInfo confirms that the various string patterns are valid and changes them to defaults if they’re not, but "yyyy/MM/dd" seems like a valid ShortDatePattern.&nbsp; Anyone know what’s going on here?</EM></P></BLOCKQUOTE></FONT>
<P><FONT face=Tahoma>The issue Elliot is hitting is a side effect of the way that the static method </FONT><FONT face=Tahoma><A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfSystemGlobalizationCultureInfoClassReadOnlyTopic.asp">CultureInfo.ReadOnly</A> is implemented. You see, it is not making an entirely shallow copy since it is asking for (for example) read-only instances of the child <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcultureinfoclassdatetimeformattopic.asp">CultureInfo.DateTimeFormat</A>&nbsp;and <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcultureinfoclassnumberformattopic.asp">CultureInfo.NumberFormat</A> objects via their respective static&nbsp;<A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationdatetimeformatinfoclassreadonlytopic.asp">DateTimeFormatInfo.ReadOnly</A> and <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationnumberformatinfoclassreadonlytopic.asp">NumberFormatInfo.ReadOnly</A> methods.</FONT></P>
<P><FONT face=Tahoma>But, contrary to Elliot's hopes, it is not making a deep copy of those child objects&nbsp;or&nbsp;their&nbsp;properties, either.</FONT></P>
<P><FONT face=Tahoma>I guess you could say that it is making a semi-shallow copy? :-)</FONT></P>
<P><FONT face=Tahoma>There is not really a "deep copy" method other than manually setting all of the properties that are customized... and there is no way to make such </FONT><FONT face=Tahoma>an object </FONT><FONT face=Tahoma>read-only, once you do it.</FONT></P>
<P><FONT face=Tahoma>Unless you count creating a read-only object that is based on the&nbsp;culture that&nbsp;goes with the default user locale on Windows and you are allowing user overrides. Beyond that, you are on your own....</FONT></P>
<P><FONT face=Tahoma>Well, that is other than creating a custom culture, which you can then instantiate as a read-only object. Though I must admit that feels a bit like overkill to me (and not always practical).</FONT></P>
<P><FONT face=Tahoma>But the notion of overriding and then marking a culture read-only does seem to violate the real intent of the CultureInfo class, which is provide expected cultural preferences <EM>except</EM> in those scenarios when you might be providing a custom culture overriding properties that you have good reason to override....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> "<FONT face="Mongolian Baiti" size=6>᠘</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/1818">U+1818</A>, MONGOLIAN DIGIT EIGHT)</EM></FONT></P>
<hr/><p><a id="531643" href="#531643">#</a> <strong>anbuPhoenix</strong> on 14 Feb 2006 3:27 AM:</p><div style="margin-left: 1em">No Comments as of now</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/02/15/531653.html" title="Mixing MLang and Uniscribe">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/02/14/531572.html" title="Every character has a story #18: U+06cc and U+064a (ARABIC LETTER FARSI YEH and ARABIC LETTER YEH)">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-02">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-02-14">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/02/14/531621.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
</html>