<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/08/18/706383.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Sometimes, uppercasing sucks</title></head><body>
<h1>Sometimes, uppercasing sucks</h1>
<p><em>by Michael S. Kaplan, published on 2006/08/18 15:04 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/08/18/706383.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<FONT face=Tahoma>
<P>Case differences in casing scripts (Latin, Cyrillic, Greek, Armenian, Ecclesastical Georgian, Coptic, Glagolitic, etc.) ought to be easy.</P>
<P>But it's not. And not just for the reasons I have talked about <A href="http://archives.miloush.net/michkap/search.aspx?q=casing&amp;p=1"><STRONG>in the past</STRONG></A>.</P>
<P>All the technical folks want is a simple set of mappings that have a 100% roundtripping capability and no change in size of the string. It is needed for the filesystem, for the NT object namespace, and so on.</P>
<P>But their hopes must unfortunately be dashed if those technical folks wanted their simple needs to match the needs of customers, since individual languages have their own specific preferences and expectations here. </P>
<P>Only some of which are supported by Windows or the .NET Framework. And dare I say it, most of them are not supported.</P>
<P>A great example of this can be seen in Greek, which has so many different traditions across it's history from ancient to modern times that we are lucky to have sites like <A href="http://www.tlg.uci.edu/~opoudjis/unicode/unicode.html">this one</A> to try and wade through the&nbsp;issues, which go way beyond the Greek final sigma issue I have talked about <STRONG><A href="http://archives.miloush.net/michkap/archive/2005/03/31/404052.html">previously</A></STRONG>.</P>
<P>Starting with ancient Greek, there are three different preferences that call for three entirely different conventions for case mapping, as described <A href="http://www.tlg.uci.edu/~opoudjis/unicode/unicode_adscript.html#clash">here</A>:</P>
<OL>
<LI><FONT size=2>The first approach (<STRONG>capital subscript</STRONG>) is to treat uppercase as equivalent to lowercase: if a mute iota is tucked underneath a lowercase vowel, it should also be tucked underneath an uppercase vowel. This is what the mediaeval scribes did, and it turns up both in pre-Modern Western typography of Classical Greek, and in Modern Greek typography—particularly that associated with the Church. </FONT>
<LI><FONT size=2>The second approach (<STRONG>capital adscript</STRONG>) is to take capitals—and all caps text in particular—as equivalent to Ancient Greek text, which after all didn't have any lower case. In Ancient Greek writing, /oːi/ was written in capitals, as ΩΙ. So in a modern all caps text, the thinking goes, the same should be done: the capital version of ῳ is ΩΙ. This is seen sometimes in the west. In that case, the iota is no longer subscript/<EM>ypogegrammeni</EM> (written underneath the letter), but adscript/<EM>prosgegrammeni</EM> (written next to the letter). </FONT>
<LI><FONT size=2>The third approach (<STRONG>small adscript</STRONG>) is a compromise: the capital version of the iota subscript is adscript, written next to the letter, but not as a full-sized capital iota. It appears either as a lowercase iota (full-sized or smaller than normal), or as a small-caps iota. This is usual practice in the West, and frequent outside the Church in Greece as well. </FONT></LI></OL>
<P>And then moving in to modern times, the debate about the (currently out of favor but still taught and used) <A href="http://www.tlg.uci.edu/~opoudjis/unicode/unicode_gkbkgd.html#polytonic">polytonic</A> vs. (currently in favor and highly recommended)&nbsp;<A href="http://www.tlg.uci.edu/~opoudjis/unicode/unicode_gkbkgd.html#monotonic">monotonic</A> systems. And case is where it gets interesting for us, as described <A href="http://www.tlg.uci.edu/~opoudjis/unicode/unicode_gkbkgd.html#titlecase">here</A>:</P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT size=2>Greek differs from Latin in that it capitalises letters with diacritics differently, depending on whether the entire word is in capitals (whereupon diacritics are eliminated), or the initial is capitalised only, as in the first word in a sentence or in a title (whereupon the diacritics are retained, although they appear to the left of the letter rather than above it.) Thus, polytonic <FONT face="Palatino Linotype">ἄνθρωπος</FONT> capitalises to <FONT face="Palatino Linotype">ΑΝΘΡΩΠΟΣ</FONT>, but in <STRONG>titlecase</STRONG> to <FONT face="Palatino Linotype">Ἄνθρωπος</FONT>; monotonic <FONT face="Palatino Linotype">άνθρωπος</FONT> capitalises to <FONT face="Palatino Linotype">ΑΝΘΡΩΠΟΣ</FONT> and <FONT face="Palatino Linotype">Άνθρωπος</FONT>. </FONT></P></BLOCKQUOTE>
<P>even without the roundtripping requirement, it is clearly hard to decide what the default behavior should be.</P>
<P>And&nbsp;how do you balance the legitimate and illegetimate needs of roundtrip-ability with the needs of a script that wants a convention to drop the accents upon capitalization (thus losing them forever since you can't exactly get them back)?</P>
<P>The answer, just like it was in the post <STRONG><A href="http://archives.miloush.net/michkap/archive/2005/03/04/384927.html">"Michael, why does ToTitleCase suck so much?"</A></STRONG>, is not very well. Of course the practices for ancient texts are by and large completely ignored, but the default case mappings in modern practice don't really match the Greek expectation of dropping the accent, either.</P>
<P>Perhaps a simple example would help. :-)</P>
<P>Take the word <STRONG>Ρύθμιση</STRONG> (Regulation)&nbsp;The code points are:</P>
<P><A href="http://www.fileformat.info/info/unicode/char/03a1">03a1</A> <A href="http://www.fileformat.info/info/unicode/char/03cd">03cd</A> <A href="http://www.fileformat.info/info/unicode/char/03b8">03b8</A> <A href="http://www.fileformat.info/info/unicode/char/03bc">03bc</A> <A href="http://www.fileformat.info/info/unicode/char/03b9">03b9</A> <A href="http://www.fileformat.info/info/unicode/char/03c3">03c3</A> <A href="http://www.fileformat.info/info/unicode/char/03b7">03b7</A></P>
<P>If you run this through Windows or .NET, it will uppercase to the entirely reversible&nbsp;<STRONG>ΡΎΘΜΙΣΗ</STRONG>, which is:</P>
<P><A href="http://www.fileformat.info/info/unicode/char/03a1">03a1</A> <A href="http://www.fileformat.info/info/unicode/char/038e">038e</A> <A href="http://www.fileformat.info/info/unicode/char/0398">0398</A> <A href="http://www.fileformat.info/info/unicode/char/039c">039c</A> <A href="http://www.fileformat.info/info/unicode/char/0399">0399</A> <A href="http://www.fileformat.info/info/unicode/char/03a3">03a3</A> <A href="http://www.fileformat.info/info/unicode/char/0397">0397</A></P>
<P>But the expectation of people in Greece is more likely to be <STRONG>ΡΥΘΜΙΣΗ</STRONG>, which is</P>
<P><A href="http://www.fileformat.info/info/unicode/char/03a1">03a1</A> <A href="http://www.fileformat.info/info/unicode/char/03a5">03a5</A> <A href="http://www.fileformat.info/info/unicode/char/0398">0398</A> <A href="http://www.fileformat.info/info/unicode/char/039c">039c</A> <A href="http://www.fileformat.info/info/unicode/char/0399">0399</A> <A href="http://www.fileformat.info/info/unicode/char/03a3">03a3</A> <A href="http://www.fileformat.info/info/unicode/char/0397">0397</A></P>
<P>That second character would be expected to lose it's TONOS, so that if you lowercased the uppercased string, you would get back <STRONG>ρυθμιση</STRONG>, not <STRONG>ρύθμιση</STRONG>.</P>
<P>Unless you created a font that would literally&nbsp;display <A href="http://www.fileformat.info/info/unicode/char/038e">U+038e</A> without displaying the Tonos, which would give one the best of both worlds with the only bad part being that confusability of such a solution.</P>
<P>Note that there are no title case mappings to help mitigate this, so ToTitleCase is once again not useful....</P>
<P>And of course this example ignores the even thornier problem with what to do when it is on the first letter, but you get the idea.</P>
<P>The solution for ancient texts is even more elusive, especially given the many differences in user expectations.</P>
<P>This post really just scratches the surface, if you are interested in the area then I highly recommend the links I pointed to, which go into even greater detail on the difficulties involved with Greek.</P>
<P>Now this is an area where potential improvements can be considered in the future, but there are no immediate built-in solutions available. All I can say for now is that it is one's best interests to avoid converting Greek strings to uppercase if one wants to avoid having a bad situation in a localized application....</P>
<P>&nbsp;</P>
<P><FONT color=#ff1493><EM>This post brought to you by</EM> <FONT size=6>ύ</FONT> <EM>(<A href="http://www.fileformat.info/info/unicode/char/03cd">U+03cd</A>, a.k.a. GREEK SMALL LETTER UPSILON WITH TONOS)</EM></FONT></P></FONT>
<hr/><p><a id="706630" href="#706630">#</a> <strong>RubenP</strong> on 18 Aug 2006 6:00 PM:</p><div style="margin-left: 1em">Isn't this true for French as well, that uppercasing often removes accents? <br><br>I do know that it's true for the Dutch stress mark: &#233;&#233;n, E&#233;n, &#201;&#201;N (used for een 'one, numeral 1' [e:n]). The stress marks here are used to distinguish it from the indefinite article een [ən] 'a, an'. It's considered bad form to use &#201;&#233;n. Can't think of any Dutch words starting with a 'real' accent though.<br><br>Really, if you ever find a Latin script-based language containing exceptions to just about every rule you can throw at it, it's got to be named Dutch. Capitalisation, accents, hyphenation, collation, word order, heck the Dutch even violate the metric system with their own definition of pounds and ounces (not compatible with the British pounds and ounces, ofcourse). And hardly any Dutchman/woman even notices :-)</div>
<p><a id="706802" href="#706802">#</a> <strong>mlippert</strong> on 18 Aug 2006 8:06 PM:</p><div style="margin-left: 1em">Wow, just when I think I've heard of most of the complexities you go and blow my mind again!<br><br>So what does NTFS do? Given what you've just said I'm guessing that it drops the accents so filenames that display with accents on lowercase letters are equivalent to those without the accents (ie you can't have 2 filenames differing just by the accents on letters).<br><br>Mike<br></div>
<p><a id="706821" href="#706821">#</a> <strong>Michael S. Kaplan</strong> on 18 Aug 2006 8:19 PM:</p><div style="margin-left: 1em">Hi Ruben! <br><br>It is not as true for French as it once was.... I tend to think the rule was there because of the prevailing typewriter practice that simply made them look bad with accents, and now modern typography allows things to still look good and this changed the practice?</div>
<p><a id="706824" href="#706824">#</a> <strong>Michael S. Kaplan</strong> on 18 Aug 2006 8:21 PM:</p><div style="margin-left: 1em">Hi Mike, <br><br>Well, Windows &quot;solves&quot; the problem by not supporting the idea. We need people to specify those names! And they would be quite unhappy if we did not (much moreso than their unhappiness about us not following the typographic practice!)</div>
<p><a id="707216" href="#707216">#</a> <strong>Pavanaja UB</strong> on 19 Aug 2006 2:44 AM:</p><div style="margin-left: 1em">We, the Indic community, have no case to worry about. There is no case in Indic. JK...<br><br>Regards,<br>Pavanaja</div>
<p><a id="707682" href="#707682">#</a> <strong>Michael S. Kaplan</strong> on 19 Aug 2006 11:18 AM:</p><div style="margin-left: 1em">Ah, that may be true. But then we don't have to worry about chillus, so I think it all evens out in the end.... <BR><BR>:-)</div>
<p><a id="707857" href="#707857">#</a> <strong>RubenP</strong> on 19 Aug 2006 2:46 PM:</p><div style="margin-left: 1em">Michael,<br><br>I guessed as much for French. In French the accents are so much more 'out there', it seems like it's a bad idea to drop them in the first place. In Dutch they're mostly there for resolving occasional ambiguity (such as the two 'een's) and stress.<br><br>[Often, you don't need things like italics to put emphasis on a word in Dutch; adding stress marks on the principal syllable is enough. Unfortunately, italics are easier to access than accents on most Dutch configurations. Using an actual stress mark beats the use of things like *this* :-)]<br><br>The Dutch example for E&#233;n probably has the same origin. Though it's odd that people still insist on E&#233;n rather than &#201;&#233;n. But I guess you get used to it, and the exception becomes the only acceptable thing to see.</div>
<p><a id="709614" href="#709614">#</a> <strong>Mike Dimmick</strong> on 20 Aug 2006 3:38 PM:</p><div style="margin-left: 1em">That really makes the 'why don't we get rid of the Caps Lock' key thing (which I saw here: <a rel="nofollow" target="_new" href="http://www.edbott.com/weblog/?p=1438">http://www.edbott.com/weblog/?p=1438</a>) seem very parochial. One commenter notes that on the French keyboard layout (paraphrasing), it's not so much Caps Lock as Shift Lock.<br><br>Some people suggest using Word's casing rules to get a title in capitals - either pressing Shift+F3 to rotate between lower case, Title Case and UPPER CASE, or using the All Caps font 'effect'. Can we rely on Word to do the Right Thing here? Does it depend on the setting of the selected language?</div>
<p><a id="709616" href="#709616">#</a> <strong>Michael S. Kaplan</strong> on 20 Aug 2006 3:43 PM:</p><div style="margin-left: 1em">Well, Unicode's rules do not handle most of this, asnd currently Word's doesn't handle most of it, either. We simply aren't there yet in terms of all of the language rules being built in....</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/09/29 <a href="http://archives.miloush.net/michkap/archive/2008/09/29/8968429.html">The difference between Six Sigma and Sigma Diaresis is one must never fail; the other seems to do so by default</a></p><p>2006/09/14 <a href="http://archives.miloush.net/michkap/archive/2006/09/14/754652.html">Not just uppercasing or italicizing; bolding can cause problems too!</a></p><p>2006/08/30 <a href="http://archives.miloush.net/michkap/archive/2006/08/30/731033.html">If you wanted to get it done with the font...</a></p><p>2006/08/22 <a href="http://archives.miloush.net/michkap/archive/2006/08/22/708503.html">A localizability problem is an application bug, or alternately: Ρύθμιση σήματος</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/08/19/706950.html" title="What the hell is up with Timor-Leste?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/08/18/706063.html" title="Creation of transliterating input methods">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-08">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-08-18">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/08/18/706383.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>