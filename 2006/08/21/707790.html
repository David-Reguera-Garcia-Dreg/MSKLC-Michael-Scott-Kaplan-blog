<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/08/21/707790.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Decimal vs. hexadecimal LCIDs, backcompat, and being weird</title></head><body>
<h1>Decimal vs. hexadecimal LCIDs, backcompat, and being weird</h1>
<p><em>by Michael S. Kaplan, published on 2006/08/21 06:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/08/21/707790.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>The other day, developer Jamie Laflen had a question which VSTS International Program Manager <A href="http://blogs.msdn.com/team_foundation/archive/2005/05/09/415838.aspx">Aldo Donetti</A> forwarded on to me: </P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px"><FONT face="Times New Roman" size=2>
<P>I have a test that enumerates all collations in SqlServer and verifies that the string generator can, well, generate strings for each of them.</P>
<P>I hit a weird case for collation:<BR>Georgian_Modern_Sort_BIN<BR><BR>When I run the following:<BR><BR><FONT face="Consolas,Courier New"><STRONG>&nbsp;&nbsp;&nbsp; declare @collation as varchar(60)<BR>&nbsp;&nbsp;&nbsp; select @collation = 'Georgian_Modern_Sort_BIN'<BR>&nbsp;&nbsp;&nbsp; SELECT COLLATIONPROPERTY( @collation, 'LCID')</STRONG></FONT><BR><BR>It returns 66615 for the LCID.<BR><BR>If I then call CultureInfo.GetCulture(66615) it returns a culture "ka-GE."&nbsp; If I then call CultureInfo.GetCulture( "ka-GE" ) it returns a CultureInfo with the LCID == 1079<BR><BR>This is pretty weird.<BR><BR>I did find that the TextInfo object for both CultureInfo instances has its LCID property equal to 1079 (i.e. culture.TextInfo.LCID).&nbsp; For the time being, I changed the code to use the property TextInfo.LCID, but it would be good to understand what is going on here.<BR><BR>Does this make sense?&nbsp; Any ideas?<BR><BR>Jamie</P></FONT></BLOCKQUOTE>
<P>Aldo agreed, saying: </P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT size=2>Weird, but I suspect Michael will have an explanation for it. 66615 was already mentioned as the LCID for Georgian in his article on SQL2k Intl. features (now offline but can be downloaded <A href="http://download.microsoft.com/download/3/9/2/392c8f75-0664-472d-a966-2d1c6c54f26f/IntSS2K.doc">here</A>) so it’s nothing new, but in <A href="http://www.microsoft.com/globaldev/reference/lcid-all.mspx">this</A> page it’s not listed.<BR><BR></FONT><FONT size=2>I’d agree with your action of using the LCID from the CultureInfo object but I’m very curious to know what 66615 is …</FONT></P></BLOCKQUOTE>
<P>Once again, the <STRONG><A href="http://archives.miloush.net/michkap/archive/2005/03/02/383458.html">SQL Server/DevDiv preference for decimal LCIDs</A></STRONG> affects developer productivity! :-)</P>
<P>If you&nbsp;look at the hexadecimal numbers, 1079 and 66615 become 0x0437 and 0x10437, the Traditional and Modern Georgian sorts that I have discussed <STRONG><A href="http://archives.miloush.net/michkap/archive/2006/03/12/549951.html">previously</A></STRONG>....</P>
<P>In .NET 2.0, you can try using <A href="http://msdn2.microsoft.com/en-us/library/system.globalization.compareinfo.lcid.aspx">CultureInfo.CompareInfo.LCID</A> and&nbsp;<A href="http://msdn2.microsoft.com/en-us/library/system.globalization.compareinfo.name.aspx">CultureInfo.CompareInfo.Name</A> to get back the <STRONG>0x10437</STRONG> and <STRONG>ka-GE_modern</STRONG> that you would want here if getting back the right identifier was important. Although <A href="http://msdn2.microsoft.com/en-us/library/system.globalization.cultureinfo.lcid.aspx">CultureInfo.LCID</A> will also return <STRONG>0x10437</STRONG>, <A href="http://msdn2.microsoft.com/en-us/library/system.globalization.cultureinfo.name.aspx">CultureInfo.Name</A> has to return <STRONG>ka-GE</STRONG> for backward compatibility with prior versions of the .NET Framework (and believe me when I tell you this unusual compromise that came out of the argument of LCID/name consistency vs. cross-version consistency was <STRONG>hotly</STRONG> debated at the time!).</P>
<P>The fact that all of this came up in a Unicode only locale (Georgian) in a unit test involving a SQL Server _BIN (binary) sort which means that there is no actual sorting or code page difference of consequence in this sort and that all results will be identical to the Latin1_General_BIN results is of course a separate a point that is interesting to me for the same reason that people discussing the <STRONG><A href="http://archives.miloush.net/michkap/archive/2005/11/30/498183.html">difference between German, Dutch, and English sorting on Windows</A></STRONG> is.</P>
<P>Ah, the irony of discussing a difference that makes no difference.&nbsp;:-)</P>
<P>On an unrelated note, Aldo has a point here, which I will take to its logical conclusion. The fact that this is the sort of question that I know the answer to is something that I think makes <STRONG>me</STRONG> weird, too!</P>
<P>&nbsp;</P>
<P><FONT color=#ff1493><EM>This post brought to you by</EM> <FONT size=6><STRONG>ჴ</STRONG></FONT> <EM>(<A href="http://www.fileformat.info/info/unicode/char/10f4">U+10f4</A>, a.k.a. GEORGIAN LETTER HAR)</EM></FONT></P>
<hr/><p><a id="710662" href="#710662">#</a> <strong>win.sight</strong> on 21 Aug 2006 7:51 AM:</p><div style="margin-left: 1em">Hey, I want to know whether Vista will ship with Unicode 5.0. From what I've heard, it wont.</div>
<p><a id="710673" href="#710673">#</a> <strong>Michael S. Kaplan</strong> on 21 Aug 2006 8:02 AM:</p><div style="margin-left: 1em">Hmmm.... seems pretty offtopic here. Why not try the Suggeston Box?</div>
<p><a id="710907" href="#710907">#</a> <strong>Aldo Donetti</strong> on 21 Aug 2006 12:39 PM:</p><div style="margin-left: 1em">Not sure *that* is where I was going with my comments ... ;-)
<br>But your long time experience in the field makes it almost a certainty that you would know the answer to any (even weird) question - thanks!
<br>Aldo</div>
<p><a id="711456" href="#711456">#</a> <strong>Dean Harding</strong> on 21 Aug 2006 7:57 PM:</p><div style="margin-left: 1em">xpclient: Michael has answered this question already: <a rel="nofollow" target="_new" href="http://archives.miloush.net/michkap/archive/2005/12/23/506887.html">http://blogs.msdn.com/michkap/archive/2005/12/23/506887.aspx</a>
<br>
<br>Actually looking over that old post reminds of this hilarious quote from the latest Pink Panther movie (which I watched on a plane, and was otherwise rather uninspired). It was at a press conference, and a member of the press was asking a question:
<br>
<br>Press: Do you think the killer was a man or a woman?
<br>Clouseau: Well of course it was! What do you think it was, a kitten?
<br>
<br>How's THAT for off-topic :p~</div>
<p><a id="711555" href="#711555">#</a> <strong>Maurits [MSFT]</strong> on 21 Aug 2006 9:42 PM:</p><div style="margin-left: 1em">s/hexidecimal/hexadecimal/</div>
<p><a id="711628" href="#711628">#</a> <strong>Michael S. Kaplan</strong> on 21 Aug 2006 10:57 PM:</p><div style="margin-left: 1em">Hmmm, I can't find any examples that are broken, I guess that must be a typo in the comment? <BR><BR>j/k :-)</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2011/10/21 <a href="http://archives.miloush.net/michkap/archive/2011/10/21/10228635.html">Yet another time they messed up. Respectfully.</a></p><p>2006/09/06 <a href="http://archives.miloush.net/michkap/archive/2006/09/06/742073.html">IsSortable() == false? Well, sometimes it may be lying....</a></p><p>2006/08/26 <a href="http://archives.miloush.net/michkap/archive/2006/08/26/712848.html">The myth of cross-product compatibility</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/08/21/707828.html" title="I missed a &#39;case&#39; pun....">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/08/20/707726.html" title="Avrupalılaştıramadıklarımızdanmışsınızcasına">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-08">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-08-21">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/08/21/707790.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>