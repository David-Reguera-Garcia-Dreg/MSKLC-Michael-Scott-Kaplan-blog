<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/06/16/634124.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Neither GDI nor Uniscribe solve the ultimate font problem completely, either</title></head><body>
<h1>Neither GDI nor Uniscribe solve the ultimate font problem completely, either</h1>
<p><em>by Michael S. Kaplan, published on 2006/06/16 10:35 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/06/16/634124.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>I have not been shy about criticizing stuff provided by the Windows Shell <A href="http://archives.miloush.net/michkap/archive/2005/07/15/439395.html"><STRONG>in</STRONG></A> <A href="http://archives.miloush.net/michkap/archive/2005/05/08/415522.html"><STRONG>the</STRONG></A> <A href="http://archives.miloush.net/michkap/archive/2005/06/21/431062.html"><STRONG>past</STRONG></A>, but it is not entirely fair to put the burden of logical fonts upon them like I did in <A href="http://archives.miloush.net/michkap/archive/2006/06/11/626100.html"><STRONG>this post</STRONG></A> and <A href="http://archives.miloush.net/michkap/archive/2006/06/12/627185.html"><STRONG>this one</STRONG></A> a few days ago. I mean, stuff like DEFAULT_GUI_FONT actually comes out of GDI technically, and even though I have been referring to logical fonts as "<STRONG>the Shell solution</STRONG>" it would probably be more accurate to refer to them at this point as "<STRONG>the former UI solution provided to the Shell</STRONG>".</FONT></P>
<P><FONT face=Tahoma>But as I pointed out in those two posts, the logical fonts make up a bizarre edge case that is only even possibly relevant to the Shell which has some serious implementation flaws and which is not used consistently even in the cases where the flaws have no negative impact.</FONT></P>
<P><FONT face=Tahoma>So if the simple&nbsp;scenario's solution&nbsp;was not implemented or used effectively, how about the more complex scenario of supporting any supported language in any control? Is there any hope that this will work?</FONT></P>
<P><FONT face=Tahoma>And the answer is that for the most part it does!</FONT></P>
<P><FONT face=Tahoma>In the world of GDI and Uniscribe, this is handled mostly within the realm of font&nbsp;linking and font fallback, which I have discussed <A href="http://archives.miloush.net/michkap/archive/2005/10/01/476022.html"><STRONG>previously</STRONG></A>. And while it is true that the line between when each is used has become much more <A href="http://archives.miloush.net/michkap/archive/2005/10/18/481654.html"><STRONG>blurred</STRONG></A> <A href="http://archives.miloush.net/michkap/archive/2006/05/31/611340.html"><STRONG>lately</STRONG></A> (not to mention the further blurring caused by the fact that supplementary characters are treated as "complex" and handled via Uniscribe rather than GDI as well!), the truth is that usually one only notices the difference between them in two cases:</FONT></P>
<UL>
<LI><FONT face=Tahoma>In corner cases like the Latin script where sometimes text is treated as if it is complex while other times it is not, the inconsistency is hard to miss;</FONT></LI>
<LI><FONT face=Tahoma>GDI does a more effective job of scaling fonts and their sizes when it needs to move between different fonts than Uniscribe does (especially noticable in Vista to work with the new CJK fonts!).</FONT></LI></UL>
<P><FONT face=Tahoma>For the second point -- to be fair to Uniscribe and its logic, the job it is tasked with is much more difficult -- scaling between two different CJK fonts is always going to be fundamentally easier than scaling between fonts handling two scripts (like e.g.&nbsp;<STRONG>Cyrillic</STRONG> and <STRONG>Tibetan</STRONG>) that can have such different typographical&nbsp;attributes like&nbsp;baseline and charcter height.</FONT></P>
<P><FONT face=Tahoma>Even within a single font like Tahoma, the mixing of scripts like Latin, Hebrew, Arabic,&nbsp;and Thai can lead to so many bizarre scaling issues that making them all look&nbsp;consistent next to each other:</FONT></P>
<P><FONT face=Tahoma size=6>Latin&nbsp;&nbsp;&nbsp;עברית&nbsp;&nbsp;&nbsp;العربية&nbsp;&nbsp;&nbsp;&nbsp;ภาษาไทย</FONT></P>
<P><FONT face=Tahoma>can make people who use a script feel like the rules about font size and shape cause their script to be distorted in the name of cross-script consistency. This is in fact one of the reasons that people look&nbsp;oddly at&nbsp;for example the Arabic script in Tahoma versus Microsoft Sans Serif versus Times New Roman:</FONT></P>
<P><FONT size=6><FONT face=Tahoma>العربية&nbsp;&nbsp;&nbsp;<FONT face="Microsoft Sans Serif">العربية&nbsp;&nbsp;&nbsp;</FONT></FONT>العربية</FONT></P>
<P><FONT face=Tahoma>Which is nothing compared to the issue of (e.g.) Latin vs. Tibetan, where the choice seems to be either illegible Tibetan or way too big Latin, or</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Lucida Console" size=2>People's Republic of China ཀྲུང་ཧྭ་མི་དམངས་སྤྱི་མཐུན་རྒྱལ་ཁབ།</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>versus</FONT></P></FONT>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Lucida Console" size=6>People's Republic of China ཀྲུང་ཧྭ་མི་དམངས་སྤྱི་མཐུན་རྒྱལ་ཁབ།</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>This example will of course only be meaningful if you have support for Tibetan on your machine, so here are some screenshots in Vista:</FONT></P>
<P><IMG src="http://trigeminal.fmsinc.com/images/EnglishTibetan.jpg"></P>
<P><FONT face=Tahoma>versus:</FONT></P>
<P><IMG src="http://trigeminal.fmsinc.com/images/TibetanEnglish.jpg"></P>
<P><FONT face=Tahoma>So where does it end?</FONT></P>
<P><FONT face=Tahoma>(In that screenshot, the difference is between Lucida Console size 10 versus size 18!)</FONT></P>
<P><FONT face=Tahoma>Well, clearly some more work to scale between scripts automatically is needed when&nbsp;one crosses font boundaries. And rather than having to memorize a set of rules about the minimum acceptable and preferred sizes for scripts in different fonts, having some built-in work for a developer to use ONE size that would mean "appropriate size for the script" would definitely be prefetred.</FONT></P>
<P><FONT face=Tahoma>Attempts at solutions here like the <STRONG>Microsoft Word 2003 three font name/size settings</STRONG> solution have some pretty significant limitations:</FONT></P>
<P><FONT face=Tahoma><IMG src="http://trigeminal.fmsinc.com/images/WordFontDialog.jpg"></FONT></P>
<P><FONT face=Tahoma>Not the least of which is the real differences between the scaling of all of the different complex scripts!</FONT></P>
<P><FONT face=Tahoma>We finally start to get to the area of resizable dialogs that everyone has wanted to get into so much -- although note that this does nothing for the real problems here of what should the size actually <STRONG>be</STRONG>, not to mention the fact that the only real problem that is solved by autolayout in this context is avoiding clipping, which is really only a problem that is at its most seriousness in cases where the font may well be in part way to freaking big!</FONT></P>
<P><FONT face=Tahoma>Let's add to that the problem that in controls for user input, one cannot dynamically change all the characteristsics of a dialog based arbitrarily on what a user types. Thus for the generic problem we are talking about here, autolayout will not really solve any of the real problems that we face....</FONT></P>
<P><FONT face=Tahoma>Now there is already, even ignoring different languages, real complexities in font size as&nbsp;defined in a <A href="http://msdn.microsoft.com/library/en-us/gdi/fontext_1wmq.asp">LOGFONT</A> (as I <A href="http://archives.miloush.net/michkap/archive/2006/04/24/581700.html"><STRONG>discussed previously</STRONG></A>). So it is very possible that&nbsp;anyone who suggests&nbsp;that&nbsp;single special way to create a&nbsp;font&nbsp;that would not force a developer to keep track of the complex size issues&nbsp;will be summarily shot at sunrise (or fired?), but maybe that is what is needed here -- if Uniscribe can keep track of all of the sophisticated rules related to changing the font NAME based on the script then perhaps it can as its next challenge take up the changing of the font SIZE so that it can happen just as automatically.</FONT></P>
<P><FONT face=Tahoma>Or maybe something like what is in WPF (a.k.a. Windows Presentation Foundation, a.k.a.&nbsp;Avalon) is needed. This is the topic of&nbsp;a future&nbsp;post in this series, coming soon.....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> <FONT size=8><STRONG>ང</STRONG></FONT> <EM>(<A href="http://www.fileformat.info/info/unicode/char/0f44">U+0f44</A>, a.k.a. TIBETAN LETTER NGA)</EM></FONT></P>
<hr/><p><a id="638824" href="#638824">#</a> <strong>Adam</strong> on 20 Jun 2006 4:35 AM:</p><div style="margin-left: 1em">OK - so why are some fonts so much smaller than others at the same &quot;size&quot;?<br><br>With the &quot;The People's Republic of China&quot; shots that you have, the Tibetian font appears to fit most of the body each glyph inside half the x-height, ascenders into the whole x-height, and not using at all the space between the x-height and the ascent of the Latin font.<br><br>I'd always figured that all fonts of a given size /should/ have the same ascent. (Or possibly x-height instead) From the Tibetian font, is this not the case? Or does it have some glyphs that have &quot;super-ascenders&quot; that need more space, requiring the rest of the font to be shrunk?<br><br>(Semi-OT, is it possible for individual glyphs to draw outside the font's body size?)<br></div>
<p><a id="639415" href="#639415">#</a> <strong>Michael S. Kaplan</strong> on 20 Jun 2006 9:30 AM:</p><div style="margin-left: 1em">Hi Adam, <br><br>The problem here specifically in the Tibetan case is that those are not single letters -- they are multiple letters stacked. Height becomes a very interesting thing when it involves some of the same features as width in relation to word progression!<br><br>But in the general case, there is no specific scaling rule related to how fonts that requires a specific size to fit characters within; these issues are within the decision making of the typographer.<br><br>Now Tahoms is a good exasmple of a font that tried to scale everything across scripts, but masny people feel that this was done at the cost of the quality of some of them. If a task is impossible within fonts, how can it work between fonts? &nbsp;:-)</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/06/16/634291.html" title="Microsoft *does* support OpenType!">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/06/15/632765.html" title="Hindu != Hindi">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-06">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-06-16">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/06/16/634124.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>