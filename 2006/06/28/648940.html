<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/06/28/648940.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Every character has a story #21: U+0f77 U+0f79 (TIBETAN VOWEL SIGN VOCALIC [RR|LL])</title></head><body>
<h1>Every character has a story #21: U+0f77 U+0f79 (TIBETAN VOWEL SIGN VOCALIC [RR|LL])</h1>
<p><em>by Michael S. Kaplan, published on 2006/06/28 03:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/06/28/648940.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Peter Constable asked some Unicode folks: </FONT></P><FONT face=Tahoma>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<DIV class=Section1>
<P><FONT size=2><FONT face="Times New Roman">I’m just curious to know why 0f77 and 0f79 were given compatibility decompositions rather than canonical decompositions? (I don’t see any obvious reason why canonical decompositions would not have been feasible.)<BR><BR>(Yes, I know this can’t be changed – that’s not my objective.)<BR><BR>Peter Constable<?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" /><o:p></o:p></FONT></FONT></P></DIV></BLOCKQUOTE></FONT>
<P><FONT face=Tahoma>And Ken Whistler stepped up with a good historical look at these two characters (which in my humble opinion deserves a more permanent location for others to see!):</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman" size=2><FONT face="Consolas,Courier New"><STRONG>0F71;TIBETAN VOWEL SIGN AA;Mn;129;NSM;;;;;N;;;;;<BR><BR>0F76;TIBETAN VOWEL SIGN VOCALIC R;Mn;0;NSM;0FB2 0F80;;;;N;;;;;<BR>0F77;TIBETAN VOWEL SIGN VOCALIC RR;Mn;0;NSM;&lt;compat&gt; 0FB2 0F81;;;;N;;;;;<BR>0F78;TIBETAN VOWEL SIGN VOCALIC L;Mn;0;NSM;0FB3 0F80;;;;N;;;;;<BR>0F79;TIBETAN VOWEL SIGN VOCALIC LL;Mn;0;NSM;&lt;compat&gt; 0FB3 0F81;;;;N;;;;;<BR>0F80;TIBETAN VOWEL SIGN REVERSED I;Mn;130;NSM;;;;;N;;;;;<BR>0F81;TIBETAN VOWEL SIGN REVERSED II;Mn;0;NSM;0F71 0F80;;;;N;;;;;<BR><BR>0FB2;TIBETAN SUBJOINED LETTER RA;Mn;0;NSM;;;;;N;;*;;;<BR>0FB3;TIBETAN SUBJOINED LETTER LA;Mn;0;NSM;;;;;N;;;;;<BR></STRONG></FONT><BR>&nbsp; <BR><FONT face="Consolas,Courier New"><STRONG>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NFD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NFC<BR>0F76&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0FB2 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0FB2 0F80<BR>0F77&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F77&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F77&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;-- discouraged (strongly)<BR>0FB2 0F71 0F80&nbsp; 0FB2 0F71 0F80&nbsp; 0FB2 0F71 0F80&nbsp; &lt;-- preferred<BR>0F78&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0FB3 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0FB3 0F80<BR>0F79&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F79&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F79&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;-- discouraged (strongly)<BR>0FB3 0F71 0F80&nbsp; 0FB3 0F71 0F80&nbsp; 0FB3 0F71 0F80&nbsp; &lt;-- preferred<BR>0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F80<BR>0F81&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F71 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F71 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;-- discouraged<BR>0F71 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F71 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F71 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;-- preferred<BR></STRONG></FONT><BR>Note that the preferred forms appear in both NFD and NFC, with the decomposed form for 0F81 resulting from the non-starter exclusion and the decomposed forms for 0F76 and 0F78 resulting from explicit addition to the script-specific composition exclusions.<BR><BR>If you gave 0F77 and 0F79 *canonical* decompositions, then:<BR><BR><FONT face="Consolas,Courier New"><STRONG>0F77 --&gt; &lt;0FB2, 0F81&gt; --&gt; &lt;0FB2, 0F71, 0F80&gt;<BR>&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 129&nbsp;&nbsp; 130<BR>&nbsp; <BR>0F79 --&gt; &lt;0FB3, 0F81&gt; --&gt; &lt;0FB3, 0F71, 0F80&gt;<BR>&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp; 129&nbsp;&nbsp; 130<BR></STRONG></FONT><BR><FONT face="Consolas,Courier New"><STRONG>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NFD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NFC<BR>0F76&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0FB2 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0FB2 0F80<BR>0F77&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0FB2 0F71 0F80&nbsp; ????&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;-- discouraged (strongly)<BR>0FB2 0F71 0F80&nbsp; 0FB2 0F71 0F80&nbsp; 0FB2 0F71 0F80&nbsp; &lt;-- preferred<BR>0F78&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0FB3 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0FB3 0F80<BR>0F79&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0FB3 0F71 0F80&nbsp; ????&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;-- discouraged (strongly)<BR>0FB3 0F71 0F80&nbsp; 0FB3 0F71 0F80&nbsp; 0FB3 0F71 0F80&nbsp; &lt;-- preferred<BR>0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F80<BR>0F81&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F71 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F71 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;-- discouraged<BR>0F71 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F71 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0F71 0F80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;-- preferred<BR></STRONG></FONT><BR>Now you've made your life more difficult and normalization implementations maybe more complex. The decompositions &lt;0FB2, 0F71, 0F80&gt; have to be prevented from recomposing. They won't&nbsp; decompose partwise, because &lt;0F71, 0F80&gt; is blocked from recomposing, and &lt;0FB2, 0F80&gt; is also blocked from recomposing, but the sequence of 3 has, at least in principle, a target it should recompose to, unless blocked. Depending on how you set up your tables, you might or might not get this right, and in any case, you end up introducing the strongly discouraged characters as a source of valid sequences that you have to contend with in NFC and NFD, whereas under the current scheme you don't.<BR><BR>Also, this was all part of a very head-breaking set of problems for Tibetan when decompositions and canonical combining classes were being reviewed for the introduction of normalization in the first place.<BR><BR>In Unicode 2.0, 0F77 and 0F79 *were* given canonical decompositions, but they were *different* decompositions, to wit:<BR><BR><STRONG><FONT face="Consolas,Courier New">0F77 = 0F76 + 0F71 = 0FB2 + 0F80 + 0F71<BR>0F79 = 0F78 + 0F71 = 0FB3 + 0F80 + 0F71<BR></FONT></STRONG><BR>*and* they had funky fixed position class assignments, as well:<BR><BR><STRONG><FONT face="Consolas,Courier New">0F77 = 0F76 + 0F71 = 0FB2 + 0F80 + 0F71&nbsp; (not in canonical order)<BR>&nbsp;135&nbsp;&nbsp;&nbsp; 134&nbsp;&nbsp;&nbsp; 129&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp;&nbsp;&nbsp;&nbsp; 143&nbsp;&nbsp;&nbsp; 129<BR>&nbsp;<BR>0F79 = 0F78 + 0F71 = 0FB3 + 0F80 + 0F71&nbsp; (not in canonical order)<BR>&nbsp;137&nbsp;&nbsp;&nbsp; 136&nbsp;&nbsp;&nbsp; 129&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp;&nbsp;&nbsp;&nbsp; 143&nbsp;&nbsp;&nbsp; 129<BR></FONT></STRONG>&nbsp;<BR>That was clearly hosed, as it broke all kinds of rules that we were trying to establish for normalization, including ensuring that all decomposition mappings produced sequences in canonical order and ensuring, as much as was possible, given the constraints in place, that the resulting sequences would follow the logic of the script *and* that NFC forms would decompose if that was what the users of the script preferred (hence the introduction of script-specific composition exclusions for several scripts, including Tibetan).<BR><BR>During that conversion from Unicode 2.0 to Unicode 3.0 with normalization, the UTC did the best it could with the mess for Tibetan. It was clear after the analysis that 0F77 and 0F79 should never have been encoded at all -- which was why they got those "strongly discouraged" labels -- but there was nothing to do about that mistake at that point. The compatibility decompositions<BR>were the best compromise to keep them from contaminating the normalization processing of the rest of the Tibetan vowels.<BR><BR>--Ken</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>Anyway, like I said, this seemed to me like good historical information to put out there, and certainly to help show that <STRONG>Every character has a story</STRONG>!</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT face="Iskoola Pota" size=8>ཷ</FONT>&nbsp;<EM>and</EM>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT face="Iskoola Pota" size=8>ཹ</FONT> <EM>(<A href="http://www.fileformat.info/info/unicode/char/0f77">U+0f77</A> and <A href="http://www.fileformat.info/info/unicode/char/0f79">U+0f79</A>, a.k.a. TIBETAN VOWEL SIGN VOCALIC RR and TIBETAN VOWEL SIGN VOCALIC LL)</EM></FONT></P>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/06/28/649791.html" title="WYSIWYG font dropdowns">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/06/27/648723.html" title="MSKLC under Vista (or MSKLC under .NET 2.0)">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-06">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-06-28">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/06/28/648940.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>