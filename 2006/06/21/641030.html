<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/06/21/641030.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Give me a break [Char] !</title></head><body>
<h1>Give me a break [Char] !</h1>
<p><em>by Michael S. Kaplan, published on 2006/06/21 03:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/06/21/641030.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Over on the Shell team, Jeff Miller is one of those very cool developers who knows how to get stuff done. And I am not just saying that because he let me fix a bug in the Shell's code (<A href="http://archives.miloush.net/michkap/archive/2005/12/21/506248.html"><STRONG>this bug</STRONG></A>, in fact<FONT size=1><SUP><STRONG>1</STRONG></SUP></FONT>).</FONT></P>
<P><FONT face=Tahoma>Anyway, he sent email to one of the internal aliases asking whether there were actually fonts that specified anything other than <A href="http://www.fileformat.info/info/unicode/char/0020">U+0020</A> for the <FONT face="Consolas,Courier New" size=2><STRONG>tmBreakChar</STRONG></FONT> member of the <A href="http://msdn.microsoft.com/library/en-us/gdi/fontext_7ss2.asp">TEXTMETRIC structure</A>.</FONT></P>
<P><FONT face=Tahoma>It is an interesting question.&nbsp;And it is true that&nbsp;<FONT face="Consolas,Courier New" size=2><STRONG>tmBreakChar</STRONG></FONT> is documented as:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman" size=2>Specifies the value of the character that will be used to define word breaks for text justification.</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>which suggests that per language (or perhaps per script) that any character might be a good candidate, which given the fact that&nbsp;several different language keyboards put different characters on the space bar, might make some sense.&nbsp;Considering especially the <A href="http://archives.miloush.net/michkap/archive/2005/08/06/448751.html"><STRONG>MSKLC limitations on the space bar</STRONG></A> that was affecting Tibtan and still currently affects Khmer and a few other languages and scripts, it seems perfectly reasonable that other characters might be here for other scripts, other languages.</FONT></P>
<P><FONT face=Tahoma>However, the truth is that none of the fonts that Microsoft uses appear to ever return anything other than the ordinary space at <A href="http://www.fileformat.info/info/unicode/char/0020">U+0020</A>. Even if you look at languages which in theory might&nbsp;consider a different character as the best one to use for word breaks, in general this particular member (which Carolyn suggested&nbsp;is most likely&nbsp;coming from the <A href="http://www.microsoft.com/typography/otspec/os2.htm#bc">usBreakChar</A> entry in the <A href="http://www.microsoft.com/typography/otspec/os2.htm"><STRONG>OS/2</STRONG> and Windows Metrics</A> table:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman" size=2>This is the Unicode encoding of the glyph that Windows uses as the break character. The break character is used to separate words and justify text. Most fonts specify 'space' as the break character. This field cannot represent supplementary character values (codepoints greater than 0xFFFF).</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>Looking at the real complexities with complex script handling and how various languages and scripts have to handle word breaking, it is most likely that this particular member is not really used by most TrueType/OpenType implementations. So while it is true that some fonts may be setting it to something else, it does not seem like most fonts do (or that Windows would actually&nbsp;use the infomation if a different character were used!)....</FONT></P>
<P><FONT face=Tahoma>Maybe it is just one of those holdovers in the days before complex scripts but at a time that people were thinking far enough ahead that there might be some other character between words? :-)</FONT></P>
<P><FONT face=Tahoma size=1><EM>1 - If memory serves I asked Jeff just after I had posted that blog entry whether he woud mind if I poached the bug, and he responded with something clever like "Please, poach all you want -- we'll make more!". And he had good feedback during the code review, to boot! :-)</EM></FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> " " <EM>(<A href="http://www.fileformat.info/info/unicode/char/0020">U+0020</A>, a.k.a. SPACE)</EM></FONT></P>
<hr/><p><a id="641702" href="#641702">#</a> <strong>Michael S. Kaplan</strong> on 21 Jun 2006 12:29 PM:</p><div style="margin-left: 1em">A comment was accidentally deleted, someone asking about what CTRL+BACKSPACE was adding in Notepad -- it is U+007f (everyone's favorite backspace control character, of course!)....</div>
<p><a id="643948" href="#643948">#</a> <strong>Gabe</strong> on 23 Jun 2006 4:15 AM:</p><div style="margin-left: 1em">I'm not sure it even makes sense to have this as a characteristic of a font. Shouldn't it be per-language or per-script?</div>
<p><a id="7434218" href="#7434218">#</a> <strong>Andrew West</strong> on 4 Feb 2008 6:29 AM:</p><div style="margin-left: 1em"><p>Googling desperately for a solution to a problem with a font I have just created, I find that all roads lead back to SiaO!</p>
<p>I've just created a font that, for reasons I'd best leave unexplained, has a non-blank glyph for U+0020. My problem is that when I type text using the font in Notepad everything is fine as long as I just type alphabetic letters (a..z, A..Z and space), but as soon as I type any other character (e.g. a comma) my space glyph suddenly appears overlaying the first character on the line. And in Word 2003, my space glyph always appears at the end of every line whatever I type (even blank lines). I guessed that this must be because Windows was displaying my space glyph as the &quot;break character&quot;, but when I changed the value of usBreakChar in the OS/2 table from &quot;32&quot; (i.e. U+0020) to &quot;84&quot; (i.e. U+0054, which is blank in my font ... because &quot;T&quot; is blank) there is no change in behaviour, and the glyph for U+0020 continues to be used for the break character. Which I guess indicates that the actual value of usBreakChar is being ignored, and probably a hard-coded glyph index is being used :-(</p>
<p>The solution which I am going to try this evening is to give U+0020 a blank glyph, and put the space glyph somewhere else; then add in a GSUB table that unconditionally substitutes the blank space glyph with my actual space glyph -- just hope it works.</p>
<p>Or an alternative solution worth trying might be to make glyph id 3 blank but not mapped to U+0020, and instead map U+0020 to a non-blank glyph elsewhere in the font. Either way, it's a bit annoying to have to use hacks to get a non-blank space character.</p></div>
<p><a id="7450479" href="#7450479">#</a> <strong>Andrew West</strong> on 4 Feb 2008 6:30 PM:</p><div style="margin-left: 1em"><p>Just in case anyone is interested, the OpenType solution works (at least with apps that support OpenType features), but my alternative solution does not, as it appears from experimentation that the glyph that is mapped to U+0020 is always used as the break character, whatever its glyph ID, and regardless of the value of usBreakChar.</p></div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/06/21/641988.html" title="Is it on the list?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/06/20/640830.html" title="Maybe it is time to sell the convertible">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-06">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-06-21">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/06/21/641030.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>