<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/06/17/634936.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>64-bit thoughts, and an apology</title></head><body>
<h1>64-bit thoughts, and an apology</h1>
<p><em>by Michael S. Kaplan, published on 2006/06/17 03:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/06/17/634936.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>64-bit is becoming more and more popular.</FONT></P>
<P><FONT face=Tahoma>This I know because not a week goes by that I do not get either an email or a contact link request for information about when the 64-bit version of MSKLC will be available, despite the fact that there are <STRONG><A href="http://archives.miloush.net/michkap/archive/2006/01/26/517728.html">four</A></STRONG> <STRONG><A href="http://archives.miloush.net/michkap/archive/2005/06/17/430391.html">posts</A></STRONG> <STRONG><A href="http://archives.miloush.net/michkap/archive/2005/08/05/448006.html">about</A></STRONG> <STRONG><A href="http://archives.miloush.net/michkap/archive/2005/10/06/477930.html">it</A></STRONG> already! :-)</FONT></P>
<P><FONT face=Tahoma><EM>(Even not having children, I can see the humor in the whole '<STRONG>Are we there yet?</STRONG>' aspects of this!)</EM></FONT></P>
<P><FONT face=Tahoma>I promise the answer to that has not changed -- the importance of 64-bit is a known thing and no one who is doing the feature planning for the next version of MSKLC is unaware of this issue.</FONT></P>
<P><FONT face=Tahoma>But that is not what this post is really about.</FONT></P>
<P><FONT face=Tahoma>This post is about an apology, from me to all of my readers who are developers working in the internationalization space.</FONT></P>
<P><FONT face=Tahoma>About ten months ago, I posted <A href="http://archives.miloush.net/michkap/archive/2005/08/20/454144.html"><STRONG>Mitigation tools for IDN security problems</STRONG></A> here and talked about all of the cool work that went into the <A href="http://www.microsoft.com/downloads/details.aspx?FamilyId=E289BB2C-D111-4331-8FB2-CC6C5A026C93&amp;displaylang=en">Microsoft Internationalized Domain Names (IDN) Mitigation APIs 1.0</A>. And I still believe it is very cool, between all of the things the new functions do and the downlevel normalization support.</FONT></P>
<P><FONT face=Tahoma>But I did not actually install the package; if I had I would have been posting a little more information here that I think is important to communicate to developers....</FONT></P>
<P><FONT face=Tahoma>You see, the <A href="http://www.microsoft.com/downloads/details.aspx?FamilyId=E289BB2C-D111-4331-8FB2-CC6C5A026C93&amp;displaylang=en">download page</A> allows you to install MSIdnAPIsMP.EXE, which when run will create a folder with x32, x64, and ia64 subdirectories (each of which contains the files you would install into the %windir%\System32 directory on the x86, AMD64/ENT64, and IA64&nbsp;target machines, respectively), and some helpful documentation on using the tools in the readme file.</FONT></P>
<P><FONT face=Tahoma>However, what the documentation did not mention, and what I would have&nbsp; (had I installed the package and read the readme file!) is how to handle using the tools from 32-bit applications when running on the 64-bit operating systems.</FONT></P>
<P><FONT face=Tahoma>As I pointed out when I asked <STRONG><A href="http://archives.miloush.net/michkap/archive/2005/05/08/415539.html">Why do we park on a driveway, and drive on a parkway?</A></STRONG>, the special system directory where all of the 32-bit files go on a 64-bit system is actually %windir%\SysWOW64 (though folder redirection makes it look like it is %windir%\System32 to 32-bit programs). So if you want to use the package from 32-bit programs on a 64-bit platform, you have to be sure to place the files in the x32 subdirectory into %windir%\SysWOW64 on the target machine.</FONT></P>
<P><FONT face=Tahoma>A 32-bit program can just place them into %windir%\System32 and let folder redirection put them in the right place, but of course a complex program with both 32-bit and 64-bit components would need to place both sets of files into the appropriate places....</FONT></P>
<P><FONT face=Tahoma>Now of course this may be something you already knew, or you may not have been affected due to the careful way that the redirection happens. Or maybe you don't even use the tools at all. But just in case, I figure it is better to mention the issue than it is to not mention it.</FONT></P>
<P><FONT face=Tahoma>Again, I am sorry about that.</FONT></P>
<P><FONT face=Tahoma>If it of any redeeming value at all, I'll point out that I had indeed tried the functions (in both downlevel and Vista versions!). But even so, I should not have talked about how cool the download was without trying it out to see what else I should have mentioned to be sure that the cool factor would be maintained no matter what.</FONT></P>
<P><FONT face=Tahoma>And the tools are still very cool, either way....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by "Ð°" (<A href="http://www.fileformat.info/info/unicode/char/0430">U+0430</A>, a.k.a. CYRILLIC SMALL LETTER A)</EM></FONT></P>
<hr/><p><a id="636427" href="#636427">#</a> <strong>Dean Harding</strong> on 18 Jun 2006 9:43 PM:</p><div style="margin-left: 1em">Yeah, that's true of any x86/x64 DLLs.<br><br>The funny thing is, I don't know why System32 is still called System32, even though it's full of 64-bit DLLs. Why didn't they just keep System32 for 32-bit DLLs and add a new System64 for 64-bit DLLs?<br><br>It just seems strange that 32-bit DLLs got into SysWOW64 and 64-bit DLLs go into System32...<br><br>Anyway, I guess it doesn't matter. Eventually, everything will be 64-bit and the fact that the &quot;system&quot; directory has &quot;32&quot; on the end will just be an amusing story for Raymond to put in his blog (&quot;Once upon a time, Windows was available on 32-bit platforms...&quot;)</div>
<p><a id="636540" href="#636540">#</a> <strong>md</strong> on 19 Jun 2006 1:13 AM:</p><div style="margin-left: 1em"><EM>The funny thing is, I don't know why System32 is still called System32, even though it's full of 64-bit DLLs.<BR></EM><BR>Backwards compatability. &nbsp;Imagine, as one example, all those batch files which use something like %windir%\system32 thinking there are system binaries in there they might reference. &nbsp;Change that to system64 and migration to 64 bit becomes a lot more expensive for people with legacy code.</div>
<p><a id="647998" href="#647998">#</a> <strong>Vladimir</strong> on 26 Jun 2006 9:34 PM:</p><div style="margin-left: 1em">1. What do you think is the hardest part in implementing MSKLC that can spit out x64 compatible keyboard DLL?<br><br>2. Do you have a link to page where the keyboard DLL APIs are defined. &nbsp;I was able to find kbd.h, but no such luck with the DDK documentation for it.<br><br>Thank you,<br><br>Vladimir</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2006/08/10 <a href="http://archives.miloush.net/michkap/archive/2006/08/10/694593.html">Why are there MODIFIER LETTERS that are not in the Letter, Modifier category?</a></p><p>2006/07/16 <a href="http://archives.miloush.net/michkap/archive/2006/07/16/667622.html">Nobody likes change</a></p><p>2006/07/16 <a href="http://archives.miloush.net/michkap/archive/2006/07/16/667468.html">Update to the mitigation tools for IDN security problems</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/06/17/635012.html" title="On the first day of Microsoft">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/06/16/634291.html" title="Microsoft *does* support OpenType!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-06">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-06-17">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/06/17/634936.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>