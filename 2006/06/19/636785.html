<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/06/19/636785.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Correct? Intuitive? Both? Neither?</title></head><body>
<h1>Correct? Intuitive? Both? Neither?</h1>
<p><em>by Michael S. Kaplan, published on 2006/06/19 09:21 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/06/19/636785.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>It was way back in April of 2005 (in the post <STRONG><A href="http://archives.miloush.net/michkap/archive/2005/04/24/411329.html">Is Whidbey's international support finished?</A></STRONG>) that I pointed out how it would be possible in future versions for the .NET Framework to properly support parsing/formatting of digits used by other locales now that the properties had been added to the .NET Framework.</FONT></P>
<P><FONT face=Tahoma>But if you add to that the issues implied by <A href="http://archives.miloush.net/michkap/archive/2006/06/18/636180.html"><STRONG>The Phantom of the Digits</STRONG></A>, there is a serious potential for such a future version feature to do things in a way that is either non-intuitive or incorrect....</FONT></P>
<P><FONT face=Tahoma>As an example, let's take the Thai digits 0-9 (<STRONG>๐๑๒๓๔๕๖๗๘๙</STRONG>). They can exist independent of locale, or if my default user locale is Thai and my digit substitution setting is 'National' then the ASCII digits (<STRONG>0123456789</STRONG>) will actually appear like <STRONG>๐๑๒๓๔๕๖๗๘๙</STRONG>.</FONT></P>
<P><FONT face=Tahoma>So if one is parsing, should the parse results ignore the culture-specific behavior of the user looking at the data? It would be quite easy to do this (since that is what is in the underlying data anyway).</FONT></P>
<P><FONT face=Tahoma>But turning the question around -- what should formatting do? Should it also ignore the culture-specific behavior?</FONT></P>
<P><FONT face=Tahoma>Now does the answer to either or both of these questions change&nbsp;if the <A href="http://msdn2.microsoft.com/en-us/library/system.iformatprovider.aspx">IFormatProvider</A> is passed and it is a <A href="http://msdn2.microsoft.com/en-us/library/system.globalization.numberformatinfo(VS.80).aspx">NumberFormatInfo</A> of the culture in question? It seems like it may not be entirely intuitive to ignore culture-specific behavior such as the appearance of digits when the cultural info is passed to the methods, whether it is the right behavior or not....</FONT></P>
<P><FONT face=Tahoma>Its seems like there is a rich opportunity to either not be correct or not be intuitive here!</FONT></P>
<P><FONT face=Tahoma>So, what do you think? What is the best behavior here?</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> <STRONG><FONT size=6>๙</FONT></STRONG> <EM>(<A href="http://www.fileformat.info/info/unicode/char/0e59">U+0e59</A>, a.k.a. THAI DIGIT NINE)</EM></FONT></P>
<hr/><p><a id="637021" href="#637021">#</a> <strong>Marc Brooks</strong> on 19 Jun 2006 1:06 PM:</p><div style="margin-left: 1em">The potential for this digit substitution is one of the reasons I'm such a strong advocate for getting things right and using InvariantCulture when emitting non-human-read strings. &nbsp;In the Atlas Control Toolkit, people are STILL getting it wrong and emitting/parsing things like the size of a control using CurrentCulture (usually implicitly).<br><br>If you guys ever do all that cool digit substitution, like you could (maybe should?), then those controls are going to break. Pow.</div>
<p><a id="637199" href="#637199">#</a> <strong>Erno</strong> on 19 Jun 2006 2:43 PM:</p><div style="margin-left: 1em">Michael,<br><br>I have been struggling with something that is quite similar (I think)<br>Take a look a this code:<br><br>DateTime dt = DateTime.Now;<br>CultureInfo ci = new CultureInfo(&quot;he-IL&quot;);<br>string date1 = dt.ToString(&quot;dddd/MMMM/yyyy&quot;, ci);<br>string date2 = ci.DateTimeFormat.MonthNames[new HebrewCalendar().GetMonth(dt)];<br><br>Guess what date1 and date2 contain... Well they didn't do what I suspected (or rather hoped for...)<br><br>And it even gets better when I add:<br><br>ci.DateTimeFormat.Calendar = new HebrewCalendar();<br><br>I am still looking for a way of converting &quot;june 16, 2006&quot; to Sivan 23, 5766<br><br>Why does an instance of a HebrewCalendar return 5766 when I call GetYear(dt) and at the same time returns a Gregorean month index on GetMonth(dt) that is not an index into the Hebrew DateTimeInfoFormat.MonthNames array.<br><br>I wrote my own method to return the Hebrew month names.(even included a calculation that pinpoints the 'exact' sunset for a given latitude and longitude to make the date switch at the right time) but I can't help but think that the .NET framework should do this for me...<br><br>Am I looking in the wrong direction?</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/11/12 <a href="http://archives.miloush.net/michkap/archive/2010/11/12/10088056.html">Suddenly, in a bit more time than a blink of an eye, "standards support" becomes "less i18n support"</a></p><p>2008/10/02 <a href="http://archives.miloush.net/michkap/archive/2008/10/02/8971896.html">When swimming in a sea of CONTEXT, applications can drown (and there is no lifeguard)</a></p><p>2007/02/14 <a href="http://archives.miloush.net/michkap/archive/2007/02/14/1675303.html">Nothing seems to be parsing the crap out of *this* number</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/06/20/640830.html" title="Maybe it is time to sell the convertible">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/06/18/636180.html" title="The Phantom of the Digits">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-06">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-06-19">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/06/19/636785.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>