<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/09/24/769540.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>NTFS and Unicode?</title></head><body>
<h1>NTFS and Unicode?</h1>
<p><em>by Michael S. Kaplan, published on 2006/09/24 15:40 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/09/24/769540.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<FONT face=Tahoma>
<P>A recent question I received via email from a colleague who preferred to remain anonymous on the blog: </P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px"><FONT face="times new roman" size=2>
<P>Hope everything is going well with you first of all...<BR><BR>May I ask for your help on an NTFS technical question? I'm currently involved in some CIFS/NTFS compatibility related issue discussion and wondering what would be the first Windows release that supported UTF-16 and characters of beyond the BMP area?<BR><BR>Based on the <A href="http://en.wikipedia.org/wiki/NTFS">http://en.wikipedia.org/wiki/NTFS</A>, it is Windows 2000 but I'm not quite sure if that's official or really correct.<BR><BR>Would you please let me know if you have the info handy or point me to one of the public documents available at Microsoft web sites? (I was trying to do web search but I wasn't really able to find the info from <A href="http://www.microsoft.com/">www.microsoft.com</A>...)<BR><BR>Thanks very much in advance for your help and hope this isn't a trade secret that I'm asking for...</P></FONT></BLOCKQUOTE>
<P>Well, since as far as I know I don't know any trade secrets about NTFS, we are probably safe on that count, at least! Just to make sure, I'll stick to stuff that anyone can verify themselves if they want.... :-)</P>
<P>Of course there is the info I just put up in <STRONG><A href="http://archives.miloush.net/michkap/archive/2006/09/10/748699.html">this blog post</A></STRONG> for starters,&nbsp;and I'll go a&nbsp;step further and&nbsp;make it clear that you can use high surrogate and low surrogate code units in NT even before they were actualy defined (since none of the current or past incarnations of NT disallow unassigned code points).</P>
<P>The Wikipedia article is really quite misleading on this score with its text:</P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT size=2>File names are stored in Unicode (encoded as UTF-16, although limited to the Basic Multilingual Plane in early versions before Windows 2000). </FONT></P></BLOCKQUOTE>
<P>Well, I'll point out that whoever wrote this&nbsp;bit either confused NTFS with Active Directory (which is actually limited on this point until Windows XP/Server 2003 which is when surogate code units first received weight) or they simply don't understand NTFS and did not test creating such files on NT 4.0 or earlier.</P>
<P>In my ideal world, a future version of NTFS would actually (optionally) take into account both characters defined in Unicode and also Unicode normalization, but as far as I know there isn't anyone planning such a thing yet. </P>
<P>So if I absolutely <STRONG>had</STRONG> to describe NTFS in terms of a Unicode version,&nbsp;I'd say it uses a very early version of Unicode and&nbsp;it assumes that&nbsp;anything it believes to be unassigned code points it allows for forward compatibility. :-)</P>
<P>&nbsp;</P>
<P><FONT color=#ff1493><EM>This post brought to you by</EM> <STRONG><FONT size=6>/</FONT></STRONG> <EM>(<A href="http://www.fileformat.info/info/unicode/char/002f">U+002f</A>, a.k.a. SOLIDUS)</EM></FONT></P></FONT>
<hr/><p><a id="769601" href="#769601">#</a> <strong>Carl</strong> on 24 Sep 2006 4:59 PM:</p><div style="margin-left: 1em">&quot;nornalizattion&quot;? That's a j○ke, right?</div>
<p><a id="769613" href="#769613">#</a> <strong>Michael S. Kaplan</strong> on 24 Sep 2006 5:22 PM:</p><div style="margin-left: 1em">Whoops, that was just a typo. Now *your* comment is a normalization&nbsp;joke, what with that confusable character and all. :-)</div>
<p><a id="770113" href="#770113">#</a> <strong>Michael Dunn_</strong> on 25 Sep 2006 4:22 AM:</p><div style="margin-left: 1em">You can go and fix up the misleading text in that Wikipedia article yourself. :)</div>
<p><a id="770223" href="#770223">#</a> <strong>Michael S. Kaplan</strong> on 25 Sep 2006 4:59 AM:</p><div style="margin-left: 1em">Hi Mike, <br><br>In theory I could. But I am not really a Wikipedia contributor. Plenty of regulasr readers here are, so someone else may take a stab at it if they feel strongly. :-)</div>
<p><a id="770499" href="#770499">#</a> <strong>Sergei</strong> on 25 Sep 2006 9:13 AM:</p><div style="margin-left: 1em">Beta versions of Vista regard this files as different:<br>file 1: U+0419<br>file 2: U+0418 U+0306<br><br>and these two too (encoded in UTF-16, of course):<br>file 1: U+10400<br>file 2: U+10428<br>I was hoping that the last example might work in Vista, because NTFS file &quot;$UpCase&quot; in Vista is different from the one in Windows XP.</div>
<p><a id="770606" href="#770606">#</a> <strong>Michael S. Kaplan</strong> on 25 Sep 2006 11:05 AM:</p><div style="margin-left: 1em">Nope, normalization still does not happen, and the updated casing table is limited to the BMP....</div>
<p><a id="771118" href="#771118">#</a> <strong>WikiServerGuy</strong> on 25 Sep 2006 4:43 PM:</p><div style="margin-left: 1em">I'm a bit surprised Wikipedia is used as a reference; don't you guys have an internal wiki or something? IIRC Ward Cunningham himself works for the company. If if there's no wiki I would have thought that there would be an internal website that had info on it or something...<br><br>BTW, great post! :)</div>
<p><a id="771161" href="#771161">#</a> <strong>Michael S. Kaplan</strong> on 25 Sep 2006 5:21 PM:</p><div style="margin-left: 1em">The original question came from someone outside of Microsoft who wanted to remain nameless....</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/09/25/768648.html" title="&#39;Cette phrase en français est difficile à traduire en anglais&#39;">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/09/24/768773.html" title="I&#39;m am more sympathetic to *some* situations than to others">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-09">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-09-24">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/09/24/769540.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>