<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/04/20/579579.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Sample code for getting ELK cultures on other platforms</title></head><body>
<h1>Sample code for getting ELK cultures on other platforms</h1>
<p><em>by Michael S. Kaplan, published on 2006/04/20 03:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/04/20/579579.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Talking about ELKs (Enabling Language Kits) again, those cool things that provide new locales outside of operating system upgrades that I first mentioned in <A href="http://archives.miloush.net/michkap/archive/2005/01/26/360685.html"><STRONG>Lions and tigers and <STRIKE><FONT color=#808080>bears</FONT></STRIKE>ELKs, Oh my!</STRONG></A> way back in January of last year.</FONT></P>
<P><FONT face=Tahoma>More recently, in <A href="http://archives.miloush.net/michkap/archive/2006/02/07/526339.html"><STRONG>ELK cultures for other platforms</STRONG></A>, I answered a question about how to take one of those ELK locales that becomes a Windows Only Culture in the .NET Framework and get it onto a machine that does not contain that locale, such as Windows Server 2003 or Windows 2000 or NT 4.0 or even Windows 98/Me.</FONT></P>
<P><FONT face=Tahoma>But Dave Sussman asked in a comment to that post:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman" size=2>We've hit the same problem with a requirement for Welsh locale support in an ASP.NET 2.0 web application. You don't explain how you create the LDML file and import it into server 2003 - any pointers? <BR><BR>Thanks <BR><BR>dave </FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>So I figured providing a bit&nbsp;of sample&nbsp;code that showed how to do it might be in order....</FONT></P>
<P><FONT face=Tahoma>We will be using the <A href="http://msdn2.microsoft.com/en-us/library/system.globalization.cultureandregioninfobuilder(VS.80).aspx">CultureAndRegionInfoBuilder Class</A>, and the following members:</FONT></P>
<UL>
<LI><FONT face=Tahoma><STRONG><A href="http://msdn2.microsoft.com/en-us/library/system.globalization.cultureandregioninfobuilder.loaddatafromcultureinfo(VS.80).aspx">LoadDataFromCultureInfo</A></STRONG> -- fills a CultureAndRegionInfoBuilder object&nbsp;with data from a CultureInfo object;</FONT> 
<LI><FONT face=Tahoma><A href="http://msdn2.microsoft.com/en-us/library/system.globalization.cultureandregioninfobuilder.loaddatafromregioninfo(VS.80).aspx"><STRONG>LoadDataFromRegionInfo</STRONG></A> -- fills a CultureAndRegionInfoBuilder object with data from a RegionInfo object;</FONT> 
<LI><FONT face=Tahoma><STRONG><A href="http://msdn2.microsoft.com/en-us/library/system.globalization.cultureandregioninfobuilder.save(VS.80).aspx">Save</A></STRONG> -- persists a CultureAndRegionInfoBuilder object to LDML;</FONT> 
<LI><FONT face=Tahoma><STRONG><A href="http://msdn2.microsoft.com/en-us/library/system.globalization.cultureandregioninfobuilder.createfromldml(VS.80).aspx">CreateFromLdml</A></STRONG> -- Creates a CultureAndRegionInfoBuilder object from an LDML file;</FONT> 
<LI><FONT face=Tahoma><A href="http://msdn2.microsoft.com/en-us/library/system.globalization.cultureandregioninfobuilder.register(VS.80).aspx"><STRONG>Register</STRONG></A> -- Installs&nbsp;the custom culture in a CultureAndRegionInfoBuilder object&nbsp;to a machine as a new custom culture.</FONT></LI></UL>
<P><FONT face=Tahoma>Basically, there are two bits of code to run, one on the XP SP2 machine (or whatever machine contains the locale from which you are getting data):</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Courier New" size=2><STRONG>using System;<BR>using System.Globalization;<BR><BR></STRONG></FONT><FONT face="Courier New" size=2><STRONG>namespace Testing {<BR>&nbsp;&nbsp;&nbsp; class Test {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [STAThread]<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static void Main(string[] args) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CultureAndRegionInfoBuilder carib = new CultureAndRegionInfoBuilder("cy-GB", CultureAndRegionModifiers.Replacement);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; carib.LoadDataFromCultureInfo(new CultureInfo("cy-GB", false));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; carib.LoadDataFromRegionInfo(new RegionInfo("cy-GB"));<BR></STRONG></FONT><FONT face="Courier New" size=2><STRONG>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; carib.Save(@"c:\cy-GB.ldml");<BR></STRONG></FONT><FONT face="Courier New" size=2><STRONG>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }<BR>}</STRONG></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>And then the following code on Server 2003 (or whatever version of Windows does not have the locale in question):</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><STRONG><FONT face="Courier New" size=2>using System;<BR>using System.Globalization;<BR><BR></FONT></STRONG><FONT face="Courier New" size=2><STRONG>namespace Testing {<BR>&nbsp;&nbsp;&nbsp; class Test {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [STAThread]<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static void Main(string[] args) {<BR></STRONG></FONT><FONT face="Courier New" size=2><STRONG>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CultureAndRegionInfoBuilder carib = CultureAndRegionInfoBuilder.CreateFromLdml(@"c:\cy-GB.ldml");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; carib.Register();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }<BR>}</STRONG></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>Now&nbsp;to compile these two binaries from the command line, remember to add the reference to sysglobl.dll with the following line:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Courier New"><STRONG>csc /r:sysglobl.dll welsh.cs</STRONG></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>And then you are all set, and you can use the culture in your managed code using version 2.0 of the .NET Framework!</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> "<FONT face="Mongolian Baiti" size=6>рай</FONT>" <EM>(</EM><A href="http://www.fileformat.info/info/unicode/char/183d"><EM>U+183d</EM></A><EM>, a.k.a. MONGOLIAN LETTER ZA)&nbsp;</EM></FONT></P>
<hr/><p><a id="580009" href="#580009">#</a> <strong>Mike</strong> on 20 Apr 2006 1:23 PM:</p><div style="margin-left: 1em">One minor correction: .NET Framework 2.0 does not support Windows NT 4.0.</div>
<p><a id="580059" href="#580059">#</a> <strong>Michael S. Kaplan</strong> on 20 Apr 2006 2:32 PM:</p><div style="margin-left: 1em">Truly? How on earth could anyone want to support Win98/Me but *not* support NT4? That's insane! :-)</div>
<p><a id="610337" href="#610337">#</a> <strong>Andy Brown</strong> on 29 May 2006 7:35 PM:</p><div style="margin-left: 1em">Wow. I've just started to &quot;localize&quot; (or is it localise) our web application so that we don't have any serious reworking to do as and when we need to put it into other languages, and all your posts are very exciting. Thank you. <br><br>And re: &quot;ELK cultures for other platforms&quot;, yep, I'm especially interested in using the cy-GB Welsh on our web site straight away. But (sorry, you saw that coming though, right?) I can't get this code to work on my Win server 2003, and I thought you might like to know. <br><br>I can pick up the Welsh carib and generate my LDML but then when I run the carib registration on win srv 2003, it fails on the first line:<br><br>CultureAndRegionInfoBuilder carib = CultureAndRegionInfoBuilder.CreateFromLdml(@&quot;c:\cy-GB.ldml&quot;);<br><br>with the error:<br><br>Unhandled Exception: System.Xml.Schema.XmlSchemaValidationException: Culture name 'cy-gb' is not supported.<br>Parameter name: name ---&gt; System.ArgumentException: Culture name 'cy-gb' is not supported.<br>Parameter name: name<br><br>I've tried looking up the schema the ldml uses(<a rel="nofollow" target="_new" href="http://schemas.microsoft.com/globalization/2004/08/carib/ldml">http://schemas.microsoft.com/globalization/2004/08/carib/ldml</a>), but can't find it. Is there anything I did obviously wrong?<br><br>Andy</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/09/10 <a href="http://archives.miloush.net/michkap/archive/2010/09/10/10060138.html">Doing the minimum isn't always the best plan...</a></p><p>2006/11/22 <a href="http://archives.miloush.net/michkap/archive/2006/11/22/1122416.html">Fixing the sample code for getting ELK cultures on other platforms</a></p><p>2006/05/18 <a href="http://archives.miloush.net/michkap/archive/2006/05/18/601531.html">Where are the other Tamils?</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/04/21/580316.html" title="&#39;universal-character-name encountered in source&#39;">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/04/19/578767.html" title="What do the latest episode of Love Monkey, Beth Orton, Kathleen Edwards, Luke Doucet, and Kristin Connell have in common?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-04">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-04-20">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/04/20/579579.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
</html>