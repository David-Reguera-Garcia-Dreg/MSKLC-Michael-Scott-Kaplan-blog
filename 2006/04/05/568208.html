<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/04/05/568208.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Ok, so there may be *some* worries here</title></head><body>
<h1>Ok, so there may be *some* worries here</h1>
<p><em>by Michael S. Kaplan, published on 2006/04/05 03:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/04/05/568208.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>I was admittedly being as bit glib when I posted about <A HREF="http://archives.miloush.net/michkap/archive/2006/04/03/567443.html"><STRONG>the Sri Lanka time zone shift</STRONG></A> when I said:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman" size=2>We deal with it all the time, and follow whatever is going on. So there really are no worries here as the updates do happen as needed.</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>I fell into a trap that is quite common when working on lower level components like NLS, the trap of assuming that just because the lower levels components can handle a problem properly that all of the higher level applications can do so as well.</FONT></P>
<P><FONT face=Tahoma>Obviously if you are a customer using such an application, then this is a distinction without a difference -- failure is failure.</FONT></P>
<P><FONT face=Tahoma>So I would like to apologize for forgetting this rather crucial point for a bit there.</FONT></P>
<P><FONT face=Tahoma>In this particular case, the time zone data is appropriately updated so that all conversions will follow the new behavior for the region.</FONT></P>
<P><FONT face=Tahoma>However,&nbsp;in response to&nbsp;<A HREF="http://archives.miloush.net/michkap/archive/2006/04/03/567489.html"><STRONG>this post</STRONG></A>, Fil Mackay pointed out one of the problems that can (and has, and does, and will) happen in applications in <A HREF="http://archives.miloush.net/michkap/archive/2006/04/03/567489.html#567656">this</A> comment:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman" size=2>How would you do this? <BR><BR>With the recent event in Australia (Commonwealth Games), Microsoft had to roll-out an update to amend the timezone schedule for 2006. This was a pain, since that subsequently screwed up any applications (eg. Outlook) that seem to store everything in GMT. <BR><BR>Would you, in this scenario, have to roll-out this patch to all Windows computers world-wide? <BR><BR>I think the solution for Outlook is to store the time in a timezone format (ie. time+TZ identifier). This way when the timezone moves (they do), the time moves with it. I think .NET has a good head-start on that.</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>The problem is obvious -- storing everything in UTC time and then displaying in the appropriate local time is almost always a great strategy -- the one exception being that if the time zone definition changes than some appointments will be "moved" inappropriately, as Fil indicated.</FONT></P>
<P><FONT face=Tahoma>The end result -- everything is handled, like I said -- though&nbsp;in a way that is a huge horking pain in the ass.</FONT></P>
<P><FONT face=Tahoma>To&nbsp;that same post, regular reader Maurits <A HREF="http://archives.miloush.net/michkap/archive/2006/04/03/567489.html#568072">commented</A>:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman" size=2>&gt; multi-year variable DST start/end <BR><BR>Uh-oh. &nbsp;What's going to happen next year when DST starts early and ends late in the US?? (Stupid Energy bill...) </FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>And then I realized something.</FONT></P>
<P><FONT face=Tahoma>Both&nbsp;the Outlook team&nbsp;and the Exchange Server team (as well as just about every other Microsoft employee and contractor in the world) </FONT><FONT face=Tahoma>are here at Microsoft and have meetings and schedules just like everyone else.</FONT></P>
<P><FONT face=Tahoma>What better way to force one of these teams to create a new&nbsp;utility to help adjust all the appointments to be appropriately moved after this sort of update?</FONT></P>
<P><FONT face=Tahoma>I realize as I write this I am still being glib, but this time it is aimed internally to teams at Microsoft that are most likely and obviously going to blamed anyway once everyone's schedule gets incorrectly shifted.</FONT></P>
<P><EM><FONT face=Tahoma>So, apologies to the potentially impact teams!</FONT></EM></P>
<P><FONT face=Tahoma>But&nbsp;<STRONG>that</STRONG> is&nbsp;the sort of&nbsp;glib that I think customers can really get behind, right?</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> "a" <EM>(<A href="http://www.fileformat.info/info/unicode/char/0061">U+0061</A>, a.k.a. LATIN SMALL LETTER A)</EM></FONT></P>
<hr/><p><a id="568772" href="#568772">#</a> <strong>Nir</strong> on 5 Apr 2006 5:12 AM:</p><div style="margin-left: 1em">You said in the post: “storing everything in UTC time and then displaying in the appropriate local time is almost always a great strategy”.<br><br>I think you are wrong, storing everything in UTC is almost always the wrong strategy.<br><br>Having your schedule in UTC format makes sense only for international conference calls, when I schedule an appointment for 3:00pm then it should remain at 3:00pm local time, if day light saving time “kicks in” between the time I scheduled the appointment and the appointment itself then outlook will move it to 2:00pm or 4:00pm (depending if it’s the start or end of DST obviously) .<br><br>I don’t know how it is in the US, but here when we schedule a meeting we schedule it in local time, not UTC, and storing the time in UTC will make me an hour late or an hour early.<br><br>What I do on all my machines (my home PC and all machines at work) is not to use the Windows DST feature, we disable it and just set the clock – this makes Windows wrong when trying to get the UTC time but it makes Outlook work correctly.<br><br>Storing times in UTC is a good strategy when you need to coordinate across time zones, for example international conference calls or airlines schedule but for a daily schedule it’s just plain wrong.<br><br>This might be different in the US, I live in a country that is completely inside just one time zone, but this feature of outlook really bugs me twice a year (or more correctly, used to bug me twice a year, until I found the only way to keep Outlook in sync with reality is to lie to the Windows time applet) <br></div>
<p><a id="568877" href="#568877">#</a> <strong>Ilya Konstantinov</strong> on 5 Apr 2006 8:12 AM:</p><div style="margin-left: 1em">At this opportunity, I wanted to share with you a short note about Israel and our timezone (IST/IDT). Microsoft seems to have given up on maintaining automatic daylight saving switching for GMT+02 Jerusalem, due to its frequent changes of policy; Windows 95 was the last version it appeared in. On Linux, one of the universities maintains an up-to-date timezone file which specifies the switching times as they are at various years.<br><br>Starting from 2005, the Israeli law for switching to Daylight Saving Time is &quot;on 2:00AM at the last Friday before 2nd of April&quot;. On Linux, it's possible to declare multiple years ahead so this complex rule can be precalculated forward for some hundred years (heck, till 2038 :). Is this even possible on NT? If so, will automatic daylight switching return to GMT+02 Jerusalem in Vista? I'm sure many sysadmins would love that.<br><br>P.S. Currently there's are registry updates distributed at <a rel="nofollow" target="_new" href="http://www.lingnu.com/support.html#timezone">http://www.lingnu.com/support.html#timezone</a> but they cover only one year at a time.</div>
<p><a id="568975" href="#568975">#</a> <strong>Michael S. Kaplan</strong> on 5 Apr 2006 10:28 AM:</p><div style="margin-left: 1em">Hi Nir --<br><br>Microsoft builds projects that have to work across time zones and internationally, not just in a single locality. Given the engineering problem, it is the best solution -- and aside from occasional changes to time zones works just fine and moves nothing around.</div>
<p><a id="568977" href="#568977">#</a> <strong>Michael S. Kaplan</strong> on 5 Apr 2006 10:30 AM:</p><div style="margin-left: 1em">Hello Ilya --<br><br>You'll probably want to take a look at Vista, at some point, for an answer to what are the Windows plans in this area for more dynamic time zones....</div>
<p><a id="569029" href="#569029">#</a> <strong>Alun Jones</strong> on 5 Apr 2006 11:35 AM:</p><div style="margin-left: 1em">&quot;Storing everything in UTC is almost always a good strategy&quot; - I strongly agree with that. &nbsp;It's the bestest strategery I know of for things that have happened - past events.<br>&quot;You created this file at 4am on Monday&quot; shouldn't suddenly remain &quot;You created this file at 4am on Monday&quot; if I move two time zones across.<br>Storing things as &quot;time + time-zone&quot; is an irrelevant replacement for storing things as UTC. &nbsp;Unless you live in London in the winter, and hibernate through the summer, you are pretty much never going to want UTC to be the &quot;display time&quot; - even using it to schedule international phone calls is only a poor substitute for displaying the time to everyone in their local time zone.<br>For future events, though, it is considerably harder to predict what would be a good strategy.<br>When is my birthday? &nbsp;I'd say it's June 6th. &nbsp;Outlook tells me it's from 10pm June 5th to 10pm June 6th. &nbsp;That's dumb, and results from my moving from Texas to Washington a couple of years ago. &nbsp;Same goes for everyone else's birthday, Christmas, etc. &nbsp;There's a set of events that are purely local time.<br>When am I having my regular 2pm meeting in three years? &nbsp;2pm. &nbsp;Whether the daylight savings change has been made earlier or later in the year. &nbsp;Again, purely local time.<br>Well, how about the live broadcast of New Year's celebrations from London? &nbsp;That's going to be just before midnight GMT, no matter where I happen to be living at the time - so that's an appointment that must not be stored in local time.<br>Then there's the exotic events - say, for instance, the &quot;total eclipse of the sun&quot; - whose time depends on where you are, and might, or might not, be related to the local time zone there.<br>So, there you have it - past events unequivocally are best stored in UTC, and displayed in whatever format is comfortable for the viewer, usually local time as it was at the time of the occurrence, with the ability to display UTC to confirm duplicate times.<br>Future events might be best stored as UTC, or might be best stored as &quot;local time&quot;, but only the user will know in most cases.</div>
<p><a id="569749" href="#569749">#</a> <strong>Nir</strong> on 6 Apr 2006 5:27 AM:</p><div style="margin-left: 1em">What I was trying to say is that people’s schedule usually makes sense only in local time, if I have a team meeting every week at 2pm then it should remain 2pm local time even if daylight savings time just began (as Alun just said).<br><br>Are there more people using outlook to schedule cross-time-zone appointments then people who get mad when all their appointments move an hour two time a year?<br><br>I really like Alun’s example of birthdays moving around, that’s just funny.<br><br>I’m talking about Outlook here, not file times.<br></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/06/29 <a href="http://archives.miloush.net/michkap/archive/2008/06/29/8667900.html">Did someone break GetTimeZoneInformation in XP?</a></p><p>2006/07/07 <a href="http://archives.miloush.net/michkap/archive/2006/07/07/658498.html">Results of the 'Time Zone Scenario Feedback' feared</a></p><p>2006/05/24 <a href="http://archives.miloush.net/michkap/archive/2006/05/24/605569.html">Did somebody say time zones were intuitive?</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/04/05/568659.html" title="At the tone, the time will be">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/04/04/568664.html" title="Linguistic analysis in an NCIS interrogation">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-04">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-04-05">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/04/05/568208.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
</html>