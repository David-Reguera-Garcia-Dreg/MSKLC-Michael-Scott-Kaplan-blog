<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/01/30/519993.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>One reason you should clean up warnings</title></head><body>
<h1>One reason you should clean up warnings</h1>
<p><em>by Michael S. Kaplan, published on 2006/01/30 22:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/01/30/519993.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p><font face="Times New Roman" color=#ff0000 size=2><em>(The following post is reprinted from a blog that is no longer around. Done so with the permission of the author -- special thanks to Mike Dolenga, for that permission and&nbsp;for having a cynical side that I find quite comforting since it makes me look like an optimist!)</em></font></p><font face=Tahoma>
<blockquote dir=ltr style="MARGIN-RIGHT: 0px">
<p>Compiler warnings can sometimes be more aggravating than useful.&nbsp; We've all encountered them, and learn which ones to ignore in our code.&nbsp; I think it's best to clean them up, either by fixing the code or suppressing the warning itself.&nbsp; Suppression should be done with caution and should be clearly documented, of course.</p>
<p>I was finally convinced of the need to clean up warnings at a previous employer a few years ago.&nbsp; This company has since gone bankrupt, and what you're about to read is one of the reasons why.&nbsp; It provided a database application to a specific industry, let's just imagine it was widget manufacturers.&nbsp; The application had a lot of flexibility to it, too much in fact, and was sold to specific widget makers with customizations defined by them.</p>
<p>One day, one of the widget makers called and said they were hitting a bug in the program which caused some of their data to be lost.&nbsp; We investigated and found the bug.&nbsp; The developer who owned the code checked in a fix, and we eagerly told the widget maker we would soon have an update ready for them, which we would courier overnight on a CD.</p>
<p>The client received the CD, installed our program and called right away to tell us the desktop shortcut didn't work.&nbsp; Luckily there were a few technically savvy people at the client's office who pointed out that our program was nowhere to be found on the system where they had just installed it.&nbsp; Our used car salesman turned CEO was red faced and reflexively told the client the disc we sent must have been defective.&nbsp; I found out later the client knew better, but it did buy us another day.</p>
<p>We did some digging, and found out what happened.&nbsp; First, the checkin made by the developer caused a build break.&nbsp; This also meant he never tested his fix, but that's a separate issue.&nbsp; The builder kick off a build and as was his habit, ignored the error, because there were so many warnings in the code base.&nbsp; He never noticed that our main application failed to build.</p>
<p>The next guy in the chain, who owned the installer package, also ignored the warning that the application did not exist when building his package.&nbsp; Why?&nbsp; Again, there were too many warnings and he just assumed all those lines flying by were the usual noise.&nbsp; And finally, after burning the CD, the test team installed the build on a machine which already had an installation.&nbsp; They didn't test the fix; instead, they simply logged in and made sure the application launched.&nbsp; Why?&nbsp; Management routinely refused to buy them the tools to quickly re-image an OS and have a clean system to install, and insisted this CD get out the door before the FedEx office closed for the day.&nbsp; The same management which refused to buy additional build hardware so that we could build on something other than a Pentium 90 (400s were standard at the time).</p>
<p>While the failures here were numerous, a key component was all the warnings in the code.&nbsp; They made everyone sloppy and complacent.&nbsp; If the builder had noticed the application never built, that could have avoided all the problems.&nbsp; If you go from zero errors and warnings to some, that's a lot easier to notice than an extra message out of thousands.</p>
<p>As a footnote, I have no idea whether the fix worked.&nbsp; Not only did I quit the next week (I already had an offer elsewhere), but the client cancelled the contract.&nbsp; The ensuing litigation was one of the things which finally put an end to the software company.</p></blockquote></font>
<hr/><p><a id="520113" href="#520113">#</a> <strong>Larry Osterman [MSFT]</strong> on 30 Jan 2006 11:32 PM:</p><div style="margin-left: 1em">At some point, I need to write up &quot;Warning Level 3 considered harmful&quot;, which is a recycled rant from one of the early C compiler developers (not at Microsoft).</div>
<p><a id="520122" href="#520122">#</a> <strong>Michael S. Kaplan</strong> on 30 Jan 2006 11:39 PM:</p><div style="margin-left: 1em">Well, harmful if people don't fix the warnings!<br/><br/>I was quite pleased every time I had a project compiling with /WX /W4 and no warnings.... :-)</div>
<p><a id="520272" href="#520272">#</a> <strong>Ben Cooke</strong> on 31 Jan 2006 2:43 AM:</p><div style="margin-left: 1em">I encountered this just the other week, in fact. I was working on a C# codebase that I inherited, and it had lots of those "Unreachable code detected" warnings and a few other things like private variables that are never used. Several times during the few days I was working on that code I ran the build script and some errors got concealed in the mess. The result was an unmodified assembly, which then proceeded to do exactly the same thing as it had just done and leading me to believe that the bug I was attempting to fix was still present.<br/><br/>Of course, the best fix is just not to make mistakes in the first place, but I'm not perfect. :)</div>
<p><a id="521184" href="#521184">#</a> <strong>Mo</strong> on 31 Jan 2006 5:57 PM:</p><div style="margin-left: 1em">This reminds of a few past employers.<br/><br/>I have a set of GCC warning flags which I use (‘all the useful ones’), and my code is normally warning-free with those flags—though when warnings do appear they get looked into and I determine whether to fix the cause of the warning, or fix the warning. There's only really one thing which falls into the latter category, and that's unused parameter warnings (I occasionally leave these be as a deliberate reminder in places where code isn't fully implemented); I consider explicit casts a case of the former (after all, I'm telling the compiler precisely what I want to do having considered it carefully).<br/><br/>There's nothing worse than code which will only compile quietly when there are no warning flags turned on, except perhaps code which is full of issues and warning-free because the programmer fixed the warnings instead of the problems.</div>
<p><a id="521753" href="#521753">#</a> <strong>bombaytv</strong> on 1 Feb 2006 5:11 AM:</p><div style="margin-left: 1em">Was there a way to block W4786 in VC++ 6.0 other than placing #pragma warning in source file? It used to drove me crazy.</div>
<p><a id="521946" href="#521946">#</a> <strong>Michael S. Kaplan</strong> on 1 Feb 2006 9:43 AM:</p><div style="margin-left: 1em">------------------- <br/>Compiler Warning (level 3) C4786<br/><br/>The identifier string exceeded the maximum allowable length and was truncated.<br/><br/>The debugger cannot debug code with symbols longer than 255 characters. In the debugger, you cannot view, evaluate, update, or watch the truncated symbols.<br/><br/>This limitation can be overcome by shortening identifier names. The example code below demonstrates this method.<br/><br/>A trace mechanism can also be used to solve this problem. A trace mechanism is like the printf statements in the code. It keeps track of what is going on in an application during the debugging process. The _ASSERT, _ASSERTE, _RPTn and _RPTFn macros provide concise and flexible ways to perform the trace. These macros are not defined when _DEBUG is not defined. See Using Macros for Verification and Reporting for more information.<br/><br/>This warning is off by default. See Compiler Warnings That Are Off by Default for more information.<br/>------------------- <br/><br/>Hmmmm... seems like the answer is in the question? Use shorter identifiers!<br/><br/><br/></div>
<p><a id="522157" href="#522157">#</a> <strong>bombaytv</strong> on 1 Feb 2006 12:24 PM:</p><div style="margin-left: 1em">Use shorter identifiers? How do I shorten std::map<int, int>, which yields the following bunch of warnings:

d:\test.cpp(12) : warning C4786: 'std::reverse_bidirectional_iterator<std::_Tree<int,std::pair<int const ,int>,std::map<int,int,std::less<int>,std::allocator<int> >::_Kfn,std::less<int>,std::allocator<int> >::iterator,std::pair<int
 const ,int>,std::pair<int const ,int> &,std::pair<int const ,int> *,int>' : identifier was truncated to '255' characters in the debug information
d:\test.cpp(12) : warning C4786: 'std::reverse_bidirectional_iterator<std::_Tree<int,std::pair<int const ,int>,std::map<int,int,std::less<int>,std::allocator<int> >::_Kfn,std::less<int>,std::allocator<int> >::const_iterator,std::pa
ir<int const ,int>,std::pair<int const ,int> const &,std::pair<int const ,int> const *,int>' : identifier was truncated to '255' characters in the debug information
d:\test.cpp(12) : warning C4786: 'std::pair<std::_Tree<int,std::pair<int const ,int>,std::map<int,int,std::less<int>,std::allocator<int> >::_Kfn,std::less<int>,std::allocator<int> >::iterator,std::_Tree<int,std::pair<int const ,int
>,std::map<int,int,std::less<int>,std::allocator<int> >::_Kfn,std::less<int>,std::allocator<int> >::iterator>' : identifier was truncated to '255' characters in the debug information
d:\test.cpp(12) : warning C4786: 'std::pair<std::_Tree<int,std::pair<int const ,int>,std::map<int,int,std::less<int>,std::allocator<int> >::_Kfn,std::less<int>,std::allocator<int> >::const_iterator,std::_Tree<int,std::pair<int cons
t ,int>,std::map<int,int,std::less<int>,std::allocator<int> >::_Kfn,std::less<int>,std::allocator<int> >::const_iterator>' : identifier was truncated to '255' characters in the debug information
c:\vstudio\vc98\include\xtree(183) : warning C4786: 'std::_Tree<int,std::pair<int const ,int>,std::map<int,int,std::less<int>,std::allocator<int> >::_Kfn,std::less<int>,std::allocator<int> >::~_Tree<int,std::pair<int const ,int>,std::map<int,int,std
::less<int>,std::allocator<int> >::_Kfn,std::less<int>,std::allocator<int> >' : identifier was truncated to '255' characters in the debug information
c:\vstudio\vc98\include\xtree(160) : warning C4786: 'std::_Tree<int,std::pair<int const ,int>,std::map<int,int,std::less<int>,std::allocator<int> >::_Kfn,std::less<int>,std::allocator<int> >::_Tree<int,std::pair<int const ,int>,std::map<int,int,std:
:less<int>,std::allocator<int> >::_Kfn,std::less<int>,std::allocator<int> >' : identifier was truncated to '255' characters in the debug information</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2006/04/10 <a href="http://archives.miloush.net/michkap/archive/2006/04/10/570570.html">Getting all you can out of a keyboard layout, Part #8</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/01/31/520280.html" title="And while I&#39;m on the subject, there is the rest of the world">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/01/30/519760.html" title="Ā was unexpected at this time.">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-01">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-01-30">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/01/30/519993.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
</html>