<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/01/19/514718.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>What are directional marks -- chumps who point?</title></head><body>
<h1>What are directional marks -- chumps who point?</h1>
<p><em>by Michael S. Kaplan, published on 2006/01/19 06:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/01/19/514718.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Earlier today in the post <a href="http://archives.miloush.net/michkap/archive/2006/01/19/514656.html"><STRONG>Just when you think you know a function...</STRONG></A> I talked about the secret way to use two U+200f (RIGHT-TO-LEFT MARK) characters in the <A href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/windowing/dialogboxes/dialogboxreference/dialogboxfunctions/messagebox.asp">MessageBox</A> function to put MB_RTLREADING flag behavior in the hands of localizers, where it may often belong.</FONT></P>
<P><FONT face=Tahoma>While I was talking to people about that post, </FONT><FONT face=Tahoma>I got&nbsp;a question about what U+200f was for when it was being used <EM>correctly</EM>, and what made me so sure that it was not dangerous to put two in a row that way.</FONT></P>
<P><FONT face=Tahoma>I figured I should answer that question (since several native speakers of bidrectional languages helped give me some information too!).</FONT></P>
<P><FONT face=Tahoma>The easiest way to explain it is to first look at how I talked about reading order in the post <a href="http://archives.miloush.net/michkap/archive/2005/11/04/489013.html"><STRONG>Sticky Keys vs. Reading Order</STRONG></A>. Basically, this 'Reading Order' setting allows you set the context for the text before you even type it. It is a non-destructive (in the sense that it does not alter the text in a harmful way) and easily changeable.</FONT></P>
<P><FONT face=Tahoma>Then, you start typing. And now we will look at <A href="http://www.unicode.org/reports/tr9/">Unicode Standard Annex #9 - The Bidirectional Algorithm</A>. It talks about how characters all have a Bidi class that can say what directionality it has (if any) and how strong that directionality is.</FONT></P>
<P><FONT face=Tahoma>Now most letters have what is known as a strong directionality, but the strength is very local and has very little effect on anything but the characters right around it. And this is where U+200e and U+200f come in -- they are just as strong (but no stronger) than one of those letters might be (Left- to-Right and Right-to-Left, respectively). As UAX #9 says:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<H3>2.4 <A name=Implicit_Directional_Marks>Implicit Directional Marks</A></H3>
<P>These characters are very light-weight codes. They act exactly like right-to-left or left-to-right characters, except that they do not display or have any other semantic effect. Their use is generally more convenient than the explicit embeddings or overrides since their scope is much more local.</P>
<P>
<TABLE cellSpacing=2 cellPadding=2 border=0>
<TBODY>
<TR>
<TH vAlign=top align=left>
<P align=left>RLM</P></TH>
<TD vAlign=top>Right-to-Left Mark&nbsp;&nbsp;</TD>
<TD vAlign=top>Right-to-left zero-width character</TD></TR>
<TR>
<TH vAlign=top align=left>
<P align=left>LRM</P></TH>
<TD vAlign=top>Left-to-Right Mark&nbsp;&nbsp;</TD>
<TD vAlign=top>Left-to-right zero-width character</TD></TR></TBODY></TABLE></P>
<P>There is no special mention of the implicit directional marks in the following algorithm. That is because their effect on bidirectional ordering is exactly the same as a corresponding strong directional character; the only difference is that they do not appear in the display.</P></BLOCKQUOTE></BLOCKQUOTE>
<P><FONT face=Tahoma>In fact the only difference between them and the letters is that LRM and RLM are not visible -- so two in a row has no more effect than two letters in a row -- which is to say none of any significance.</FONT></P>
<P><FONT face=Tahoma>And as <STRONG><a href="http://archives.miloush.net/michkap/archive/2006/01/10/511194.html">More on cursor support: the rest of the answer</A></STRONG> certainly showed, even a misplaced LRM, RLM, or random letter with strong directionality will not&nbsp;convince any character with strong directionality to change its stripes. The only characters that have anything to fear are the weaker characters, though as the UAX #9 indicates those do exist. So it makes sense to put them in when you want to give an extra hint if you are not as sure of the context.</FONT></P>
<P><FONT face=Tahoma>I'll talk more about that how functions use (and perhaps misuse?) this functionality soon....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P><FONT face=Tahoma>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by </EM><EM><A href="http://www.fileformat.info/info/unicode/char/200e">U+200e</A>, LEFT-TO-RIGHT MARKER</EM></FONT></P></FONT>
<hr/><p><a id="514792" href="#514792">#</a> <strong>Nick Lamb</strong> on 19 Jan 2006 7:39 AM:</p><div style="margin-left: 1em">Both of today's articles seem like good places to explain why UAX #9 3.3.1 either isn't implemented or is overridden by &quot;higher protocols&quot; that don't have any context hints.<br><br>In the text editor on this computer, for example, when I open a document written in Hebrew it is all displayed as RTL paragraphs starting from the right margin.<br><br>But in Notepad on a Windows PC, it is displayed as RTL embedding in LTR paragraphs starting from the left margin. The result is that a few characters of LTR text can force the start of a sentence into the middle of the text, rarely the desired outcome.</div>
<p><a id="514796" href="#514796">#</a> <strong>Michael S. Kaplan</strong> on 19 Jan 2006 7:43 AM:</p><div style="margin-left: 1em">Actually Nick, you are mistaken. On a Hebrew system (or on any system where you have changed the default reading order of Notepad explicitly, you have a text editor that has a default RTL context -- not an LTR context with embedding.</div>
<p><a id="514863" href="#514863">#</a> <strong>Nick Lamb</strong> on 19 Jan 2006 11:20 AM:</p><div style="margin-left: 1em">Sure, if I switch my system to Hebrew, the text editor now defaults to RTL for new paragraphs. That's perfectly sensible.<br><br>However I don't really see how this addresses UAX #9 3.3.1 or the example I presented, except as a work around.<br><br>You really need 3.3.1 or (as in HTML) some higher level paragraph  mark-up and preferably both. The default paragraph direction isn't enough. Try it.</div>
<p><a id="514871" href="#514871">#</a> <strong>Michael S. Kaplan</strong> on 19 Jan 2006 11:30 AM:</p><div style="margin-left: 1em">I have tried it and fail to see a case where the reading order set to RTL on an English system gives different results than a Hebrew system. Do you see some sort of difference between the two?</div>
<p><a id="514900" href="#514900">#</a> <strong>Nick Lamb</strong> on 19 Jan 2006 12:18 PM:</p><div style="margin-left: 1em">&quot;Do you see some sort of difference between the two?&quot;<br><br>No. Why would there be any difference?<br><br>The Unicode BiDi algorithm gets this right (you should be able to test that easily enough) but Windows text widgets don't. Perhaps a text widget does have a &quot;higher protocol&quot; internally but that's not much of an excuse in an application.<br><br>If you're having trouble understanding this then it explains why you didn't see the significance of my suggested example for the selections articles. Hebrew paragraphs don't start in the middle of the text, and neither do English ones.</div>
<p><a id="514920" href="#514920">#</a> <strong>Michael S. Kaplan</strong> on 19 Jan 2006 12:53 PM:</p><div style="margin-left: 1em">Nick,<br><br>I guess you just have a better parser of text than I. Because this conversation makes NO sense to me.<br><br>You claimed &quot;But in Notepad on a Windows PC, it is displayed as RTL embedding in LTR paragraphs starting from the left margin.&quot;<br><br>This is not true, that is not how the Reading Order setting works. I said as much.<br><br>You then started making a new point without actually explaining  what you mant in the original point.<br><br>And now you are claiming Unicode gets something right while Microsoft does not and have still not bothered to explain why.<br><br>So I guess I will yield at this point, since it makes no sense to have either a conversation or an argument if only one person understands what is going on.<br><br>But in any case it is a separate point than this post, so there is no point in having the conversation HERE in the post about directional marks. Let's try to keep it on topic....</div>
<p><a id="515119" href="#515119">#</a> <strong>Michael S. Kaplan</strong> on 19 Jan 2006 6:58 PM:</p><div style="margin-left: 1em">This has nothing to do with the directional marks! Whuich is what this post is about.<br><br>Please put them in the post that referred to this issue you wanted a better example of. Future comments along this line put HERE will be removed since they are off topic.</div>
<p><a id="515148" href="#515148">#</a> <strong>Michael S. Kaplan</strong> on 19 Jan 2006 8:02 PM:</p><div style="margin-left: 1em">If it is about any part of Bidi other than specifically the direction marks, then it cannot be posted here. Sorry, everyone else who is not insisting on putting stuff here after being told it is off-topic. :-(</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2007/01/06 <a href="http://archives.miloush.net/michkap/archive/2007/01/06/1421178.html">Mixing it up with bidirectional text</a></p><p>2006/02/19 <a href="http://archives.miloush.net/michkap/archive/2006/02/19/535148.html">Making a mark in code windows</a></p><p>2006/01/21 <a href="http://archives.miloush.net/michkap/archive/2006/01/21/515793.html">Return of the Mark</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/01/20/515238.html" title="Getting the characters in a code page (the code)">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/01/19/514656.html" title="Just when you think you know a function...">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-01">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-01-19">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/01/19/514718.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
</html>