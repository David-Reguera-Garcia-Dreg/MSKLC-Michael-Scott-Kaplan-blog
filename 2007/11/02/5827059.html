<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/11/02/5827059.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>In JavaScript? That just doesn't Scan[ Code]!</title></head><body>
<h1>In JavaScript? That just doesn't Scan[ Code]!</h1>
<p><em>by Michael S. Kaplan, published on 2007/11/02 10:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/11/02/5827059.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Liron asked via the Contact link (long enough ago that the point about not sending me time sensitive questions is likely clearer than it had to be):</P>
<BLOCKQUOTE><FONT size=2>
<P><FONT face="times new roman,times"><EM>Hey Michael,<BR><BR>I've read a lot about the subject of keyboard layouts, being interested in the programming side along with the linguistic side, and since I'm pretty sure you have the most intimate knowledge of the subject, and since this question requires insight, I think you're the man to ask:<BR><BR>I want to be able to find out which physical key a user is pressing, in Javascript. The "closest" I get to scancodes is virtual keys, that I can get from keyup and keydown events, but I have no way to tell if the user is using QWERTY, AZERTY, QWERTZ, Dvorak, or who knows what.<BR><BR>I actually only need "sane" options that 99% of the people use, so I'd settle for QWERTY, QWERTZ and AZERTY (And please correct me if this assertion is wrong)...<BR><BR>I thought that maybe I could try to match the VK I get with the text the browser sends in response (For example, if VK_Y sends </EM></FONT></FONT><FONT face="times new roman,times" size=2><EM>×˜</EM></FONT><FONT face="times new roman,times" size=2><EM> then I can assume it's QWERTY because that's a character that's only mapped to the QWERTY Y key, in any mapping), but that leaves me hanging in German, for example, where I can't tell if VK_Z+"z" came from QWERTY's Y key or Z key location.<BR><BR>Short of asking the user to hit some specific keys before starting, is there any way you can think of to get this data? Ultimately, I want to be able to map each keystroke to its physical location (=scancode, for my purposes)...<BR><BR>Thank you for your time, and good day,<BR>Liron.</EM></FONT></P></BLOCKQUOTE>
<P>Unfortunately, there is no great answer here. I usually look to references like <A class="" href="http://unixpapa.com/" mce_href="http://unixpapa.com/">Jan&nbsp;Wolter</A>'s <A class="" href="http://unixpapa.com/js/key.html" mce_href="http://unixpapa.com/js/key.html">JavaScript Madness: Keyboard Events</A> and the like, which spend a lot of time showing the differences between browsers and platforms.</P>
<P>As you can see from that document, there is no readily accessible way of getting at keyboard scan codes. It makes a lot more sense to go with the VK values (and as that page indicates, not even them for lots of the punctuation characters).</P>
<P>Or better yet, if you need a bunch of characters in a specific layout on the keyboard, then you can do the work to configure the keys for the application (let the user type to assign the keys they want to use, and then you know what they decided and can take advantage of it....</P>
<P>Now in some specific script hosts, more information is provided, but in general these are even less consistent than the core language, which is itself not consistent with very much!</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM> <FONT size=5>A</FONT> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/0041" mce_href="http://www.fileformat.info/info/unicode/char/0041">U+0041</A>, a.k.a. LATIN CAPITAL LETTER A)</EM></FONT></P>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/11/03/5809683.html" title="Funny, she doesn&#39;t look Italian">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/11/02/5808539.html" title="Predictably (in retrospect), aka Where Wild^H^H^Hindows-Only Things Are, aka SHORT [on ]TIME for a LONG TIME">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-11">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-11-02">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/11/02/5827059.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
</html>