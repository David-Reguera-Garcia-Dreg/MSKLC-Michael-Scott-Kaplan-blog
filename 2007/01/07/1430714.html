<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/01/07/1430714.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:38 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>On trimming the [Unicode] whitespace...</title></head><body>
<h1>On trimming the [Unicode] whitespace...</h1>
<p><em>by Michael S. Kaplan, published on 2007/01/07 16:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/01/07/1430714.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>The <A class="" href="http://msdn2.microsoft.com/library/t97s7bs3.aspx" mce_href="http://msdn2.microsoft.com/library/t97s7bs3.aspx">System.String.Trim()</A> method is documented as:</P>
<BLOCKQUOTE>
<P><EM><FONT face="times new roman,times">Removes all leading and trailing white-space characters from the current String object.</FONT></EM></P></BLOCKQUOTE>
<P>Let's test theory out, shall we?</P>
<BLOCKQUOTE><FONT face="Consolas,Lucida Console,Courier New,Courier" size=2><B>
<P>using System;<BR>using System.Globalization;<BR><BR>namespace Testing {<BR>&nbsp;&nbsp;&nbsp; class TrimTest {<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [STAThread]<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static void Main() {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int ich = 0x0001; ich &lt; 0x10000; ich++) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool fTrimmed = ("A" + ((char)ich).ToString()).Trim().Length == 1;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool fWhiteSpace = char.IsWhiteSpace((char)ich);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(fTrimmed&nbsp;^ fWhiteSpace) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("U+" + ich.ToString("x4") + "&nbsp;&nbsp;&nbsp; " + <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fTrimmed + "&nbsp;&nbsp;&nbsp; " + <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fWhiteSpace + "&nbsp;&nbsp;&nbsp; " + <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CharUnicodeInfo.GetUnicodeCategory((char)ich));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>}</P></B></FONT></BLOCKQUOTE>
<P mce_keep="true">This ought to flush out all the times that the two are different for the Basic Multilingual Plane at least. What are the results?</P>
<BLOCKQUOTE><FONT face="Consolas,Lucida Console,Courier New,Courier" size=2><B>
<P mce_keep="true">U+180e&nbsp;&nbsp;&nbsp; False&nbsp;&nbsp;&nbsp; True&nbsp;&nbsp;&nbsp; SpaceSeparator<BR>U+200b&nbsp;&nbsp;&nbsp; True&nbsp;&nbsp;&nbsp; False&nbsp;&nbsp;&nbsp; Format&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>U+202f&nbsp;&nbsp;&nbsp; False&nbsp;&nbsp;&nbsp; True&nbsp;&nbsp;&nbsp; SpaceSeparator<BR>U+205f&nbsp;&nbsp;&nbsp; False&nbsp;&nbsp;&nbsp; True&nbsp;&nbsp;&nbsp; SpaceSeparator<BR>U+feff&nbsp;&nbsp;&nbsp; True&nbsp;&nbsp;&nbsp; False&nbsp;&nbsp;&nbsp; Format&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </P></B></FONT></BLOCKQUOTE>
<P mce_keep="true">The five characters are:</P><FONT face="Consolas,Lucida Console,Courier New,Courier" size=2><B>
<UL>
<LI><A class="" href="http://www.fileformat.info/info/unicode/char/180e" mce_href="http://www.fileformat.info/info/unicode/char/180e">U+180e</A> - MONGOLIAN VOWEL SEPARATOR</LI>
<LI><A class="" href="http://www.fileformat.info/info/unicode/char/200b" mce_href="http://www.fileformat.info/info/unicode/char/200b">U+200b</A> - ZERO WIDTH SPACE</LI>
<LI><A class="" href="http://www.fileformat.info/info/unicode/char/202f" mce_href="http://www.fileformat.info/info/unicode/char/202f">U+202f</A> - NARROW NO-BREAK SPACE</LI>
<LI><A class="" href="http://www.fileformat.info/info/unicode/char/205f" mce_href="http://www.fileformat.info/info/unicode/char/205f">U+205f</A> - MEDIUM MATHEMATICAL SPACE</LI>
<LI><A class="" href="http://www.fileformat.info/info/unicode/char/feff" mce_href="http://www.fileformat.info/info/unicode/char/feff">U+feff</A> - ZERO WIDTH NO-BREAK SPACE</LI></UL></B></FONT>
<P>Okay, so it is not exactly going by the formal Unicode definition of whitespace here, so if you need that then you'll need to do your own trimming if you need the formal definition (like if you are writing tools to process all things Unicode).</P>
<P mce_keep="true">But luckily the characters themselves are not ones you would necessarily expect to find when using methods like&nbsp;<A class="" href="http://msdn2.microsoft.com/library/t97s7bs3.aspx" mce_href="http://msdn2.microsoft.com/library/t97s7bs3.aspx">string.Trim()</A>. :-)</P>
<P mce_keep="true">&nbsp;</P>
<P mce_keep="true"><EM><FONT color=#ff00ff>This post brought to you by <A class="" href="http://www.fileformat.info/info/unicode/char/180e" mce_href="http://www.fileformat.info/info/unicode/char/180e">U+180e</A> (MONGOLIAN VOWEL SEPARATOR)</FONT></EM></P>
<hr/><p><a id="1433316" href="#1433316">#</a> <strong>MGL</strong> on 8 Jan 2007 3:35 AM:</p><div style="margin-left: 1em"><p>You have displayed remarkable geekery in prefering (fTrimmed ^ fWhiteSpace) to the drearily comprehensible (fTrimmed != fWhiteSpace)!</p></div>
<p><a id="1433358" href="#1433358">#</a> <strong>Michael S. Kaplan</strong> on 8 Jan 2007 3:45 AM:</p><div style="margin-left: 1em"><p>:-)</p>
<p>I kind of figured that the only people who might actually run the code were people who knew what it meant -- everyone else would just focus on the results....</p>
</div>
<p><a id="1433395" href="#1433395">#</a> <strong>Ben Loud</strong> on 8 Jan 2007 4:02 AM:</p><div style="margin-left: 1em"><P>I spend most of my time in the Java world, so I'd thought I'd try an equivelant test and see what happens, and the result was much much worse! </P>
<P><FONT size=1><STRONG>codepoint trimmed whitespace category<BR></STRONG>U+0000 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0001 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0002 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0003 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0004 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0005 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0006 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0007 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0008 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+000e &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+000f &nbsp; &nbsp; &nbsp; true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0010 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0011 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0012 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0013 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0014 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0015 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0016 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0017 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0018 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+0019 &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+001a &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+001b &nbsp; &nbsp; &nbsp;true &nbsp; &nbsp;false &nbsp; &nbsp; &nbsp;CONTROL<BR>U+1680 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+180e &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+2000 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+2001 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+2002 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+2003 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+2004 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+2005 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+2006 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+2008 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+2009 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+200a &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+200b &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+2028 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;LINE_SEPARATOR<BR>U+2029 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;PARAGRAPH_SEPARATOR<BR>U+205f &nbsp; &nbsp; &nbsp; false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR<BR>U+3000 &nbsp; &nbsp; &nbsp;false &nbsp; &nbsp;true &nbsp; &nbsp; &nbsp;SPACE_SEPARATOR</FONT></P>
<P>The trim() algorithm just removes everything &lt;= 0x0020, &nbsp;I suppose for performance reasons. (though to be fair, its documentation does make it very clear that this is exactly how it behaves)</P>
<P>But it makes me wonder what on earth the .NET implementation is doing if it trims all the other higher up whitespace characters but misses those five! are they looking at the unicode data or not? odd...</P></div>
<p><a id="1433415" href="#1433415">#</a> <strong>Michael S. Kaplan</strong> on 8 Jan 2007 4:17 AM:</p><div style="margin-left: 1em"><p>The .NET one? It turns out is using a static list rather than the method that gives the actual Unicode data.... </p>
</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/01/07/1431731.html" title="Buraian boitano nara dousuru?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/01/06/1421178.html" title="Mixing it up with bidirectional text">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-01">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-01-07">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/01/07/1430714.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:38 GMT -->
</html>