<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/05/22/2800224.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:38 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Getting the language of an LCID-less keyboard</title></head><body>
<h1>Getting the language of an LCID-less keyboard</h1>
<p><em>by Michael S. Kaplan, published on 2007/05/22 17:09 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/05/22/2800224.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Tom, a reasonably senior developer, asks (product names removed for no particular reason):</P>
<BLOCKQUOTE>
<P><EM>Can users of publicly available keyboard layout creator make a layout that is not tied to a specific LCID?&nbsp; In other words, could the keyboard layout language be a custom culture with no defined LCID?&nbsp; If so, how can applications detect the keyboard language?<BR><BR>... [And if so] how does a Win32 app know the language of the keyboard?&nbsp;&nbsp;󰀀󰀁󰀂󰀃󰀄󰀅 generally relies on Win32 APIs to get the current keyboard's LCID, and to enumerate the LCIDs of the user's list of installed keyboards.&nbsp; What would you suggest&nbsp;󰀀󰀁󰀂󰀃󰀄󰀅 do to surface the benefit of these LCID-less keyboards?</EM></P></BLOCKQUOTE>
<P>Of course one of the principal features of MSKLC&nbsp;1.4 is support of custom locales on Vista, so clearly it is possible to create&nbsp;a keyboard layout that is not tied to a specific language LCID.</P>
<P>Though the desire to know something about the language is a valid one, in any case. And there is a way to get it. :-)</P>
<P>In the registry, in a subkey under that key I mentioned in <A class="" href="http://archives.miloush.net/michkap/archive/2007/04/25/2268251.html" mce_href="http://archives.miloush.net/michkap/archive/2007/04/25/2268251.html"><STRONG>Maybe it was registry rumination</STRONG></A> and <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2007/01/05/1387397.html" mce_href="http://archives.miloush.net/michkap/archive/2007/01/05/1387397.html">How can be changed the keyboard layout name label?</A></STRONG>, a special registry value was added to&nbsp;go with any custom language that came from a custom locale, the value name of which is <STRONG>Layout Locale Name</STRONG> and it will contain the LOCALE_SNAME value of the locale that was selected by the keyboard author for the association.</P>
<P>That registry value will contain the value you need (like <STRONG>en-US</STRONG> but for the custom locale that the user chose.This will be true on any machine, whether the custom culture exists or not.</P>
<P><EM>(the KLID that will be used in this case is in the form&nbsp;####0c00, the reasons for which will make another post at some future time so interesting!)</EM></P>
<P>This will let Tom (or anyone) who is retrieving locale information have the opportunity to find out what locale has been associated with.</P>
<P>In an upcoming post I'll talk about how to find a keyboard layout's registry subkey after it was created with MSKLC (which may be an important first step if you need a specific one!)....</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM> 󰀀 <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/f0000" mce_href="http://www.fileformat.info/info/unicode/char/f0000">U+f0000</A>, the first Plane 15 character)</EM></FONT></P>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2011/11/02 <a href="http://archives.miloush.net/michkap/archive/2011/11/02/10232468.html">The evolving Story of Locale Support, part 2 (raising the roof on keyboards)</a></p><p>2008/02/25 <a href="http://archives.miloush.net/michkap/archive/2008/02/25/7893424.html">What the #$!*& is a KeyboardLayoutId, anyway?</a></p><p>2007/08/23 <a href="http://archives.miloush.net/michkap/archive/2007/08/23/4535058.html">Getting the language (and more!) of an LCID-less keyboard</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/05/22/2809578.html" title="Is it a cliché to say something like &#39;We&#39;re hiring!&#39; ? :-)">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/05/21/2782610.html" title="MS Word says PUA is EA/CJK? TISNF!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-05">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-05-22">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/05/22/2800224.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:38 GMT -->
</html>