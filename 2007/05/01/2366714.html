<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/05/01/2366714.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:38 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>HALFWIDTH != Half the width</title></head><body>
<h1>HALFWIDTH != Half the width</h1>
<p><em>by Michael S. Kaplan, published on 2007/05/01 21:59 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/05/01/2366714.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>So what do you think is wrong with the following code?</P>
<BLOCKQUOTE>
<P><FONT face="consolas,lucida console,courier new,courier"><STRONG>WCHAR wz1[] = L"\uFF71"; // HALFWIDTH KATAKANA LETTER A<BR>WCHAR wz2[] = L"\u30A2"; // KATAKANA LETTER A<BR><BR>// Make sure the half width characters have half the width<BR>if(CompareStringW(LOCALE_USER_DEFAULT, wz1, 1, wz2, 2) == CSTR_EQUAL) {<BR>&nbsp;&nbsp;&nbsp; // They are equal!<BR>}</STRONG></FONT></P></BLOCKQUOTE>
<P>(HINT: <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2005/09/11/463672.html" mce_href="http://archives.miloush.net/michkap/archive/2005/09/11/463672.html">here</A></STRONG>)&nbsp;</P>
<P>Obviously this code is bad because it is confusing the "width" of the characters in regard to their visual appearance and the size of the two buffers.</P>
<P>The moral of the story? HALFWIDTH and FULLWIDTH in Unicode are simply descriptive terms about the appearance of the characters; they have NOTHING to do with the size of buffers.</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM> ï¼¡ <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/ff21" mce_href="http://www.fileformat.info/info/unicode/char/ff21">U+ff21</A>, a.k.a. FULLWIDTH LATIN CAPITAL LETTER A)</EM></FONT></P>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/06/09 <a href="http://archives.miloush.net/michkap/archive/2008/06/09/8583404.html">Did you lose some WIDTH or something?</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/05/01/2367135.html" title="Not everyone does the right thing for Romanian">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/04/30/2341334.html" title="Suggest a Topic!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-05">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-05-01">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/05/01/2366714.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:38 GMT -->
</html>