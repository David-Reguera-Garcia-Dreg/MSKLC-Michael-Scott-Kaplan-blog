<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/04/10/2073530.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:38 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Win9x keyboard file source?</title></head><body>
<h1>Win9x keyboard file source?</h1>
<p><em>by Michael S. Kaplan, published on 2007/04/10 10:08 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/04/10/2073530.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><A class="" href="http://blogs.msdn.com/utility/Redirect.aspx?U=http%3a%2f%2fcvs.mirbsd.de%2fcontrib%2fcode%2fSnippets%2fKBDmir2U.exe" mce_href="http://blogs.msdn.com/utility/Redirect.aspx?U=http%3a%2f%2fcvs.mirbsd.de%2fcontrib%2fcode%2fSnippets%2fKBDmir2U.exe">Thorsten Glaser</A> asked over in the Suggestion Box:</P>
<BLOCKQUOTE><FONT face="Times New Roman,Times" size=2><I>
<P>Hi,<BR><BR>thanks for MSKLC, now I'm able to have the same keyboard layout on the BSD wscons (text mode) console, under X-Window and on Windows NT/2k/… – with a “meta” key that just adds 0x80 to the value of the character (e.g. maps Meta-d to ä), emulated with AltGr on NT and Mode_switch on X11, and a few funny characters I'm occasionally needing (…€„™“”•–), and Ÿ for the sake of&nbsp; completeness. <BR><BR>Now I've seen Janko's Keyboard Generator for Win9x, and I wonder if the format of the .KBD files is publically documented. If so, I could create the same (almost) layout with a hex-editor, which sometimes is capable of doing more than some random UI programme. (Even MSKLC wouldn't let me re-map AltGr-Tab at first.) Maybe it's just not possible, but even then, I'd be interested if there's some kind of docs for that format which I couldn't find (probably because it's been 12+ years since “Chicago” was new).<BR><BR>Thanks in advance!</P></I></FONT></BLOCKQUOTE>
<P mce_keep="true">The source, header files, samples,&nbsp;and build environment to build keyboard layouts on Win9x&nbsp;has been a part of the Windows 98 DDK even back all those years ago when it was the Windows 95 DDK.</P>
<P mce_keep="true">For documentation, the entire section of the documentation entitled <STRONG>Windows 95 Keyboard Driver</STRONG> is of particular use here, as is the subsection within entitled <STRONG>Keyboard Layouts</STRONG>.</P>
<P mce_keep="true">In fact, the only problem with this advice (which totally answer's Thorsten's question!) is that the DDK no longer appears to be available for download (not entirely surprising since it is as old as it is and <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/07/11/662550.html" mce_href="http://archives.miloush.net/michkap/archive/2006/07/11/662550.html">Windows 98 is no longer supported</A></STRONG>). So I hope Thorsten has a copy of the DDK installed somewhere, or knows someone who does....</P>
<P mce_keep="true">I may post more on this topic in the future, though I am probably more likely to talk about NT-based keyboards, all things considered. :-)</P>
<P mce_keep="true">&nbsp;</P>
<P mce_keep="true"><FONT color=#ff00ff><EM>This post brought to you by</EM>&nbsp;<FONT size=5>ꇙ</FONT> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/a1d9" mce_href="http://www.fileformat.info/info/unicode/char/a1d9">U+a1d9</A>, a.k.a. YI SYLLABLE LYR)</EM></FONT></P>
<hr/><p><a id="2078288" href="#2078288">#</a> <strong>Mihai</strong> on 10 Apr 2007 6:29 PM:</p><div style="margin-left: 1em"><p>It looks like you are in the &quot;curvy characters that look like S&quot; mood.</p>
<p>Looking at the last posts, you have ᔓ in the title, and ઽ + ꇙ as sponsors.</p>
<p>Hmmm, maybe I should go and pick up that Freud book? ;-)</p></div>
<p><a id="2078785" href="#2078785">#</a> <strong>Michael S. Kaplan</strong> on 10 Apr 2007 7:27 PM:</p><div style="margin-left: 1em"><p>Actually, the &quot;S&quot; stands for Supported. :-)</p>
</div>
<p><a id="2080062" href="#2080062">#</a> <strong>Igor</strong> on 10 Apr 2007 9:41 PM:</p><div style="margin-left: 1em"><p>I happen to have a copy of Windows 98 DDK (even NT 4.0 DDK is laying around here somewhere). I never throw such things out, you never know when you might need to look up something that just got removed in new and improved version :)</p>
<p>I checked out new MSKLC, it is very nice. The only thing that bothers me is its size -- 10MB (packed) for a keymap compiler is a bit on a heavy side don't you think?</p></div>
<p><a id="2080408" href="#2080408">#</a> <strong>Michael S. Kaplan</strong> on 10 Apr 2007 10:09 PM:</p><div style="margin-left: 1em"><p>Hey Igor, </p>
<p>The 10mb is the size of all of the build tools for all three platforms. It could have been smaller if it required the Platform SDk but then its small download would require a HUGE download to get started!</p>
</div>
<p><a id="2093022" href="#2093022">#</a> <strong>Igor</strong> on 11 Apr 2007 7:52 PM:</p><div style="margin-left: 1em"><p>Hey Michael!</p>
<p>Well if I designed it I would have made binary table editor instead of bundling compiler, linker, library and header files.</p>
<p>If you think about it, then you would probably come to the same conclusion as I did.</p>
<p>Surely it is nice to have headers which you can update but once you ship the tool that advantage is lost because you just ship another version anyway which again weighs 10MB (or more) in size.</p>
<p>I am sure it could be made to fit in 1MB with setup or even less without it.</p></div>
<p><a id="2093137" href="#2093137">#</a> <strong>Michael S. Kaplan</strong> on 11 Apr 2007 8:02 PM:</p><div style="margin-left: 1em"><p>Hmmm.... not such a great way to support the myriad of possible layouts in the massuive number of different ways that they need to be built, especially given that kbdutool.exe can support a huge number of possible layouts that MSKLC cannot.</p>
<p>So no, I never would have made that choice, sorry! I am in this to support everything the system can, not a binary subset that is ultimately unsupportable....</p>
</div>
<p><a id="2093161" href="#2093161">#</a> <strong>Michael S. Kaplan</strong> on 11 Apr 2007 8:06 PM:</p><div style="margin-left: 1em"><p>If we really are talking about Win9x, then ignore the MSKLC comments but the rest still applies.</p>
<p>If we are talking about NT and MSKLC then you commented to the wrong post!</p>
</div>
<p><a id="2129315" href="#2129315">#</a> <strong>Thorsten Glaser</strong> on 14 Apr 2007 5:25 AM:</p><div style="margin-left: 1em"><P>Thanks for the info, I'll try to find someone who has the old DDK. I don't have it because I usually do only coding on a shell script or ISO C layer, not for Win32, because I'm not primarily from the Windows world (I do like DOS though). But I thought it might be neat, and in contrast to the GNU/Linux folks we BSD people can acknowledge if Microsoft gets a few things right (and we're quite annoyed at things we can't fix, like X11R6 bugs – it does not serialise keyboard and mouse events correctly, which gives interesting effects under load, and if more load, it gets worse, e.g. type ababa and get aaabb). About kbdutool: right, it can do more than MSKLC. I mapped the&nbsp;English double quotation marks to AltGr-Tab and AltGr-Shift-Tab, respectively. (Actually, I let MSKLC do its thing and hand-edited the .c and .h files.) Thanks again for giving us tools to the hand that make our live (even if switching between platforms) easier!</P></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2007/04/11 <a href="http://archives.miloush.net/michkap/archive/2007/04/11/2086928.html">WinNT keyboard file source?</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/04/11/2086928.html" title="WinNT keyboard file source?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/04/10/2071471.html" title="When methods use collation to &#39;disturb the peace&#39; we charge them with being &#39;out of sorts&#39;">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-04">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-04-10">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/04/10/2073530.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:38 GMT -->
</html>