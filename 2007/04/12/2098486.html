<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/04/12/2098486.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:38 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Can you really say international support is irreplaceable?</title></head><body>
<h1>Can you really say international support is irreplaceable?</h1>
<p><em>by Michael S. Kaplan, published on 2007/04/12 07:31 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/04/12/2098486.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Well, here is my logic.</P>
<P>The <A class="" href="http://msdn2.microsoft.com/library/system.string.aspx" mce_href="http://msdn2.microsoft.com/library/system.string.aspx">System.String</A> class has many <A class="" href="http://msdn2.microsoft.com/library/system.string_members.aspx" mce_href="http://msdn2.microsoft.com/library/system.string_members.aspx">members</A> that support the current culture by default, and other cultures/comparison types by parameter.</P>
<P>You know, like <A class="" href="http://msdn2.microsoft.com/library/system.string.compare.aspx" mce_href="http://msdn2.microsoft.com/library/system.string.compare.aspx">string.Compare</A> and so on.</P>
<P>But there is one member that does not have this behavior, at all. Either by default or via parameter modification -- <A class="" href="http://msdn2.microsoft.com/library/system.string.replace.aspx" mce_href="http://msdn2.microsoft.com/library/system.string.replace.aspx">string.Replace</A>.</P>
<P>Which is really unfortunate given that the "find" support in <A class="" href="http://msdn2.microsoft.com/library/system.string.indexof.aspx" mce_href="http://msdn2.microsoft.com/library/system.string.indexof.aspx">string.IndexOf</A> makes it so easy to expect that if you can find a string using some cultural/linguistic sensitivities that you'd be able to replace using those same cultural/linguistic sensitivities, right?</P>
<P>Though the fact that this does not work may be in part due to an omission I mentioned previously in in <A class="" href="http://archives.miloush.net/michkap/archive/2006/12/09/1246712.html" mce_href="http://archives.miloush.net/michkap/archive/2006/12/09/1246712.html"><STRONG>On being consistently consistent, while still managing to be dead wrong</STRONG></A>:</P>
<BLOCKQUOTE>
<P><EM><FONT face="times new roman,times">...in the case of FindNLSString there was a pcchFound parameter that would let the caller know that what was found was also of zero length so that a sensible and consistent check on that return of 0 would keep one from an AV. With the bonus that being that the check made sense in the non-corner cases, too. And not just for the sake of consistency but for the sake of returning correct results.</FONT></EM></P>
<P><EM><FONT face="times new roman,times">Looking back to managed code, .NET doesn't have this feature, and there is in fact no easy way to emulate it in linguistically appropriate string comparisons; this was the reason that FindNLSString was added to Vista in the first place!</FONT></EM></P>
<P><EM><FONT face="times new roman,times">In fact, it was in the initial design planning for FindNLSString, back when we were calling it plain old FindString, that Tarek (another dev on our team who I have mentioned before) pointed out that without the functionality that the pcchFound parameter provided, there was no good way to add replace logic via FindNLSString.</FONT></EM></P>
<P><EM><FONT face="times new roman,times">(I find Tarek's cool contribution to FindNLSString to be quite ironic given that he owns a lot of the .NET Framework side of things, and the .NET Framework does not yet have this functionality. It causes lots of weirdness that keeps the System.String.Replace method from working consistently with System.String.Compare in many cases!)</FONT></EM></P></BLOCKQUOTE>
<P>So there it is....</P>
<P>What with all the green bits/red bits silliness, it will be a while before this could be potentially addressed with another overload. And then even longer before a <A class="" href="http://msdn2.microsoft.com/library/system.string.replace.aspx" mce_href="http://msdn2.microsoft.com/library/system.string.replace.aspx">string.Replace</A>&nbsp;overload&nbsp;that made use of the new functionality could be planned out.</P>
<P>Since it is just doing a binary operation, clearly <A class="" href="http://msdn2.microsoft.com/library/system.string.replace.aspx" mce_href="http://msdn2.microsoft.com/library/system.string.replace.aspx">string.Replace</A>&nbsp;does not support "international" the way all of the other methods do, by default or otherwise.</P>
<P>And thus by the converse theory of logic international support does not cover Replace.</P>
<P>Which could easily be reworded (by a blog author who was willing to go to great lengths to try to take advantage of a pun!)&nbsp;<STRONG>international support is irREPLACEable</STRONG>.</P>
<P>How'd I do? :-)</P>
<P>Ok, seriously. This would make a cool set of features in a future version, I think. Even if the <A class="" href="http://msdn2.microsoft.com/library/system.string.replace.aspx" mce_href="http://msdn2.microsoft.com/library/system.string.replace.aspx">string.Replace</A>&nbsp;method couldn't be made consistent with the other string members involving collation support in the default case for fear of backward compatibility breaks....</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM> <FONT size=5>—è</FONT> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/044f" mce_href="http://www.fileformat.info/info/unicode/char/044f">U+044f</A>, a.k.a. CYRILLIC SMALL&nbsp;LETTER YA)</EM></FONT></P>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/04/12/2098786.html" title="The seven is not being crossed out">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/04/11/2087685.html" title="Microsoft is not uncaron^H^Hing about the issue!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-04">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-04-12">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/04/12/2098486.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:38 GMT -->
</html>