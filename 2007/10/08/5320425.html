<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/10/08/5320425.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>The roadꂸ to the solution starts with identifying the actual problem.NET</title></head><body>
<h1>The roadꂸ to the solution starts with identifying the actual problem.NET</h1>
<p><em>by Michael S. Kaplan, published on 2007/10/08 10:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/10/08/5320425.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>JJ's question was simple enough:</P>
<BLOCKQUOTE>
<P><EM>Hello,</EM></P>
<P><EM>This is probably not the right alias for this, but...</EM></P>
<P><EM>I have a Globalization bug involving “Chinese Minority Characters Yi”.&nbsp; The root cause boils down to the fact that the String.EndsWith method is ignoring these characters at the end of the string.&nbsp; For example, "</EM><A href="http://localhost:54031/"><EM>http://localhost:54031/</EM></A><EM>ꂸꐯꉘ".EndsWith("/") returns true.&nbsp; As an alternative measure, I can use the indexer on the string to get the last character just fine, but EndsWith consistently fails.&nbsp; The machine in question is a JPN machine running Vista Ultimate.</EM></P>
<P><EM>Is there a good reason for this, or is this potentially a .Net bug?&nbsp; If so, where could I send the bug?&nbsp; This is blocking our exit criteria.<BR><BR>I am using String.EndsWith(String) exactly as shown in the e-mail (the lone argument is “/”).&nbsp; This consistently reproduces with any of the characters found in the bug:</EM></P>
<P><FONT size=3><EM>&nbsp;ꌒꆏꉘꃅꌒꉘꃅꌒꂸꐯꉘꃅꎵꑳꀕꉘꃅꑌꐥꌒꌒꆏꅔꐎꌒꅔꐎꌒꂸꐯꅔꐎꁤꇅꀕꅔꐎꏰꐥꌒ</EM></FONT></P>
<P><EM>Let me know if you need anything else.</EM></P></BLOCKQUOTE>
<P>The answer to this one might feel like review to regular readers. :-)</P>
<P>The problem is really twofold here --</P>
<P>One, the problems implicit in that most cited post, <A class="" href="http://archives.miloush.net/michkap/archive/2005/01/18/355210.html" mce_href="http://archives.miloush.net/michkap/archive/2005/01/18/355210.html"><STRONG>The jury will give this string no weight</STRONG></A>. And Yi definitely falls in that category....</P>
<P>The other problem is the fact that we are looking at a URL, which like a system&nbsp;file path is one of the most non-linguistic things one can really have if one is having a string.</P>
<P>It falls in with <A class="" href="http://archives.miloush.net/michkap/archive/2007/04/25/2273289.html" mce_href="http://archives.miloush.net/michkap/archive/2007/04/25/2273289.html"><STRONG>The nature of OrdinalIgnoreCase vs. intuitive expectations</STRONG></A>, and suggests that the overload to be using here is <A class="" href="http://msdn2.microsoft.com/library/ms131430.aspx" mce_href="http://msdn2.microsoft.com/library/ms131430.aspx">String.EndsWith(String, StringComparison)</A>, specifying <A class="" href="http://msdn2.microsoft.com/library/system.stringcomparison.aspx" mce_href="http://msdn2.microsoft.com/library/system.stringcomparison.aspx">StringComparison.OrdinalIgnoreCase</A>&nbsp;(or potentially <A class="" href="http://msdn2.microsoft.com/library/system.stringcomparison.aspx" mce_href="http://msdn2.microsoft.com/library/system.stringcomparison.aspx">StringComparison.Ordinal</A>&nbsp;if one is running on a platform that is not case insensitive, which could be true of many a web server).</P>
<P>The problem is&nbsp;a common one, and there are more misuses&nbsp;like this one then almost any other problem I run across.</P>
<P>Now It&nbsp;may be&nbsp;convenient to blame the developers who write the incorrect code (and many people do), but really too convenient -- the framework points them in this direction by simply using methods intuitively.</P>
<P>It may&nbsp;also convenient to blame the default overload (and several others do, after all the problem wouldn't happen with a different overload!) but once again too convenient -- because all this would do is shift the problem to the other cases when one actually needs linguistic comparisons.</P>
<P>It is easy to blame FxCop (<A class="" href="http://archives.miloush.net/michkap/archive/2007/10/01/5218976.html" mce_href="http://archives.miloush.net/michkap/archive/2007/10/01/5218976.html"><STRONG>and I do, a little bit</STRONG></A>) for it's contributions in this space, but in reality it is just slow to helping people get the right methods; with a nudge here and a prod there, they will improve, in time. </P>
<P>But the underlying problem will still exist.</P>
<P>The real problem is in the fact that the whole framework, really the whole programming model, does not lead developers to use the correct method. </P>
<P>Remember the frustrations of Scott Hanselman when&nbsp;<A class="" href="http://archives.miloush.net/michkap/archive/2005/06/05/425436.html" mce_href="http://archives.miloush.net/michkap/archive/2005/06/05/425436.html"><STRONG>dasBlog had a Turkic I bug</STRONG></A> and that original <A class="" href="http://archives.miloush.net/michkap/archive/2005/01/18/355210.html" mce_href="http://archives.miloush.net/michkap/archive/2005/01/18/355210.html"><STRONG>jury / no weight</STRONG></A>&nbsp;post&nbsp;suffered from a&nbsp;.Text&nbsp;bug when I first tried to post about&nbsp;it -- smart developers everywhere are hitting these problems, and it is a frustrating truth that no matter how good FxCop becomes at helping here in future versions that it is little more than King Canute trying to sweep back the tide. </P>
<P>Because smart developers are going to keep writing the wrong code.</P>
<P>And let's&nbsp;be honest for a moment --&nbsp;if that is what the smart ones do then you know what happens with the not-so-smart ones....</P>
<P>What is needed is a whole new paradigm, a whole new way of looking at the problem.</P>
<P>It is not that FxCop sucks, to the extent that it does that can be blamed on the areas the .NET Framework itself sucks in. And those areas have their suckage built in, because they needed to be looking at the problem differently.</P>
<P>I have talked to&nbsp;and bounced ideas off of a bunch of really smart people about this (I'll get into my criteria for calling someone a "smart" person in this context in another post), and I think I am approaching if not a solution then something much closer to it. </P>
<P>Since my full scope of influence is really limited in large part to the blog these days, I'll post about it here and see if anyone is interested, rather than trying to sweep the problem under the rug (the current solution)....</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM> <FONT size=7>ꂸ</FONT> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/a0b8" mce_href="http://www.fileformat.info/info/unicode/char/a0b8">U+a0b8</A>, a.k.a. YI SYLLABLE MAP)</EM></FONT></P>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2007/10/09 <a href="http://archives.miloush.net/michkap/archive/2007/10/09/5375754.html">A&P of Sort Keys, part 13 (About the function that is too lazy to get it right every time)</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/10/08/5347670.html" title="Wanna take a look at the collation bug Kim pointed out? You&#39;re in for a hell of a Tripp!">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/10/08/5270854.html" title="A&amp;P of Sort Keys, part 12 (aka Han sorts first!)">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-10">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-10-08">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/10/08/5320425.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
</html>