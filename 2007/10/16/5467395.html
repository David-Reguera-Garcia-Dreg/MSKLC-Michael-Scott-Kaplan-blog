<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/10/16/5467395.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Character info from beyond the Grave</title></head><body>
<h1>Character info from beyond the Grave</h1>
<p><em>by Michael S. Kaplan, published on 2007/10/16 10:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/10/16/5467395.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><EM><FONT color=#ff0000>Today I&nbsp;am going to try to clear out&nbsp;some Contact link questions....</FONT></EM>&nbsp;</P>
<P>The Contact link question was:</P>
<BLOCKQUOTE><FONT size=2>
<P><EM><FONT face="times new roman,times">Heck, the subject could even be "isalnum non-ascii characters"<BR><BR>I was looking at this page:<BR><BR></FONT></EM></FONT><A href="http://msdn2.microsoft.com/en-us/library/t9zea13t(VS.71).aspx"><U><FONT color=#0000ff size=2><EM><FONT face="times new roman,times">http://msdn2.microsoft.com/en-us/library/t9zea13t(VS.71).aspx</FONT></EM></U></FONT></A><BR><BR><FONT size=2><EM><FONT face="times new roman,times">which tells me that isalnum should be faster than my macro that tests character ranges (c &gt;= 'a' &amp;&amp; c &lt;= 'z').<BR><BR>However, I need to allow non-ascii characters, such as Western European, and when I did this:<BR><BR>foo = isalnum('À');<BR><BR>I got a run-time violation while debugging my app.<BR><BR>So, why does isalnum expect an int, rather than unsigned int? If I want to use this function, do I need to go change all my char variables to unsigned char?<BR><BR>And: is there any hope for Unicode? I'm trying to add an auto-completion: type a few letters of a name and the program looks through your address book for a match. I assume this would be useful for Unicode users, also.<BR><BR>Thanks.</FONT></EM></P></FONT></BLOCKQUOTE>
<P>If you want to get answers outside of that lowest character range, then the answer is the Unicode version of the function, <A class="" href="http://msdn2.microsoft.com/library/k84c0490.aspx" mce_href="http://msdn2.microsoft.com/library/k84c0490.aspx">iswalnum</A>.</P>
<P>This function (and the rest of the Unicode "<A class="" href="http://msdn2.microsoft.com/library/4yc6feha.aspx" mce_href="http://msdn2.microsoft.com/library/4yc6feha.aspx">isw</A>" functions, take a winnt_t value, which per that topic:</P>
<BLOCKQUOTE>
<P><EM>The wint_t data type is defined in WCHAR.H as an unsigned short; it can hold any wide character or the wide-character end-of-file (WEOF) value.</EM></P></BLOCKQUOTE>
<P>These CRT functions are all wrappers around <A class="" href="http://msdn2.microsoft.com/library/ms647481.aspx" mce_href="http://msdn2.microsoft.com/library/ms647481.aspx">GetStringTypeW</A>, which you can call directly to get character type information....</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM> À <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/00c0" mce_href="http://www.fileformat.info/info/unicode/char/00c0">U+00c0</A>, a.k.a. LATIN CAPITAL LETTER A WITH GRAVE)</EM></FONT></P>
<hr/><p><strong>Geoffrey Coram</strong> on 9 Nov 2007 2:15 PM:</p><div style="margin-left: 1em"><p>Thanks for the response. &nbsp;On the page you cited, I read:</p>
<p>When used with a debug CRT library, isalnum will display a CRT assert if passed a parameter that is not EOF or in the range of 0 through 0xFF. </p>
<p>The sentence says it's referring to isalnum (not iswalnum), so I think I can be excused for not expecting a problem for 8-bit characters. &nbsp;In fact, if the prototype had been isalnum(unsigned int), I would have been fine. &nbsp;But because the prototype is isalnum(int), the call isalnum('&#192;') must be sign-extending the 8-bit number to a 16- or 32-bit (negative) number.</p>
<p>I assume &quot;iswalnum&quot; also handle double-byte characters, since short must be at least 16 bits. &nbsp;But doesn't Unicode also have 3- and 4-byte characters? &nbsp;In which case I'd need a different function.</p></div>
<p><strong>Michael S. Kaplan</strong> on 9 Nov 2007 2:34 PM:</p><div style="margin-left: 1em"><P>This function will not do the trick, even in its Unicode version -- and none of it is aware of four byte characters (there are no three-byte characters in UTF-16).</P></div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/10/16/5467548.html" title="MS Shell Dlg is __________?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/10/15/5464496.html" title="Better than an elevator friend, but...">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-10">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-10-16">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/10/16/5467395.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
</html>