<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/08/10/4322536.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>I've been to the desert on a dead key with no name</title></head><body>
<h1>I've been to the desert on a dead key with no name</h1>
<p><em>by Michael S. Kaplan, published on 2007/08/10 11:11 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/08/10/4322536.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Reader Grieg Winter asked via the Contact link at one of those weird transitional days when the Suggestion Box was just past the 90-day mark:</P>
<BLOCKQUOTE><FONT size=2>
<P><EM><FONT face="times new roman,times">Hi Mike,<BR><BR>I do some software input panel programming for the Pocket PC platform. Nothing commercial, just for fun. (Located on </FONT></EM></FONT><A href="http://www.geocities.com/grieg_winter/software/index.html"><U><FONT color=#0000ff size=2><EM><FONT face="times new roman,times">http://www.geocities.com/grieg_winter/software/index.html</FONT></EM></U></FONT></A><FONT size=2><EM><FONT face="times new roman,times"> in case you're interested.)<BR><BR>What bugs me is not actually related to programming, rather it's the label for keys, especially the modifier keys. I have't found anywhere where the localized key names are documented. So it's down to googling for photos of keyboards and trying to look if the key labels are different than those used customarily on US layout.<BR><BR>Ok, I'm not certain if this is actually your area. Or if this would be a topic for your future post. But if it is, consider this a reminder for "Suggest a Topic!" post (the previous one has gone past the 90-days-comments-closed period) ;)<BR><BR>Thanks!</FONT></EM></P></FONT></BLOCKQUOTE>
<P>I&nbsp;dug this question up since it seemed like the perfect follow-up to the post on dead keys I just did (<STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2007/08/09/4318216.html" mce_href="http://archives.miloush.net/michkap/archive/2007/08/09/4318216.html">Some of the less intuitive parts of MSKLC's user interface</A></STRONG>)....</P>
<P>Grieg's question is I think well covered in <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/03/24/559169.html" mce_href="http://archives.miloush.net/michkap/archive/2006/03/24/559169.html">Getting all you can out of a keyboard layout, Part #3</A></STRONG> -- it is easy enough to get the text of the dead key that one might put in a soft keyboard. </P>
<P>But I was thinking about the dead key name and wondering about it a bit. I thought I'd cover my&nbsp;findings here.</P>
<P>If we we take that post to the next step, open the&nbsp;dialog,&nbsp;and add some entries it will look something like this:</P>
<P><IMG height=670 src="http://trigeminal.fmsinc.com/images/DeadKeyName.png" width=704></P>
<P>Now never mind the entries, let's focus near the top part of the dialog where you can specify the dead key name.</P>
<P>Now the fact that MSKLC let's you specify a name kind of implies that the name is available, right?</P>
<P>However, just as GDI could feel some shame over the digit substitution sup port weirdness I discussed in <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/01/18/514171.html" mce_href="http://archives.miloush.net/michkap/archive/2006/01/18/514171.html">Digits -- there is no substitute</A></STRONG>, USER now has a chance to feel some shame too. :-(</P>
<P>Basically, beyond the code in Windows that loads the keyboard layout DLL information, the only bit of code that ever accesses the dead key name is in <A class="" href="http://msdn2.microsoft.com/library/ms646300.aspx" mce_href="http://msdn2.microsoft.com/library/ms646300.aspx">GetKeyNameText</A>&nbsp;(mentioned previously in terms of both its virtues and its limitations in <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2007/07/26/4057259.html" mce_href="http://archives.miloush.net/michkap/archive/2007/07/26/4057259.html">Report of blank previews of unknown etiology</A></STRONG> and <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2007/03/26/1950492.html" mce_href="http://archives.miloush.net/michkap/archive/2007/03/26/1950492.html">Flirting with a strange keyboard, will you remember its language in the morning?</A></STRONG>.</P>
<P>Well, consider this another limitation. :-)</P>
<P>It boils down to the fact that the only bit of code that ever exposes or even uses the dead key name data (which exists for any dead key in any shift state) only ever runs under the following conditions:</P>
<OL>
<LI>You call <A class="" href="http://msdn2.microsoft.com/library/ms646300.aspx" mce_href="http://msdn2.microsoft.com/library/ms646300.aspx">GetKeyNameText</A>&nbsp;with the appropriate data for a specific key</LI>
<LI>The base state of the key contains a dead key</LI></OL>
<P>In this case (and this case only!), the dead key name&nbsp;can be returned. This is kind of lame, and one frankly wonders why they even bothered (since for most letters they return the actual letter and only for the non-letter keys are actual "key names" returns (as I mentioned in <A class="" href="http://archives.miloush.net/michkap/archive/2007/03/26/1950492.html" mce_href="http://archives.miloush.net/michkap/archive/2007/03/26/1950492.html"><STRONG>Flirting with a strange keyboard...</STRONG></A>&nbsp;previously). The whole approach seems contrived and even a bit inconsistent, though technically it isn't really since it also looks for names n the other "letter" keys and simply does not find them; the only real inconsistency is how one usually has names and the other usually does not).</P>
<P>In this case, I think it is best to stick with the names, and maybe even override the dead key name in MSKLC with the actual character just so it can be consistent with the other letters. :-)</P>
<P>Perhaps I'll talk about how to get at this (otherwise entirely unavailable) information more directly another day....</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM> <FONT size=5>Ã„</FONT> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/00c4" mce_href="http://www.fileformat.info/info/unicode/char/00c4">U+00c4</A>, a.k.a. LATIN CAPITAL LETTER A WITH DIAERESIS)</EM></FONT></P>
<hr/><p><a id="4333060" href="#4333060">#</a> <strong>Szajd</strong> on 11 Aug 2007 5:31 AM:</p><div style="margin-left: 1em"><p>Maybe I'm stupid, but after I read Grieg's question, I thought he meant something completely different from what you answered. Then I read it again, and again, and still believe that. So (as I said, I might be stupid, but) I think he meant how the text on a physical keyboard might differ on another keyboard in an other part of the world. Like the &quot;End&quot; key might have &quot;Fin&quot; written on it on a keyboard that was purchased in Italy. Or &quot;Ctrl&quot; (a &quot;modifier key&quot;) might be... I don't know, but something different on a German keyboard.</p>
<p>Tell me, where am I mistaken in interpreting Grieg's letter? :)</p></div>
<p><a id="4333771" href="#4333771">#</a> <strong>Michael S. Kaplan</strong> on 11 Aug 2007 6:44 AM:</p><div style="margin-left: 1em"><p>Well, if that is &nbsp;what he meant, then I point to the answer to that question, too. So all is good, and no one has to be stupid.... :-)</p>
</div>
<p><a id="4358394" href="#4358394">#</a> <strong>Igor</strong> on 12 Aug 2007 7:36 PM:</p><div style="margin-left: 1em"><p>I can sense a subtle reference to a certain song in this post title ;)</p></div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/08/11/4317850.html" title="&#39;crap cartoon font&#39; (Part 1)">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/08/09/4318216.html" title="Some of the less intuitive parts of MSKLC&#39;s user interface">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-08">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-08-10">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/08/10/4322536.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
</html>