<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/08/11/4340636.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Documentation does not always imply existence</title></head><body>
<h1>Documentation does not always imply existence</h1>
<p><em>by Michael S. Kaplan, published on 2007/08/12 02:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/08/11/4340636.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>You ever hear&nbsp;those fun stories about people who the fast food drive thru had to serve because someone left the outside sign's lights on?</P>
<P>Well, software doesn't really work that way.</P>
<P>So documentation does not always imply existence; sometimes, documentation just implies doc bugs!&nbsp;</P>
<P>Like the other day over in the microsoft.public.dotnet.internationalization when Bob Bins asked:</P>
<BLOCKQUOTE>
<P><EM><FONT face="times new roman,times">If you look at the MSDN sample for Encoding.GetEncoding Method (Int32) it shows the below sample code..<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Get a UTF-32 encoding by codepage.<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Encoding e1 = Encoding.GetEncoding( 65005 );<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Get a UTF-32 encoding by name.<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Encoding e2 = Encoding.GetEncoding( "utf-32" );<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Check their equality.<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine( "e1 equals e2? {0}", e1.Equals( e2 ) );<BR><BR><BR>The problem is that the first line throws an exception:<BR>System.NotSupportedException Additional information: No data is available for encoding 65005.<BR><BR>If I look at the code page property when using the "utf-32" string it says 12000.<BR><BR>Which one is correct?&nbsp; Why does the sample show 65005 as utf-32 when the function thinks 12000 is the utf32 codepage?</FONT></EM></P></BLOCKQUOTE>
<P>That is indeed the sample I found for the&nbsp;<A class="" href="http://msdn2.microsoft.com/library/wzsz3bk3.aspx" mce_href="http://msdn2.microsoft.com/library/wzsz3bk3.aspx">Encoding.GetEncoding Method (Int32)</A>, as Bob indicated.</P>
<P>Of course if you look at the <A class="" href="http://msdn2.microsoft.com/library/system.text.utf32encoding.aspx" mce_href="http://msdn2.microsoft.com/library/system.text.utf32encoding.aspx">UTF32Encoding class</A> documentation it pretty clearly says what the the code page values are:</P>
<BLOCKQUOTE>
<P><EM>UTF32Encoding corresponds to the Windows code pages 12000 (little-endian byte order) and 12001 (big-endian byte order).</EM></P></BLOCKQUOTE>
<P>This is clearly a bit of a misnomer since no version of Windows that has ever shipped recognizes those code page values as being valid, which makes&nbsp;calling them <EM>Windows code pages</EM> a bit of an overstatement. I actually even mentioned them myself a couple of years ago back in <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2005/08/01/446475.html" mce_href="http://archives.miloush.net/michkap/archive/2005/08/01/446475.html">Not every code page value is supported</A></STRONG> and the title alone makes it clear that not every code page value one might see is one that the operating system is going to recognize.</P>
<P>Now this problem seems pretty widespread in the docs (just search MSDN for <A class="" href="http://search.msdn.microsoft.com/search/Default.aspx?query=65005&amp;brand=msdn&amp;locale=en-us&amp;refinement=00&amp;lang=en-us" mce_href="http://search.msdn.microsoft.com/search/Default.aspx?query=65005&amp;brand=msdn&amp;locale=en-us&amp;refinement=00&amp;lang=en-us">that 65005 code page value</A> to see what I mean -- there are enough&nbsp;instances of this problem to make it seem systemic!), but the most interesting one is in the <A class="" href="http://msdn2.microsoft.com/library/system.text.encoding.windowscodepage.aspx" mce_href="http://msdn2.microsoft.com/library/system.text.encoding.windowscodepage.aspx">Encoding.WindowsCodePage Property</A> topic which has a huge list disguised as a code comment with several of these incorrect values. Understanding the source here might be a worthwhile exercise.</P>
<P>In any case, as MVP Mihai Nita pointed out, using the <A class="" href="http://msdn2.microsoft.com/library/system.text.utf32encoding.aspx" mce_href="http://msdn2.microsoft.com/library/system.text.utf32encoding.aspx">UTF32Encoding class</A>&nbsp;is a much better idea for getting UTF-32 since that way both byte-endian-ness and BOM info can be more readily tailored....</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM> <FONT size=5>Å¼</FONT> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/017c" mce_href="http://www.fileformat.info/info/unicode/char/017c">U+017c</A>, a.k.a. LATIN SMALL LETTER Z WITH DOT ABOVE)</EM></FONT></P>
<hr/><p><strong>Mihai</strong> on 13 Aug 2007 2:23 PM:</p><div style="margin-left: 1em"><p>Actually, having UTF-32LE and UTF-32BE as Windows code pages (usable with MultiByteToWideChar/WideCharToMultiByte) would be handy. Same UTF-16BE, if I think of it :-)</p>
<p>I mean, UTF-8 is there, so why not other </p>
<p>&quot;UTFs&quot;?</p></div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/08/11/4342275.html" title="Should old aquaintance *not* be forgot, code pages may screw up their names anyhow">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/08/11/4317850.html" title="&#39;crap cartoon font&#39; (Part 1)">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-08">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-08-11">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/08/11/4340636.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
</html>