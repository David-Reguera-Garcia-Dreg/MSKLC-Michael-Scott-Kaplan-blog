<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/09/21/5027338.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>A&P of Sort Keys, part 10 (aka I've kana wanted to start talking about Japanese)</title></head><body>
<h1>A&P of Sort Keys, part 10 (aka I've kana wanted to start talking about Japanese)</h1>
<p><em>by Michael S. Kaplan, published on 2007/09/21 04:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/09/21/5027338.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Previous posts in this series:</P>
<UL>
<LI>Part 0: <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2007/09/10/4847780.html" mce_href="http://archives.miloush.net/michkap/archive/2007/09/10/4847780.html">The empty string sorts the same in every language</A></STRONG> 
<LI>Part 1: <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2007/09/11/4861436.html" mce_href="http://archives.miloush.net/michkap/archive/2007/09/11/4861436.html">The law of the letter -- e.g. Latin &lt; Greek &lt; Cyrillic</A></STRONG> 
<LI>Part 2: <A class="" href="http://archives.miloush.net/michkap/archive/2007/09/12/4875560.html" mce_href="http://archives.miloush.net/michkap/archive/2007/09/12/4875560.html"><STRONG>The string that won? Didn't have a mark on him!</STRONG></A> 
<LI>Part 3: <A class="" href="http://archives.miloush.net/michkap/archive/2007/09/13/4889199.html" mce_href="http://archives.miloush.net/michkap/archive/2007/09/13/4889199.html"><STRONG>Should you let a string make it's case? If so, Y?</STRONG></A> 
<LI>Part 4: <A class="" href="http://archives.miloush.net/michkap/archive/2007/09/14/4905625.html" mce_href="http://archives.miloush.net/michkap/archive/2007/09/14/4905625.html"><STRONG>It isn't a race but let's make an EXCEPTION and cross the Finnish line</STRONG></A> 
<LI>Part 5: <A class="" href="http://archives.miloush.net/michkap/archive/2007/09/15/4924008.html" mce_href="http://archives.miloush.net/michkap/archive/2007/09/15/4924008.html"><STRONG>EXPANSIONing your horizons</STRONG></A> 
<LI>Part 6: <A class="" href="http://archives.miloush.net/michkap/archive/2007/09/16/4937196.html" mce_href="http://archives.miloush.net/michkap/archive/2007/09/16/4937196.html"><STRONG>Relax, be calm, and deCOMPRESS if you are feeling out of sorts</STRONG></A> 
<LI>Part 7: <A class="" href="http://archives.miloush.net/michkap/archive/2007/09/17/4950008.html" mce_href="http://archives.miloush.net/michkap/archive/2007/09/17/4950008.html"><STRONG>You're very thin now, but I can still recognize you</STRONG></A> 
<LI>Part 8: <A class="" href="http://archives.miloush.net/michkap/archive/2007/09/18/4971376.html" mce_href="http://archives.miloush.net/michkap/archive/2007/09/18/4971376.html"><STRONG>You can often think of ignoring weights as a form of ignorance</STRONG></A></LI>
<LI>Part 9: <A class="" href="http://archives.miloush.net/michkap/archive/2007/09/20/5008305.html" mce_href="http://archives.miloush.net/michkap/archive/2007/09/20/5008305.html"><STRONG>Not always transitive, but punctual and punctuating</STRONG></A></LI></UL>
<P>Today's post is going to be a first look at some of the Japanese support that is there in Windows....</P>
<P>Well, not a first look, since <A class="" href="http://archives.miloush.net/michkap/archive/2006/01/03/508579.html" mce_href="http://archives.miloush.net/michkap/archive/2006/01/03/508579.html"><STRONG>this post</STRONG></A> and the seven others it links to have talked about it already. :-)</P>
<P>In general. given the challenges faced in trying to handle a Kanji sort correctly, at present (and for the last decade!) only the Kana are handled (but anyone could add the kana for the pronunciation in a database and that additional column for collation. This will have to do until a more intelligent type of pronunciation-based Kanji sort is given....</P>
<P>Also, kana sorts properly in all locales, which can come in handy.</P>
<P>So we take a nice word like <STRONG>ramen</STRONG> (a loan word from Chinese) and look at it in katakana, narrow katakana, and hiragana (using <A class="" href="http://msdn2.microsoft.com/library/ms776290.aspx" mce_href="http://msdn2.microsoft.com/library/ms776290.aspx">LCMapString</A>/<A class="" href="http://msdn2.microsoft.com/library/ms776387.aspx" mce_href="http://msdn2.microsoft.com/library/ms776387.aspx">LCMapStringEx</A>&nbsp;to do the various conversions, of course).</P>
<P>Note that the word would usually be spelled using katakana, so the other forms are just illustrative for us:</P>
<BLOCKQUOTE>
<P>ラーメン&nbsp;&nbsp; <FONT color=#009900>22 42 22 02 22 35 22 80</FONT> 01 01 01 <FONT color=#993300>ff 03 05 02 c4 c4 c4 c4 ff ff</FONT> 01 00<BR>ﾗｰﾒﾝ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <FONT color=#009900>22 42 22 02 22 35 22 80</FONT> 01 01 01 <FONT color=#993300>ff 03 05 02 c4 c4 c4 c4 ff c4 c4 c4 c4 ff</FONT> 01 <FONT color=#ff00ff>80 17 06 03</FONT> 00<BR>らーめん&nbsp; <FONT color=#009900>22 42 22 02 22 35 22 80</FONT> 01 01 01 <FONT color=#993300>ff 03 05 02 ff ff</FONT> 01 <FONT color=#ff00ff>80 17 06 03</FONT> 00</P></BLOCKQUOTE>
<P>Clearly all three of them will sort near each other with identical primary weights. </P>
<P>But some interesting havoc is being wreaked here in both the special weights and punctuation weights areas, definitely worthy of some investigation and discussion....</P>
<P>The order being strived for is something I talked about a little bit in <A class="" href="http://archives.miloush.net/michkap/archive/2005/06/01/423711.html" mce_href="http://archives.miloush.net/michkap/archive/2005/06/01/423711.html"><STRONG>Knock knock! Who's there? Kana! Kana Who?</STRONG></A>, which you may have seen before. And indeed if you look at the sort keys, this was accomplished for the simple example, though it does not look as rigorous as it maybe could, from first glance.</P>
<P>Now I could cheat and give it to you by looking at the source and the data and explaining it, but I think we should do it the interesting hacking kind of way, don't you? :-)</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM> <FONT size=6>⑽</FONT> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/247d" mce_href="http://www.fileformat.info/info/unicode/char/247d">U+247d</A>, a.k.a. PARENTHESIZED NUMBER TEN)</EM></FONT></P>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/02/17 <a href="http://archives.miloush.net/michkap/archive/2010/02/17/9964066.html">Knock knock! Who's there? Kana! Kana Who? I Kana got something wrong!</a></p><p>2008/08/21 <a href="http://archives.miloush.net/michkap/archive/2008/08/21/8883467.html">A&P of Sort Keys, part 14: The Hangul is really getting OLD</a></p><p>2008/03/03 <a href="http://archives.miloush.net/michkap/archive/2008/03/03/7984960.html">On reversing the irreversible (grabbing the data, part II: the weirdness not so related to locales)</a></p><p>2007/10/09 <a href="http://archives.miloush.net/michkap/archive/2007/10/09/5375754.html">A&P of Sort Keys, part 13 (About the function that is too lazy to get it right every time)</a></p><p>2007/10/08 <a href="http://archives.miloush.net/michkap/archive/2007/10/08/5270854.html">A&P of Sort Keys, part 12 (aka Han sorts first!)</a></p><p>2007/09/24 <a href="http://archives.miloush.net/michkap/archive/2007/09/24/5085893.html">A&P of Sort Keys, part 11 (aka It's not like ideographic sorts were developed idiopathically)</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/09/22/5055092.html" title="A high holiday that goes to 11">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/09/21/5025885.html" title="If you had gotten there first, you might have staked your claim too!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-09">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-09-21">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/09/21/5027338.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
</html>