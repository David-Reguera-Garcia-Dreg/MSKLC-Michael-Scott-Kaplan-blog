<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/07/31/4154107.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>See that version there? It is going down, man! #2 (aka Everybody WYNNs)</title></head><body>
<h1>See that version there? It is going down, man! #2 (aka Everybody WYNNs)</h1>
<p><em>by Michael S. Kaplan, published on 2007/07/31 19:12 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/07/31/4154107.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>When I posted <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2007/07/30/4143574.html" mce_href="http://archives.miloush.net/michkap/archive/2007/07/30/4143574.html">part one</A></STRONG> of this two part series, I should have guessed&nbsp;that <A class="" href="http://codeka.com/blogs/" mce_href="http://codeka.com/blogs/">Dean Harding</A> would have a good <A class="" href="http://archives.miloush.net/michkap/archive/2007/07/30/4143574.html#4145889" mce_href="http://archives.miloush.net/michkap/archive/2007/07/30/4143574.html#4145889">answer</A>:</P>
<BLOCKQUOTE>
<P><EM>Well, I'd say if the major version changes *either way* you should re-index.</EM></P>
<P><EM>If a minor version changes backwards, you probably have to re-index as well. Because otherwise, you basically have to re-index strings that *now* return FALSE for IsNLSDefinedString and you couldn't do that without scanning them all -- so you may as well just re-index everything.</EM></P>
<P><EM>To be honest, though, I don't see how you could have done anything differently. If you wanted to skip the "re-index on minor version decrement", I believe you would have to change IsNLSDefinedString so that it returned the minimum version that the string would have been defined in, and I can't imagine how big the data file would have to be to make that possible :-)</EM></P></BLOCKQUOTE>
<P>This is spot on correct -- either major or minor version changes would require you to re-index, and there really is no way around that without adding a whole bunch of metadata about the nature if the changes and/or Dean's suggestion (information about character age with the same weight). The only alternative would be if one had actual knowledge of the changes because one happened to be working there, or one happened to hear about the change.</P>
<P>For example -- and this is a not entirely contrived example as it may happen one day -- let's say that the prevailing practice in Sweden were to change along the lines I discussed in <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/04/25/583307.html" mce_href="http://archives.miloush.net/michkap/archive/2006/04/25/583307.html">Why do we call w 'double u' -- doesn't it look more like a 'double v'?</A></STRONG> and the <A class="" href="http://www.svenskaakademien.se/" mce_href="http://www.svenskaakademien.se/">Swedish Academy</A>'s change to split <STRONG>W</STRONG> and <STRONG>V</STRONG> and give them both primary weights were picked up in some future version of Windows.</P>
<P>To be perfectly honest I expect it to happen eventually, though we could even be looking multiple versions into the future before it was generally expected by the public.</P>
<P><EM>(I am actually curious how fast it will be in these modern times, and whether the inertia surrounding such updates will hold it back and if so for how long!)</EM></P>
<P>Okay, so that is a major version change for sv-SE (0x041d) that may or may not apply to sv-FI (0x081d) and which definitely wouldn't apply to fi-FI (0x040b). But only a major version change in the NLS version, not the defined version -- since the repertoire is unchanged.</P>
<P>We have done it before (ref: <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/04/27/584439.html" mce_href="http://archives.miloush.net/michkap/archive/2006/04/27/584439.html">The disunification of Norwegian and Danish sorting</A></STRONG>), so that part is no problem.</P>
<P>I am sure I'll even talk about it here, I may even know a bit of Swedish by then!</P>
<P>In this particular case though, even if that one specific locale (or two specific locales!) change, the change itself actually has no point in worrying about <A class="" href="http://msdn2.microsoft.com/library/ms776253.aspx" mce_href="http://msdn2.microsoft.com/library/ms776253.aspx">IsNLSDefinedString</A> results since none of them would have changed (this kind of underscores the reason why <A class="" href="http://msdn2.microsoft.com/library/ms776253.aspx" mce_href="http://msdn2.microsoft.com/library/ms776253.aspx">IsNLSDefinedString</A> results would not be useful!), but it may be worth scanning and only re-indexing strings that contain one of the following characters (these are the ones that move for this change in Swedish/Finnish, I don't know whether the WYNN would actually move in this case or not):</P><FONT face="Consolas,Segoe UI,Segoe,Arial Unicode MS,Code 2000" size=4>
<UL>
<LI>w&nbsp;&nbsp;&nbsp; <A class="" href="http://www.fileformat.info/info/unicode/char/0077" mce_href="http://www.fileformat.info/info/unicode/char/0077">U+0077</A>&nbsp;&nbsp;&nbsp; LATIN SMALL LETTER W</LI>
<LI>W&nbsp;&nbsp;&nbsp; <A class="" href="http://www.fileformat.info/info/unicode/char/0057" mce_href="http://www.fileformat.info/info/unicode/char/0057">U+0057</A>&nbsp;&nbsp;&nbsp; LATIN CAPITAL LETTER W</LI>
<LI>ŵ&nbsp;&nbsp;&nbsp; <A class="" href="http://www.fileformat.info/info/unicode/char/0175" mce_href="http://www.fileformat.info/info/unicode/char/0175">U+0175</A>&nbsp;&nbsp;&nbsp; LATIN SMALL LETTER W WITH CIRCUMFLEX</LI>
<LI>Ŵ&nbsp;&nbsp;&nbsp; <A class="" href="http://www.fileformat.info/info/unicode/char/0174" mce_href="http://www.fileformat.info/info/unicode/char/0174">U+0174</A>&nbsp;&nbsp;&nbsp; LATIN CAPITAL LETTER W WITH CIRCUMFLEX</LI>
<LI><FONT face="Segoe UI,verdana,geneva">ƿ</FONT>&nbsp;&nbsp;&nbsp; <A class="" href="http://www.fileformat.info/info/unicode/char/01bf" mce_href="http://www.fileformat.info/info/unicode/char/01bf">U+01bf</A>&nbsp;&nbsp;&nbsp; LATIN LETTER WYNN</LI></UL></FONT>
<P mce_keep="true">and not touching the rest. Glancing through at a few Swedish corpuses, I think from a performance standpoint it might be cheaper to approach it that way in such a case....</P>
<P mce_keep="true">Now clearly this might not be typical. But on the other hand it might be, to strike the proper correctness/compatibility balance!</P>
<P mce_keep="true">&nbsp;</P>
<P mce_keep="true"><FONT color=#ff00ff><EM>This post brought to you by</EM> <FONT size=5>ƿ</FONT> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/01bf" mce_href="http://www.fileformat.info/info/unicode/char/01bf">U+01bf</A>, a.k.a. LATIN LETTER WYNN)</EM></FONT></P>
<hr/><p><strong>Dean Harding</strong> on 31 Jul 2007 8:01 PM:</p><div style="margin-left: 1em"><p>That hyopthetical Swedish change is interesting. It's a bit of a chicken-and-egg problem really, isn't it? I mean, computers being as prevalent as they are, such a change could not be considered &quot;mainstream&quot; until computers sorted in the &quot;new&quot; way, but at the same time, Microsoft wouldn't want to update the Windows sort tables until the change becomes &quot;widespread&quot; on its own...</p>
</div>
<p><strong>Michael S. Kaplan</strong> on 31 Jul 2007 8:11 PM:</p><div style="margin-left: 1em"><p>Well, people start feeling more and more like the computers have it wrong, like happened with Norwegian/Danish -- how long that might take is a really interesting issue (one can compare it with spelling reform in France or other countries, or ORNL changes in Tamil, or other orthography and other changes that have happend over the last thirty years).</p>
<p>So not entirely chicken vs. egg, I think there is a way to move forward....</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/03/09 <a href="http://archives.miloush.net/michkap/archive/2010/03/09/9975184.html">Coloring outside the lines in the a-ness of the Hungarian Technical Sort</a></p><p>2007/07/31 <a href="http://archives.miloush.net/michkap/archive/2007/07/31/4155336.html">If this post really describes a bug, would I actually put it in the WYNN column?</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/07/31/4155336.html" title="If this post really describes a bug, would I actually put it in the WYNN column?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/07/31/4149843.html" title="Return of the Mack^H^H^H^HMicrosoft Locale Builder!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-07-31">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/07/31/4154107.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:37 GMT -->
</html>