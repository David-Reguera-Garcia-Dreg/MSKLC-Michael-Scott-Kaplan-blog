<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/07/21/3991927.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:38 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Theory vs. practice in software development</title></head><body>
<h1>Theory vs. practice in software development</h1>
<p><em>by Michael S. Kaplan, published on 2007/07/21 14:53 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2007/07/21/3991927.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Sometimes it is easy to build implementations in software that spend so much time striving for consistency and cleanliness of design that they stop really modeling the world they are nominally attempting to represent.</P>
<P>I was thinking about this the other day after one of those MS internal mail threads splintered into many different branches (as often seems to happen). The thread was about <A class="" href="http://msdn2.microsoft.com/library/system.datetime.aspx" mce_href="http://msdn2.microsoft.com/library/system.datetime.aspx">DateTime</A> in .NET and specifically some edge case surrounding <A class="" href="http://msdn2.microsoft.com/library/system.datetime.minvalue.aspx" mce_href="http://msdn2.microsoft.com/library/system.datetime.minvalue.aspx">DateTime.MinValue</A> and <A class="" href="http://msdn2.microsoft.com/library/system.datetime.maxvalue.aspx" mce_href="http://msdn2.microsoft.com/library/system.datetime.maxvalue.aspx">DateTime.MaxValue</A>, especially exposed when using <A class="" href="http://msdn2.microsoft.com/library/system.datetime.touniversaltime.aspx" mce_href="http://msdn2.microsoft.com/library/system.datetime.touniversaltime.aspx">DateTime.ToUniversalTime()</A>.</P>
<P>In the end, it&nbsp;finally&nbsp;inspired Josh Free to write a nice summary post on the whole matter entitled <A class="" href="http://blogs.msdn.com/bclteam/archive/2007/06/12/datetime-touniversaltime-returns-maxvalue-minvalue-on-overflow-josh-free.aspx" mce_href="http://blogs.msdn.com/bclteam/archive/2007/06/12/datetime-touniversaltime-returns-maxvalue-minvalue-on-overflow-josh-free.aspx">BCL Refresher: DateTime.ToUniversalTime returns MaxValue/MinValue on overflow</A>. </P>
<P>Now that is a truly excellent post that goes to great lengths to really explore and explain the issue. And it is not my intent to pick on either Josh in general or&nbsp;on that post in particular.</P>
<P>But I am going to talk for a bit about one of the flaws in the implementation of DateTime in .NET....</P>
<P>The problem is that it is a software model for the <A class="" href="http://en.wikipedia.org/wiki/Gregorian_calendar" mce_href="http://en.wikipedia.org/wiki/Gregorian_calendar">Gregorian calendar</A>, which itself was not created until the 1500's. So what is the meaning of dates that are literally representing values in a calendar before they even existed?</P>
<P>Not that there is clean date one <EM>could</EM> use, given the huge variability in the actual way that countries throughout the world moved to use the Gregorian calendar. You can look on <A class="" href="http://webexhibits.org/calendars/year-countries.html" mce_href="http://webexhibits.org/calendars/year-countries.html">this&nbsp;page</A> for a good comprehensive look at <EM>that</EM> issue, but the summary version is that any claim of date in the Gregorian calendar in .NET:</P>
<UL>
<LI>before 1582 is essentially meaningless and did not exist;</LI>
<LI>between 1582 and 1929 had better include a COUNTRY because it is potentially also meaningless or&nbsp;at least&nbsp;unclear as to the date it represents.</LI></UL>
<P>Now the problem would be solvable in a much more conventional way if <A class="" href="http://msdn2.microsoft.com/library/system.datetime.aspx" mce_href="http://msdn2.microsoft.com/library/system.datetime.aspx">DateTime</A>&nbsp;were based on something independent of calendar and thus separated the problem of trying to represent individual time periods and trying to display them in the conventions of a particular calendar.</P>
<P>But that is not how the type was designed.</P>
<P>Kind of puts posts like <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/05/14/597278.html" mce_href="http://archives.miloush.net/michkap/archive/2006/05/14/597278.html">Long Live the Emperor</A></STRONG> and <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2006/10/25/868025.html" mce_href="http://archives.miloush.net/michkap/archive/2006/10/25/868025.html">Out of [implied] range</A></STRONG> in perspective as software engineers grapple with how to represent date values that are either undefined or under-defined to such large degree as to make them little more than approximations in some cases.</P>
<P><EM>(gives some perspective to potential reasons behind the&nbsp;value of </EM><A class="" href="http://msdn2.microsoft.com/library/system.data.sqltypes.sqldatetime.minvalue.aspx" mce_href="http://msdn2.microsoft.com/library/system.data.sqltypes.sqldatetime.minvalue.aspx"><EM>System.Data.SqlTypes.SqlDateTime.MinValue</EM></A><EM>, with possibly the single greatest expression of Microsoft being a US-centric software company spelled out in clear and unambiguous technical terms!)</EM></P>
<P>In the end it is a further reflection of the problems I hinted at in <STRONG><A class="" href="http://archives.miloush.net/michkap/archive/2007/07/06/3720057.html" mce_href="http://archives.miloush.net/michkap/archive/2007/07/06/3720057.html">this post</A></STRONG> and others, but perhaps hinting toward the actual shape of the solution.</P>
<P>A big part of me would really rather see this engineering perspective that will (for lack of a better term) implement the crap out of a solution to a technical problem given all of the parameters. Because the only real flaw in the design is that the previous efforts to implement the crap out of things were done without having all of the facts. </P>
<P>Think of how much better they could do is they really attempted to take these additional data points into account!</P>
<P>Is there a .NET Architect or Distinguished Engineer in the house? :-)</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM> <FONT size=5>·¢Å</FONT> <EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/1881" mce_href="http://www.fileformat.info/info/unicode/char/1881">U+1881</A>, a.k.a. MONGOLIAN LETTER ALI GALI VISARGA ONE)</EM></FONT></P>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/09/14 <a href="http://archives.miloush.net/michkap/archive/2010/09/14/10061557.html">Using a culture's format, without using that culture to format?</a></p><p>2008/12/16 <a href="http://archives.miloush.net/michkap/archive/2008/12/16/9225748.html">Grody to the Max[Date]!</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2007/07/21/3993622.html" title="Avoiding an international mailto maelstrom">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2007/07/18/3940495.html" title="Sometimes they are not as helpful shortcuts">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2007-07-21">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2007/07/21/3991927.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:38 GMT -->
</html>