<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2004/12/27/332618.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Why is there no pronunciation-based sort for Japanese?</title></head><body>
<h1>Why is there no pronunciation-based sort for Japanese?</h1>
<p><em>by Michael S. Kaplan, published on 2004/12/27 03:03 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2004/12/27/332618.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><EM>(From the </EM><a href="http://archives.miloush.net/michkap/archive/2004/11/27/271003.html"><EM>Suggestion Box</EM></A><EM>)</EM></P>
<P>When people start looking at East Asian languages, they notice that most of the regions have a sort based on pronunciation:&nbsp;Korea has a sort based on the Hangul pronunciation of the Hangul and Hanja codepoints, Taiwan has one based on the pronunciation in Bopomofo order, and China has one based on the Pinyin pronunciation. They notice that there is one major region missing from this list -- Japan. They wonder why Japanese is not given the benefits of such a sort. Isn't the Japanese market important to Microsoft?</P>
<P><EM>(I have been asked this very question, sometimes that very way, in email)</EM></P>
<P>There are two answers to this question, one long and one short.</P>
<P>The short answer is that there&nbsp;<EM>is</EM> a pronunciation based sort in Windows. Simply pass any <A href="http://www.unicode.org/charts/PDF/U3040.pdf">Hiragana</A> or <A href="http://www.unicode.org/charts/PDF/U30A0.pdf">Katakana</A>&nbsp;to <A title=CompareString href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/resources/strings/stringreference/stringfunctions/comparestring.asp" target=_blank>CompareString</A> or <A title=LCMapString href="http://msdn.microsoft.com/library/en-us/intl/nls_5s2v.asp" target=_blank>LCMapString</A>/LCMAP_SORTKEY&nbsp;and you will see everything collate properly. It even works in all locales; one does not even need to pass the Japanese LCID, 0x0411, to&nbsp;see it happen. The world is in the proper&nbsp;ｱアあｲイいｳウうｴエえｵオお&nbsp;order (in the traditional AIUEO order, Halfwidth Katakana followed by Fullwidth Katakana followed by Hiragana). What more could one want?</P>
<P>Of course the answer to <EM>that</EM> question is in the long answer -- people want to know how to get the Kanji (the Han ideographs) to sort in this order, too.</P>
<P>The answer to this question is that there is no such sort. To explain why, lets look at how the Korean/Chinese/Taiwanese regional sorts are done. In all three of them, there are often characters that have multiple different pottential pronunications in an ideograph, based on context (just as exists in English for words like <EM>Polish</EM> the language versus <EM>polish</EM> the furniture cleaner). This would make pronunication based sorts impossible except for the fact that the most common pronunciation is determined and then that is the one that is used when multiple pronunications exist. </P>
<P>Admittedly this is not a perfect solution, but short of a computer that can actually <EM>read</EM> the text, there is not much more that can be done (although I am sure one could imagine interesting dictionary-based ways to approximate things -- I have, and they fall under the heading of 'clever' even when they are not really practical).</P>
<P>Now lets look at the situation with Japanese.</P>
<P>There are three different types of pronunications, called readings (on, kun, and nanori) and individual Kanji can have one, two, or all three of these (and in most cases at least the first two). They can also have more than one of each! The third reading type (nanori) is for name and there is in most cases no way to know what it is without being told (this is in fact how phonebooks work -- someone giving the pronunciation in Kana to the phone company or list creator). </P>
<P>Given all of that, there is no way to even guess what the most common pronunciation is, even if the data were available, without giving users results that seem wrong or confusing to them. Because even though one could craft an algorithm that could make intelligent guesses at which type of reading is meant, there is no way to make something at least as likely to be correct as the other East Asian languages, especially given that what is probably the most common need for such a sort (lists of names) would require a separate field for the pronunciation.</P>
<P>And this is indeed the best solution for such situation -- a separate field containing the pronunciation. It works quite well, and I would encourage any application that wants to do a pronunciation-based sort to try doing this as a method.</P>
<P>In theory, this is something an application can do when a name is typed when the IME mode is based on pronunciation; this is the one time that the pronunciation information is present without it being queried separately -- during the composition phase. As far as I know, this is not something that is done right now (if I&nbsp;am mistaken feel free to let me know!). It would be exceedingly difficult to do with the IME APIs and Windows messages as they are (and it is nearly impossible in the .NET Framework since the appropriate events are not even exposed).</P>
<P><FONT color=#800080><EM>This post brought to you by </EM>"ㄎ"<EM> (U+310e, a.k.a. BOPOMOFO LETTER K)</EM></FONT></P>
<hr/><p><a id="332623" href="#332623">#</a> <strong>Norman Diamond</strong> on 27 Dec 2004 1:31 AM:</p><div style="margin-left: 1em">&gt; In theory, this is something an application<br>&gt; can do when a name<br><br>a name or anything else<br><br>&gt; is typed when the IME mode is based on<br>&gt; pronunciation; this is the one time that the<br>&gt; pronunciation information is present without<br>&gt; it being queried separately -- during the<br>&gt; composition phase.<br><br>Agreed.<br><br>&gt; As far as I know, this is not something that<br>&gt; is done right now<br><br>I have read that in some cases it is possible to reconvert a Kanji string after mistakenly converting an undesired Kanji string with the same pronunciation.  I've never been able to do that myself.  As a guess, it might be something particular to Word 2002 and later plus IME 2002 and later, maybe or maybe not related to the &quot;Natural&quot; IME.  But even when I had Word 2002 temporarily installed on a machine, I wasn't able to do recoversions myself.  Also if I recall enough correctly of what I read, reconversion is no longer possible after the document is closed and reopened, because the pronunciation is not stored.<br><br>By the way some characters have more than 10 readings.</div>
<p><a id="332628" href="#332628">#</a> <strong>Michael Kaplan</strong> on 27 Dec 2004 1:59 AM:</p><div style="margin-left: 1em">In both Windows XP and Windows Server 2003, the help for the Japanese IME include keystrokes that can be used to revert a converted string or character to a reading, which is what I think you are talking about.<br><br>I was thinking of an application that would do this behind the scenes so if you type in a name it would get the pronunciation and stick it in a &quot;reading&quot; field. No extr work required from the user!</div>
<p><a id="332834" href="#332834">#</a> <strong>Chris Pearce</strong> on 27 Dec 2004 10:37 AM:</p><div style="margin-left: 1em">One of the things you will need to be aware of if you are going to use the IME input as a reading for the kanji is that you're going to have times when that input is not correct.<br><br>Sometimes for place and people names, or other words that don't want to come up nicely with the IME, it's easier to type in alternative readings for a kanji and select it from the list.<br><br>Take for example '真乗院', a minor temple in Tokyo.  It doesn't come up in the IME when you input 'しんじょういん(shinjouin)', but typing in the readings for individual kanji 'ma', 'noru' (delete the ru after you select the kanji) and 'in'.  But now 'Manoin' would sort completely differently than 'Shinjouin.'<br><br>Little IME tricks like this could play havoc if you don't give people an opportunity to correct their kanji readings.</div>
<p><a id="333028" href="#333028">#</a> <strong>Michael Kaplan</strong> on 27 Dec 2004 5:47 PM:</p><div style="margin-left: 1em">Chris -- I agree, by all means!<br><br>But a solution that put it in and let you override it is superior to one that forcess you to always type it, even though it may well be what you just typed in order to enter the string in the first place.</div>
<p><a id="352662" href="#352662">#</a> <strong>Curt Sampson</strong> on 13 Jan 2005 7:47 PM:</p><div style="margin-left: 1em">Don't forget the fourth method of reading: &quot;special&quot; readings. These are basically arbitrary. For example, the characters for &quot;one&quot; and &quot;day,&quot; 一日, can, and not infrequently is, read using on-readings for both characters: &quot;ichi nichi.&quot; In this case it expresses the idea of a length of time one day long. However, when you're using it to express the idea of &quot;first day&quot; (e.g., the first day of the month), you pronounce it &quot;tsuitachi.&quot; This bears no relation to the on or kun readings of either character. Moreover, it's a single word; you can't for example assign the &quot;tsui&quot; to 一 and the &quot;tachi&quot; to 日; the reading is valid only for the two characters in combination.</div>
<p><a id="352680" href="#352680">#</a> <strong>Michael Kaplan</strong> on 13 Jan 2005 8:15 PM:</p><div style="margin-left: 1em">I also found an interesting article about all of this, including more info on Kanji and the readings thereof, at <a target="_new" href="http://www.nationmaster.com/encyclopedia/Kanji">http://www.nationmaster.com/encyclopedia/Kanji</a></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2007/09/24 <a href="http://archives.miloush.net/michkap/archive/2007/09/24/5085893.html">A&P of Sort Keys, part 11 (aka It's not like ideographic sorts were developed idiopathically)</a></p><p>2006/01/03 <a href="http://archives.miloush.net/michkap/archive/2006/01/03/508579.html">'Acceptable' Japanese sort order?</a></p><p>2005/12/07 <a href="http://archives.miloush.net/michkap/archive/2005/12/07/500827.html">Supporting a pronunciation based sort for East Asian languages...</a></p><p>2005/06/01 <a href="http://archives.miloush.net/michkap/archive/2005/06/01/423711.html">Knock knock! Who's there? Kana! Kana Who?</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2004/12/27/333134.html" title="OT -- They taste like chicken, don&#39;t they?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2004/12/26/332392.html" title="Is it Hangul? or Hangeul? or Han&#39;gŭl? or what?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2004-12">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2004-12-27">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2004/12/27/332618.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
</html>