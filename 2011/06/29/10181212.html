<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2011/06/29/10181212.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>There's no "I" in IDN, part 5: Stephen Colbert's job is not in any jeopardy</title></head><body>
<h1>There's no "I" in IDN, part 5: Stephen Colbert's job is not in any jeopardy</h1>
<p><em>by Michael S. Kaplan, published on 2011/06/29 07:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2011/06/29/10181212.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p>Prior blogs in this series:</p>
<ul>
<li><strong><a title="There's no &quot;I&quot; in IDN, part 1: If you're not Unicode, you're just wrong!" href="http://archives.miloush.net/michkap/archive/2011/02/14/10128621.html">part 1: If you're not Unicode, you're just wrong!</a></strong></li>
<li><strong><a title="There's no &quot;I&quot; in IDN, part 2: Try not to use the wrong functions!" href="http://archives.miloush.net/michkap/archive/2011/04/02/10149149.html">part 2: Try not to use the wrong functions!</a></strong></li>
<li><strong><a title="There's no &quot;I&quot; in IDN, part 3: There's no &quot;I&quot; in DIY, either!" href="http://archives.miloush.net/michkap/archive/2011/05/25/10168228.html">part 3: There's no "I" in DIY, either!</a></strong></li>
<li><strong><a title="There's no &quot;I&quot; in IDN, part 4: the 'path' to Hell is paved with IDN bugs" href="http://archives.miloush.net/michkap/archive/2011/06/17/10173790.html">part 4: the 'path' to Hell is paved with IDN bugs</a></strong></li>
</ul>
<p>I suspect some of my readers are either fans or at least regular watchers of The Colbert Report.</p>
<p>Perhaps just my smarter readers.</p>
<p>Or maybe just the ones with basic cable....</p>
<p>Today's blog ends up being about a combination "tip of the hat/wag of the finger" question.</p>
<p>In honor of Stephen Colbert....</p>
<p>The question goes something&nbsp;like this:</p>
<p style="padding-left: 30px;"><strong>SUBJECT:</strong> <strong>String.Compare for double byte characters in .Net</strong></p>
<p style="padding-left: 30px;">I have following two string characters whose comparisons in SQL are equal, however I couldn&rsquo;t figure out any comparisons in .net (culture/ordinal/case insensitive) that would return me equality. Any ideas?</p>
<p style="padding-left: 30px;">Goal is to not change SQL settings, but to find insensitive compare in .net.</p>
<p style="padding-left: 60px;"><strong><span style="font-family: courier new,courier;">String.Compare(</span></strong><br /><strong><span style="font-family: courier new,courier;">&nbsp;&nbsp;&nbsp; "<a href="mailto:0336753496aaa@ae2.dion.ne.jp">0336753496aaa@ae2.dion.ne.jp</a>", </span></strong><br /><strong><span style="font-family: courier new,courier;">&nbsp;&nbsp;&nbsp;&nbsp; "<a href="mailto:0336753496ａａａ@ae2.dion.ne.jp">0336753496ａａａ@ae2.dion.ne.jp</a>", </span></strong><br /><strong><span style="font-family: courier new,courier;">&nbsp;&nbsp;&nbsp; CultureInfo.InvariantCulture, </span></strong><br /><strong><span style="font-family: courier new,courier;">&nbsp;&nbsp;&nbsp; CompareOptions.IgnoreCase)</span></strong></p>
<p style="padding-left: 30px;">OR (Tried all combinations)</p>
<p style="padding-left: 60px;"><strong><span style="font-family: courier new,courier;">String.Compare(</span></strong><br /><strong><span style="font-family: courier new,courier;">&nbsp;&nbsp;&nbsp; "<a href="mailto:0336753496aaa@ae2.dion.ne.jp">0336753496aaa@ae2.dion.ne.jp</a>", </span></strong><br /><strong><span style="font-family: courier new,courier;">&nbsp;&nbsp;&nbsp; "<a href="mailto:0336753496ａａａ@ae2.dion.ne.jp">0336753496ａａａ@ae2.dion.ne.jp</a>", </span></strong><br /><strong><span style="font-family: courier new,courier;">&nbsp;&nbsp;&nbsp; StringComparison.OrdinalIgnoreCase)</span></strong></p>
<p>Now I'll consolidate the many different tips and wags:</p>
<p>First of all, a <strong>wag of the finger</strong> since the question referred to "double byte characters" despite every string involved using Unicode, in a language (C#) that uses Unicode.</p>
<p>Perhaps somewhat forgivable since the example was clearly referencing Japan, so perhaps the questioner was thinking about Japanese at the time. And therefore "double byte" was just old school thinking about CJK. Kind of like how they never migrated all those people off the <strong>FAREAST</strong> domain, even as everything else started referencing east Asia. Even though domain account migrations are so much easier these days after those thousands of migrations in Windows kind of forced ITG to get better at it....</p>
<p>Second of all, a <strong>tip of the hat</strong> to the&nbsp;genuine attempt to try to do comparisons that fold out distinctions in an attempt to get parity between SQL Server and the .NET Framework.</p>
<p>Third of all, a <strong>wag of the finger</strong> for ignoring the most important distinction in this case -- the implicit <strong>Width Insensitive </strong>nature of&nbsp;all _C*_A* collations in SQL Server, which could have been simulated by adding a <strong><span style="font-family: courier new,courier;">StringComparison.IgnoreWidth</span></strong> to the first call, had their names not masked the fundamenta nature of the "hidden width" that makes me wonder if someone in SQL Server isn't worried about their weight too much....</p>
<p>Fourth of all, a <strong>wag of the finger</strong> for&nbsp;taking a&nbsp;question obviously covering <strong>E-mail Address Internationalization (EAI)</strong> but doing it without even asking the question in a way or to a distribution list that suggested they were thinking about <a href="http://en.wikipedia.org/wiki/E-mail_address#Internationalization">EAI</a>.</p>
<p><em>With a bonus fifth of all <strong>wag of the finger</strong> to SQL Server since it is hiding so much of the problem here that people come out of SQL Server wondering how to make other products act like them, rather than coming out asking the real questions....</em></p>
<p>Okay, seems like a lot more wags than tips on this one. And that's even ignoring the extra wags i decided to leave for another day.</p>
<p>I've decided I can't do "tip of the hat/wag of the finger" very well. I should leave that sort of thing to the professionals. From now on, I will.</p>
<p>I'll talk more about EAI another day, too....</p>
<hr/><p><strong>Jeffrey L. Whitledge</strong> on 29 Jun 2011 7:49 AM:</p><div style="margin-left: 1em"><p>Do you think the severity of the first wag of the finger might also be reduced a bit since the strings are coming from SQL Server, which (AFAIK) continues to use UCS-2 rather than UTF-16, so the encoding might legitimately be called &quot;double byte&quot;?</p>
</div>
<p><strong>Michael S. Kaplan</strong> on 29 Jun 2011 8:09 AM:</p><div style="margin-left: 1em"><p>Perhaps a tiny bit, though the fact that SQLS flirts with UTF-16 and the fact that .NET isn&#39;t SQL blocks that some....</p></div>
<p><strong>Mihai</strong> on 29 Jun 2011 11:06 AM:</p><div style="margin-left: 1em"><p>I have encountered many people that use &quot;double byte&quot; for the wide variants of the Latin script.</p>
<p>Similarly, some use &quot;4 byte characters&quot; for characters that would need 4 bytes in GB 18030 even if they don&#39;t use surrogates as Unicode.</p>
</div>
<p><strong>Michael S. Kaplan</strong> on 29 Jun 2011 11:55 AM:</p><div style="margin-left: 1em"><p>That&#39;s why I was finding that one more forgivable, Mihai!</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2013/10/17 <a href="http://archives.miloush.net/michkap/archive/2013/10/17/10453790.html">There's no "I" in IDN, part 19: There's no "I" in IPv6, either!</a></p><p>2013/10/08 <a href="http://archives.miloush.net/michkap/archive/2013/10/08/10454553.html">There's no "I" in IDN, part 18: There isn't even an "I" in John C. Klensin's name!</a></p><p>2013/09/13 <a href="http://archives.miloush.net/michkap/archive/2013/09/13/10448110.html">There's no "I" in IDN, part 17: EAI made it to China, and everybody knows it!</a></p><p>2013/04/19 <a href="http://archives.miloush.net/michkap/archive/2013/04/19/10412471.html">There's no "I" in IDN, part 16: It's a good thing they decided to call it EAI!</a></p><p>2012/10/12 <a href="http://archives.miloush.net/michkap/archive/2012/10/12/10359120.html">There's no "I" in IDN, part 15: Still no 'I' in EAI.... but we could use an US sometime soon!</a></p><p>2012/08/08 <a href="http://archives.miloush.net/michkap/archive/2012/08/08/10337799.html">There's no "I" in IDN, part 14: It turns out there's no "I" in IE, either</a></p><p>2012/05/18 <a href="http://archives.miloush.net/michkap/archive/2012/05/18/10305223.html">There's no "I" in IDN, part 13: Desktop and Managed and Metro; oh my!</a></p><p>2012/02/27 <a href="http://archives.miloush.net/michkap/archive/2012/02/27/10273315.html">There's no "I" in IDN, part 12: Emoji + IDN == U+1F4A9 (PILE OF POO)</a></p><p>2011/10/25 <a href="http://archives.miloush.net/michkap/archive/2011/10/25/10229790.html">There's no "I" in IDN, part 11: There's no place like ::1, not even 127.0.0.1!</a></p><p>2011/09/21 <a href="http://archives.miloush.net/michkap/archive/2011/09/21/10214081.html">There's no "I" in IDN, part 10: Who needs IDN support? How much? When? (Part 2)</a></p><p>2011/09/16 <a href="http://archives.miloush.net/michkap/archive/2011/09/16/10212216.html">There's no "I" in IDN, part 9: Who needs IDN support? How much? When? (Part 1)</a></p><p>2011/08/12 <a href="http://archives.miloush.net/michkap/archive/2011/08/12/10195062.html">There's no "I" in IDN part 8: Punycode don't do the PUA</a></p><p>2011/07/28 <a href="http://archives.miloush.net/michkap/archive/2011/07/28/10190701.html">There's no "I" in IDN, part 7: IDN comes to AdWords</a></p><p>2011/07/14 <a href="http://archives.miloush.net/michkap/archive/2011/07/14/10186414.html">There's no "I" in IDN, part 6: It isn't like there's an "I" in EAI, either!</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2011/06/30/10181768.html" title="Falling back can sometimes be falling over">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2011/06/28/10180787.html" title="●●●●●●●●●●●●●● isn&#39;t complex, no matter what the underlying language is">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2011-06">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2011-06-29">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2011/06/29/10181212.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
</html>