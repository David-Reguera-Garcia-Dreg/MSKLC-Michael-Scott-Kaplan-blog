<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2011/01/10/10113642.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Questioning the premise of the question</title></head><body>
<h1>Questioning the premise of the question</h1>
<p><em>by Michael S. Kaplan, published on 2011/01/10, original URI: http://blogs.msdn.com/b/michkap/archive/2011/01/10/10113642.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNewMonth -->
<p>So the other day someone asked an interesting question of several internationalization experts:</p>
<p style="padding-left: 60px;"><span style="font-family: times new roman,times;">Hi,<br />We have a requirement in our web application to set the current thread&rsquo;s &ldquo;CurrentCulture&rdquo; as per the following rules: -<br />&bull;&nbsp;if the browser has a user language set, use it. For this we use Request.UserLanguages<br />&bull;&nbsp;If the browser does not have a user language set, use the regional settings of the client machine. </span></p>
<p style="padding-left: 60px;"><span style="font-family: times new roman,times;">But I am not sure how to get the culture of the regional settings of the client machine. I can use JavaScript code window.navigator.userLanguage and get it but not sure how to use this to set the current thread&rsquo;s &ldquo;CurrentCulture&rdquo; on the server side in my base page&rsquo;s InitializeCulture() method. </span></p>
<p style="padding-left: 60px;"><span style="font-family: times new roman,times;">I am also using the following web.config entry:<br /><br />&lt;globalization culture="auto" uiCulture="auto" enableClientBasedCulture="true" /&gt;</span></p>
<p>Maybe it's just me, but I am having trouble with the premise of the question.</p>
<p>First, let's look at the GlobalizationSection.EnableClientBasedCulture property's <a href="http://msdn.microsoft.com/library/system.web.configuration.globalizationsection.enableclientbasedculture.aspx">description</a>:</p>
<p style="padding-left: 30px;"><em>Gets or sets a value indicating whether the Culture and UICulture properties should be based on the AcceptLanguage header field value that is sent by the client browser.</em></p>
<p>Okay. So the plan is to do a bunch of work manually.</p>
<p>Work&nbsp;that one also plans to do automatically, since that configuration setting is already going to do it, and the manual code to be written will override that with what theautomatic code was going to do anyway.</p>
<p>This seems like a little bit of over-engineering to me, though the intent is pure and the result is not in fact one that any reasonably minded person could seriously consider to either mildly or intensely incorrect, which makes being overly critical of such a plan, in&nbsp;a larger&nbsp;world containing scenarios, designs, code, and test suites, any which can be entirely devoid of anything&nbsp;useful&nbsp;in either intent or implementation, to be somewhat uncalled for (or perhaps even obnoxious); this is especially true&nbsp;in the given example&nbsp;since perhaps one could (in that manual code) constructively extend the solution to support the occasionally seen notion of multiple accept languages for the "see hoofbeats, expect unicorns" scenario of multiple accept languages where the first language was unrecognized while subsequent languages were not.</p>
<p>Thus, as the previous overly complicated sentence implies, this bit is really not so bad.</p>
<p>In the spirit of constructive criticism, it would be much better to pan the second part of the solution:</p>
<p style="padding-left: 30px;"><span style="font-family: times new roman,times;">If the browser does not have a user language set, use the regional settings of the client machine. </span></p>
<p>In the default case, the client sends the HTTP_ACCEPT_LANGUAGE that is made up of the user's default locale to the server.</p>
<p>This far-fetched scenario posits that a huge swash of users have managed to choose no language (which actually means they have explicitly removed all languages from their Internet configuration options), and further that these people who have explicitly chosen to divorce their browser of the one default link to their default user locale explicitly desire nevertheless to see the setting used and that this setting should somehow be divined and used.</p>
<p>This seems rather disrespectful of a person's rare apparent (if not clear) desire to not see this setting used.</p>
<p>I mean, we don't know why this rather minuscule percentage of the population would in fact make such a choice, but does it really make sense to ignore the choice?</p>
<p>Why not assume that the lack&nbsp;of an HTTP_ACCEPT_LANGUAGE means that the user is perhaps wanting the sever to use its own preferences, since the user is not stating any of their own?</p>
<p>I don't know what the standard says here, but without a quote in the standard making a claim that such a specific behavior is desired, I myself would rather not make such a change....</p>
<hr/><div style="margin-left: 1em"><em>comments not archived</em></div><hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2011/01/11/10114118.html" title="If only they had VISION and not just SIGHT">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2011/01/08/10113236.html" title="ARM port of Windows? No comment. Followed by a comment....">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2011-01">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2011-01-10">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2011/01/10/10113642.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
</html>