<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2011/11/03/10233591.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>The evolving Story of Locale Support, part 3 (working beyond one's bugs, the setup)</title></head><body>
<h1>The evolving Story of Locale Support, part 3 (working beyond one's bugs, the setup)</h1>
<p><em>by Michael S. Kaplan, published on 2011/11/03 07:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2011/11/03/10233591.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p>Previous blogs from this series:</p>
<ul>
<li><strong><a title="part 0 (The introduction)" href="http://archives.miloush.net/michkap/archive/2011/10/31/10231661.html">part 0 (The introduction)</a></strong></li>
<li><strong><a title="part 1 (Some people don't want to double-d's)" href="http://archives.miloush.net/michkap/archive/2011/11/01/10232070.html">part 1 (Some people don't want to double-d's)</a></strong></li>
<li><strong><a title="part 2 (raising the roof on keyboards)" href="http://archives.miloush.net/michkap/archive/2011/11/02/10232468.html">part 2 (raising the roof on keyboards)</a></strong>&nbsp;</li>
</ul>
<p>I got mail yesterday from Frank Grie&szlig;hammer of Adobe:</p>
<p style="padding-left: 60px;"><em>Michael, Maybe you remember &ndash; I asked you some questions once before &ndash; most of which I could actually deal with myself. </em><br /><br /><em>I have been creating a bunch of keyboard layouts for Windows and Mac, to be shipped with the Adobe Pi fonts. The motivation behind this project is providing the user with a method to &lsquo;key&rsquo; their symbol glyphs. The layouts were created for the Mac first, the XML was converted to a .klc file using a Python script, the final layout being compiled with MS Keyboard Layout Creator. In the process, I made the following observation, which might be interesting material for your blog: </em><br /><br /><em>As of Unicode 5, Unicode values with 5 digits exist. Both Mac and Windows have (at least) four possible shift states for keyboards, I kept them unified across the platforms: &lsquo;alt&rsquo; on the Mac would become &lsquo;altGr&rsquo; on Windows (e.g. the right &lsquo;alt&rsquo;-key). </em><br /><br /><em>The observation I made has to do with the altGr/altGr+Shift states: If there is a 5-digit unicode value mapped to a key in either of those states, the respective key just won&rsquo;t return anything on Windows. I filed a bug with your colleagues, and in a long email conversation we came down to the point that unicode support in the OS is &ndash; to say the least &ndash; leaving a lot to desire. It&rsquo;s broken. We could rule out MSKLC being the culprit, it really came down to the OS. By the way: I tested my example layout on a developer version of Windows 8 as well, and the same problem exists. </em><br /><br /><em>Now here&rsquo;s my question: Do you maybe have an explanation for that? I see your latest post is about keyboards, so that might fit in just nicely. </em><br /><br /><em>Best greetings, </em><br /><em>Frank Grie&szlig;hammer </em><br /><em>Type Design &amp; Font Production </em><br /><em>Adobe Systems</em></p>
<p>It's funny how definitions shift and change over time.</p>
<p>Although the architecture of keyboards on Windows has been stable and unchanged since at least NT 3.1, and keyboards have been create-able via the DDK for almost as long, the creation of keyboard layouts was largely a rare operation by a few key players who provided their own runtime layers that ran atop Windows (such as Keyman), and the "competition" of those companies that did this work? Mostly hacks.</p>
<p>The number of DDK downloads did not increase much during this time -- people were mostly working atop the system.</p>
<p>And you could fit all of the people who really understood the innards of the input stack in one minivan. And you'd have room to hold the cooler containing the beer that the group would inevitably be drinking at some point. :-)</p>
<p>After&nbsp;the <strong>Microsoft&nbsp;Keyboard&nbsp;Layout&nbsp;Creator</strong>&nbsp;was released, all of that changed.</p>
<p>Nearly three quarters of a million downloads of two versions of MSKLC over this last almost decades and an essentially uncountable number of layouts later, and the principal means of going beyond the new bar of what is possible in keyboards has principally been based on work talked about in this Blog.</p>
<p>There are people writing Python scripts to generate .KLC files, and Apple's Boot Camp ships layouts using the format too.</p>
<p>There is a small part of me that is sad that the ownership of MSKLC is elsewhere, because there's a part of me that would love to be creating new versions that fix bugs and add features. This Blog, for all of its virtues, is a rather unwieldy tool to act as the path to upgrading the collective understanding of what can be done with input.</p>
<p>But I have other work now that keeps me pretty busy that I also enjoy, and there are only so many hours in a day, so....</p>
<p>Anyway, on to the email from Frank.</p>
<p>It's a bug.</p>
<p>And it is a bug in MSKLC, or to be more precise in the kbdutool.exe command line tool that MSKLC delegates its actual layout creation too.</p>
<p>More to the point, it's a bug I introduced....</p>
<p>Suddenly the number of people I helped with this widely downloaded tool and widely read Blog seems a lot less impressive to me. Even though the usage scenario is uncommon....</p>
<p>For my penance, I will provide the workaround for Frank and the others running into this problem of supplementary characters in the AltGr and Shift+AltGr keyboard states.</p>
<p>I'll warn you that it is kind of a pain in the butt and will require a bunch of the kind of work Cathy and John and I used to have to do creating keyboard text files years and years ago.</p>
<p>So it is a workaround, not a fix. As anyone who has ever had to author those text files by hand will readily attest.</p>
<p>Sorry about that....</p>
<p>Anyway, I'll provide the workaround tomorrow, so pop by. It will be worth your time, I promise....</p>
<hr/><div style="margin-left: 1em"><em>comments not archived</em></div><hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2012/10/26 <a href="http://archives.miloush.net/michkap/archive/2012/10/26/10362603.html">The evolving Story of Locale Support, part 28: We finally fixed that 'Install New Languages' thing!</a></p><p>2012/10/02 <a href="http://archives.miloush.net/michkap/archive/2012/10/02/10354988.html">The evolving Story of Locale Support, part 27: No, the T and the H aren't silent...</a></p><p>2012/08/20 <a href="http://archives.miloush.net/michkap/archive/2012/08/20/10341516.html">The evolving Story of Locale Support, part 26: Hey Windows 8, there's someone on the phone for you.</a></p><p>2012/07/11 <a href="http://archives.miloush.net/michkap/archive/2012/07/11/10327775.html">The evolving Story of Locale Support, part 25: Something old, something new, something repurposed, and something...</a></p><p>2012/06/07 <a href="http://archives.miloush.net/michkap/archive/2012/06/07/10316511.html">The evolving Story of Locale Support, part 24: I Adar you! Hell, I Double Adar you! (Windows 8 ed.)</a></p><p>2012/06/05 <a href="http://archives.miloush.net/michkap/archive/2012/06/05/10315033.html">The evolving Story of Locale Support, part 23: Tamazight? Outta sight!</a></p><p>2012/04/12 <a href="http://archives.miloush.net/michkap/archive/2012/04/12/10292952.html">The evolving Story of Locale Support, part 22: Digit Substitution 2.0</a></p><p>2012/03/08 <a href="http://archives.miloush.net/michkap/archive/2012/03/08/10278921.html">The evolving Story of Locale Support, part 21: The Windows 8 Hijripalooza extraordinaire!</a></p><p>2012/03/02 <a href="http://archives.miloush.net/michkap/archive/2012/03/02/10276258.html">The evolving Story of Locale Support, part 20: Yes, it's Bangla. Not Bengali!</a></p><p>2012/02/21 <a href="http://archives.miloush.net/michkap/archive/2012/02/21/10270502.html">The evolving Story of Locale Support, part 19: In honor of International Mother Language Day...</a></p><p>2012/02/15 <a href="http://archives.miloush.net/michkap/archive/2012/02/15/10268235.html">The evolving Story of Locale Support, part 18: Two scripts that share ten digits can be trouble</a></p><p>2012/02/02 <a href="http://archives.miloush.net/michkap/archive/2012/02/02/10263136.html">The evolving Story of Locale Support, part 17: Today I feel like translating you more than before</a></p><p>2012/01/24 <a href="http://archives.miloush.net/michkap/archive/2012/01/24/10259941.html">The evolving Story of Locale Support, part 16: We can't scale to a Xishuangbanna Dai locale, butâ€¦</a></p><p>2012/01/17 <a href="http://archives.miloush.net/michkap/archive/2012/01/17/10256884.html">The evolving Story of Locale Support, part 15: Fixing our listings up in Windows 8!</a></p><p>2011/12/22 <a href="http://archives.miloush.net/michkap/archive/2011/12/22/10250349.html">The evolving Story of Locale Support, part 14: Tifinagh, Tamazight, and Berber? Oh my!</a></p><p>2011/12/21 <a href="http://archives.miloush.net/michkap/archive/2011/12/21/10249983.html">The evolving Story of Locale Support, part 13: Divvying up locales, yet again!</a></p><p>2011/12/09 <a href="http://archives.miloush.net/michkap/archive/2011/12/09/10246051.html">The evolving Story of Locale Support, part 12: Logic dictates that we keep a sense of proportion about the RATIO</a></p><p>2011/11/23 <a href="http://archives.miloush.net/michkap/archive/2011/11/23/10240896.html">The evolving Story of Locale Support, part 11: What language is that keyboard for?</a></p><p>2011/11/22 <a href="http://archives.miloush.net/michkap/archive/2011/11/22/10239572.html">The evolving Story of Locale Support, part 10: Perhaps it is best to think of it as unintelligent design?</a></p><p>2011/11/16 <a href="http://archives.miloush.net/michkap/archive/2011/11/16/10237715.html">The evolving Story of Locale Support, part 9: Nastaleeq vs. Nastaliq? Either way, Windows 8 has got it!</a></p><p>2011/11/15 <a href="http://archives.miloush.net/michkap/archive/2011/11/15/10237317.html">The evolving Story of Locale Support, part 8: [Finally] taking care of some [more] languages in Pakistan</a></p><p>2011/11/11 <a href="http://archives.miloush.net/michkap/archive/2011/11/11/10236194.html">The evolving Story of Locale Support, part 7: That would be a "call and a raise" for Hawaiian</a></p><p>2011/11/09 <a href="http://archives.miloush.net/michkap/archive/2011/11/09/10235391.html">The evolving Story of Locale Support, part 6: Behind the Cherokee Phonetic layout in Windows 8</a></p><p>2011/11/08 <a href="http://archives.miloush.net/michkap/archive/2011/11/08/10234995.html">The evolving Story of Locale Support, part 5 (...until the decision was made to not refuse to add it)</a></p><p>2011/11/04 <a href="http://archives.miloush.net/michkap/archive/2011/11/04/10233999.html">The evolving Story of Locale Support, part 4 (working beyond one's bugs, and the case for an MSKLC update)</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2011/11/04/10233999.html" title="The evolving Story of Locale Support, part 4 (working beyond one&#39;s bugs, and the case for an MSKLC update)">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2011/11/02/10232468.html" title="The evolving Story of Locale Support, part 2 (raising the roof on keyboards)">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2011-11">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2011-11-03">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2011/11/03/10233591.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
</html>