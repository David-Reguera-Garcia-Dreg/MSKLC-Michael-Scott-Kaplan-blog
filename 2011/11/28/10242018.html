<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2011/11/28/10242018.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>We don't try to mask what the numbers looks like when you're blind</title></head><body>
<h1>We don't try to mask what the numbers looks like when you're blind</h1>
<p><em>by Michael S. Kaplan, published on 2011/11/28 07:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2011/11/28/10242018.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p>Leo's question was, like many of the questions I cover here, pretty interesting:</p>
<p style="padding-left: 60px;"><span style="font-family: times new roman,times; font-size: medium;">Hello,</span></p>
<p style="padding-left: 60px;"><span style="font-family: times new roman,times; font-size: medium;">I&rsquo;m writing UI automation for <strong>***REDACTED***</strong>, and dev UI displays number in native Arabic digits for ar-SA. Hence, I was trying to convert my test integers into Arabic digit strings so I can do string comparison. However, this code below doesn&rsquo;t seem to work. Anybody knows what&rsquo;s the proper way to do this in C#? Thanks.</span></p>
<p style="padding-left: 60px;"><span style="font-family: times new roman,times; font-size: medium;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CultureInfo info = new CultureInfo(CultureInfo.CurrentCulture.LCID);</span><br /><span style="font-family: times new roman,times; font-size: medium;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; info.NumberFormat.DigitSubstitution = DigitShapes.NativeNational;</span></p>
<p style="padding-left: 60px;"><span style="font-family: times new roman,times; font-size: medium;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int num = 3;</span><br /><span style="font-family: times new roman,times; font-size: medium;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Log.TraceInfo("Name: " + info.Name); // this outputs Name: ar-SA</span><br /><span style="font-family: times new roman,times; font-size: medium;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Log.TraceInfo("NUMBER: " + string.Format(info, "{0:d}", num)); </span><br /><br /><span style="font-family: times new roman,times; font-size: medium;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // this outputs NUMBER: 3</span></p>
<p>Now there are a few different problems here.</p>
<p>First of all, as I initially mentioned more than six years ago in <strong><a title="Is Whidbey's international support finished?" href="http://archives.miloush.net/michkap/archive/2005/04/24/411329.html">Is Whidbey's international support finished?</a></strong>, these properties involving digit substitution (<a href="http://msdn.microsoft.com/library/3081ex9k.aspx">NumberFormatInfo.NativeDigits</a>&nbsp;and&nbsp;<a href="http://msdn.microsoft.com/library/3xz31swe.aspx">NumberFormatInfo.DigitSubstitution</a>) and&nbsp;the <a href="http://msdn.microsoft.com/library/f30f58eb.aspx">DigitShapes enumeration</a>&nbsp;all are data-only properties not hooked up to the behavior of the cultures they are nominally connected to.</p>
<p>And second of all, even now over six years later, there had been no move to change that, to add support for digit substitution.</p>
<p>I don't want to ignore the related third of all, which is that even if you ask the question of the <a href="http://msdn.microsoft.com/library/system.globalization.cultureinfo.currentculture.aspx">CurrentCulture</a>, which is directly connected to the current user default locale in Windows and picks up every other customization for data formats, it does not give you the current user override values. So you can't even use this information provided by .Net to get the data being used.</p>
<p>Thankfully, none of this matters.</p>
<p>Because Digit Substitution <strong>as a feature</strong> is a font level switch which does not change the underlying numbers themselves.</p>
<p>Therefore even if these other problems did not apply, the fact is that the code, which looks at the numbers themselves, is giving accurate answers, returning actual ASCII digit values.</p>
<p>And beyond that the only way to retrieve the actual digits based on shape would probably involve OCR technology.</p>
<p>All of this underscores a tangential point not often discussed -- that the underlying technology in screen readers never gives any indication that digit substitution has been applied -- so if you're blind we don't even act like we're substituting anything.</p>
<p>And thus the title of today's blog, and the irony thereof....</p>
<p>I can't even imagine how we'd do this any other way, really. Can you?</p>
<hr/><p><strong>Joshua</strong> on 28 Nov 2011 9:13 AM:</p><div style="margin-left: 1em"><p>Now if the guy was in a pipeline stack you&#39;d have a serious problem.</p></div>
<p><strong>Alex Cohn</strong> on 5 Dec 2011 10:00 AM:</p><div style="margin-left: 1em"><p>You can probably avoid OCR to perform these tests: choose the same background and fonts for the ground truth, use a screen grabber and compare the bitmaps. &nbsp;</p>
</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2011/11/29/10242356.html" title="TODAY: My IUC 35 talks, the &quot;Microsoft Internal&quot; edition">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2011/11/23/10240896.html" title="The evolving Story of Locale Support, part 11: What language is that keyboard for?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2011-11">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2011-11-28">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2011/11/28/10242018.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
</html>