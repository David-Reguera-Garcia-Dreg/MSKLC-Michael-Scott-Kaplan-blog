<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2011/02/26/10134403.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Why I don't like the JapaneseCalendar class #1: Respecting (or at least admitting) the history....</title></head><body>
<h1>Why I don't like the JapaneseCalendar class #1: Respecting (or at least admitting) the history....</h1>
<p><em>by Michael S. Kaplan, published on 2011/02/26 07:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2011/02/26/10134403.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p>Ever since I wrote <a href="http://archives.miloush.net/michkap/archive/2011/01/22/10116914.html" title="About the Y1C problem, which really isn't too much of a problem (except maybe in North Korea)..."><strong>About the Y1C problem, which really isn't too much of a problem (except maybe in North Korea)...</strong></a>when I said I'd probably say a word about the Japanese calendar, I knew I'd eventually be saying something about <span><span>th</span></span>e Japanese calendar.</p>
<p>The fact is that the Microsoft implementation of the Japanese Imperial calendar has always bothered me. For many different reasons.</p>
<p>Thus this new series....</p>
<p>Now my dislike is not because of the principal issue I mentioned in <a href="http://archives.miloush.net/michkap/archive/2006/05/14/597278.html" title="Long live the Emperor"><strong>Long live the Emperor</strong></a>, a not-as-uncommon-as-it-should-be complaint I hear from non-Japanese developers about the calendar who, despite being type of nerds who would never truly take violent rhetoric to the level of suggesting Microsoft predict the date of the death and/or end of rule&nbsp;of the Emperor nevertheless unknowingly advocate for the Emperor to leave office.</p>
<p>The fact that the problem continues to crop up is a reflection on the people making the complaint, not of the calendar itself.</p>
<p>And also not because of the principal issue I mentioned&nbsp;in <a href="http://archives.miloush.net/michkap/archive/2008/04/24/8420468.html" title="Y oh Y does YYYY sometimes mean YY, you ask?"><strong>Y oh Y does YYYY sometimes mean YY, you ask?</strong></a><strong>,</strong> because although it can sometimes be confusing, the hypothetical need to support eras of over 100 years is proven wrong rather readily. </p>
<p>In both cases, perceived inconsistencies that in fact mirror actual usage of the calendar do not bother me; they only bother people too caught up in the technical issues to understand or even notice those usage issues.</p>
<p>And yet the problems I do have with this calendar and in their own way kind of brought up in both articles.</p>
<p>For a hint, I'll suggest thinking about the frustrations I have <span><span>wi</span></span><span><span>th</span></span> the <span><span>Umm</span></span>-Al <span><span>Qurah</span></span> calendar of Saudi Arabia that I discuss in <a href="http://archives.miloush.net/michkap/archive/2006/04/14/576627.html" title="Long term planning is not always done"><strong>Long term planning is not always done</strong></a>.</p>
<p>If one recognizes some of the limitations of using a religious calendar like the <span><span>Hijri</span> one</span> to deal <span><span>wi</span></span><span><span>th</span></span> civil matters to such a degree that you create a whole new calendar like Saudi Arabia did here, it seems almost irresponsible to have the period it supports be so short that common scenarios like machine certificates and such will fail when you try to use such a calendar.</p>
<p>In the case of the Japanese calendar, my concern is not really on Japan though. It is on Microsoft.</p>
<p>It just seems ridiculous that when we have <span><span>millennia</span></span> of attested data (and even more unattested, legendary data) on the Japanese monarchs (e.g. see the <a href="http://en.wikipedia.org/wiki/List_of_Emperors_of_Japan">List of Japanese monarchs</a>&nbsp;in <span><span>Wikipedia</span></span>) that we limit ourselves to the last four eras (平成, 昭和, 大正, and 明治).</p>
<p>Why wouldn't we stretch this out a little further than that?</p>
<p>Like at least to where the historical Gregorian years are reasonable to use....</p>
<p>I mean, it is more than just ironic that you can use the <span><span>GregorianCalendar</span></span> to refer to dates that exist before the calendar existed yet you cannot use the <span><span>JapaneseCalendar</span></span> to refer to dates that were well within its range</p>
<p>The design of the calendar, however, which considers the current era to be #4, they left no architectural room for the up to 121 previous eras for the up to 117 previous rulers.</p>
<p>I suppose they could work around this by taking advantage of the fact that a System.Int32 is being used for the era-related methods and use negative numbers for the ones prior to "era #1" though this is less than ideal for a bunch of reasons. If I ever chose to fix this bug I'd create a new class and do it right from scratch.</p>
<p>But there are other reasons I dislike our implementation of the <a href="http://msdn2.microsoft.com/en-us/library/system.globalization.japanesecalendar.aspx"><span><span>JapaneseCalendar</span></span> class</a>, which I will continue to talk about in part 2....</p>
<hr/><p><strong>Brendan Elliott</strong> on 26 Feb 2011 1:14 PM:</p><div style="margin-left: 1em"><p>Ack, that&#39;s embarrassing... :(</p>
<p>My Sharp Japanese electronic dictionary (purchased in Japan) has a calendar mode where you can look up the corresponding years between the Japanese/Western calendars by entering the year in terms of the Western calendar or the last four eras. &nbsp;If you look up by Western calendar, it starts at 593 (basically start of Asuka Period 飛鳥時代), although the there are many gaps that only list the historical period until around 701. &nbsp;Of course then you also get into parallel calendars for the north/south parts of the country for many of the years between 1331-1392 when there were two rival Emperors and two capitals (Nanboku-chou Period 南北朝時代). &nbsp;That being said, there&#39;s really not much excuse for the calendar class going back to at least 1393...</p></div>
<p><strong>Michael S. Kaplan</strong> on 26 Feb 2011 1:16 PM:</p><div style="margin-left: 1em"><p>Exactly. And it gets worse.... :-/</p>
</div>
<p><strong>Mihai</strong> on 1 Mar 2011 2:05 PM:</p><div style="margin-left: 1em"><p>Once I get home, I can send you the registry file that adds a bunch of eras for Win 7 (Wikipedia based). So once older OSes get deprecated, the way forward is opened for easy fixing (including by MS :-)</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2011/08/09 <a href="http://archives.miloush.net/michkap/archive/2011/08/09/10193739.html">I guess the Y1C issue may kinda be a problem after all....</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2011/02/28/10134642.html" title="&quot;Now you know what it&#39;s like to live in my brain....&quot;">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2011/02/25/10133926.html" title="You didn&#39;t expect to be able to read any email on any device, did you?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2011-02">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2011-02-26">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2011/02/26/10134403.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
</html>