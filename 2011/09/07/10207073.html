<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2011/09/07/10207073.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>It's a good thing the UTC has access to a thesaurus!</title></head><body>
<h1>It's a good thing the UTC has access to a thesaurus!</h1>
<p><em>by Michael S. Kaplan, published on 2011/09/07, original URI: http://blogs.msdn.com/b/michkap/archive/2011/09/07/10207073.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNewMonth -->
<p>Unicode is a complex standard.</p>
<p>Not everyone finds it easy or exciting&nbsp;to read (there are parts that I have read that I would recommend to insomniacs who fail to respond to strong drugs!), but part of&nbsp; documenting&nbsp;a complex standard is sucking it up and trying to capture the issue.</p>
<p>It can be quite easy to trip over the text sometimes, though....</p>
<p>Like the other day, when Andrew pointed out an issue that he had found confusing:</p>
<p style="padding-left: 90px;"><span style="font-family: times new roman,times; font-size: small;">Actually, whether surrogate pairs are valid in UTF-8 has been confusing me in the past days, because some documents tell exactly what you say, however, some documents still mention the similar thing in UTF-8, which made me think that it looks still valid in UTF-8. If I misunderstood anything in these documents, please help correct me. Thanks.</span></p>
<p style="padding-left: 120px;"><span style="font-family: times new roman,times; font-size: small;"><span style="text-decoration: underline;"><a href="http://www.unicode.org/versions/Unicode6.0.0/ch03.pdf#G2630">UNICODE 6.0 Spec</a></span>:</span><br /><span style="font-family: times new roman,times; font-size: small;">3.8 Surrogates</span><br /><span style="font-family: times new roman,times; font-size: small;">D75 ...</span><br /><br /><span style="font-family: times new roman,times; font-size: small;">Sometimes high-surrogate code units are referred to as leading surrogates. Low surrogate code units are then referred to as trailing surrogates. <b>This is analogous to usage in UTF-8, which has leading bytes and trailing bytes.</b></span></p>
<p style="padding-left: 60px;"><span style="font-family: times new roman,times; font-size: small;"><b>[Andrew:]</b> My understanding is no matter how they are called, such a code point sequence is possible in UTF-8.</span></p>
<p style="padding-left: 120px;"><span style="font-family: times new roman,times; font-size: small;"><a href="https://www.securecoding.cert.org/confluence/display/seccode/MSC10-C.+Character+Encoding+-+UTF8+Related+Issues">MSC10-C. Character Encoding - UTF8 Related Issues</a>:</span><br /><span style="font-family: times new roman,times; font-size: small;">Broken Surrogates</span></p>
<p style="padding-left: 120px;"><span style="font-family: times new roman,times; font-size: small;">Encoding of individual or out of order surrogate halves should not be permitted. Broken surrogates are invalid in Unicode and introduce ambiguity when they appear in Unicode data. Broken surrogates are often signs of bad data transmission. They can also indicate internal bugs in an application or intentional efforts to find security vulnerabilities.&nbsp;</span></p>
<p style="padding-left: 60px;"><span style="font-family: times new roman,times; font-size: small;"><b>[Andrew:]</b> Broken surrogates are invalid. Does it imply that normal surrogate pairs are valid?</span></p>
<p style="padding-left: 120px;"><span style="font-family: times new roman,times; font-size: small;"><a href="http://www.unicode.org/versions/corrigendum1.html">Corrigendum #1: UTF-8 Shortest Form</a>:</span><br /><span style="font-family: times new roman,times; font-size: small;">D36</span></p>
<p style="padding-left: 120px;"><span style="font-family: times new roman,times; font-size: small;">(c) An <b>irregular</b> UTF-8 code unit sequence is a six-byte sequence where the first three bytes correspond to a high surrogate, and the next three bytes correspond to a low surrogate. As a consequence of C12, these irregular UTF-8 sequences shall not be generated by a conformant process.</span></p>
<p style="padding-left: 60px;"><span style="font-family: times new roman,times; font-size: small;"><b>[Andrew:]</b> The surrogate pair here is named as &ldquo;an irregular UTF-8 code unit sequence&rdquo;, not &ldquo;invalid&rdquo; or &ldquo;illegal&rdquo;. Does it mean it&rsquo;s still valid?</span></p>
<p>It is easy to see where an honest reading can lead to confusion, especially since the reading might be by one person with a specific point in mind while the standard itself is written by many people across many years with a lot of different points guiding them.</p>
<p>Irregular?</p>
<p>Invalid?</p>
<p>Illegal?</p>
<p>Thankfully the members of the Unicode Technical Committee&nbsp;are well-read, and have access to not only a thesaurus but to their own glossary (though one can't find those particular terms there, many other terms that could be confusing are available).</p>
<p>I'll leave the deconstruction of the arguments here as an exercise for the reader, to see who wants to try and tackle it....</p>
<p><em>If no one does then eventually I'll do it!</em></p>
<hr/><div style="margin-left: 1em"><em>comments not archived</em></div><hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2011/09/08/10207673.html" title="en-IN on XP SP3?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2011/09/06/10206558.html" title="My advice: Just remove &#39;em all, then later only add the ones you actually need">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2011-09">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2011-09-07">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2011/09/07/10207073.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
</html>