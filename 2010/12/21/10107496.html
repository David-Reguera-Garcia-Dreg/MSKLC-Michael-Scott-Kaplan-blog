<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2010/12/21/10107496.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>What the hell does "...you can fry a Finn in butter, and he's still a Finn" mean, anyway?!?</title></head><body>
<h1>What the hell does "...you can fry a Finn in butter, and he's still a Finn" mean, anyway?!?</h1>
<p><em>by Michael S. Kaplan, published on 2010/12/21 07:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2010/12/21/10107496.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p><em><span style="color: #ff0000;">The title quote refers to a small&nbsp;bit from Martin Cruz Smith's Gorky Park that has very little to do with today's blog....</span></em></p>
<p>As with most of the items that eventually become blogs, today's blog started as a couple of emails to me.</p>
<p>Email #1:</p>
<p style="padding-left: 30px;"><span style="font-family: times new roman,times;">Hello. I have code something like this:<br /><br />System.Globalization.CultureInfo.CurrentCulture says fi-FI x.Name is a string.<br />foreach (var i in items.OrderBy(x=&gt;x.Name)) foreach (var i in items.OrderBy(x=&gt;x.Name,StringComparer.CurrentCulture))<br /><br />both sort stuff beginning with W before V!&nbsp; The other StringComparer settings sort OK. The Finnish alphabet goes v,w not w,v incase it needs to be said so this seems odd.<br />Paths in Explorer seem to be sorting correctly.<br /><br />System win7 64 (english UI):<br />Region format Finnish (Finland)<br />location Finland<br />Default input language<br />Finland (Finland) - Finnish<br /><br />Installed services:<br />Finnish (Finland) - Keyboard * Finnish<br />English (United States) - Keyboard * US<br /><br />I have NET 4 SP1 Beta installed &amp; tried on both targeting x86 NET 3.5 &amp; NET 4.0 .<br /><br />test code:</span><br /><br /><span style="font-family: consolas,lucida console,courier new,courier;fixed;"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static void Main(string[] args) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; List&lt;string&gt; ls = new List&lt;string&gt;();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ls.Add("Wtt"); ls.Add("Utt"); ls.Add("Vtt"); ls.Add("Stt");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ls.Add("Wtt2"); ls.Add("Utt2"); ls.Add("Vtt2"); ls.Add("Stt2");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("\r\nInvariantCultureIgnoreCase ");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach (var ss in ls.OrderBy(x =&gt; x.ToString(), StringComparer.InvariantCultureIgnoreCase)) Console.Write(ss+" ");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Stt Stt2 Utt Utt2 Vtt Vtt2 Wtt Wtt2<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("\r\nCurrentCulture ");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach (var ss in ls.OrderBy(x =&gt; x.ToString(), StringComparer.CurrentCulture)) Console.Write(ss+" ");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Stt Stt2 Utt Utt2 Vtt Wtt Vtt2 Wtt2&nbsp; --- EXPECTED SAME AS ABOVE<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("\r\n"+System.Globalization.CultureInfo.CurrentCulture);<br />//fi-FI<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(System.Globalization.CultureInfo.InstalledUICulture);<br />// en-US<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(System.Globalization.CultureInfo.InvariantCulture);<br />// ""<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</strong></span><br /><br /><span style="font-family: times new roman,times;"><em>What's up, any ideas?<br /><br />Happy holidays, AV</em></span></p>
<p>Email #2:</p>
<p style="padding-left: 30px;"><span style="font-family: times new roman,times;">I wasn't able to find the standard online however I found an article explaining this a bit.<br />The article states, that if list-format contents are entirely in Finnish V &amp; W are "equal" in terms of sorting.<br /><br /></span><span style="font-family: times new roman,times;">The article roughly translated says "most lists can be understood to be multilingual, which can be formally argued to make the case for not mixing v &amp; w".<br /><br /></span><span style="font-family: times new roman,times;">Now I argue that since my Windows UI (InstalledUICulture) is English, I expect the UI to work the same everywhere. eg. Explorer sorts things correctly (no mixing of V &amp; W). So unless somehow explicitly specified, the default sort should* assume multi-lingual lists because the standard says that in multi-lingual lists V &amp; W can be separate (not mixed). </span><a href="http://web.archive.org/web/20040618085838/www.sfs.fi/standard/20000619.html" style="FONT-FAMILY: "><span style="font-family: times new roman,times;">http://web.archive.org/web/20040618085838/www.sfs.fi/standard/20000619.html</span></a><span style="font-family: times new roman,times;"><br /><br />*(becauseFinland is multi-lingual country: everyone has to learn fi,eng,swe - so lists should not be assumed to be only in Finnish in Finland)<br /></span><br /><span style="font-family: times new roman,times;">So what is the solution when I want every program consistenly by default to sort "english/invariant style" and show language in English but I need date, time and keyboard settings to be Finnish? It's still common occurrence that 3rd party programs do not respect UICulture resulting practically random program language all over the place.<br /><br /></span><span style="font-family: times new roman,times;">I suggest the solution is to somehow hack the APIs so that if UICulture is English then only Date/Time/Key APIs use the Finnish settings. Probably hard to do but there doesn't seem to be other good solution</span>.</p>
<p>I will start simply and point out that is entirely and completely by design, and unlikely to change any time soon.</p>
<p>But no one should be satisfied with that as an answer; its important for there to be an explanation that has facts on its side.</p>
<p>So, let me explain what is going on here....</p>
<p>The most important place to start, looking at that quote was a small challenge for me given the relatively poor quality of my Finnish reading skills, but I&nbsp;believe I can verify that the meaning of</p>
<p><span style="font-size: x-large;">Monikielisess&auml; aineistossa v ja w voidaan nyt aakkostaa erikseen</span></p>
<p>is indeed that in the multilingual context, <strong>V</strong> and <strong>W</strong> can be sorted separately.</p>
<p>This is a very big problem for us, since&nbsp;the contention of&nbsp;s difference between "entirely Finnish" and "multilingual Finnish" as the latter does not exist as an option.</p>
<p>There are other letters in Finnish that will not sort properly if one does not use the Finnish sort.</p>
<p>The point is even more interesting when one considers the changes that the neighboring swedes may eventually be contemplating, which I described in <a href="http://archives.miloush.net/michkap/archive/2006/04/25/583307.html" title="Why do we call w 'double u' -- doesn't it look more like a 'double v' ?"><strong>Why do we call w 'double u' -- doesn't it look more like a 'double v' ?</strong></a>. Given that nearly 14 years prior the Finns were considering the need to distinguish the two letters in some contexts, it is interesting they had no interest in supporting an eventual change to distinguish them, to the point where they would suggest that bifurcation was the only way the Swedes would be able to change their sort....</p>
<p>Now at the moment (and absent the Swedish government pushing the suggested changes, for the foreseeable future) the Swedish and Finnish sorts are the same.</p>
<p>Now in addition to the changes to give "w"&nbsp;a secondary distinction from "v", at a minimum all of the following letters sort differently than they sort in English:</p>
<p><span style="font-size: xx-large;">&uuml;&Uuml;&aring;&Aring;&auml;&Auml;&ouml;&Ouml;&Oslash;&Oslash;</span></p>
<p>Now, being neither Finn nor Swede, I cannot calculate the exact impact on changing the W/V relationship, at the xpense of breaking the way all of those other letters are sorted. But I don't think it would be a positive one for either of them....</p>
<p>So, absent a new sort (I could not find the standard either so I couldn't say whether&nbsp;the Finns&nbsp;ever defined it -- just as with the Swedes), there is no way to make a change to change one letter;s behavior without changing any other.</p>
<p>You may be wondering what the sort keys of these varous strings in the above test look like. I know I was interested, at least.</p>
<p>So even if you weren't, then you'll have to sit through it, since here you are just along for the ride!</p>
<p>First we'll look at the strings in English (en-US), which will be the same&nbsp;as Invariant (the default table), in weight order:</p>
<p style="padding-left: 30px;"><span style="font-family: courier new,courier;"><strong>Stt&nbsp; 0e 91 0e 99 0e 99&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01&nbsp;&nbsp;&nbsp; 01 12 01 01 00 <br />Stt2 0e 91 0e 99 0e 99 0d 1a 01&nbsp;&nbsp;&nbsp; 01 12 01 01 00 <br />Utt&nbsp; 0e 9f 0e 99 0e 99&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01&nbsp;&nbsp; &nbsp;01 12 01 01 00 <br />Utt2 0e 9f 0e 99 0e 99 0d 1a 01&nbsp;&nbsp;&nbsp; 01 12 01 01 00 <br />Vtt&nbsp; 0e a2 0e 99 0e 99&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01&nbsp;&nbsp; &nbsp;01 12 01 01 00 <br />Vtt2 0e a2 0e 99 0e 99 0d 1a 01&nbsp;&nbsp;&nbsp; 01 12 01 01 00 <br />Wtt&nbsp; 0e a4 0e 99 0e 99&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01&nbsp;&nbsp;&nbsp; 01 12 01 01 00 <br />Wtt2 0e a4 0e 99 0e 99 0d 1a 01&nbsp;&nbsp;&nbsp; 01 12 01 01 00</strong></span> </p>
<p>And then we'll look at Finnish (fi-FI), in weight order:</p>
<p style="padding-left: 30px;"><span style="font-family: courier new,courier;"><strong>Stt&nbsp; 0e 91 0e 99 0e 99&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01&nbsp;&nbsp;&nbsp; 01 12 01 01 00 <br />Stt2 0e 91 0e 99 0e 99 0d 1a 01&nbsp;&nbsp;&nbsp; 01 12 01 01 00 <br />Utt&nbsp; 0e 9f 0e 99 0e 99&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01&nbsp;&nbsp;&nbsp; 01 12 01 01 00 <br />Utt2 0e 9f 0e 99 0e 99 0d 1a 01&nbsp;&nbsp;&nbsp; 01 12 01 01 00 <br />Vtt&nbsp; 0e a2 0e 99 0e 99&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01&nbsp;&nbsp;&nbsp; 01 12 01 01 00 <br />Wtt&nbsp; 0e a2 0e 99 0e 99&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01 03 01 12 01 01 00 <br />Vtt2 0e a2 0e 99 0e 99 0d 1a 01&nbsp;&nbsp;&nbsp; 01 12 01 01 00 <br />Wtt2 0e a2 0e 99 0e 99 0d 1a 01 03 01 12 01 01 00 </strong></span></p>
<p>And now you can see why the "W" can sometimes come before the "V" -- because that number at the end has a primary distinction, unlike that "W" has, in Finnish.</p>
<p>Now there are some random points about the installed UI culture which aren't relevant to this conversation, and the current culture, which are. But none of these things impact the behavior here.</p>
<p>Of course there is one last mystery here, which is explaining why paths in Explorer "seem to be sorting correctly", which of course (given the above) i&nbsp;would be considered incorrectly.</p>
<p><span style="font-family: courier new,courier;"><strong></strong></span></p>
<p>But that&nbsp;is something I am&nbsp;unable to reproduce here:</p>
<p><img src="http://trigeminal.fmsinc.com/images/Finn01.jpg" border="0" />&nbsp;&nbsp;&nbsp; <img src="http://trigeminal.fmsinc.com/images/Finn02.jpg" border="0" /></p>
<p><em>In these screenshots from Windows 7, the <span style="text-decoration: underline;">F</span>ormat: language for the first is English (United States) and for the second is Finnish (Finland).</em></p>
<p>Perhaps the confusion about UI language or installed UI language having some impact on sorting (from email #2) led to some confusion on settings -- neither ever controls this behavior in Explorer.</p>
<p>So, as I said earlier, the described behavior is pretty much expected. Though in the larger world of the Finnish suggestion of different potentially desired&nbsp;"multilingual" sorting behavior and the&nbsp;potential eventual changes in Swedish, where all of this will end up in 5-10 years is completely uncertain.</p>
<p>To me, at least.</p>
<p>As is the exact meaning of the quote in the title, though I can probably divine that a bit more effectively (and no, I do not need to fry anyone in butter first to get the answer!)....</p>
<hr/><p><strong>av</strong> on 22 Dec 2010 10:56 PM:</p><div style="margin-left: 1em"><p>Thanks for the answer, I&#39;d have put some more effort to the mails had I known you&#39;d go and publish them in entirety :-) </p>
<p>The reason why I thought that explorer sorts things correctly was because I just tried one string and it happened to work correctly - whoops!</p>
<p>My preferred sorting would be exactly as it says in the alphabet/wikipedia:</p>
<p>A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, Å, Ä, Ö.</p>
<p>Like said I don&#39;t have the full standard. Wikipedia says only the V,W are special case and that&#39;s also what I remember from school. Depending on the implementation it could be that Å,Ä,Ö do not sort correctly if the en-US sort is used, </p>
<p>(testing)</p>
<p>Ok you are right, the Å,Ä,Ö sort unexpectedly with the en-US setting. Since I don&#39;t have Finnish stuff pretty much anywhere on my computer it&#39;s unlikely I would&#39;ve noticed this problem.</p>
<p>The seemingly obvious solution is to, in my mind, add new Finnish language setting that reads something like &quot;Finnish (multilingual lists)&quot; that sorts according to above alphabet minus the W,V special case rule. Again, depending on technical details, this could be either as trivial as copying some definition file and changing a byte or two or require lot of changes.</p>
<p>I suppose if this was annoying enough I could just dig in with windbg to see where the OS is pulling the rules from and modify them but TBH this isn&#39;t nearly as annoying as the &quot;random point&quot; about UICulture which I know isn&#39;t really directly related but was used as messenger to say that &quot;my system in English, no Finnish stuff beyond what I want please&quot;. Which could also be fixed by identifying whether a setup is running (Vista+7 already do this to some level to offer UAC elevation!) and use appcompat layer to return the english setting to those API&#39;s that setups use to determine UI to be Finnish in a system that has English UI. Off topic I know but having to switch ton of apps from Fin to Eng just because I have Finnish keyboard/date setting really gets annoying.</p>
<p>So how would I fix BOTH problems? If they are result of same source, maybe just &quot;inherit&quot;/copy the OS&#39;s English definition and add Å,å,Ä,ä,Ö,ö after Z,z in the end and apps would hopefully be none the wiser that I had English settings now with few extra letters for sorting scenarios.</p>
</div>
<p><strong>Michael S. Kaplan</strong> on 22 Dec 2010 11:14 PM:</p><div style="margin-left: 1em"><p>No, there is no way to get a &#39;Finnish multilingual&#39; sort on the current platform. Since (like I said) the Finnish standards folks specifically considered that change to not be needed when their Swedish neighbors suggested it be done, it doesn&#39;t sound like they consider it a high priority at the moment....</p>
<p>Which isn&#39;t to say it wouldn&#39;t be reasonable. But the bar for changes like that is much higher.</p></div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2010/12/22/10107967.html" title="I agree with you 100%. But we&#39;re both wrong (according to the spec)">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2010/12/20/10107008.html" title="Short-sighted text processing #2: Getting hurt while playing on the bleeding edge">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2010-12">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2010-12-21">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2010/12/21/10107496.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:34 GMT -->
</html>