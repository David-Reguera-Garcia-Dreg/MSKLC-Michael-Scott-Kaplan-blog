<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2010/07/07/10032340.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>[Pretty much] All the things you can't do with SGCAPS, and why</title></head><body>
<h1>[Pretty much] All the things you can't do with SGCAPS, and why</h1>
<p><em>by Michael S. Kaplan, published on 2010/07/07 07:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2010/07/07/10032340.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p>So I got this note from Szabolcs via the contact link, and I am unfortunately way too late to help, but maybe it will be of help to someone:</p>
<p style="PADDING-LEFT: 30px; FONT-FAMILY: "><span style="font-family: times new roman,times;">Hello,</span></p>
<p style="PADDING-LEFT: 30px; FONT-FAMILY: "><span style="font-family: times new roman,times;">I came across your blog looking for help with MSKLC, I see that you have treated the topic several times. I hope, you can help me.</span></p>
<p style="PADDING-LEFT: 30px; FONT-FAMILY: "><span style="font-family: times new roman,times;">I'd like to devise a keyboard layout, which takes as a base an existing latin layout and adds a custom script to it via the SGCAPS switch feature. I have good reasons to add the script not as a different keyboard layout, but as SGCAPS.</span></p>
<p style="PADDING-LEFT: 30px; FONT-FAMILY: "><span style="font-family: times new roman,times;">On the other hand, I would not need all the keys on the SGCAPS shift state, so I'd like to have empty keys. Unfortunately, I could not figure out how: if I did not define any SGCAPS+&lt;key&gt; value, then, depending on wheather I set the "Caps==Shift", the 'unmapped' key won't be unmapped, but either result in the lower or upper-case version of the latin layout.</span></p>
<p style="PADDING-LEFT: 30px; FONT-FAMILY: "><span style="font-family: times new roman,times;">I'd like to ask you, how it is possible to have empty keys in the SGCAPS shift state.</span></p>
<p style="PADDING-LEFT: 30px; FONT-FAMILY: "><span style="font-family: times new roman,times;">&lt;remark&gt;<br />I have thought of the possibility of putting the alternative script into the unshifted state, and the latin one into the SGCAPS state, as I also could use (while do not need) multiple codepoints ("ligatures") mapped to a single key, which is (for me not quite clear reasons) impossible in the SGCAPS state, but this solution, having the primary script in the SGCAPS state seems, while perfect for me, unsatisfactory and unintuitive for packaging and distribution to a user community.<br />&lt;/remark&gt;</span></p>
<p style="PADDING-LEFT: 30px; FONT-FAMILY: "><span style="font-family: times new roman,times;">Thank you very much,<br />&nbsp;&nbsp;&nbsp; Szabolcs</span></p>
<p>The answer is probably not one that Szabolcs will like very much, which makes me feel kind of bad that it took me so long to get to answering it (since the answer won't help) but....</p>
<p>The problem is that SGCAPS as a feature is not very refined in the traditional feature sense (hopefully the original developer, who still works for Microsoft just&nbsp; few buildings away from my office) will forgive my descriptions here!).</p>
<p>It was added to spec by a developer to add a specific described functionality, but that functionality not one that was given the full treatment to make it act like any other shift state.</p>
<p>In fact, if you look at the MSKLC development process -- hinted at in blogs like <a href="http://archives.miloush.net/michkap/archive/2008/05/17/8516386.html" title="Do your utmost to be conventional (and then pimp, q.d. or p.r.n.)"><strong>Do your utmost to be conventional (and then pimp, q.d. or p.r.n.)</strong></a>, <a href="http://archives.miloush.net/michkap/archive/2005/01/03/345719.html" title="Accessibility, Internationalization, and Keyboards (#3: MSKLC's UI)">Accessibility, Internationalization, and Keyboards (#3: MSKLC's UI)</a>, and others -- the SGCAPS support was one that I told Cathy and Simon we couldn't do, and they agreed plus it didn't matter since we had no "load existing layout" functionality at the time. But it really bothered me, especially after we added "load existing layout" functionality, so I added it. </p>
<p>They were okay with it but a little concerned. </p>
<p><em>I often suspect that Cathy and Simon looked at me adding features like this the same way Shakespeare's Macbeth looked at murder -- initial uncertainty, followed by cautious enthusiasm, followed by a bit of horror about the magnitude of it all with no end in sight!</em></p>
<p>But the addition assumed it would act like all other shift states.</p>
<p>So over the course of the next few weeks, the tester ran into so many limitations that I had to go back and turn off SGCAPS in MSKLC in a bunch of cases. :-(</p>
<p>The limitations that Szabolcs&nbsp;mentions are real ones that I added to MSKLC, whenever we spotted problems caused by the fact that the actual SGCAPS feature has the same limitations in it. </p>
<p>It works quite well for the small percentage of cases that it is actually used like in&nbsp;Hebrew and Swiss German, but really only because the developer who added it/owned it fixed those bugs when they were reported. The rest of the bugs just kind of stayed or that dev turned the abilities off as they were reported since no one needed them....</p>
<p>"Ligatures" in the keyboard sense are a good example of this kind of issue -- and my initial bugs were along the lines of "this works in MSKLC itself but not in the keyboard it created" and the tester's assumption that the error was in the keyboard creation step. This led to the "fix", which is why the 'ligatures in SGCAPS" feature isn't there in MSKLC now....</p>
<p>Unfortunately, "empty keys in SGCAPS" fall in that same category -- the way SGCAPS is defined in both MSKLC and the underlying keyboard architecture is on a per-key basis by defining a letter in the SGCAPS state.</p>
<p>Now my particular "dev" effort here was mostly as much of a cowboy programming exercise as the&nbsp;underlying SGCAPS feature was way back in the early 90s, and the problem with both is that without a spec and a test plan it is too easy for development to add features that aren't thought through in an end-to-end way. It leads to problems like ones mentioned in blogs like <a href="http://archives.miloush.net/michkap/archive/2008/02/09/7564967.html" title="SGCAPS and dead keys don't mix"><strong>SGCAPS and dead keys don't mix</strong></a> and <a href="http://archives.miloush.net/michkap/archive/2006/01/16/513088.html" title="Just one code point for SGCAPS...."><strong>Just one code point for SGCAPS....</strong></a>, and of course the underlying limitations as well.</p>
<p>In fact I am lucky that there was one VERY real fact I could not ignore reining me in here: keyboards being built were working as far down as NT 3.5, and no one was going to let me fix things in those prior versions to add features. So if something didn't work, my job was to shut off an ability, not extend a feature. </p>
<p>Nothing like reality to rein in the creative urge of a would-be cowboy programmer!</p>
<p>And still it continues. Just the other day another comment came up, from reader Ad Caweau in <a href="http://archives.miloush.net/michkap/archive/2010/07/02/10032473.html"><strong>this</strong></a> blog:</p>
<p style="padding-left: 30px;"><em><span style="font-family: times new roman,times;">A workaround could be to use the SGCAPS feature of MSKLC and replace the "CAPS LOCKed keyboard" keys with the standard QWERTY-layout.</span></em></p>
<p style="padding-left: 30px;"><em><span style="font-family: times new roman,times;">This way you reprogram the CAPS LOCK key to be a QWERTY LOCK key.</span></em></p>
<p style="padding-left: 30px;"><em><span style="font-family: times new roman,times;">It works easier and more reliable than the standard available keycombination and you can tell by the CAPS LOCK LEDs whether QWERTY or Dvorak layout is active.</span></em></p>
<p>It astonishes me every time I see yet another "off-label" usage of SGCAPS (up to and including <a href="http://archives.miloush.net/michkap/archive/2007/02/04/1600427.html"><strong>this one</strong></a>!), and although off-label SGCAPS usage consequences are not nearly as potentially bad as can be with pharmaceuticals, the fix is the same when you run into problems -- stop going so far off the intended usage!</p>
<p>Sorry it took so long to write this one up Szabolcs&nbsp;(if you're still around!). Perhaps this will at least provide a little closure on why it wasn't working the way you wanted.....</p>
<hr/><p><strong>John Cowan</strong> on 7 Jul 2010 9:12 AM:</p><div style="margin-left: 1em"><p>So what is special about Swiss German caps? &nbsp;I know that the traditional Swiss German typewriter keyboard didn&#39;t have capitalized umlaut vowels or ess-zett; is this something to do with that?</p>
</div>
<p><strong>Michael S. Kaplan</strong> on 7 Jul 2010 9:43 AM:</p><div style="margin-left: 1em"><p>The SGCAPS feature was so named based on the first keyboard that used it -- basically the CAPS LOCK puts you into an entirely different shift state for some or all keys....</p>
</div>
<p><strong>Random832</strong> on 8 Jul 2010 4:42 AM:</p><div style="margin-left: 1em"><p>It seems essentially to be a hack so that lowercase letters that don&#39;t have the matching uppercase letter on the shifted version (the above-mentioned umlaut vowels) can be typed in capitals in caps-lock mode. Whereas the sane thing to do would have been to have a setting [maybe a &quot;2&quot; vs &quot;1&quot; as it is now] to use the casing table rather than the shift state to get the caps lock version of a key. Maybe even do it across the whole keyboard, for every keyboard that doesn&#39;t use a &quot;shift lock&quot; style semantic.</p>
<p>(Some parts of the Hebrew keyboard&#39;s usage seem a bit off-label to me - in essentially the same way as the proposed dvorak one.)</p>
</div>
<p><strong>Michael S. Kaplan</strong> on 8 Jul 2010 5:03 AM:</p><div style="margin-left: 1em"><p>More or less, yes. So you get extra shift states out of it without requiring extra shift state keys be involved. :-)</p>
<p>I wouldn&#39;t want to speculate on the other as keyboards have never been easy...and attempts to make them so break things....</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2011/05/23 <a href="http://archives.miloush.net/michkap/archive/2011/05/23/10167319.html">Philosophical about enablement, the impossible, and the infeasible</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2010/07/08/10033725.html" title="Maybe they had a really great experience on J-Date, or really liked Jay Leno">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2010/07/06/10031112.html" title="Beauty isn&#39;t only glyph deep">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2010-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2010-07-07">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2010/07/07/10032340.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
</html>