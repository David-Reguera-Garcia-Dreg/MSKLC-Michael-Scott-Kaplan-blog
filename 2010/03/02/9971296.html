<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2010/03/02/9971296.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Seeing double? You're not drunk; you're just running pseudo! (aka Announcement: Pseudo Day!)</title></head><body>
<h1>Seeing double? You're not drunk; you're just running pseudo! (aka Announcement: Pseudo Day!)</h1>
<p><em>by Michael S. Kaplan, published on 2010/03/02 07:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2010/03/02/9971296.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Some of you regular readers<SUP><FONT size=1>1</FONT></SUP> might recall <A href="http://archives.miloush.net/michkap/archive/2010/02/16/9964017.html" mce_href="http://archives.miloush.net/michkap/archive/2010/02/16/9964017.html"><STRONG>LOCALE_SDECIMAL? Quite a character! Or two. Or three...</STRONG></A> from the middle of last month.</P>
<P>I (in a somewhat offhand manner<SUP><FONT size=1>2</FONT></SUP>) mentioned</P>
<BLOCKQUOTE>
<P><FONT face="times new roman,times">Now, you may remember how I have talked about the pseudo locales like <STRONG>qps-ploc</STRONG> that&nbsp;test out extreme cases harder to readily test for in prior blogs like <STRONG><A href="http://archives.miloush.net/michkap/archive/2006/08/16/702877.html" mce_href="http://archives.miloush.net/michkap/archive/2006/08/16/702877.html">Walking off the end of the eighth bit</A></STRONG>. Well it just so happens that <STRONG>qps-ploc</STRONG> has two characters in its decimal separator to make this feature easier to test out and make sure it does not break you.</FONT></P>
<P><FONT face="times new roman,times">So you can look at this as <STRONG>your</STRONG> chance to find the bug that even folks at Microsoft missed, and fix it in your own code.</FONT></P>
<P><FONT face="times new roman,times">And just remember that this feature has now been around for over a decade and a half, so if it breaks you application then it is your application that is broken. And has been for some time.</FONT></P></BLOCKQUOTE>
<P>while I was there.</P>
<P>Maybe I should explore that one a bit!</P>
<P>There are other such "doubles" in there.</P>
<P>Like <A href="http://msdn.microsoft.com/library/dd373837.aspx" mce_href="http://msdn.microsoft.com/library/dd373837.aspx">LOCALE_SDATE</A>, which is the two-character&nbsp;<STRONG><FONT size=4>\\</FONT> --&nbsp;o</STRONG>nce again the maximum number of characters of the data? Four, including the NULL.</P>
<P>And <A href="http://msdn.microsoft.com/library/dd373896.aspx" mce_href="http://msdn.microsoft.com/library/dd373896.aspx">LOCALE_STIME</A>, which is the two-character &nbsp;<STRONG><FONT size=4>::</FONT></STRONG> -- and <STRONG>o</STRONG>nce again the maximum number of characters of the data? Four, including the NULL.</P>
<P>And <A href="http://msdn.microsoft.com/library/dd373852.aspx" mce_href="http://msdn.microsoft.com/library/dd373852.aspx">LOCALE_SLIST</A>, which is the two-character <STRONG><FONT size=4>,,</FONT></STRONG> -- and <STRONG>o</STRONG>nce again the maximum number of characters of the data? Four, including the NULL.</P>
<P>And <A href="http://msdn.microsoft.com/library/dd373836.aspx" mce_href="http://msdn.microsoft.com/library/dd373836.aspx">LOCALE_SCURRENCY</A>, which is the two-charaacter <STRONG><FONT size=4>$$</FONT></STRONG> -- and the maximum number of characters of the data? Thirteen, including the NULL.</P>
<P>And <A href="http://msdn.microsoft.com/library/dd373877.aspx" mce_href="http://msdn.microsoft.com/library/dd373877.aspx">LOCALE_SPERCENT</A>, which is the two-character <STRONG><FONT size=4>%%</FONT></STRONG> --and the documentation on this one has to be different: "<FONT face="times new roman,times">The value is a single string of 0 to 3 characters.</FONT>" I suspect this is actually Four, including the NULL, to be perfectly honest.</P>
<P>And of course <A href="http://msdn.microsoft.com/library/dd373895.aspx" mce_href="http://msdn.microsoft.com/library/dd373895.aspx">LOCALE_STHOUSAND</A>, which is the two-character <STRONG><FONT size=4>,,</FONT></STRONG> -- and <STRONG>o</STRONG>nce again the maximum number of characters of the data? Four, including the NULL.</P>
<P><FONT color=#ff0000>UPDATE 5 March 2010:</FONT></P>
<P><FONT color=#ff0000>And then there is <A href="http://msdn.microsoft.com/library/dd373857.aspx" mce_href="http://msdn.microsoft.com/library/dd373857.aspx">LOCALE_SMONDECIMALSEP</A>, which is the two character <STRONG><FONT size=4>..</FONT></STRONG> -- and&nbsp;once again the maximum number of characters of the data? Four, including the NULL. You must still use Persian if you want to test what happens when it is different from LOCALE_SDECIMAL!</FONT></P>
<P><FONT color=#ff0000>And also there is <A href="http://msdn.microsoft.com/library/dd373857.aspx" mce_href="http://msdn.microsoft.com/library/dd373857.aspx">LOCALE_SMONTHOUSANDSEP</A>, which has the two character <STRONG><FONT size=4>,,</FONT></STRONG> -- and&nbsp;once again the maximum number of characters of the data? Four, including the NULL. </FONT></P>
<P><FONT color=#ff0000>And of course <A href="http://msdn.microsoft.com/library/dd373865.aspx" mce_href="http://msdn.microsoft.com/library/dd373865.aspx">LOCALE_SNEGATIVESIGN</A> and <A href="http://msdn.microsoft.com/library/dd373883.aspx" mce_href="http://msdn.microsoft.com/library/dd373883.aspx">LOCALE_SPOSITIVESIGN</A> are the two character <STRONG><FONT size=4>--</FONT></STRONG> and <STRONG><FONT size=4>++</FONT></STRONG> (respectively) -- the maximum number of characters of the data? Five, including the NULL.</FONT></P>
<P>I already talked about the <A href="http://msdn.microsoft.com/library/dd373841.aspx" mce_href="http://msdn.microsoft.com/library/dd373841.aspx">LOCALE_SDECIMAL</A>....</P>
<P>Every one of these things has been legal for as long as the settings have been available in Regional and Language Options, going all the way back to NT 3.1. If&nbsp;your application&nbsp;breaks with this locale/culture, then (given the small number of applications around back that far) you have broken since BIRTH!</P>
<P>Think about that for a second.</P>
<P>And reports come in all the time, like even the .NET Framework's BCL has some problems with this in its date/time code.</P>
<P><EM>Yes, these same items are changable in the .NET Framework.</EM></P>
<P>The latest problem I have seen reported? In the <A href="http://msdn.microsoft.com/library/system.management.managementdatetimeconverter.todatetime.aspx" mce_href="http://msdn.microsoft.com/library/system.management.managementdatetimeconverter.todatetime.aspx">ManagementDateTimeConverter.ToDateTime method</A>, which as the documentation says:</P>
<BLOCKQUOTE>
<P><STRONG>Converts a given DMTF datetime to DateTime. The returned DateTime will be in the current time zone of the system.</STRONG></P></BLOCKQUOTE>
<P>Well, if you are using that&nbsp;cool pseudo locale, its results are apparently a less impressive <STRONG>System.ArgumentOutOfRangeException (Specified argument was out of the range of valid values.)</STRONG>.</P>
<P>No word in the report on whether any of the other <A href="http://msdn.microsoft.com/library/system.management.managementdatetimeconverter_members.aspx" mce_href="http://msdn.microsoft.com/library/system.management.managementdatetimeconverter_members.aspx">ManagementDateTimeConverter</A> methods fail though I am not terribly hopeful for them not doing so under the circumstances.</P>
<P>Slightly less impressive. Maybe just a scosh (unless your application hits this after you've deployed it, I mean).</P>
<P>So.</P>
<P>I have a request if you are a developer of anything that runs on Windows.</P>
<P>If you own code that runs on Windows, please check out this locale -- you may just find and fix your bugs before your customers cause them!</P>
<P>And if you are a user, try switching to this locale/culture --see what you can break here.</P>
<P>Both groups -- the break can be anything from BSOD to appcrash to wrong results to parse errors to missing functionality to whatever (including failure to respect the settings).</P>
<P><STRONG><FONT color=#ff0000>Maybe everyone should do it on March 15th</FONT></STRONG>, it would be forever known not just as the <A href="http://en.wikipedia.org/wiki/Ides_of_march" mce_href="http://en.wikipedia.org/wiki/Ides_of_march">Ides of March</A> but as "Pseudo Day",&nbsp;the day Pseudo broke all the applications<SUP><FONT size=1>3</FONT></SUP>!</P>
<P>Well, I doubt this will reach <STRONG>everyone</STRONG> as I don't have <EM>that</EM> much of a&nbsp;readership. Most of them just listen rather than comment or contact me anyway. But it might be fun to see how many bugs can be posted to products all over thwrold (including the Microsoft ones) on that day. I've been told that the truth is a virus - can we infect some of these misbehaving applications on that day? :-)</P>
<P>Since <A href="http://en.wikipedia.org/wiki/Gitlow" mce_href="http://en.wikipedia.org/wiki/Gitlow">Gitlow v. New York</A> defined the clear and present danger test<FONT size=1><SUP>4</SUP></FONT>, I don't think my request above can be taken as a serious&nbsp;attempt to overthrow or take down any governments, even if&nbsp;one or two are&nbsp;broken a bit by my humble request in this blog to see what can be broken by switching to this locale<SUP><FONT size=1>5</FONT></SUP>. There aren't any elections that I know of on that day....</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT size=1>1 - There do seem to be a few more of you now that I am a regular writer again!<BR>2 - I have a tendency to usually bury the lead, mainly because I go for cute titles, much&nbsp;moreso than&nbsp;/. or TechCrunch bait in the hopes of snagging more "hits". Geez....<BR>3 - Well, not every app - remember flash.globalization (ref: <A href="http://archives.miloush.net/michkap/archive/2010/02/24/9968410.html" mce_href="http://archives.miloush.net/michkap/archive/2010/02/24/9968410.html"><STRONG>here</STRONG></A>) didn't screw it up. So the web and its videos&nbsp;will be able to go on.&nbsp;;-)<BR>4&nbsp;- And I know my Gitlows. I've even dated one<SUP>6,7</SUP>. I'll admit I've lived an unusual life<SUP>8,9</SUP>.<BR>5 - If you work for the FBI, the CIA, the NSA, the DIA, the DOD, the NVTC, Homeland Security, or any other such agency, please do not try this out on March 15th.<BR>6 - Ok, two.<BR>7 - Though old Benjamin Gitlow&nbsp;the communist was on the other side of the family<SUP>10,11</SUP>.<BR>8&nbsp;- Even being a nanny of some ex-<A href="http://en.wikipedia.org/wiki/Sullivanians" mce_href="http://en.wikipedia.org/wiki/Sullivanians">Sullivanians</A> a mere year or two later.&nbsp;<BR>9 - It might have made a somewhat readable autobiography if it could be made of Twitter-sized revelations like these.&nbsp;:-)<BR>10 - Plus they shared none of his political beliefs.<BR>11 -&nbsp;They also did not share his&nbsp;noteriety of a lawyer "win" a Supreme Court case but the still having to stay in jail. Geez, talk about bad luck!<BR>13 - Will anyone notice that this footnote has nothing pointing to it<SUP>14,15</SUP>? <BR>14 - Or that the numbering kind of skipped a tad<SUP>16</SUP>?<BR>15 - I blame it on the fact that Schoolhouse Rock never played that <STRONG><A href="http://www.schoolhouserock.tv/Little.html" mce_href="http://www.schoolhouserock.tv/Little.html">Twelve</A></STRONG> cartoon enough when I was growing up. Just so you know.<BR>16 - What is up with tad/scosh crap in this blog? How can one tell how big a tad or a scosh even is<SUP>17</SUP>? <BR>17 - Perhaps it is the fractional value diddly/squat<SUP>18</SUP>.<BR>18 - Bonus points for anyone who knows the source of the allusion for note 17(though minus points for reading this far).</FONT></P>
<hr/><p><strong>parkrrrr</strong> on 2 Mar 2010 11:43 AM:</p><div style="margin-left: 1em"><p>For my net zero points, I will merely mention that he was certainly funniest in the first incarnation. The two spinoffs were a bit more tired.</p>
</div>
<p><strong>prl</strong> on 2 Mar 2010 12:10 PM:</p><div style="margin-left: 1em"><p>If squat=0, wouldn't diddly/squat be undefinable in a real number system? (<a rel="nofollow" target="_new" href="http://en.wikipedia.org/wiki/Division_by_zero">http://en.wikipedia.org/wiki/Division_by_zero</a>).</p>
<p>By the way, I saw a young girl on TV the other day that would definitely be someone you could relate to. She was spelling her name and she put 'Sa8m', when asked about she said 'it's a silent 8'. </p></div>
<p><strong>Random832</strong> on 4 Mar 2010 7:55 AM:</p><div style="margin-left: 1em"><p>What about LOCALE_SMONDECIMALSEP (etc)? What if they're different? Does the pseudo locale test this? What about the negative sign symbol? which I can't find a constant for, but which lets me type four characters in the box, so presumably five including null.</p>
<p>What is meant to happen if one of these strings contains another as a substring, or shares a common initial substring? This locale does not test this case*. If both the thousands separator and decimal point are a dot or comma, the windows 7 calculator, which allows both in pasted data, will treat all instances of the offending character as a thousands separator. But what's a program supposed to do if LOCALE_SDECIMAL is &quot;.&quot; and LOCALE_STHOUSAND is &quot;.,&quot;?** The obvious answer seems like it would need a state machine specially built to handle this case - does any such thing exist as a library function? [It seems an awful lot of work to do without any concrete example*** of an actual cultural need**** for it]</p>
<p>* - apart from the trivial case of LOCALE_STHOUSAND and LOCALE_SLIST being identical, which is also the case in some perfectly ordinary locales [e.g. 1033], so they're never expected to appear together anyway.</p>
<p>** - Its support for multiple characters in these things is as bad as you mentioned. Interesting fact: With thousands &quot;.,&quot; and decimal &quot;,&quot;, it interprets the string &quot;1.,234,56&quot; as 1[dec]23456.</p>
<p>*** - ref: at least you didn't name any in <a rel="nofollow" target="_new" href="http://archives.miloush.net/michkap/archive/2008/02/21/7836829.html">http://blogs.msdn.com/michkap/archive/2008/02/21/7836829.aspx</a> [which I had a hard time finding again since there was no link back from &quot;Quite a character&quot;]</p>
<p>**** - as opposed to what's likely to be dismissed as &quot;users messing with things they shouldn't&quot;</p>
<p>***** - Bloom County. I don't recall the precise context, but I believe it involved chopping up a watermelon which represented someone's pre-tax income.</p></div>
<p><strong>Michael S. Kaplan</strong> on 5 Mar 2010 8:42 PM:</p><div style="margin-left: 1em"><P>I updated the ones I saw... :-)</P></div>
<p><strong>Michael S. Kaplan</strong> on 5 Mar 2010 8:50 PM:</p><div style="margin-left: 1em"><p>For the other big case involving strings and substrings, no one thought of it. Some NLS tester may think of it now and test it (and put in the bug!) now that it was mentioned here. </p>
<p>They may even credit the comments in this very blog!</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2012/06/20 <a href="http://archives.miloush.net/michkap/archive/2012/06/20/10322015.html">Not giving someone their space can lead to SA (Separator Anxiety)</a></p><p>2011/01/28 <a href="http://archives.miloush.net/michkap/archive/2011/01/28/10121371.html">Punishing a locale for its language's letter choices is just unseemly</a></p><p>2010/04/11 <a href="http://archives.miloush.net/michkap/archive/2010/04/11/9990383.html">When one dishes it out but can't take it (aka Raising the roof, 2010 edition)</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2010/03/03/9971878.html" title="Nordic duck duck goose -- Bokmål, Bokmål, Bokmål, Nynorsk!">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2010/03/01/9970601.html" title="When something is just flipping wrong">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2010-03">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2010-03-02">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2010/03/02/9971296.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
</html>