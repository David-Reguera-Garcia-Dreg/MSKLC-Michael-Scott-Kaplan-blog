<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2010/02/21/9966915.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>If you ask the average person "Which comes first, '=' or '_' ?" they will stare at you blankly. With good reason.</title></head><body>
<h1>If you ask the average person "Which comes first, '=' or '_' ?" they will stare at you blankly. With good reason.</h1>
<p><em>by Michael S. Kaplan, published on 2010/02/21 07:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2010/02/21/9966915.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Some questions can really take you back, you know?</P>
<P>Like the other day, when someone asked the following question on a programming alias:</P>
<BLOCKQUOTE>
<P><FONT face="times new roman,times">I am using string.CompareTo to compare two strings like “status=abc” and “status_includes=abc”. The result indicates “status=abc” is greater than “status_includes=abc”. However, on ASCII table ‘=’ is before ‘_’.&nbsp; Did I misunderstand string.CompareTo?</FONT></P></BLOCKQUOTE>
<P>Reminds me of the old days!</P>
<P>Now of course if you ask the average person on the street whether "A" comes before "B" you will get as reasonably consistent answer.</P>
<P>But most of them, when asked to give their opinion on whether "=" comes before "_", will simply give you a blank look.</P>
<P>And let's face it, they are right.</P>
<P>Clearly the kind of <STRONG>very technical people</STRONG> (aka Geeks or Nerds) who would even say things about the "ASCII table" and the order of things in it are a subset of all of the people in the world. Writing stuff to be intuitive for them rather than the set of everyones else in the world wouldn't make a lot of sense.</P>
<P>Being a geek who looks at sorting and thinks about the default behavior that they believe should match the ASCII table, that is obscure enough that you might almost class it as th e professional equivalent of a fetish. :-)</P>
<P>Now by default, the method in question uses CurrentCulture for comparisons, but for the record these two characters will sort the same in every culture, including InvariantCulture, because none of the m change the handling here.</P>
<P>You can actually go to the protocol docs to look at the source weights used&nbsp;(hint: see [MS-UCODEREF in particular if you are one of those types of people!) but I'll save the normal type people among you some time and meaningfully subset the big table&nbsp;here:</P><B><FONT face="Consolas,Lucida Console,Courier New,Courier,Fixed">
<BLOCKQUOTE>
<P>;------------------------------------------------------------------------------------------------<BR>;Windows NT 4.0 through Windows Server 2003 Sorting Weight Table<BR>;This file contains detailed character weight specifications that permit consistent sorting and <BR>;comparison of Unicode strings.&nbsp; The data is not used by itself but is used as one of the <BR>;inputs to the comparison algorithm.<BR>;------------------------------------------------------------------------------------------------<BR>...<BR>...<BR>...<BR>0x0038&nbsp;12&nbsp;162&nbsp;2&nbsp;2&nbsp;;Digit Eight<BR>0x0039&nbsp;12&nbsp;180&nbsp;2&nbsp;2&nbsp;;Digit Nine<BR>0x003a&nbsp;7&nbsp;55&nbsp;2&nbsp;2&nbsp;;Colon<BR>0x003b&nbsp;7&nbsp;58&nbsp;2&nbsp;2&nbsp;;Semicolon<BR>0x003c&nbsp;8&nbsp;14&nbsp;2&nbsp;2&nbsp;;Less-Than Sign<BR>0x003d&nbsp;8&nbsp;18&nbsp;2&nbsp;2&nbsp;;Equals Sign<BR>0x003e&nbsp;8&nbsp;20&nbsp;2&nbsp;2&nbsp;;Greater-Than Sign<BR>0x003f&nbsp;7&nbsp;60&nbsp;2&nbsp;2&nbsp;;Question Mark<BR>0x0040&nbsp;7&nbsp;62&nbsp;2&nbsp;2&nbsp;;Commercial At<BR>0x0041&nbsp;14&nbsp;2&nbsp;2&nbsp;18&nbsp;;Latin Capital Letter A<BR>...<BR>...<BR>...<BR>0x005a&nbsp;14&nbsp;169&nbsp;2&nbsp;18&nbsp;;Latin Capital Letter Z<BR>0x005b&nbsp;7&nbsp;63&nbsp;2&nbsp;2&nbsp;;Opening Square Bracket<BR>0x005c&nbsp;7&nbsp;65&nbsp;2&nbsp;2&nbsp;;Backslash<BR>0x005d&nbsp;7&nbsp;66&nbsp;2&nbsp;2&nbsp;;Closing Square Bracket<BR>0x005e&nbsp;7&nbsp;67&nbsp;2&nbsp;2&nbsp;;Spacing Circumflex<BR>0x005f&nbsp;7&nbsp;68&nbsp;2&nbsp;2&nbsp;;Spacing Underscore<BR>0x0060&nbsp;7&nbsp;72&nbsp;2&nbsp;2&nbsp;;Spacing Grave<BR>0x0061&nbsp;14&nbsp;2&nbsp;2&nbsp;2&nbsp;;Latin Small Letter A<BR>...<BR>...<BR>...</P></BLOCKQUOTE></FONT></B>
<P>And there you have it.</P>
<P>Letters have a "SCRIPT MEMBER" of &gt;= 14, while regular punctuation tends to be 7, and mathematical stuff tends to be 8.</P>
<P>And given those groupings, even a Nerd would treat U+003d (aka EQUALS SIGN) as a mathematical&nbsp;sign and U+005F (aka LOW LINE, aka Spacing Underscore) as being in general punctuation.</P>
<P>The decision here of how to group them, whether to group them, and in what order to group them (by choosing a number, one chooses an order) is to some degree arbitrary but now has been present for so long that it is not really going to change.</P>
<P>Until the <STRONG>Geek&nbsp;Culture</STRONG> is created; clearly&nbsp;that locale&nbsp;will use the <STRONG>Ordinal</STRONG> sort anyway, which is not only more intuitive but will actually tend to be faster!</P>
<P><EM>For the original question, the developer was pointed to the overload that accepts a StringComparer and was able to pass StringComparer.Ordinal to solve the problem, though I personally would have recommended splitting these strings into name/value pairs since even without knowing what they are they clearly are and then sorted the names -- which would give the right answer for all cases, in both the existing Cultures and the faux one I posited!</EM></P>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/03/09 <a href="http://archives.miloush.net/michkap/archive/2010/03/09/9975184.html">Coloring outside the lines in the a-ness of the Hungarian Technical Sort</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2010/02/22/9967111.html" title="Will someone take up the job of Calendar support in .Net, please?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2010/02/20/9966698.html" title="The road not traveled (or, more to the point, the road not built) for Amharic">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2010-02">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2010-02-21">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2010/02/21/9966915.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
</html>