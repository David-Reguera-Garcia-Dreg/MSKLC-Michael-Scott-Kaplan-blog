<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/10/01/476022.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Font Linking vs. Font Fallback</title></head><body>
<h1>Font Linking vs. Font Fallback</h1>
<p><em>by Michael S. Kaplan, published on 2005/10/01 10:09 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/10/01/476022.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Yesterday I was with our international MVPs all day as they were meeting with various people all across GIFT and GPTS. It was exciting for me because I had the chance to learn about a lot of things that I do not usually get exposure to, if you know what I mean....</FONT></P>
<P><FONT face=Tahoma>One of the interesting points that came up is the difference between these two technologies (linking vs. fallback), both of which are intended to help with the same problem -- you select a font and then try to use that font to view characters that do not exist within it. But how they work in Windows is very different.</FONT></P>
<P><FONT face=Tahoma>I will limit things in scope at the moment, but soon I will expand it to talk about differences in MLang, Office, and maybe even Avalon....</FONT></P>
<P><FONT face=Tahoma><STRONG>Font fallback</STRONG> is what Uniscribe uses. With its own internal knowledge of the best fonts to use for the various scripts that it supports, any time it is asked to render a character that is not in the selected font, it borrows the glyph from its preferred font for the script. Note that you can override this choice at any time by simply making sur your initial font contains the characters you want and all of the shaping rules/tables than an OpenType font brings to the mix. If fallback does not do the trick, Uniscribe will fall back to linking.</FONT></P>
<P><FONT face=Tahoma><STRONG>Font linking</STRONG>, on the other hand, is what GDI uses. It is the value list of fonts under <STRONG>HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\FontLink\SystemLink</STRONG> that gives the list of fonts to look in if the character cannot be found, and the order to look at them. Again, you can override the mechanism by making sure the initial font you choose has the glyphs.</FONT></P>
<P><FONT face=Tahoma>In this particular case, <STRONG>FALLBACK</STRONG> gets used pretty much exclusively in the case where you have a complex script, something that needs Uniscribe to do its work. And if you look at <STRONG>LINKING</STRONG>, for the most part it is exclusively used to help the East Asian story by allowing the default system locale to choose an ordering for where to look for the appropriate ideograph glyphs in fonts (though&nbsp;the mechanism can be expanded, and sometimes is by ISVs, to cover other languages and scripts).</FONT></P>
<P><FONT face=Tahoma>Now of course the way that the terms are used by other technologies is actually different in some cases, as are their mechanisms -- I will cover this soon (for now&nbsp;I have to get to a presentation for the Shell MVPs, where I am acting as both the 'Slide Boy' and one of the two 'Demo Boys'. :-)</FONT></P>
<hr/><p><a id="476056" href="#476056">#</a> <strong>Suz</strong> on 1 Oct 2005 2:06 PM:</p><div style="margin-left: 1em">I know that I can post Indic scripts with no font problems, but classical Greek is always dicy. Everyone sees it differently. No fallback that I can see. <br><br><a rel="nofollow" target="_new" href="http://abecedaria.blogspot.com/2005/09/polytonic-greek-fonts.html">http://abecedaria.blogspot.com/2005/09/polytonic-greek-fonts.html</a><br><br>The first quote with no font defined is full of boxes for me. Only the one with Tahoma is reliable on other machines.<br><br>Have you explained this and I just didn't understand. Sorry.<br><br></div>
<p><a id="476095" href="#476095">#</a> <strong>Michael S. Kaplan</strong> on 1 Oct 2005 6:46 PM:</p><div style="margin-left: 1em">Hi Suzanne!<br><br>All three with defined fonts work for me on XP SP2 with Uniscribe turned on.<br><br>The issues you are referring to relate to app-specific behvior (the browser in this case), which I will cover soon....</div>
<p><a id="476101" href="#476101">#</a> <strong>Suz</strong> on 1 Oct 2005 7:28 PM:</p><div style="margin-left: 1em">But the one without the defined font does not display properly, right. I do have to define my font, or, shouldn't have to? And yes I am using IE. <br><br>I'll wait for the post on this topic.</div>
<p><a id="476104" href="#476104">#</a> <strong>Michael S. Kaplan</strong> on 1 Oct 2005 7:57 PM:</p><div style="margin-left: 1em">Correct, Suzanne, that one is not displaying properly.</div>
<p><a id="476429" href="#476429">#</a> <strong>Andreas Magnusson</strong> on 3 Oct 2005 10:42 AM:</p><div style="margin-left: 1em">This sounds interesting, I wrote a simple text-editor a while back and used Uniscribe to implement correct caret movement but not for rendering, for which I used the GDI.<br><br>I don't know what I did wrong but I never noticed  neither any font-fallback nor font-linking when I had strings with mixed Thai and Chinese in my editor. The Thai characters would display fine, but the Chinese ones would come out as &quot;boxes&quot;.<br><br>So I'm looking forward to the continuation of this...<br><br>Great blog btw (i've been reading it for a while but not posted before).</div>
<p><strong>Adrian</strong> on 11 Mar 2010 11:08 AM:</p><div style="margin-left: 1em"><P>I've seen a few places assert that Uniscribe will automatically apply font fallback and/or font linking, yet the documentation says just the opposite.</P>
<P>"Once it has determined that font fallback is required, *the application* must assign a fallback font."</P>
<P><A href="http://msdn.microsoft.com/en-us/library/dd374105(VS.85).aspx">http://msdn.microsoft.com/en-us/library/dd374105(VS.85).aspx</A></P>
<P>Can you clarify what you meant about Uniscribe doing some of this work?</P></div>
<p><strong>Michael S. Kaplan</strong> on 11 Mar 2010 4:14 PM:</p><div style="margin-left: 1em"><p>ScriptShape (the topic you link to) is low-level Uniscribe, where none of the stuff I talk about applies and you have to do it all yourself....</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/11/19 <a href="http://archives.miloush.net/michkap/archive/2008/11/19/9116067.html">Apocalypse Font (aka Guess they must have picked the wrong eight characters.)</a></p><p>2008/03/19 <a href="http://archives.miloush.net/michkap/archive/2008/03/19/8323216.html">The forensic typographers found no link to Lucida Console, and the D.A. had nothing to fallback to</a></p><p>2007/06/09 <a href="http://archives.miloush.net/michkap/archive/2007/06/09/3174676.html">Guilt by [font ]association (aka The consequences of picking the wrong font #3)</a></p><p>2007/02/27 <a href="http://archives.miloush.net/michkap/archive/2007/02/27/1768106.html">They do it with MLang</a></p><p>2007/02/06 <a href="http://archives.miloush.net/michkap/archive/2007/02/06/1609072.html">MLang and GDI and Uniscribe, oh my!</a></p><p>2006/10/11 <a href="http://archives.miloush.net/michkap/archive/2006/10/11/817290.html">You got your latins in my hebrew! No, you got your hebrew in my latins!</a></p><p>2006/06/16 <a href="http://archives.miloush.net/michkap/archive/2006/06/16/634124.html">Neither GDI nor Uniscribe solve the ultimate font problem completely, either</a></p><p>2006/05/05 <a href="http://archives.miloush.net/michkap/archive/2006/05/05/590504.html">UI language of the LocalSystem account (which almost never shows UI)</a></p><p>2006/03/18 <a href="http://archives.miloush.net/michkap/archive/2006/03/18/554308.html">What about logical fonts?</a></p><p>2006/03/14 <a href="http://archives.miloush.net/michkap/archive/2006/03/14/551068.html">GDI Font Linking in GDI+</a></p><p>2006/01/22 <a href="http://archives.miloush.net/michkap/archive/2006/01/22/515864.html">Questions about font linking, etc.</a></p><p>2005/12/12 <a href="http://archives.miloush.net/michkap/archive/2005/12/12/502463.html">Ready... set... Reboot Redux</a></p><p>2005/10/18 <a href="http://archives.miloush.net/michkap/archive/2005/10/18/481654.html">Font Linking vs. Font Fallback, #2</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/10/02/476212.html" title="Google does not seem to be indexing the Vista SDK site">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/10/01/473792.html" title="Look out for those words of curse">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-10">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-10-01">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/10/01/476022.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>