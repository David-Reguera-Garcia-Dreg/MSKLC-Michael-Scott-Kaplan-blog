<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/10/28/486034.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>What is wrong with that web page?</title></head><body>
<h1>What is wrong with that web page?</h1>
<p><em>by Michael S. Kaplan, published on 2005/10/28 03:31 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/10/28/486034.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>The other day, my manager's manager's manager Delan was looking at various web sites and on one of them there was an unusual display issue on several pages.</FONT></P>
<P><FONT face=Tahoma>Basically, each of the pages in question had text on them that looked like this:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face=Verdana size=4><B><SPAN style="FONT-WEIGHT: bold">"?/font&gt;"</SPAN></B></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>Very odd, and maybe a little frustrating too.</FONT></P>
<P><FONT face=Tahoma>Of course when you are the head Globalization Infrastructure, <STRONG>Fonts</STRONG>, and Tools, what better place to start then with some of the font experts on your team? I mean, clearly something was messing with a font tag....</FONT></P>
<P><FONT face=Tahoma>In actuality&nbsp;it wasn't a font issue. After a few hours, the net was widened a bit and I ended up on&nbsp;a mail. It kind of reminded me of my MSLU days when a string was converted to the wrong code page when just a few characters were wrong. So based on that, I responded thusly:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT size=2><EM>I would suggest looking at the source on the page to see what might be next to those font tags, and check the IE detected encoding to see if matches the page's encoding -- it may be a CJK font name that is being misunderstood and combined with bytes of the less than sign.</EM></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>The page was sent on to me. So&nbsp;I set the&nbsp;encoding in IE&nbsp;(which for me was going through AutoDetect thinking the page was in Windows 1252) to be Chinese Traditional (Big5), and suddenly all of the news items that had bullets (0x95 or U+2022) wrapped in &lt;font&gt; tags had seen the bytes of the bullet and the the less than sign turned into a question mark.</FONT></P>
<P><FONT face=Tahoma>Now as it turns out she was actually having the page&nbsp;Auto Detected&nbsp;as being Chinese Simplified (GB2312), but the results were the same -- U+2022 U+003c (•&lt;) which for me&nbsp;was being read&nbsp;as 0x95 0x3c&nbsp;was for her being converted to "?" (since 0x953c is undefined on both code pages <A href="http://www.microsoft.com/globaldev/reference/dbcs/936.mspx">936</A>&nbsp;and <A href="http://www.microsoft.com/globaldev/reference/dbcs/950.mspx">950</A>, in the former a lead byte with an illegal trail byte and in the former an unused lead byte with no assigned trail bytes).</FONT></P>
<P><FONT face=Tahoma>The page itself:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><A href="http://local.msn.com/t3/?zip=93301"><FONT face=Tahoma>http://local.msn.com/t3/?zip=93301</FONT></A></P></BLOCKQUOTE>
<P><FONT face=Tahoma>had no charset meta tag and clearly the server was not communicating the charset. We both had the AutoDetect checkbox set (IE6 for me and IE7 for her), but clearly it was not detecting much to distinguish the page from the bias of our own individual locale settings.</FONT></P>
<P><FONT face=Tahoma>Wouldn't the illegal sequence have been a good indication that the AutoDetect guess was wrong? And isn't the lack of any charset bad too? And that lack of other communication about the charset from the server?</FONT></P>
<P><FONT face=Tahoma>Of course it was a page from MSN, so I figure we found at least three bugs in various Microsoft offerings from the exercise, which was actually a&nbsp;lot of fun, too! :-)</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> "<FONT color=#ff1493 size=6>•</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/2022">U+2022</A>, a.k.a. BULLET)</EM></FONT></P>
<hr/><p><a id="486129" href="#486129">#</a> <strong>CornedBee</strong> on 28 Oct 2005 5:39 AM:</p><div style="margin-left: 1em">Lesson learned: validate!<br>Because the W3C validator catches missing encoding declarations (which are misnamed charset declarations).</div>
<p><a id="486145" href="#486145">#</a> <strong>Will</strong> on 28 Oct 2005 7:06 AM:</p><div style="margin-left: 1em">Of course, I feel bound to make some criticism of a layout which has list bullets wrapped in font tags.<br><br>&lt;UL&gt; is hardly a difficult concept.<br><br></div>
<p><a id="486153" href="#486153">#</a> <strong>Ben Bryant</strong> on 28 Oct 2005 7:43 AM:</p><div style="margin-left: 1em">I always love your blog, but I found this confusing: &quot;U+2022 U+003c (•&lt;) which for me was being read as 0x95 0x3c was for her being converted to &quot;?&quot; &quot; Once I realized that the U+2022 is 0x95 in Windows-1252 then it was clear that for *both* of you the bytes you were seeing were 0x95 0x3c. So you were both trying to interpret 0x95 0x3c in your respective double byte encodings (e.g. 0x95 is a lead byte and 0x3c is not a valid trail byte in either, therefore the question mark).<br>To say that you have U+2022 U+003c in the page is incorrect since it is really a matter of guessing. It is also misleading to use the Unicode way of expressing those characters because no Unicode encoding is involved AT ALL until the browser's internal representation of the page. Those are the intended characters, yes, but I'm just trying to explain why I found your explanation confusing.</div>
<p><a id="486331" href="#486331">#</a> <strong>Maurits [MSFT]</strong> on 28 Oct 2005 2:20 PM:</p><div style="margin-left: 1em"><a rel="nofollow" target="_new" href="http://www.w3.org/TR/REC-html40/sgml/entities.html">http://www.w3.org/TR/REC-html40/sgml/entities.html</a><br>&lt;!ENTITY bull     CDATA &quot;&amp;#8226;&quot; -- bullet = black small circle,<br>                                     U+2022 ISOpub  --&gt;<br></div>
<p><strong>Jimmy</strong> on 31 Oct 2011 8:30 AM:</p><div style="margin-left: 1em"><p>It could be a bug of IE or simply the error of the coder. I wonder why people still use the old way to stylize though. CSS is a lot more efficient and it can eliminate almost formatting errors.</p>
<p>Jimmy from learnhowtomakearesume.com</p></div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/10/28/486232.html" title="ISCII code pages as Windows ANSI code pages?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/10/28/486019.html" title="It isn&#39;t Unicode, it&#39;s Double Secret Unicode!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-10">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-10-28">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/10/28/486034.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
</html>