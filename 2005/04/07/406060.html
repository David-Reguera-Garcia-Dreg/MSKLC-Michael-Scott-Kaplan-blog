<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/04/07/406060.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Definitions are context sensitive</title></head><body>
<h1>Definitions are context sensitive</h1>
<p><em>by Michael S. Kaplan, published on 2005/04/07 02:03 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/04/07/406060.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>The definition of many words depends on the context.</FONT></P>
<P><FONT face=Tahoma>For example, a typographer (or a dictionary) might consider a <A href="http://dictionary.reference.com/search?q=ligature">ligature</A> to be a character consisting of two or more letters combined into one. </FONT></P>
<P><FONT face=Tahoma>But if you work with keyboards on Windows then you might fall into the trap of the "ligature table" and think that a ligature is just any string of two to four UTF-16 code points that you stick on a key to appear sequentially.</FONT></P>
<P><FONT face=Tahoma>If you follow international industrial standards, you may consider <A href="http://www.unicode.org/standard/WhatIsUnicode.html">Unicode</A> to be a standard that "...provides a unique number for every character, no matter what the platform, no matter what the program, no matter what the language." </FONT></P>
<P><FONT face=Tahoma>But if you are <A href="http://dictionary.reference.com/search?q=Unicode">dictionary.com</A> or you only work on Microsoft platforms, then to you Unicode may seem to be a "...16-bit character set standard..." and not really not think about the fact that the code space goes beyond that.</FONT></P>
<P><FONT face=Tahoma>If you deal with fonts or GDI APIs then you may think of a <EM>charset</EM> as something that is not exactly a code page but if you are building HTML page then you may think it is exactly a code page.</FONT></P>
<P><FONT face=Tahoma>And all of this leads up to the actual point of this post....</FONT></P>
<P><FONT face=Tahoma>In the suggestion box, <A id=_ctl0__ctl0__ctl0__ctl0__ctl0__ctl0_Comments__ctl0_Comments__ctl0_NameLink title=Anonymous target=_blank>Eusebio Rufian-Zilbermann</A> asked a question:</FONT></P>
<BLOCKQUOTE dir=ltr>
<BLOCKQUOTE dir=ltr>
<P><FONT face=Tahoma size=2><EM>What is a "character" exactly? <BR><BR>During the Windows Security Push, Microsoft introduced a set of new string handling functions that use "character counts" (declared in strsafe.h together with other functions). Did anybody from Globalization Infrastructure (or a previous incarnation, back in 2002) provide feedback into using the term "character count"? The problem I see is that counting "characters" only makes sense for initialized strings and it gets messy when talking about uninitialized items. Specifying that the size of an unitialized buffer is X number of "characters" is just trouble waiting to happen as soon as surrogates (or "old-style" multibyte) get into the picture. At least the library documentation should be clearer that the destination size is really specified in number of _TCHARs (which is not always the same as number of characters). </EM></FONT></P></BLOCKQUOTE></BLOCKQUOTE>
<P><FONT face=Tahoma>At some levels, like the level of an API that accepts a <STRONG>cch</STRONG> or "<EM>count of characters</EM>", a character is a UTF-16 code point, on Microsoft platforms a WCHAR or wide character. If you are the caller of such an API then your chief concerns will be about&nbsp;buffer sizes and their allocation, so you would probably be on that same level.</FONT></P>
<P><FONT face=Tahoma>But if you are an API that has to intelligently move the cursor&nbsp;appropriately or the&nbsp;user moving the cursor, then a character may well be made of more than one of these code points. It will be what the .NET Framework calls in its <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationstringinfoclasstopic.asp">StringInfo</A> and <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationtextelementenumeratorclasstopic.asp">TextElementEnumerator</A> classes a "<EM>text element</EM>".</FONT></P>
<P><FONT face=Tahoma>This is also what <A href="http://www.macchiato.com/">Mark Davis</A> (president of the Unicode Consortium)&nbsp;in an effort to separate the two definitions has dubbed&nbsp;a "<EM><A href="http://www.unicode.org/glossary/#G">grapheme cluster</A></EM>", a "...particular text element defined in <A href="http://www.unicode.org/reports/tr29/"><FONT color=#bb0000>Unicode Standard Annex #29, “Text Boundaries</FONT></A>,” consisting of any of the following: an atomic character, a combining character sequence consisting of a base character plus one or more nonspacing marks or enclosing marks, or a sequence of Hangul jamos equivalent to a Hangul syllable." </FONT></P>
<P><FONT face=Tahoma>(I must admit that I every time I hear the term I cannot help imagining a bunch of <A href="http://www.kelloggs.com/keebler/meetelves.html">Keebler elves</A>&nbsp;coming out of Mark's office thanking him for giving their new cookie line a great name!)</FONT></P>
<P><FONT face=Tahoma>In fact, it is fair to say that any time the question "how long is the string" is asked that there are two completely different answers, both of which may be totally different yet are nevertheless both right. All depending on the context.</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma><FONT color=#ff0000><EM>This post brought to you by</EM> "œ" </FONT><EM><FONT color=#ff0000>(<A href="http://www.fileformat.info/info/unicode/char/0153/index.htm">U+0153</A>, a.k.a. LATIN SMALL LIGATURE OE)<BR><FONT size=1>That was LATIN SMALL LIGATUE OE, rush chairman. He was damn glad to meet you...</FONT></FONT></EM></FONT></P>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2015/08/07 <a href="http://archives.miloush.net/michkap/archive/2015/08/07/8770668856267196989.html">Can you tell me how Microsoft keyboard layouts define a ligature and by the way can it be changed?</a></p><p>2007/02/11 <a href="http://archives.miloush.net/michkap/archive/2007/02/11/1657463.html">MSKLC can't do everything, even in the 1.4 version</a></p><p>2007/01/24 <a href="http://archives.miloush.net/michkap/archive/2007/01/24/1520227.html">Sometimes a WCHAR really *is* just a character....</a></p><p>2006/11/10 <a href="http://archives.miloush.net/michkap/archive/2006/11/10/1053925.html">Some people feel really insecure about the size of their [string] members</a></p><p>2006/06/05 <a href="http://archives.miloush.net/michkap/archive/2006/06/05/617896.html">Is SQL Server really supporting UTF-16?</a></p><p>2006/03/24 <a href="http://archives.miloush.net/michkap/archive/2006/03/24/559169.html">Getting all you can out of a keyboard layout, Part #3</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/04/07/406212.html" title="I will be at TechEd Europe (July 5-8)">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/04/06/406044.html" title="Michael Penn at the Tractor Tavern on April 9th">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-04">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-04-07">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/04/07/406060.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
</html>