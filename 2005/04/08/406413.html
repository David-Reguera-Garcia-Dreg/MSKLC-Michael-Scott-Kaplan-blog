<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/04/08/406413.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>The ever-misleadingly incorrect usage of the word DEFAULT</title></head><body>
<h1>The ever-misleadingly incorrect usage of the word DEFAULT</h1>
<p><em>by Michael S. Kaplan, published on 2005/04/08 02:03 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/04/08/406413.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Back after Windows 2000 shipped, everyone though the word LOCALE was simply used too much, in fact that it was OVERused.</FONT></P>
<P><FONT face=Tahoma>It forced </FONT><A href="http://www.microsoft.com/globaldev/DrIntl/"><FONT face=Tahoma>Dr. International</FONT></A><FONT face=Tahoma> to ask "<A href="http://www.microsoft.com/globaldev/DrIntl/columns/004/default.mspx#Q5">Will the Real Locale Please Stand?</A>" and answer it with a mondo big table of <A href="http://www.microsoft.com/globaldev/reference/localetable.mspx">Configurable Language an Cultural Settings</A>. And it forced Windows XP to rename the various settings to other&nbsp;terms in the user interface.</FONT></P>
<P><FONT face=Tahoma>I wonder if we ought to be doing the same with the word "DEFAULT" at some point.</FONT></P>
<P><FONT face=Tahoma>At its lowest level, the meaning for the word is the same for all of them: "an option that is selected automatically unless an alternative is specified." This is good as far as it goes.</FONT></P>
<P><FONT face=Tahoma>But the <STRONG><STRIKE><FONT color=#808080>Default</FONT></STRIKE> User Locale</STRONG> (returned by the <A href="http://msdn.microsoft.com/library/en-us/intl/nls_08tg.asp">GetUserDefaultLCID</A> API) makes no sense since the user can only have one "<EM>user locale</EM>" at a time. If they specify an alternative by calling a Win32 API like <A href="http://msdn.microsoft.com/library/en-us/intl/nls_5w6s.asp">GetDateFormat</A> with a different LCID, then it is no longer a user locale being specified. Maybe it should just be called the "user locale."</FONT></P>
<P><FONT face=Tahoma>Same deal for the <STRONG><STRIKE><FONT color=#808080>Default</FONT></STRIKE> System Locale</STRONG> (returned by the <A href="http://msdn.microsoft.com/library/en-us/intl/nls_85yc.asp">GetSystemDefaultLCID</A> API) which if I try to change today forces a reboot. There is only one "<EM>system locale</EM>" at a time. If I specify an alternative by calling a Win32 API like <A href="http://msdn.microsoft.com/library/en-us/intl/nls_34rz.asp">GetLocaleInfo</A> with a different LCID to get a different ACP than the CP_ACP via the&nbsp;<A href="http://msdn.microsoft.com/library/en-us/intl/nls_8rse.asp">LOCALE_IDEFAULTANSICODEPAGE</A>&nbsp;flag, it is certainly not the default. Maybe it should just be called the "system locale."</FONT></P>
<P><FONT face=Tahoma>Which only underscores that the <STRONG><STRIKE><FONT color=#808080>Default</FONT></STRIKE> ANSI Codepage</STRONG> that CP_ACP represents is not really a default either -- there is only one, until and unless you change the system locale. So default is not the right word to contrast with when you call <A href="http://msdn.microsoft.com/library/en-us/intl/unicode_2bj9.asp">WideCharToMultiByte</A> with some other code page. Maybe it should be called the "system ANSI code page."</FONT></P>
<P><FONT face=Tahoma>It is not&nbsp;just us, mind you. <FONT face=Tahoma>Moving into the USER subsystem area, they have the notion of a Default Input Language, which can be retrieved by the SPI_GETDEFAULTINPUTLANG flag&nbsp;and set by the SPI_SETDEFAULTINPUTLANG flag of the <A href="http://msdn.microsoft.com/library/en-us/sysinfo/base/systemparametersinfo.asp">SystemParametersInfo</A> API (which is incidentally classed as a "BASE" API in the Platform SDK even though it is exported by user32.dll; usually the term BASE refers to the stuff in kernel32.dll). But this is simply the initial <a href="http://archives.miloush.net/michkap/archive/2004/11/27/270931.html">HKL</A> of any new thread that is started for a given user. Note that it can never be "overridden" and will always be the first input language; it can just be changed later. So&nbsp;it too is not really a default. Maybe they should call it the "initial input language" instead.</FONT></P></FONT>
<P><FONT face=Tahoma>And then moving off into the area of user accounts and profiles, Windows has a <STRONG><STRIKE><FONT color=#808080>Default</FONT></STRIKE> User</STRONG> account which you never directly use for the purposes of login. You can get its directory with the <A href="http://msdn.microsoft.com/library/en-us/policy/policy/getdefaultuserprofiledirectory.asp">GetDefaultUserProfileDirectory</A> API. But that account's directory's contents are essentially used as a <EM>template</EM> for new user accounts. It is half of what we do when you click on that "Default user account settings" checkbox on the Advanced tab of Regional and Language Options. But it is not really a default -- maybe they should call it the "template account."</FONT></P>
<P><FONT face=Tahoma>And then there is the <STRONG><STRIKE><FONT color=#808080>.DEFAULT</FONT></STRIKE></STRONG> user section of the registry. It is the part of the registry under <STRONG>HKEY_USERS\.DEFAULT</STRONG> and it has in it the information used prior to logging in to the machine. You ever wonder what registry settings control the <a href="http://archives.miloush.net/michkap/archive/2005/01/07/348944.html">keyboard list in the logon dialog</A> or the user interface language of the logon dialog or desktop theme of the logon dialog or the user locale of services running under the SYSTEM account or anything else initialized in that early stage of the OS? Its in that section of the registry, and the other half of what that "Default user account settings" checkbox&nbsp;does. But it is not really a default -- maybe they should call it the "system account" <EM>especially since it is the system account</EM>.</FONT></P>
<P><FONT face=Tahoma>Looking at the world of MUI (Multilingual User Interface, another subteam inside of the GIFT org of which I am a member), they have their <A href="http://msdn.microsoft.com/library/en-us/intl/nls_2ip1.asp">GetSystemDefaultUILanguage</A> and <A href="http://msdn.microsoft.com/library/en-us/intl/nls_5c85.asp">GetUserDefaultUILanguage</A>&nbsp;APIs, which suffer from the same problems of (respectively) the <A href="http://msdn.microsoft.com/library/en-us/intl/nls_85yc.asp">GetSystemDefaultLCID</A>&nbsp;and <A href="http://msdn.microsoft.com/library/en-us/intl/nls_08tg.asp">GetUserDefaultLCID</A> APIs. They are not really defaults. Maybe they should simply be called the "system UI language" and "user UI language".</FONT></P>
<P><FONT face=Tahoma>But then we can't really change the names of these various APIs, for obvious reasons. So our <FONT color=#808080><STRIKE>default</STRIKE></FONT>eventual answer is to just leave it like it is, even if some clever person in marketing reads this entry and decides to change all of the names of everything in the user interface like&nbsp;we did with the word "locale" in XP. :-)</FONT></P>
<P><FONT face=Tahoma>Not the best&nbsp;<STRIKE><FONT color=#808080>default</FONT></STRIKE>initial plan, but <a href="http://archives.miloush.net/michkap/archive/2005/03/06/386194.html">backcompat</A> is still king here!</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma><FONT><FONT color=#ff0000><EM>This post brought to you by </EM>"<FONT size=5>à²¡</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/0ca1/index.htm">U+0ca1</A>, KANNADA LETTER DDA)</EM></FONT></FONT></FONT></P>
<hr/><p><a id="406462" href="#406462">#</a> <strong>Mike Williams</strong> on 8 Apr 2005 4:21 AM:</p><div style="margin-left: 1em">Thanks for bringing this up. I encountered this many times in projects I worked on, as well as a confusion between &quot;persist&quot; and &quot;propagate&quot; in regard to object properties. I'd also like to see the words &quot;current&quot; and &quot;currently&quot; given the red pencil in software UI. They are almost always used redundantly or with insufficient stress on the time-sensitivity of the information.<br><br>More cynically though - and I know you're waiting for this Mike :-) - doesn't &quot;default&quot; w.r.t. to Windows locales just mean &quot;English(US)&quot;? My observation is that if a locale-sensitive feature failed, then it would inevitably return the behaviour of an English(US) setting ... and so most (US-raised) testers would overlook the problem.</div>
<p><a id="406501" href="#406501">#</a> <strong>Michael S. Kaplan</strong> on 8 Apr 2005 8:22 AM:</p><div style="margin-left: 1em">For the NLS APIs, if the locale-sensitive behavior fails, we do not fall back to US English -- we fail the API. For us, the &quot;default&quot; table that is used for collation (one of the few appropriate uses for the word!) supports over 70 different locales and their expected results. So you could in theory claim that Windows is &quot;biased&quot; towards any of these languages. <br><br>I will suggest that we are biased towards Dutch, and that I need to vacation in Amssterdam to invedstigate this issue further. :-)</div>
<p><a id="406583" href="#406583">#</a> <strong>CornedBee</strong> on 8 Apr 2005 12:10 PM:</p><div style="margin-left: 1em">The APIs like GetUserDefaultLCID - I think you misunderstand what the name means.<br>It doesn't mean the &quot;Default User Locale&quot;, because, as you said, there's only one user locale. And the word order is wrong, too.<br>The first stressing is that it's the &quot;default locale&quot;. Thus, it's the locale the application should use by default if it doesn't have compelling reasons to use a different one. (E.g. a web browser downloading a document in a different language.)<br>But Windows has more than one places to set a locale, so it has several &quot;default locales&quot;. Specifically, the system administrator can set a system-wide default choice and each user can make their own default choice.<br>Thus, there's the &quot;user-default locale&quot; and the &quot;system-default locale&quot;, which should primarily serve as fallback for getting the user-default locale, if that is not set. (There might also be uses when exchanging locale-sensitive data with a program that might run as a different user.)</div>
<p><a id="406594" href="#406594">#</a> <strong>Ravi</strong> on 8 Apr 2005 12:51 PM:</p><div style="margin-left: 1em">Glad to see some kannada letters on Microsoft pages :)</div>
<p><a id="406733" href="#406733">#</a> <strong>Mike Williams</strong> on 8 Apr 2005 7:33 PM:</p><div style="margin-left: 1em">While the NLS API might fail, application features may pay little attention to that, and as I said, fall-back without warning to US English, particularly if you're working in any other English locale. It's not an unreasonable thing to do, but it's incredibly frustrating to the end-user when the UI does not reflect it. Microsoft compounds the mystery with the conflation of &quot;English&quot; &amp; &quot;US&quot; in so many places.</div>
<p><a id="406736" href="#406736">#</a> <strong>Michael S. Kaplan</strong> on 8 Apr 2005 8:11 PM:</p><div style="margin-left: 1em">CornedBee -- interesting approach, but that is not how the docs, Nadine Kanos's book, or the owners of the API look at it -- they think of LOCALE_USER_DEFAULT as the user's locale choice. :-)</div>
<p><a id="406737" href="#406737">#</a> <strong>Michael S. Kaplan</strong> on 8 Apr 2005 8:13 PM:</p><div style="margin-left: 1em">Mike, if they call GetDateFormat and it fails then the date is not formatted. It does magically format with en-US type formatting. Same thing with collation, same thing with all of our APIs. If they fail, then they fail.<br><br>As usual, I understand what you mean, but I also know that you are referring to some other set of APIs. :-)</div>
<p><a id="406739" href="#406739">#</a> <strong>Michael S. Kaplan</strong> on 8 Apr 2005 8:16 PM:</p><div style="margin-left: 1em">Hi Ravi -- yes, I am sure other Kannada letters will be sponsoring future posts. :-)<br><br>I may even try to post some actual meaningful content on Indic scripts.</div>
<p><a id="407223" href="#407223">#</a> <strong>Sebastian Redl</strong> on 11 Apr 2005 12:00 PM:</p><div style="margin-left: 1em">&gt; CornedBee -- interesting approach, but that is not how the docs, Nadine Kanos's book, or the owners of the API look at it -- they think of LOCALE_USER_DEFAULT as the user's locale choice. :-)<br><br><br>If the name can't change, change the reasoning :)<br>Tell the API owners that their names are faulty, according to their reasoning. If they complain that they can't change the names of existing APIs, given them my reasoning. They'll have to accept it and I'll be famous ;)</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/11/12 <a href="http://archives.miloush.net/michkap/archive/2008/11/12/9061211.html">You can either be intuitive and completely inconsistent, or consistent and completely unintuitive!</a></p><p>2006/03/09 <a href="http://archives.miloush.net/michkap/archive/2006/03/09/546910.html">Blogging doesn't pay... enough</a></p><p>2005/05/17 <a href="http://archives.miloush.net/michkap/archive/2005/05/17/418372.html">The weird, weird world of the SUBLANGID</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/04/09/406765.html" title="And then there is the virama....">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/04/07/406392.html" title="What makes a good blog?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-04">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-04-08">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/04/08/406413.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>