<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/12/27/507404.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Administrator vs. Administrateur, et. al.</title></head><body>
<h1>Administrator vs. Administrateur, et. al.</h1>
<p><em>by Michael S. Kaplan, published on 2005/12/27 03:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/12/27/507404.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Yesterday, <a href="http://blogs.msdn.com/Profile.aspx?UserID=10263">Ashutosh Galande</A>&nbsp;blogged a bit about <a href="http://blogs.msdn.com/ashutosh_galande/archive/2005/12/25/507349.aspx">the dangers of using the string version of the Administrator account</A>.</FONT></P>
<P><FONT face=Tahoma>The reasons that it is a bad idea&nbsp;are numerous, but I thought I might explain a bit more about the particular problem behing bugs like the one that is described in MSKB article <A href="http://support.microsoft.com/Default.aspx?kbid=258163">258163</A>&nbsp;and how MUI has an interesting effect here on some code.</FONT></P>
<P><FONT face=Tahoma>Now the MUI version of Windows always has some base language (usually English but for some languages, other base languages are used).</FONT></P>
<P><FONT face=Tahoma>And I am sure you can imagine the havoc that it would wreak on a computer if literal account names used for logging into the machine could change just by changing the UI language.</FONT></P>
<P><FONT face=Tahoma>So, there are at least alternate three potential implementation choices here:</FONT></P>
<UL>
<LI><FONT face=Tahoma>Windows could accept all language versions of the string and treat them equally;</FONT> 
<LI><FONT face=Tahoma>Windows could accept only the language versions that correspond to installed UI languages;</FONT> 
<LI><FONT face=Tahoma>Windows could accept only the language version that corresponds to the original installed base language.</FONT></LI></UL>
<P><FONT face=Tahoma>Now there are many reasons that the first two choices&nbsp;can be&nbsp;incredibly&nbsp;problematic and even dangerous from a security perspective, so the third choice is the one that is done.</FONT></P>
<P><FONT face=Tahoma>HOWEVER, the localized account names (e.g. <EM>Administrateur</EM> for Administrator)&nbsp;are in the localized resources in many cases, which is probably a bad idea since the localized strings are&nbsp;chosen by UI language even though the account names are not. This mismatch is indeed the cause behind the problem described in <A href="http://support.microsoft.com/Default.aspx?kbid=258163">258163</A>, although it probably could have been worded a little more clearly. :-)</FONT></P>
<P><FONT face=Tahoma>The safest answer is just as Ashutosh indicated -- using the SID to get the name rather than assuming a particular localized string....</FONT></P>
<P><FONT face=Tahoma>For the actual bug, it is a simple case of misunderstanding one of the subtle (and <EM>usually</EM> obscure) differences between the MUI version of Windows and the localized version, and of course the problem that happens any time you rely on localization content to control&nbsp;what happens when&nbsp;code executes.</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> "<FONT face="Mongolian Baiti" size=6>á¢š</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/189a">U+189a</A>, MONGOLIAN LETTER MANCHU ALI GALI GHA)</EM></FONT></P>
<hr/><p><a id="507528" href="#507528">#</a> <strong>Fred</strong> on 27 Dec 2005 9:48 AM:</p><div style="margin-left: 1em">Microsoft itself advises administrators to rename the administrator account anyway, so any software should IMO take this into account and use the SID to do the translation. Actually, I wouldn't be surprised this to be requirement for the Windows certification program, or whatever microsoft calls it these days. Now if only Microsoft would also follow their own guidelines, things would be very nice indeed.</div>
<p><a id="507532" href="#507532">#</a> <strong>Michael S. Kaplan</strong> on 27 Dec 2005 10:12 AM:</p><div style="margin-left: 1em">In the words of Arkady Renko, slightly munged -- 'A company is like a body. First the muscle, later the hair lotion'<br><br>In other words, I agree with you, but assuming it is as simple as an &quot;if only...&quot; wish implies is ignoring some of the complexities....<br><br>:-)</div>
<p><a id="507722" href="#507722">#</a> <strong>Fred</strong> on 28 Dec 2005 8:45 AM:</p><div style="margin-left: 1em">I agree, it isn't as easy as someone High Up[TM] decreeing compliance to whatever standard du jour is in fashion :) But hey, it'd be a nice dream anyway!<br><br>I work in a company of only 1000 people. And even there it's pretty much impossible to get project and development teams to comply to agreed upon standards. It must a royal disaster to try and make a company the size of Microsoft do it...</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2011/02/10 <a href="http://archives.miloush.net/michkap/archive/2011/02/10/10126601.html">A design flaw not being fixed is not a bug. And it's not "By Design", either.</a></p><p>2008/06/24 <a href="http://archives.miloush.net/michkap/archive/2008/06/24/8639579.html">Everyone knows that SID, he is a laugh riot</a></p><p>2008/06/11 <a href="http://archives.miloush.net/michkap/archive/2008/06/11/8590956.html">You almost want a cease-and-desist order put out about the docs</a></p><p>2008/05/06 <a href="http://archives.miloush.net/michkap/archive/2008/05/06/8461897.html">By some accounts, the names can be changed</a></p><p>2006/12/01 <a href="http://archives.miloush.net/michkap/archive/2006/12/01/1183198.html">What's in a name? (once more)</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/12/27/507599.html" title="When the roof got raised, and why">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/12/26/507402.html" title="COleDateTime&#39;s ParseDateTime and locales....">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-12">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-12-27">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/12/27/507404.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
</html>