<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/11/02/487994.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Random clearing of topics from the Suggestion Box</title></head><body>
<h1>Random clearing of topics from the Suggestion Box</h1>
<p><em>by Michael S. Kaplan, published on 2005/11/02 06:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/11/02/487994.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>The Suggestion Box seemed to be building up some topics, so I thought I would clear a few of them out here....</FONT></P>
<P><FONT face=Tahoma>Back on May 15th of this year, <A href="http://www.yeyan.cn/">QFlash</A> asked me:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT size=2><EM>How to write a txt file as Unicode in .NET?</EM></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>It is actually pretty straightforward.... if you create a new StreamWriter object, then one of the constructors takes both a filename and an Encoding object.</FONT></P>
<P><FONT face=Tahoma>So if I want to create a UTF-16 text file named IamUnicode.txt, you can just use:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Courier New"><STRONG>StreamWriter sw = new StreamWriter("c:\\IamUnicode.txt", Encoding.Unicode);</STRONG></FONT></P>
<P><FONT face="Courier New"><STRONG><FONT color=#008000>// Write something to the file</FONT><BR>sw.WriteLine("something");</STRONG></FONT></P>
<P><FONT face="Courier New"><STRONG>sw.Flush();<BR>sw.Close();</STRONG></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>and that's it (some people do not call the Flush() method but it just feels safer to me to know that I have done it before I close, it is probsbly not needed).</FONT></P>
<P><FONT face=Tahoma>Now on a bit harder of a note, Martin Kochanski asked me the following back in March:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face=Tahoma><EM><FONT size=2><FONT face="Times New Roman">Before Unicode was as widely used as it is now, users of languages with diacritics had to manage with ASCII (or if, they were lucky, with Latin-1) and whole dialects of character usage grew up as a result. This was especially the case with informal communications such as chats and bulletin boards. </FONT></FONT></EM></FONT></P>
<P><FONT face=Tahoma><EM><FONT size=2><FONT face="Times New Roman">To give the example I know best: Polish needs acute accents on c, s, and z, a dot on the z, tails under a and e, and a line through the lowercase "l", to mention just a few. </FONT></FONT></EM></FONT></P>
<P><FONT face=Tahoma><EM><FONT size=2><FONT face="Times New Roman">Sometimes the accents were left out when they could be inferred, and some adjustments were trivial (eg. represent acute accent with a following apostrophe) but what was really inspiring was that people worked out that some letters that weren't used in Polish, such as q, v and x, could be co-opted and given consistent meanings in Polish completely unrelated to what they normally mean in Latin scripts: thus if x equalled z-dot (I can't whether this was one of the specific equivalences) then a Polish speaker would quickly learn to read x as z-dot without hesitation and to press the x key when he wanted to type z-dot. </FONT></FONT></EM></FONT></P>
<P><FONT face=Tahoma><EM><FONT size=2><FONT face="Times New Roman">The spontaneous evolution of such dialect character sets (the convergent evolution resulting from a strong selection towards mutual comprehensibility) has always struck me as a rather inspiring episode, because "bottom-up", driven by need, and not created by committees. The trouble is that once the need disappears, so do the dialects. I'm hoping that someone somewhere is interested enough in the electronic equivalent of "oral history" to be able to capture and codify these ephemeral character sets before they are forgotten even by the people who used them; and it struck me that some of the people who read this blog might have an interest in this bit of history too. </FONT></P></BLOCKQUOTE></FONT></EM></FONT>
<P><FONT face=Tahoma>Now this is a fascinating topic, but one that I have to admit I know just about nothing about. Does anyone know of a place where knowledge all of these kinds of&nbsp;de facto standards might be kept?</FONT></P>
<P><FONT face=Tahoma>Any leads might be interesting or useful....</FONT></P>
<P><FONT face=Tahoma>Another one -- <A href="http://www.spatialace.com/">Per Bergland</A> asked just this last&nbsp;August:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><EM><FONT size=2>I can't understand why after so long time there's still no support for Unicode .cmd/.bat files in cmd.exe. </FONT></EM></P>
<P><EM><FONT size=2>Since I often use Swedish åäö in my file paths, I have to either resort to firing up edit.exe in a command prompt window (aka DOS Window) or first create a Unicode version A.txt from which I can easily create B.txt by "type"-ing it: <BR>type A.txt &gt;B.txt (unless of course I started the prompt using cmd /u). </FONT></EM></P>
<P><EM><FONT size=2>So it's not as if cmd.exe is totally Unicode-unaware. Why not batch file support? </FONT></EM></P></BLOCKQUOTE>
<P><FONT face=Tahoma>The problem (well, one of the problems, as there are many) with cmd.exe is that there is a lot of backcompat fear surrounding changes to it -- because almost any change that does happen can lead to breaks.</FONT></P>
<P><FONT face=Tahoma>But Pat, have you checked out Monad? It is indeed the next generation in the console, and it will support Unicode scripts....</FONT></P>
<P><FONT face=Tahoma>I do not know of any plans to rev. cmd.exe in Vista to support this though; it has to keep running as is, but a major feature like this one is simply a bit too much, I think.</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> "<FONT size=6>আ</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/0986">U+0986</A>, a.k.a. BENGALI LETTER AA)</EM></FONT></P>
<hr/><p><a id="488240" href="#488240">#</a> <strong>Heath Stewart</strong> on 2 Nov 2005 12:14 PM:</p><div style="margin-left: 1em">I think it's important to note that when using the static properties of the System.Text.Encoding class (i.e., Encoding.UTF8, Encoding.Unicode, etc.) the encodings identified by byte-order marks (BOMs) will include them by default. For text files this is probably wanted but I've answered many questions in various forums where people are writing to, say, a MemoryStream or a NetworkStream where the protocol dictates a certain encoding and the BOM is probably unwanted and will most likely screw things up. The DICT protocol, for example, always expects UTF-8 but a BOM will result in a server error.</div>
<p><a id="488283" href="#488283">#</a> <strong>Michael S. Kaplan</strong> on 2 Nov 2005 1:10 PM:</p><div style="margin-left: 1em">Good point, Heath. Though that can be a topic for another day, the question here was just about text files. :-)</div>
<p><a id="488304" href="#488304">#</a> <strong>Marvin</strong> on 2 Nov 2005 1:40 PM:</p><div style="margin-left: 1em">People who have to use non-Latin alphabet languages but stuck with an US-English keyboard (or just not familiar with other layouts) had developed various &quot;transliteration&quot; approaches for a long time. For example there is long tradition of Russian transliteration which lead to tools like this: <a rel="nofollow" target="_new" href="http://translit.ru/">http://translit.ru/</a>. It is pretty common to see russian text typed in latin letters using this convention (or minor variants) on the net. <br>I myself don't know russian keyboard layout well so I used MKLC to create a keyboard layout that tries to approximate this approach. ;-)</div>
<p><a id="488446" href="#488446">#</a> <strong>Jonathan Wilson</strong> on 2 Nov 2005 6:48 PM:</p><div style="margin-left: 1em">How would changing cmd.exe to support unicode break existing stuff?<br>Wouldnt it just mean that it would be accepting &quot;all input it does now&quot; plus the now valid unicode input?<br></div>
<p><a id="488455" href="#488455">#</a> <strong>Michael S. Kaplan</strong> on 2 Nov 2005 7:16 PM:</p><div style="margin-left: 1em">It has been proven that ANY change breaks existing stuff. Any change whatsoever. No matter how innocuous, the 1st tester's axiom has been proven to apply to cmd.exe.</div>
<p><a id="488572" href="#488572">#</a> <strong>Serge Wautier</strong> on 3 Nov 2005 2:15 AM:</p><div style="margin-left: 1em">&gt; The trouble is that once the need disappears, so do the dialects.<br><br>Very interesting point. I believe though that some such uses will continue to be live for quite some time since they kind of became default behaviour.<br><br>Another (simpler) occurence of this problem is the use of the decimal point instead of the decimal comma.<br><br><a rel="nofollow" target="_new" href="http://tinyurl.com/86m85">http://tinyurl.com/86m85</a><br></div>
<p><a id="489514" href="#489514">#</a> <strong>Suzanne McCarthy</strong> on 6 Nov 2005 12:08 AM:</p><div style="margin-left: 1em">Hi Mike,<br><br>I have posted Martin's question re: dialect character sets since I have some readers who are interested in that sort of thing. <br><br><a rel="nofollow" target="_new" href="http://abecedaria.blogspot.com/2005/11/dialect-character-sets.html">http://abecedaria.blogspot.com/2005/11/dialect-character-sets.html</a><br><br>Suz </div>
<p><a id="490560" href="#490560">#</a> <strong>Per Bergland</strong> on 8 Nov 2005 5:37 PM:</p><div style="margin-left: 1em">Eh, if you could fix the spelling of my first name, I'd be happy.<br>Per is a Swedish form of Peter, btw.<br>And I still don't understand why a unicode .cmd file with a BOM would cause havoc if it triggered cmd.exe to read 2 bytes at a time instead of 1.<br>When I look at all the strange extensions to other parts of cmd - e.g. the very strange &quot;for&quot; variants that can even be made to perform like the unix &quot;which&quot; command and find a file in the &quot;PATH&quot; list, or the &quot;set&quot; syntax for string search/replace - I can't understand why  adding yet another cmd.exe switch was so hard.<br>But I guess us non-US users haven't screamed loud enough...<br><br>Since I'm typing this on Tiger, I can tell you that the Mac OS X tcsh shell is even worse than cmd.exe in this respect. You can't drop a file onto Terminal and get a correct path if the path contains national characters, and the shell displays &quot;o\314\210&quot; or &quot;o??&quot; for a simple &#246;. Go figure.</div>
<p><a id="490567" href="#490567">#</a> <strong>Michael S. Kaplan</strong> on 8 Nov 2005 6:01 PM:</p><div style="margin-left: 1em">Whoops, sorry about that! (should be fixed now)<br><br>The problem with cmd.exe is that any time a change is made, something breaks. It is a rule with very few exceptions.....</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/11/02/488282.html" title="What do Sony and a straw have in common?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/11/02/487977.html" title="UTC #105 -- Day 1">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-11">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-11-02">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/11/02/487994.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
</html>