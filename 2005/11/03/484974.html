<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/11/03/484974.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>My own personal thoughts about collation in the Mono project</title></head><body>
<h1>My own personal thoughts about collation in the Mono project</h1>
<p><em>by Michael S. Kaplan, published on 2005/11/03 18:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/11/03/484974.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma size=2><EM>(IMPORTANT NOTE: this post is just my personal <STRIKE><FONT color=#a9a9a9>delusions</FONT></STRIKE>opinions about the topic, I am certainly speaking for neither Microsoft nor the Mono project. If there was ever a time to read this blog's disclaimer, it is <STRONG>right now</STRONG>!)</EM></FONT></P>
<P><FONT face=Tahoma size=2><EM>(IMPORTANT NOTE #2: I am not getting into the philosophical issues of proprietary versus open source, really trying to stick to technical issues. I hope the comments, if any, will do the same. Thank you for your consideration.)</EM></FONT></P>
<P><FONT face=Tahoma>Back in the beginning of August, in the post <a href="http://archives.miloush.net/michkap/archive/2005/08/03/447224.html"><STRONG>the further you look into it, the further things stick out</STRONG></A>, I worked through a few of the problems that Atsushi Eno had reported about in his own investigation of collation for the Mono implementation, when looking at results in ours.</FONT></P>
<P><FONT face=Tahoma>Shortly after that, <A href="http://monkey.workarea.jp/lb/archive/2005/8-09.html">this post</A> went up, which describes the experiences, as well as the conclusions, after working hard to get the same results as Microsoft.</FONT></P>
<P><FONT face=Tahoma>Of course long time readers of this blog know that <a href="http://archives.miloush.net/michkap/archive/2004/11/28/271121.html"><STRONG>Microsoft does not use the Unicode Collation Algorithm</STRONG></A>, and if you read that post you might even know why. :-)</FONT></P>
<P><FONT face=Tahoma>Of course Atsushi Eno is right, this does make it harder for a project like Mono to emulate the results, especially since there is no easy or even reasonably difficult way to reverse engineer the results.</FONT></P>
<P><FONT face=Tahoma>I cannot tell from&nbsp;the brief&nbsp;description, but it looks like he has figured out the DEFAULT table, but has not picked up all of the different collations for the various cultures. Which would make sense although probably still be missing information about Kana and about Old Hangul and possibly even about nonspacing marks, depending (I am not running Mono to test any of that, so I really cannot say for sure).</FONT></P>
<P><FONT face=Tahoma>So now I will give my opinions on the matter. :-)</FONT></P>
<P><FONT face=Tahoma><EM>These are&nbsp;just my opinions, and&nbsp;not those of Microsoft. Just in case I was not clear about that earlier....</EM></FONT></P>
<P><FONT face=Tahoma>I noticed on the pages the heavy concern about performance, comparing ICU to Microsoft to Mono; on that point I would say as Gene Apperson said so many years ago:&nbsp;"<EM>It doesn’t matter how fast your code is if it doesn’t work</EM>" (this was later attributed to the fictional "Joe Hacker" in Bruce McKinney's Hardcore Visual Basic, though I think&nbsp;Bruce correctly attributed it somewhere in the book, too). This is nowhere more true than in collation, where correct results are much more important than results that are fast but may or may not meet customer needs. If they do not, then why bother writing the code in the first place?</FONT></P>
<P><FONT face=Tahoma>If you ask me, Mono's collation work&nbsp;would be better off doing one of two things, either</FONT></P>
<UL>
<LI><FONT face=Tahoma>A)&nbsp;</FONT><FONT face=Tahoma>what we try to do -- give appropriate results for the various languages based on doing the research, or</FONT> 
<LI><FONT face=Tahoma>B) try to license the support Microsoft has, or some significant subset of it</FONT></LI></UL>
<P><FONT face=Tahoma>Now for (B) I am not</FONT></P>
<UL>
<LI><FONT face=Tahoma>enough of a legal mind to know if it is legal/practical nor</FONT> 
<LI><FONT face=Tahoma>enough of a salesman to put&nbsp;the price on it nor</FONT> 
<LI><FONT face=Tahoma>enough of an exec to say whether this is something&nbsp;Microsoft would even approve doing</FONT></LI></UL>
<P><FONT face=Tahoma>And similarly I do not know enough about the Mono project to understand the philosophical/technical issues on that side, either. </FONT><FONT face=Tahoma>It may be impossible to get something like that done, on either or both sides of the equation.</FONT></P>
<P><FONT face=Tahoma>I&nbsp;just do know that it is a nightmare to try and emulate complex algorithms built over more than a decade (the major effort to improve the tables as we are doing in Vista alone is a nightmare&nbsp;to try and handle from a change management standpoint if you have to try to make educated guesses as to how to obtain the results -- what will they do in future versions?).</FONT></P>
<P><FONT face=Tahoma>Which is why I am suggesting that the current technique just seems way too sloppy to me -- it is much better to either follow path (B) and match the implementation more directly/conventionally or follow path (A) and match the <STRONG>conceptual goals</STRONG> by working to fill in appropriate linguistic support off of a good solid base. I think they would do better in the long run, and if all of us are trying to support the customers then in the long run we will both be giving comparable results any time we support the same customers.</FONT></P>
<P><FONT face=Tahoma>Anyway, just a few random thoughts, feel free to disregard....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> "〇"<EM> (U+3007, a.k.a. IDEOGRAPHIC NUMBER ZERO)<BR><FONT size=1>One of those <a href="http://archives.miloush.net/michkap/archive/2005/01/18/355210.html"><FONT color=#ff1493>no weight</FONT></A>&nbsp;characters that is <a href="http://archives.miloush.net/michkap/archive/2005/08/07/448924.html"><FONT color=#ff1493>fixed</FONT></A> in Vista....</FONT></EM></FONT></P>
<hr/><p><a id="488911" href="#488911">#</a> <strong>Feral Boy</strong> on 3 Nov 2005 10:32 PM:</p><div style="margin-left: 1em">I know I'm extremely late on this, but I actually wanted to respond to your spoof article on the Matrix Reloaded Architect speech you did back in May (absolutely hilarious, by the way).  Obviously, there's no longer a comment option on that old thread, so I'll do it here.<br><br>I'm not a programmer, but I'm trying to figure out some of the more obscure comments made by the Architect, and I was hoping you could help me out.  I tried to find out what a &quot;prime program&quot; is, but I couldn't find much on it.  My fellow philosophical types on the Matrix forums insist that a prime program is simply another way of saying the &quot;main&quot; program (i.e. the Matrix itself), but I don't buy it.<br><br>I found out that the phrase actually was coined by some IBM employee named Roy Maddux back in 1975.  As far as I can tell, the concept relates to a single-entry, single-exit path that can't be broken down into any smaller steps.  If this is the case, then I would say that the prime program is referring to the Path of the One.  I'm hoping that the programmers on this site will have mercy on me and explain this stuff in laymen's terms so I can understand it.  Anything that is shared would be GREATLY appreciated!</div>
<p><a id="489217" href="#489217">#</a> <strong>CornedBee</strong> on 4 Nov 2005 4:49 PM:</p><div style="margin-left: 1em">I think I'm involved enough in the open source movement to answer at least some of this.<br><br>&gt; what we try to do -- give appropriate results for the various languages based on doing the research<br><br>While certainly a possibility, you have to consider who develops Mono: like any other os project, it is driven mostly by volunteers, and coders at that. These people most likely know very little about languages. And an os project does not have the resources necessary to hire experts, like MS does. (Mono gets some money from Novell, I think, but that's probably used for development architecture.)<br>Perhaps it would be possible to get people from different countries help out with their own native knowledge. However, such an attempt might also just confirm what I suspect: that most people couldn't formulate collation rules for their own native language even if they tried. I certainly couldn't for German.<br><br>Regarding B, this is just impossible for various reasons.<br>First is the legal problem: whether the license is for actual code or just the collation algorithm and tables in an abstract form, it would affect the code of the Mono project. The Mono class libraries, however, are distributed under the LGPL, a license that aims to ensure that everyone is free to reuse the code in any way they see fit, free of charge, while not interfering too greatly with the ability to use the code in non-free software (as opposed to the GPL, which makes this impossible). As such, code that is hindered by any kind of license is not possible to put under the LGPL (or the MIT X11 license, which is somewhat less strict but still incompatible with restricted code) cannot contain code that is under a license, except if the license grants unlimited use to everyone and everything. The Ogg Theora codec stems from such a license.<br>The second issue is one of philosophy. You will undoubtedly encounter many people who are simply unwiling to license anything from Microsoft, no matter how beneficiary such action would be, out of general principle. While the cooler-headed people would probably prevail in the end, the Mono project would carry a stigma from that day on, which they would never get rid of.<br>The third issue is monetary. Given the nature of the license that is required to be LGPL-compatible, buying such a license is equivalent to paying MS to make their own code public and put it under the LGPL (with an exception for their own code). In other words, it would be _very expensive_. Even with Novell's support, it's not likely that the project could afford this.<br>And that's just if Microsoft would even put a price to it, which is the fourth issue. Somehow, I don't consider it likely.<br><br>In conclusion, the only way Mono is ever going to contain MS's algorithm and tables without reverse engineering them is if Microsoft decides that having an easily portable version of the .Net environment available to everyone is in their interest, and thus give their stuff to Mono for free.<br>Who knows? They might decide it is. It is, after all, one big advantage of Java, the most direct contender, that it will run anywhere. Anyone wishing to use any UNIX for their enterprise servers (for reasons of cost, stability, scalability, or whatever) has to use J2EE instead of .Net. Anyone wishing to write their programs so that they run anywhere has to use Java (or C++ with a cross-platform toolkit) instead of .Net. Anyone wishing to write little applications that run within the browser, with reasonable portability, has to use Java or Flash, not .Net or ActiveX - even among IE users, the trust in ActiveX is very low. IE users on Windows, that is. Mac IE doesn't support ActiveX.<br><br>IMHO, portability would serve MS well. But then, I'm writing this in a Mozilla Firefox running on Gentoo Linux on an AMD Athlon64 in native 64-bit mode. I actually have to launch a 32-bit Mozilla to run Flash movies, so I can't really claim impartiality when it comes to portability to minor platforms.</div>
<p><a id="489282" href="#489282">#</a> <strong>Michael S. Kaplan</strong> on 4 Nov 2005 7:48 PM:</p><div style="margin-left: 1em">Hi CornedBee,<br><br>Thanks for weighing in here. I suspect that you may be correct asbout many of the issues that may serve to block progress here, on both sides.<br><br>Though I really do believe that the current plan is not necessarily in the best interests of Mono, either. An I truly would hope that the people who make those decisions would consider that, and perhaps try and come up with a better plan.<br><br>I have ill will for very few people in this world, and none of those people are involved with the Mono efforts.... :-)</div>
<p><a id="489649" href="#489649">#</a> <strong>CornedBee</strong> on 6 Nov 2005 7:06 PM:</p><div style="margin-left: 1em">Well, one thing I wanted to add but forgot is that reverse engineering is what these people know. They might have sniffed a network protocol, shot masses of bytes at a graphics card, jumped into unknown areas of undisclosed libraries. Or they know people who did.<br>It's what they're comfortable with, so I don't think it's gonna change.</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2007/11/26 <a href="http://archives.miloush.net/michkap/archive/2007/11/26/6527833.html">When yesterday's workaround becomes tomorrow's potential solution...</a></p><p>2007/10/12 <a href="http://archives.miloush.net/michkap/archive/2007/10/12/5396685.html">That function is always faster! (well, except for that one case when it can actually be slower...)</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/11/03/488525.html" title="Math is hard, let&#39;s do Unicode!">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/11/02/488282.html" title="What do Sony and a straw have in common?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-11">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-11-03">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/11/03/484974.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
</html>