<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/11/15/492200.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>It is not easy to chain dead keys on Windows</title></head><body>
<h1>It is not easy to chain dead keys on Windows</h1>
<p><em>by Michael S. Kaplan, published on 2005/11/15 04:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/11/15/492200.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>The title says it all -- and not just for the most obvious reason -- because MSKLC does not support it.</FONT></P>
<P><FONT face=Tahoma>In <a href="http://archives.miloush.net/michkap/archive/2004/12/17/323257.html">many</A> <a href="http://archives.miloush.net/michkap/archive/2005/01/22/358771.html">different</A> <a href="http://archives.miloush.net/michkap/archive/2005/11/11/491349.html">posts</A> on this blog I have said a little or a lot about chaining dead keys.</FONT></P>
<P><FONT face=Tahoma>It is in the post <a href="http://archives.miloush.net/michkap/archive/2004/12/17/323257.html"><STRONG>Dead keys are not intuitive</STRONG></A>&nbsp;that I probably said the most about the topic:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT size=2><EM>Now one thing that is possible in the Windows architecture is chaining dead keys together, so that a dead key plus a base character will then wait treat the combination as another dead key waiting for yet a third base character. One could then chain that as well, and so on -- adding more and more keystrokes to produce in the end a single code point. This feature is not currently supported by MSKLC since the demand for combinations of three or more keystrokes always involve multiple characters being produced -- one is simply not enough here for anyone who has ever asked....</EM></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>Sounds easy, and even makes sense in a case such as wanting to be able to type the sequence:</FONT></P>
<UL dir=ltr style="MARGIN-RIGHT: 0px">
<LI><FONT face=Tahoma><A href="http://www.fileformat.info/info/unicode/char/00b4">U+00b4</A> (´ -- ACUTE ACCENT)</FONT> 
<LI><FONT face=Tahoma><A href="http://www.fileformat.info/info/unicode/char/00b4">U+00b4</A> (´ -- ACUTE ACCENT)</FONT> 
<LI><FONT face=Tahoma><A href="http://www.fileformat.info/info/unicode/char/0055">U+0055</A> (U -- LATIN CAPITAL LETTER U)</FONT></LI></UL>
<P><FONT face=Tahoma>and have it spit out <A href="http://www.fileformat.info/info/unicode/char/0170">U+0170</A> (Ű, LATIN CAPITAL LETTER U WITH DOUBLE ACUTE).</FONT></P>
<P><FONT face=Tahoma>But the reason it makes sense here is that there is a character one could assign to second keystroke in this three-key sequence -- namely <A href="http://www.fileformat.info/info/unicode/char/00b4">U+02ba</A> (<FONT face="Arial Unicode MS">ʺ</FONT>, MODIFIER LETTER DOUBLE PRIME).</FONT></P>
<P><FONT face=Tahoma>That way if they type something else that is not in the dead key table for that third keystroke, the fallback will be something that is not entirely impossible for the user of the keyboard to understand.</FONT></P>
<P><FONT face=Tahoma>But this is not so easy when you take the large number of double diacritics used in a language&nbsp;such as&nbsp;Vietnamese. Because in most (perhaps all?) cases, the double diacritics themselves are not encoded in single code points anywhere in Unicode. Even in the <A href="http://www.fileformat.info/info/unicode/char/00b4">U+02ba</A>&nbsp;example above, it is really just a workaround (in most cases double prime is probably not what the user would expect).</FONT></P>
<P><FONT face=Tahoma>So&nbsp;if I want to type the following:</FONT></P>
<UL><FONT face=Tahoma>
<LI><FONT face=Tahoma><A href="http://www.fileformat.info/info/unicode/char/02d8">U+02d8</A> (˘ -- BREVE)</FONT> 
<LI><A href="http://www.fileformat.info/info/unicode/char/0060">U+0060</A> (` -- GRAVE ACCENT)</FONT> 
<LI><FONT face=Tahoma><A href="http://www.fileformat.info/info/unicode/char/0061">U+0061</A> (a -- LATIN SMALL LETTER A)</FONT></LI></UL>
<P><FONT face=Tahoma>(or maybe with the diacritics in the other order?) to have it spit out <A href="http://www.fileformat.info/info/unicode/char/1eb1">U+1eb1</A> (ằ, LATIN SMALL LETTER A WITH BREVE AND GRAVE)? There is no BREVE GRAVE modifier letter to stick in there, so you would essentially need a series of dummy characters that would be inserted in the case of typos where the user did not type the exact sequence.</FONT></P>
<P><FONT face=Tahoma>If&nbsp;a future version of MSKLC was&nbsp;to support this feature, each of these mappings would have to be spelled out, explicitly -- in each case with a base character and a combining character. Even though in most&nbsp;of these&nbsp;cases there is no clear&nbsp;choice for the combining character to actually be. And the user interface in MSKLC would probably need to make all of these associations&nbsp;clear, which may well be the most difficult challenge of all.</FONT></P>
<P><FONT face=Tahoma>The workaround would be to change the order in which the keystrokes were typed so that there is a valid character to place there (i.e. BASE ACCENT ACCENT), but this would require base characters to act like dead keys (where typing a letter would not show any visible character) which is likely to be just as confusing.</FONT></P>
<P><FONT face=Tahoma>A less jarring change would be to make the input be required to be ACCENT BASE ACCENT so that the second keystroke would have a character behind it -- one that you could then get to by hittng the spacebar if you did not want an additional accent.</FONT></P>
<P><FONT face=Tahoma>And then, to take a huge step back, there is no way to know if users would even find&nbsp;either method to be intuitive. The only&nbsp;way to help <STRONG>that</STRONG> would be some type of visual indicactor of the character(s) in the pending keystroke buffer. Something similar to what I have heard is on the Mac, or what IMEs on Windows show, maybe?</FONT></P>
<P><FONT face=Tahoma>Oh well, I never said it would be easy....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT color=#ff1493><FONT face=Tahoma><EM>This post brought to you by</EM> "<FONT size=6>ộ</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/1ed9">U+1ed9</A>, a.k.a. LATIN SMALL LETTER O WITH CIRCUMFLEX AND DOT BELOW)</EM></FONT></FONT></P>
<hr/><p><a id="493595" href="#493595">#</a> <strong>Andrew Cunningham</strong> on 16 Nov 2005 4:53 PM:</p><div style="margin-left: 1em">I was wondering if it would be feasible to have some flag that would indicate that output should be NFC or NFD<br><br>and just type base_character, diacritic, diacritic and when another character of combining class zero was type, then the preceding characters would be converted to NFC or NFD. <br><br>Umm, on second thoughts sounds somewhat impractical formt he point of view of having a visual clue for the user about whats being typed.</div>
<p><a id="493870" href="#493870">#</a> <strong>Michael S. Kaplan</strong> on 17 Nov 2005 8:37 AM:</p><div style="margin-left: 1em">It is likely not fesible to do such a thing in user/userk for keyboards, but it should be possible in Text Service Frame work TIPS (used for IMEs are more intelligent keyboards).</div>
<p><a id="494411" href="#494411">#</a> <strong>Mark Steward</strong> on 18 Nov 2005 8:23 AM:</p><div style="margin-left: 1em">Thank you very much for the TIPS tip - it seems much easier than all the Imm* I was trying to use!  I was frustrated by wchComposed, as it means an intuitive Linear B keyboard layout is impossible without IME.  I may well pick up that project now.<br><br>Perhaps I should write a polytonic Greek IME, too, to satisfy all those BetaCode, etc. lovers who keep contacting you...<br><br>Great blog,<br><br>Mark</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2011/04/16 <a href="http://archives.miloush.net/michkap/archive/2011/04/16/10154700.html">Chain Chain Chain, Chain of Dead Keys</a></p><p>2010/09/28 <a href="http://archives.miloush.net/michkap/archive/2010/09/28/10068553.html">Like one of those standards that can't/won't be fully implemented</a></p><p>2007/05/04 <a href="http://archives.miloush.net/michkap/archive/2007/05/04/2407782.html">The limitations of keyboard layouts (again)</a></p><p>2007/03/05 <a href="http://archives.miloush.net/michkap/archive/2007/03/05/1810677.html">It's not just returning 1; it's returning -1</a></p><p>2007/01/31 <a href="http://archives.miloush.net/michkap/archive/2007/01/31/1564299.html">A year later, and the Vietnamese keyboard isn't any better</a></p><p>2006/04/22 <a href="http://archives.miloush.net/michkap/archive/2006/04/22/581107.html">Getting all you can out of a keyboard layout, Part #10a</a></p><p>2006/03/28 <a href="http://archives.miloush.net/michkap/archive/2006/03/28/561725.html">Only ONE WCHAR per dead key</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/11/15/492301.html" title="SIAO to Search engines -- would you please normalize, already?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/11/14/492750.html" title="Doing a globalization conference again? Kewl!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-11">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-11-15">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/11/15/492200.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
</html>