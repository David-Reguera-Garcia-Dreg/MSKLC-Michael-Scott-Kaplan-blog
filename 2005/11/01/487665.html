<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/11/01/487665.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>I WON to talk about the YEN</title></head><body>
<h1>I WON to talk about the YEN</h1>
<p><em>by Michael S. Kaplan, published on 2005/11/01 10:15 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/11/01/487665.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma><EM>(terrible pun in the title, sorry!)</EM></FONT></P>
<P><FONT face=Tahoma>It was early last month that I shook my head about the REVERSE SOLIDUS and stated for all the world to hear that </FONT><a href="http://archives.miloush.net/michkap/archive/2005/10/12/479561.html"><FONT face=Tahoma><STRONG>I'd rather call it the path separator</STRONG></FONT></A><FONT face=Tahoma>.</FONT></P>
<P><FONT face=Tahoma>And I have been a strong advocate for keeping everything in Unicode, pointing out that <A href="http://www.microsoft.com/globaldev/reference/dbcs/932.mspx">code page 932</A> and <A href="http://www.microsoft.com/globaldev/reference/dbcs/949.mspx">code page 949</A>, while being very&nbsp;useful for many purposes, are like poison for the YEN SIGN (<A href="http://www.fileformat.info/info/unicode/char/00A5/">U+00a5</A>) and the WON SIGN (<A href="http://www.fileformat.info/info/unicode/char/20A9/">U+20a9</A>), since any time they roundtrip through one of those two code pages they are converted to <A href="http://www.fileformat.info/info/unicode/char/005c/">U+005c</A>.</FONT></P>
<P><FONT face=Tahoma>But you may have noticed that I palmed a card there when I tell people to <STRONG>keep it in Unicode to solve the problem</STRONG>, since the statement ignores the fact that <EM>neither </EM><A href="http://www.fileformat.info/info/unicode/char/00A5/"><EM>U+00a5</EM></A><EM>&nbsp;nor </EM><A href="http://www.fileformat.info/info/unicode/char/20A9/"><EM>U+20a9</EM></A><EM>&nbsp;are on the keyboards for Japanese or Korean users</EM>.</FONT></P>
<P><FONT face=Tahoma>So while it is true that keeping it in Unicode will solve the problem, it will only be solved if you use the real YEN and WON and thus make sure that this particular lack in the keyboards does not cause the problem to already&nbsp;be there, anyway....</FONT></P>
<P><FONT face=Tahoma>(Ben Bryant has been pouncing on me lately about this issue in the&nbsp;newsgroups, which he describes it in the post he wrote entitled <FONT face="Times New Roman"><A href="http://codesnipers.com/?q=node/128"><FONT face=Tahoma>Phantom</FONT> </A></FONT></FONT><FONT face=Tahoma><A href="http://codesnipers.com/?q=node/128">Currency Signs in Japan and Korea</A>.)</FONT></P>
<P><FONT face=Tahoma>If you include that aspect then this is not a trivial problem to solve, either, especially when it continues to this day until and unless the keyboard issue is solved.</FONT></P>
<P><FONT face=Tahoma>Now we have some of the tools in place to help here:</FONT></P>
<UL>
<LI><FONT face=Tahoma>As I pointed out <a href="http://archives.miloush.net/michkap/archive/2004/12/14/284838.html">here</A> and <a href="http://archives.miloush.net/michkap/archive/2004/12/14/307152.html">here</A>, both Japanese and Korean&nbsp;collations on Windows will equate the two, thus assuring us that&nbsp;people using the characters as currency signs will not be punished for using the actual currency signs</FONT> 
<LI><FONT face=Tahoma>The appearance of the REVERSE SOLIDUS is the same as the currency sign on Japanese and Korean systems.</FONT></LI></UL>
<P><FONT face=Tahoma>Unfortunately, the PATH SEPARATOR is still a more crucial character on Windows than the currency sign -- imagine an OS with no paths! Would Windows even install? (probably not!).</FONT></P>
<P><FONT face=Tahoma>Ben is right that making the YEN and the WON also act as path separators would have fixed the problem, but that suggestion is over a decade too late, now. Although it is a tempting bordering on tantalizing idea since the number or&nbsp; true YEN and WON characters in the wild has to be small given how they are on no keyboards....</FONT></P>
<P><FONT face=Tahoma>Until reaility sets in and I remember that the NLS locale data properly assigns the true YEN and WON for the LOCALE_SCURRENCY fields for the Japanese and Korean locales, which means anyone who has ever used a program that uses <A href="http://msdn.microsoft.com/library/en-us/intl/nls_0rec.asp">GetCurrencyFormat</A> might have them. And our group cannot punish users who use Unicode and NLS API functions properly without seeming like monsters!</FONT></P>
<P><FONT face=Tahoma>Even if we added the character to the keyboard tomorrow, how do you document to users that these two characters that look the same should be used in these two different circumstances.</FONT></P>
<P><FONT face=Tahoma>Which may be why, as I pointed out in <a href="http://archives.miloush.net/michkap/archive/2005/09/17/469941.html"><STRONG>When is a backslash not a backslash?</STRONG></A>, users in Japan and Korea are often fatalistic and resigned about it.</FONT></P>
<P><FONT face=Tahoma>Perhaps one of the reasons that there is no big push to solve the problem is that Japanese and Korean are not widely used as languages outside of their respective countries, so there is not enough of a market segment that would benefit from adding the extra keys to the keyboard. At least not enough to outweigh the confusion.</FONT></P>
<P><FONT face=Tahoma>But now I am thinking again, perhaps that segmentation of the market will provide as chance to solve the problem, too. Let me think on this one a bit more, I may have an idea....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> "<FONT size=6>¥</FONT>" <EM>and </EM>"<FONT size=6>₩</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/00a5/">U+00a5</A> and <A href="http://www.fileformat.info/info/unicode/char/20a9/">U+20a9</A>, a.k.a. YEN SIGN and WON SIGN)</EM></FONT></P>
<hr/><p><a id="487699" href="#487699">#</a> <strong>Stuart Ballard</strong> on 1 Nov 2005 11:31 AM:</p><div style="margin-left: 1em">Explain to me again why you can't just change the keyboard layout so that the key that (presumably) has the YEN or WON symbol on it[1] actually inserts the correct character for that symbol?<br><br>I suppose the problem is that then there's no easy way to enter the path separator character and that's why making the YEN and WON also act as path separators is so tempting.<br><br>But do you really think that on a system where to most users the currency symbol is the path separator, users would be creating files with the currency symbol in the filename? A currency symbol that they can't even type directly? How common are files with &quot;$&quot; in the name in US systems even?<br><br>Can you even always assume that the currency symbol is a legal character in a filename? Since the only plausible culprit for such files would be programs using the currency symbol APIs, wouldn't such programs be broken if they assumed it was a permitted character?<br><br>I guess what I'm saying is that the behavior of any such existing file would be so utterly broken anyway - the user could never search for it, renaming it would have utterly bizarre behavior if you deleted the currency symbol and re-typed it, etc etc - that doing some kind of translation where the files got renamed to something that didn't include the currency symbol would be no more broken than it already is.<br><br>[1] I'm assuming that korean and japanese users don't actually press a key that looks like &quot;\&quot; to enter their currency symbols...</div>
<p><a id="487706" href="#487706">#</a> <strong>Ben Bryant</strong> on 1 Nov 2005 11:46 AM:</p><div style="margin-left: 1em">Thanks for your mention. I don't think there is a nice solution. I just think that in programming for the Japanese and Korean locales, programmers should simply be aware that if their text data contains money related stuff as entered into their program via Unicode edit box, OnKeyDown or existing Unicode text data, they may need to convert U+005c to U+00a5 or U+20a9. This is especially important if the text data may be used internationally.<br>Oh, and I don't want the yen and won to act as path separators -- that would not be a good thing -- I only posed that far-fetched and undesirable option to clarify the situation.</div>
<p><a id="487723" href="#487723">#</a> <strong>Maurits [MSFT]</strong> on 1 Nov 2005 12:31 PM:</p><div style="margin-left: 1em">Actually, I /would/ like to be able to type arbitrary filenames.  Can't an encoding scheme be developed?</div>
<p><a id="487740" href="#487740">#</a> <strong>Mihai</strong> on 1 Nov 2005 1:11 PM:</p><div style="margin-left: 1em">Although the problem is complicated, in real life I have not seen many Japanese users complaining.<br>The main reason is that the most Japanese text uses the wide versions of Katakana (including the Windows UI starting with W95).<br>As a result, the users will use the wide Yen (U+FFE5) when they talk about currency and the reverse solidus (U+005C) for file paths.<br>Nobody uses U+00A5, because it is not on the keyboard.<br>Not 100% accurate as an alghorithm, but in real life one can assume that U+005C is always the path separator.<br><br>This might (kind of) solve the Japanese problem, we still have the Won. Anyone? :-)<br></div>
<p><a id="487751" href="#487751">#</a> <strong>Michael S. Kaplan</strong> on 1 Nov 2005 1:33 PM:</p><div style="margin-left: 1em">Like I said, Mihai -- our NLS API functions like GetLocaleInfo and GetCurrencyFormat will use U+00a5 and U+20a9. Which is why that equivalence is so useful (even if Norman does not like it much!).</div>
<p><a id="487765" href="#487765">#</a> <strong>Ben Bryant</strong> on 1 Nov 2005 2:09 PM:</p><div style="margin-left: 1em">Okay, thank you so much Mihai. So the keyboard produces U+FFE5 for the yen sign. That is the real world observation I was looking for and that solves the problem for all practical purposes. I assume there would be an equivalent in Korea because this makes a lot of sense. They use the wide characters instead of the half-width stuff when they are fully writing in their own language. For pathnames I assume there is a tradition of using the half-width characters going back to a lot of older more ASCII-bound software.</div>
<p><a id="487809" href="#487809">#</a> <strong>Michael S. Kaplan</strong> on 1 Nov 2005 3:47 PM:</p><div style="margin-left: 1em">U+ffe6 is the FULLWIDTH WON SIGN. Though see my warning above about the locale data and collation equivalence....</div>
<p><a id="487812" href="#487812">#</a> <strong>Michael S. Kaplan</strong> on 1 Nov 2005 3:49 PM:</p><div style="margin-left: 1em">Also, Ben, the rule about half vs. full width is not as clear cut as you are making it sound here.<br><br>I talked a little  bit bout this issue in the following post:<br><br><a rel="nofollow" target="_new" href="http://archives.miloush.net/michkap/archive/2005/09/11/463672.html">http://blogs.msdn.com/463672.aspx</a></div>
<p><a id="487832" href="#487832">#</a> <strong>Mihai</strong> on 1 Nov 2005 4:30 PM:</p><div style="margin-left: 1em">&quot;the rule about half vs. full width is not as clear cut as you are making it sound here.&quot;<br><br>Indeed, it is not clear.<br><br>You depend on the user doing the right thing.<br>Pretty much like you depend on the English user to use ndash instead of minus.<br>Although in general Japanese are careful to detail and to do &quot;the right thing,&quot; the rule is not carved in stone.<br><br>Doing some statistics on existing text might confirm or infirm my empirical observation :-)<br></div>
<p><a id="487850" href="#487850">#</a> <strong>Michael S. Kaplan</strong> on 1 Nov 2005 4:52 PM:</p><div style="margin-left: 1em">Hi Mihai,<br><br>The reason that Microsoft Access uses the halfwidth characters is that the user community found the fullwidth characters to be ugly in property sheets. With reasons like THAT guiding the choices, the fact that major functionality is affected is a real problem if we want to use the fullwidfth characters as the solution (which is why I flagged the issue)....</div>
<p><a id="487861" href="#487861">#</a> <strong>Ben Bryant</strong> on 1 Nov 2005 5:21 PM:</p><div style="margin-left: 1em">Mihai - &quot;confirm or infirm my empirical observation&quot; I like it :)<br>Michael, if the NLS APIs and Access use halfwidth U+00a5 then I don't see a problem as long as the text stays in Unicode. The problem seems to me to be when the user cannot or does not differentiate yen from U+005c, especially in a Unicode edit box. If there is indeed a tradition of using the fullwidth yen sign in Japanese text referring to money, this problem is alleviated. I wish some Japanese users would chime in to confirm or infirm this.</div>
<p><a id="487885" href="#487885">#</a> <strong>Michael S. Kaplan</strong> on 1 Nov 2005 6:11 PM:</p><div style="margin-left: 1em">If I validate by comparing what the user types to what is in the locale data, them not being equal is a big deal.<br><br>If I find the fullwidth to look ugly in my opinion and therefore do not use it, then that is also a big deal.<br><br>I am simply pointing out that it is not as easy as is being claimed here -- there are still issues/concerns that are equal to what you thought was a problem before, esp. since the Japanese and Korean keyboards do not have the fullwidth chars and cannot be changed (even though they can get to them via the IMEs if they want to).</div>
<p><a id="487976" href="#487976">#</a> <strong>Nick Lamb</strong> on 1 Nov 2005 10:03 PM:</p><div style="margin-left: 1em">This post brought to you by &quot;&quot; and &quot;&quot; (U+00a5 and U+20a9, a.k.a. YEN SIGN and WON SIGN)<br><br>blogs.msdn.com playing up again? Or are the missing characters a sort of joke at your own expense?<br><br>Maybe I should try... &quot;\&#165;₩/ /₩&#165;\&quot;</div>
<p><a id="487978" href="#487978">#</a> <strong>Michael S. Kaplan</strong> on 1 Nov 2005 10:07 PM:</p><div style="margin-left: 1em">Hmmm.... not sure what happened there, Nick.<br><br>Fixed now, I hope!</div>
<p><a id="488607" href="#488607">#</a> <strong>Christian Kaiser</strong> on 3 Nov 2005 6:10 AM:</p><div style="margin-left: 1em">Well then just use the forward slash as path separator :)<br><br>Works in all cases (well, except UNC names. Sigh).<br><br>Christian<br></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2013/10/31 <a href="http://archives.miloush.net/michkap/archive/2013/10/31/10460718.html">At long last, explaining the yen/won/backslash bug plausibly</a></p><p>2007/03/28 <a href="http://archives.miloush.net/michkap/archive/2007/03/28/1972239.html">A yen for Yen may be left unsatiated</a></p><p>2006/05/26 <a href="http://archives.miloush.net/michkap/archive/2006/05/26/608230.html">Two chickens in every pot, and an ASCII in every code page</a></p><p>2006/03/17 <a href="http://archives.miloush.net/michkap/archive/2006/03/17/553499.html">On the fuzzier definition of a 'Unicode application' on Win9x....</a></p><p>2005/11/23 <a href="http://archives.miloush.net/michkap/archive/2005/11/23/495193.html">100% roundtrip ASCII? 100% roundtrip ANSI?</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/11/02/487977.html" title="UTC #105 -- Day 1">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/11/01/487550.html" title="The 8.0 instructions for rebuilding MFC and the CRT Redux">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-11">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-11-01">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/11/01/487665.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:40 GMT -->
</html>