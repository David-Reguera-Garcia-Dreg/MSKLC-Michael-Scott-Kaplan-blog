<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/07/05/435709.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>'Need more input, Stephanie!'</title></head><body>
<h1>'Need more input, Stephanie!'</h1>
<p><em>by Michael S. Kaplan, published on 2005/07/05 12:35 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/07/05/435709.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Since these immortal words were spoken by&nbsp;the voice of Tim Blaney to Ally Sheedy,&nbsp;I think every one of us has at times felt like the industrious Number 5 who would read the encyclopedias and dictionaries if only you could point at the information, at the input.</FONT></P>
<P><FONT face=Tahoma>I have talked about the <a href="http://archives.miloush.net/michkap/archive/2005/06/02/424128.html">New String Recommendations</A>&nbsp;doc that Dave Fetterman <a href="http://blogs.msdn.com/bclteam/archive/2005/06/01/424012.aspx">reported</A> on (full paper <A href="http://msdn.microsoft.com/netframework/default.aspx?pull=/library/en-us/dndotnet/html/StringsinNET20.asp">here</A>). It inspires the same feeling in me, and in&nbsp;other people. More input is needed to make the choices about what methods to call, and under what circumstances. In the present form, there is too much that is unknown.</FONT></P>
<P><FONT face=Tahoma>Now I did make the bold and somewhat audacious claim that you can summarize with <EM><a href="http://archives.miloush.net/michkap/archive/2005/06/12/428429.html">use appropriate comparison methods</A></EM> and leave it at that. Now I will backpedal a little and show an example of when that can be difficult....</FONT></P>
<P><FONT face=Tahoma>Let's take the seemingly simple (hah!)&nbsp;case of authentication in SQL Server. There are for our purposes usually three basic scenarios:</FONT></P>
<UL>
<LI><FONT face=Tahoma><STRONG>SQL Authentication</STRONG>, where USERs and GROUPs are&nbsp;created within SQL Server. Validation of logons is done with SQL Server's collation mechanisms, using the SERVER collation setting (<EM>not</EM> the database). There are no specific functions one can call from Windows or the .NET Framework on a client machine to get identical results to those on the server (which is calling built-in, private versions of the Win32 CompreString and/or LCMapString functions). You can emulate the behavior for the most part by following the guidance in <a href="http://archives.miloush.net/michkap/archive/2005/06/09/427293.html">this</A> post,&nbsp;assuming the client and the server are the same OS and service pack level.<BR></FONT>
<LI><FONT face=Tahoma><STRONG>Windows Authentication, not using AD</STRONG>, where the NT symbolic idedntifier rules are used (the uppercase and then binary comparison that the .NET Framework emulates very&nbsp;effectively with its new in Whidbey OrdinalIgnoreCase semantics). This will usually be seen any time one is using&nbsp;a local user or group account defined on the machine, and could also be seen in larger domain scenarios if Active Directory is not being used.<BR></FONT>
<LI><FONT face=Tahoma><STRONG>Windows Authentication, using AD</STRONG>, where the OS CompareString and/or LCMapString are used to authenticate, with most ignore flags passed, including NORM_IGNORECASE, NORM_IGNORENONSPACE, NORM_IGNOREWIDTH, and NORM_IGNOREKANA. This will be seen any time Active Directory gets involved in the picture. It is straightforward to emulate, assuming the client and the server are the same OS and service pack level.</FONT></LI></UL>
<P><FONT face=Tahoma>There are other slight variations that can happen when other providers get involved in the OS security story. But let's leave those aside for the moment -- you can keep them in mind if these three alone do not scare you off. :-)</FONT></P>
<P><FONT face=Tahoma>Anyway, given all of the above, how difficult do you think it would be to come up with a mechanism to emulate the authentication behavior of a SQL Server, for the purpose of providing a deny/grant mechanism for a database resource?</FONT></P>
<P><FONT face=Tahoma>Pretty fiendishly difficult, I would say.</FONT></P>
<P><FONT face=Tahoma>In all honesty, your best bet would be to always pass through to the server and let <STRONG>it</STRONG> decide who is authenticated. Not that navigating the above is impossible, but it is difficult to&nbsp;the point of being&nbsp;improbable, or at least impractial. Unless you are paid by the hour and are not required to show significant progress....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff0000><EM>This post brought to you by</EM> "<FONT face="Arial Unicode MS" size=3>Æ¹</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/01b9/index.htm">U+01b9</A>, LATIN SMALL LETTER EZH REVERSED)</EM></FONT></P>
<hr/><p><a id="435733" href="#435733">#</a> <strong>Yaytay</strong> on 5 Jul 2005 1:29 PM:</p><div style="margin-left: 1em">You should always pass it through to the server anyway - the sysadmin is in charge of security policy decisions, not the developer.<br>And the sysadmin should only have to express those policy decisions using system supplied features.<br><br>'All' the developer has to do is to ensure that their system enables the sysadmin to specify policies (and sets up appropriate DACLs within itself to ensure that such policies are honoured).</div>
<p><a id="435736" href="#435736">#</a> <strong>Michael S. Kaplan</strong> on 5 Jul 2005 1:38 PM:</p><div style="margin-left: 1em">No disagreement from me, Yaytay. But the deny/grant stuff is a feature that exists, and it is in the hands of developers to use in code, for better or worse....</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2007/09/05 <a href="http://archives.miloush.net/michkap/archive/2007/09/05/4756822.html">Head checks containing either comparison or case validation BITE</a></p><p>2005/12/22 <a href="http://archives.miloush.net/michkap/archive/2005/12/22/506595.html">New in Windows Vista: OrdinalIgnoreCase for Win32</a></p><p>2005/10/05 <a href="http://archives.miloush.net/michkap/archive/2005/10/05/477190.html">AD, and a little KB confusion</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/07/05/435885.html" title="Change is in the cards for ConvertDefaultLocale....">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/07/04/435522.html" title="I think I am getting old">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-07-05">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/07/05/435709.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>