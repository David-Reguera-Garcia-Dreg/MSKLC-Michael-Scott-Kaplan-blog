<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/07/09/437071.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Why doesn't FoldString take an LCID?</title></head><body>
<h1>Why doesn't FoldString take an LCID?</h1>
<p><em>by Michael S. Kaplan, published on 2005/07/09 03:11 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/07/09/437071.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>I actually recall asking Julie Bennett this question (why doesn't </FONT><A href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/resources/strings/stringreference/stringfunctions/foldstring.asp"><FONT face=Tahoma>FoldString</FONT></A><FONT face=Tahoma> take an LCID?) a few years ago, and her answer was that none of the foldings that the function did were locale-dependant.</FONT></P>
<P><FONT face=Tahoma>Now that is true for some of the foldings:</FONT></P>
<UL>
<LI><FONT face=Tahoma>MAP_FOLDCZONE (Fold compatibility zone characters into standard Unicode equivalents.)</FONT></LI>
<LI><FONT face=Tahoma>MAP_PRECOMPOSED (Map accented characters to precomposed characters, in which the accent and base character are combined into a single character value.)</FONT></LI>
<LI><FONT face=Tahoma>MAP_COMPOSITE (Map accented characters to composite characters, in which the accent and base character are represented by two character values.)</FONT></LI></UL>
<P><FONT face=Tahoma>Now it would be nice if MAP_FOLDDIGITS (Map all digits to Unicode characters 0 through 9) were a reversible opration. And the only way it ever could be would be to have an LCID parameter to specify what to map it to. Though as a workaround you could use the <A href="http://msdn.microsoft.com/library/en-us/intl/nls_34rz.asp">GetLocaleInfo</A> function with the LCID you wanted to use and the LOCALE_SNATIVEDIGITS flag to map them. So this is not the end of the world.</FONT></P>
<P><FONT face=Tahoma>However, that last flag, </FONT><FONT face=Tahoma>MAP_EXPAND_LIGATURES, is the tough one. </FONT></P>
<P><FONT face=Tahoma>The flag as a simple job -- it expands all ligature characters so that they are represented by their two-character equivalent. </FONT><FONT face=Tahoma>Expand all ligature characters so that they are represented by their two-character equivalent. For example, the ligature 'æ' expands to the two characters 'a' and 'e'.</FONT></P>
<P><FONT face=Tahoma>And this flag works by consulting the very same table that the collation functions use to find these characters that expand. Generally this will all work.</FONT></P>
<P><FONT face=Tahoma>EXCEPT there are many languages (for example) where æ is considered to not be one of those characters to expand. This includes Danish, Norwegian, and Icelandic. And if FoldString took an LCID it could have at its disposal, the exact list for each circumstance might change as needed.</FONT></P>
<P><FONT face=Tahoma>Unfortunately, there really is no good way to do this language-specific type of thing right now. Which means we may be expected to try and tackle the issue in some future release....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff0000><EM>This post brought&nbsp;o you by</EM> "æ" <EM>(<A href="http://www.fileformat.info/info/unicode/char/00e6/index.htm">U+00e6</A>, a.k.a. LATIN SMALL LETTER AE)</EM></FONT></P>
<hr/><p><a id="437310" href="#437310">#</a> <strong>Dean Harding</strong> on 10 Jul 2005 7:51 PM:</p><div style="margin-left: 1em">FoldStringEx?<br><br>It seems strange that while, to begin with, it might not have done any locale-dependant stuff,  nobody had the foresight to see that it may in the future... especially since all the other NLS stuff did.  Ah well, no use crying about it now :)</div>
<p><a id="437331" href="#437331">#</a> <strong>Michael S. Kaplan</strong> on 10 Jul 2005 9:29 PM:</p><div style="margin-left: 1em">Well, thats what future versions are for, right? :-)<br><br>Anyway, there was already a function for the locale-specific ones -- LCMapString!</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/11/12 <a href="http://archives.miloush.net/michkap/archive/2010/11/12/10088056.html">Suddenly, in a bit more time than a blink of an eye, "standards support" becomes "less i18n support"</a></p><p>2008/10/02 <a href="http://archives.miloush.net/michkap/archive/2008/10/02/8971896.html">When swimming in a sea of CONTEXT, applications can drown (and there is no lifeguard)</a></p><p>2008/01/25 <a href="http://archives.miloush.net/michkap/archive/2008/01/25/7228941.html">On reversing the irreversible (grabbing the data, part I)</a></p><p>2007/09/15 <a href="http://archives.miloush.net/michkap/archive/2007/09/15/4924008.html">A&P of Sort Keys, part 5 (aka EXPANSIONing your horizons)</a></p><p>2007/05/05 <a href="http://archives.miloush.net/michkap/archive/2007/05/05/2430272.html">All right, mistakes were made #1 (a.k.a. Expanding the EXPANSION table)</a></p><p>2007/02/14 <a href="http://archives.miloush.net/michkap/archive/2007/02/14/1675303.html">Nothing seems to be parsing the crap out of *this* number</a></p><p>2006/06/18 <a href="http://archives.miloush.net/michkap/archive/2006/06/18/636180.html">The Phantom of the Digits</a></p><p>2006/04/26 <a href="http://archives.miloush.net/michkap/archive/2006/04/26/583390.html">How to NOT Parse Unicode Digits, or How to: Parse Unicode Digits... NOT!</a></p><p>2006/02/22 <a href="http://archives.miloush.net/michkap/archive/2006/02/22/536877.html">And the digits just keep on coming</a></p><p>2006/01/18 <a href="http://archives.miloush.net/michkap/archive/2006/01/18/514171.html">Digits -- there is no substitute</a></p><p>2005/07/19 <a href="http://archives.miloush.net/michkap/archive/2005/07/19/440320.html">Sort element vs. text element</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/07/10/437330.html" title="Lotsa miscellaneous language/linguistic stuff">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/07/09/437063.html" title="Getting intermediate forms">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-07-09">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/07/09/437071.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>