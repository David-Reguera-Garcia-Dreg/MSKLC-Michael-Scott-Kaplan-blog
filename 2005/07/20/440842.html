<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/07/20/440842.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>More on sort elements</title></head><body>
<h1>More on sort elements</h1>
<p><em>by Michael S. Kaplan, published on 2005/07/20 04:15 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/07/20/440842.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Yesterday I contrated <a href="http://archives.miloush.net/michkap/archive/2005/07/19/440320.html">sort elements and text elements</A>. I am now going to leave text elements aside for a bit. Because </FONT><FONT face=Tahoma>linguistic collation on Windows, at its heart, is&nbsp;an ordering based on sort elements, not text elements.</FONT></P>
<P><FONT face=Tahoma>Every time I look at the text in the Platform SDK for the <A href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/resources/strings/stringreference/stringfunctions/comparestring.asp">CompareString</A> function, I cannot help but smile:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT size=2><EM>If the two strings are different lengths, they are compared up to the length of the shortest one. If they are equivalent at that point, the return value indicates that the longer string is greater. </EM></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>The truth is that all throughout the string, it is the sort elements that are being compared. There are times that one code point actually represents two sort elements&nbsp;(think <STRONG>Æ</STRONG>, a.k.a. U+00c6 a.k.a. LATIN CAPITAL LETTER AE in some languages) or three sort elements (think <STRONG><FONT face="Arial Unicode MS">ﬃ</FONT></STRONG>, a.k.a. U+fb03 a.k.a. LATIN SMALL LIGATURE FFI in other languages). There are other times that two code points (think&nbsp;<STRONG>ch</STRONG>&nbsp;in Traditional Spanish) or three code points (think <STRONG>dzs</STRONG>&nbsp;in Hungarian) make up a single sort element. Other times code points <a href="http://archives.miloush.net/michkap/archive/2005/01/18/355210.html">have no weight</A> and they are ignored entirely, having no sort element at all.</FONT></P>
<P><FONT face=Tahoma>So if each code point will have between 0 and 3 sort elements (with fractional values supported), it is hard to try and equate string length to any operation beyond when to stop looking. The string length is definitely not a count of relevant elements to consider!</FONT></P>
<P><FONT face=Tahoma>It makes the notion of that sentence from the documentation almost comical. Since <A href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/resources/strings/stringreference/stringfunctions/comparestring.asp">CompareString</A>&nbsp;is looking at each string, one sort element at a time, the only length that is meaningful to it is the length in sort elements; it is only when the sort elements are equivalent until one string ends that the issue with the longer string being greater comes into play.</FONT></P>
<P><FONT face=Tahoma>On the other hand, I would hate to suggest trying to inject the notion of sort elements into the Platform SDK just to have a nicer sentence in the one doc topic.</FONT></P>
<P><FONT face=Tahoma>I guess that is what this blog is for. :-)</FONT></P>
<P><FONT face=Tahoma>Now lest you think it is all easy now once you add this one "conceptual simplification", I promise to make it seem harder again while talking about the <a href="http://archives.miloush.net/michkap/archive/2004/12/31/344739.html">reverse diacritics</A>&nbsp;used in French, the double compressions used in Hungarian, <a href="http://archives.miloush.net/michkap/archive/2005/02/25/380266.html">tricks with Jamo and Old Hangeul</A>, the full story on <a href="http://archives.miloush.net/michkap/archive/2005/06/01/423711.html">Hiragana and Katakana</A>, the stuff happening in Longhorn, and more.</FONT></P>
<P><FONT face=Tahoma>But it is still a good start. This whole subject ought to be a lot easier, conceptually. Any subject that just about every single person in the world who can read is able to intuitively understand ought to be easier conceptually, even if most of those people cannot explain how it works. Maybe if they have been and plan to keep reading here, they will be able to. :-)</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff0000><EM>This post brought to you by</EM> "<FONT face="Arial Unicode MS" color=#ff0000 size=5>ﬃ</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/fb03/index.htm">U+fb03</A>, a.k.a. LATIN SMALL LIGATURE FFI)</EM></FONT></P>
<hr/><p><a id="440901" href="#440901">#</a> <strong>silverpie</strong> on 20 Jul 2005 8:46 AM:</p><div style="margin-left: 1em">This is actually on the &quot;reverse diacritics&quot; post--the circumflexes have not been abolished from the words you mention there, only from words where no pre&#235;xisting word is identical but for the circumflex (in other words, all circumflexes needed to distinguish words remain).</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/01/25 <a href="http://archives.miloush.net/michkap/archive/2008/01/25/7228941.html">On reversing the irreversible (grabbing the data, part I)</a></p><p>2007/09/15 <a href="http://archives.miloush.net/michkap/archive/2007/09/15/4924008.html">A&P of Sort Keys, part 5 (aka EXPANSIONing your horizons)</a></p><p>2007/01/15 <a href="http://archives.miloush.net/michkap/archive/2007/01/15/1469885.html">With SQL Server (and SQL itself) comes the illogic of 'trailing spaces' (and the myth of fixed width)</a></p><p>2006/11/10 <a href="http://archives.miloush.net/michkap/archive/2006/11/10/1053925.html">Some people feel really insecure about the size of their [string] members</a></p><p>2006/10/04 <a href="http://archives.miloush.net/michkap/archive/2006/10/04/788429.html">Wild[card] thing, You make my CHAR sing</a></p><p>2006/07/09 <a href="http://archives.miloush.net/michkap/archive/2006/07/09/658454.html">The fallacy of comparing out of context</a></p><p>2006/01/15 <a href="http://archives.miloush.net/michkap/archive/2006/01/15/512928.html">Falling over the edge of a conceptual collation cliff</a></p><p>2005/11/13 <a href="http://archives.miloush.net/michkap/archive/2005/11/13/491646.html">Hungarian is even more complicated than I thought</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/07/20/441227.html" title="The so-called Ultimate Keyboard">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/07/19/440549.html" title="It isn&#39;t really more secure in most cases">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-07-20">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/07/20/440842.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>