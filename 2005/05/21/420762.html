<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/05/21/420762.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Not every function is documented</title></head><body>
<h1>Not every function is documented</h1>
<p><em>by Michael S. Kaplan, published on 2005/05/21 17:15 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/05/21/420762.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Ivan Leo posted the following note in the suggestion box:</FONT></P>
<BLOCKQUOTE dir=ltr>
<P><FONT face=Tahoma size=2><EM>Why isn't RtlCreateUnicodeString() documented? I mean, it's a damn simple interface that has no reason to change, and is useful is one needs lots of UNICODE_STRINGs </EM></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>I cannot speak for the owners of these Rtl* functions, but it is likely a question that makes a lot more sense to ask in a more "DDK-esque" kind of forum. In my whole "opening it all up" mindset, I have no problwm with documenting functions and putting them in public header files, but in practice I know it is not as easy as that -- there are often good reasons to proceed with caution that are not immediately apparent.</FONT></P>
<P><FONT face=Tahoma>This particular function has been around for a while, but AFAIK none of the semantics of use have ever really been enumerated before, like allocation rules, legal IRQ levels at which the function can be called, etc....</FONT></P>
<hr/><p><a id="420763" href="#420763">#</a> <strong>Larry Osterman [MSFT]</strong> on 21 May 2005 3:20 PM:</p><div style="margin-left: 1em">The answer to this is really quite simple:  To my knowledge, there's no part of the Win32 API set that deals with UNICODE_STRING structures.<br><br>They're used in the NT kernel, but they're not a part of the public API set.<br><br>So why document an API if the API is totally useless?</div>
<p><a id="420776" href="#420776">#</a> <strong>Ivan Leo</strong> on 21 May 2005 4:42 PM:</p><div style="margin-left: 1em">&gt; So why document an API if the API is totally useless?<br>So you're saying you've documented RtlInitUnicodeString   because it's useless?</div>
<p><a id="420782" href="#420782">#</a> <strong>Mike Dimmick</strong> on 21 May 2005 5:30 PM:</p><div style="margin-left: 1em">RtlCreateUnicodeString is both a kernel-mode and a user-mode API - it lives in ntdll.dll in user-mode. And UNICODE_STRING *is* used in some parts of the Local Security Authority API, though admittedly not ones that are often used or terribly well documented (some structures passed to LsaLogonUser, for example). A UNICODE_STRING is one of the members of a MCAST_SCOPE_ENTRY, a structure used in the MADCAP (dynamic allocation of multicast addresses) API. You might also need it if you were implementing a Security Support Provider (not very likely, I hope!)<br><br>However, RtlInitUnicodeString *is* documented.</div>
<p><a id="420783" href="#420783">#</a> <strong>Michael S. Kaplan</strong> on 21 May 2005 5:33 PM:</p><div style="margin-left: 1em">Larry is right insofar as whether I would be the right person to ask. :-)<br><br>To put it another way, there may be some basis for believing the guy at the Burger King counter may know why the burgers at Burger King taste funny. But there is no real basis to ask the guy at the Wendy's counter. Which is kind of what it is like asking me. :-)<br><br>But you could use RtlInitUnicodeString, which *is* documented: <a rel="nofollow" target="_new" href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/lowlevelclientsupport/misc/rtlinitunicodestring.asp">http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/lowlevelclientsupport/misc/rtlinitunicodestring.asp</a> and then call it a day....</div>
<p><a id="420785" href="#420785">#</a> <strong>Michael S. Kaplan</strong> on 21 May 2005 5:45 PM:</p><div style="margin-left: 1em">Ivan, RtlInitUnicodeString gets around many of the issues I pointed out -- it uses the string you pass in, which means that the caller handles allocaton. This is in sharp contract to RtlCreateUnicodeString, which actually allocates and copies the string. <br><br>This difference moves the API to a whole new level in terms of things toaorry about and potential for unintenional misuse....</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/05/21/420796.html" title="Recompiling with the new version">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/05/21/420708.html" title="Getting exactly ONE Unicode code point out of UTF-8">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-05">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-05-21">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/05/21/420762.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>