<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/05/21/420796.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Recompiling with the new version</title></head><body>
<h1>Recompiling with the new version</h1>
<p><em>by Michael S. Kaplan, published on 2005/05/21 20:50 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/05/21/420796.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>If you look at version 1.0 and 1.1 of the .NET Framework, they both have a <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemguidclasstopic.asp">Guid structure</A> and a <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemguidclassequalstopic.asp">Guid.Equals()</A> method which takes an <EM>object o</EM> and returns "<STRONG>true</STRONG> if <I>o</I> is a <B>Guid</B> that has the same value as this instance; otherwise, <B>false</B>."</FONT></P>
<P><FONT face=Tahoma>Since every type derives from <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemobjectclasstopic.asp">System.Object</A> it is easy to just pass another Guid in for the second paramteter to do the comparison. But that ease comes with a price -- the Object has to be boxed (<EM>boxing</EM> in simple terms means wrapping a primitive type in a GC heap object) prior to the comparison happening, and that boxing has a performance cost.</FONT> 
<P><FONT face=Tahoma>However, starting in Whidbey <A href="http://msdn2.microsoft.com/library/kctdcahd(en-us,vs.80).aspx">Guid.Equals()</A> has a new <A href="http://msdn2.microsoft.com/library/asw89aw8(en-us,vs.80).aspx">overload</A><FONT color=#808080><STRIKE><U>override</U></STRIKE></FONT> that takes a Guid. Calling with that overload<STRIKE><FONT color=#808080>override</FONT></STRIKE> will be significantly faster in your code -- and you do not even have to call it differently!</FONT> 
<P><FONT face=Tahoma>But the old code that has&nbsp;been compiled to use the old overload<STRIKE><FONT color=#808080>override</FONT></STRIKE> will never see the benefit; you will have to recompile to get the full benefit in your existing code base. And this is just one small example -- there are obviously many such improvements in the new version.</FONT> 
<P><FONT face=Tahoma>Now this phenomenon is a&nbsp;problem that people using C++ may have run across many times before, but in the relatively sheltered world of Win32 (which has a strong C compatibility bias), the ability to have overloads<STRIKE><FONT color=#808080>overrides</FONT></STRIKE> with different types is a relatively unknown feature, as is the fact that the "choosing the overload<STRIKE><FONT color=#808080>override</FONT></STRIKE> with the best fit" can cause the choice to change between versions if better choices become available.</FONT> 
<P><FONT face=Tahoma>But even ignoring that, there can be new compilation optimizations involving&nbsp;size/speed and other changes that make the recompile a worthwhile thing to try, even beyond whatever features you add.</FONT> 
<P><FONT face=Tahoma>The cost is of course the inability to run with the older version of the library -- in the case of managed code with the older version of the .NET Framework. </FONT>
<P><FONT face=Tahoma>If there are critical features that you need (like the custom culture&nbsp;or normalization&nbsp;features in Whidbey!) than this would be a no-brainer. </FONT>
<P><FONT face=Tahoma>But if its just for the hidden benfits of a few overloads<STRIKE><FONT color=#808080>overrides</FONT></STRIKE>, it is a much tougher call. </FONT>
<P><FONT face=Tahoma>So you have weight the costs and benefits carefully. But it is worth doing that analysis, with each new version....</FONT></P>
<hr/><p><a id="420973" href="#420973">#</a> <strong>mihailik</strong> on 23 May 2005 1:30 AM:</p><div style="margin-left: 1em">Michael, you use word &quot;override&quot; where &quot;overload&quot; is right one.</div>
<p><a id="420974" href="#420974">#</a> <strong>Michael S. Kaplan</strong> on 23 May 2005 1:36 AM:</p><div style="margin-left: 1em">Whoops, you are correct. I think I will do a little edit on that one....</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/05/22/420822.html" title="You may want to rethink your choice of UTF, #2 (Speed of operations)">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/05/21/420762.html" title="Not every function is documented">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-05">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-05-21">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/05/21/420796.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>