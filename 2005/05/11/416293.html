<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/05/11/416293.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Case/kana/accent/width sensitive SQL Server, for testing</title></head><body>
<h1>Case/kana/accent/width sensitive SQL Server, for testing</h1>
<p><em>by Michael S. Kaplan, published on 2005/05/11 02:16 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/05/11/416293.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>A few minutes ago, I posted about <a href="http://archives.miloush.net/michkap/archive/2005/05/11/416290.html">Achieving case insensitivity</A>, to deal with how best to make things case sensitive in an expression in SQL Server.</FONT></P>
<P><FONT face=Tahoma>Now looking beyond the issue with that one expression, and to the wider issue of collations and what to use, for just a moment....</FONT></P><FONT face=Tahoma>
<P><EM><FONT color=#ff0000 size=2>(This post contains several topics I will be covering in my TechEd 2005 talks in Orlando and Amsterdam -- <FONT size=1>lets hope TechEdBloggers picks it up, they missed </FONT></FONT><FONT color=#ff0000 size=1><a href="http://archives.miloush.net/michkap/archive/2005/05/06/415199.html">this</A></FONT><FONT color=#ff0000 size=2><a href="http://archives.miloush.net/michkap/archive/2005/05/06/415199.html"><FONT size=1> other</FONT></A><FONT size=1> one!</FONT>)</FONT></EM></P>
<P>Remember those old posts of mine (like </FONT><a href="http://archives.miloush.net/michkap/archive/2004/11/30/272207.html"><FONT face=Tahoma color=#0000ff><STRONG>They ask me "why is my Korean text in random order?"</STRONG></FONT></A><FONT face=Tahoma>&nbsp;and </FONT><a href="http://archives.miloush.net/michkap/archive/2005/05/05/414845.html"><FONT face=Tahoma color=#0000ff><STRONG>A few of the gotchas of CompareString</STRONG></FONT></A><FONT face=Tahoma>) where I implied (nicely) that calling </FONT><A href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/resources/strings/stringreference/stringfunctions/comparestring.asp"><FONT face=Tahoma>CompareString</FONT></A><FONT face=Tahoma> with the NORM_IGNORENONSPACE flag&nbsp;is like making an official request of Windows to destroy important Korean data distinctions in collation? Well, an "accent insensitive" server is the SQL Server equivalent of that flag.</FONT></P>
<P><FONT face=Tahoma>And of course all of the strange issues that the second post above point out about kana, width, and case insensitivity via NORM_IGNOREKANA, NORM_IGNOREWIDTH, and NORM_IGNORECASE? The ones that can potentially affect the Japan, Japan/Korea, and whole world in unanticipated ways, respectively? Those are the same as the respective collation types for SQL Server, too.</FONT></P>
<P><FONT face=Tahoma>But let's ignore all that for a moment. Not everyone is working on international scenarios, and I am not quite naive enough to believe that they are. :-)</FONT></P>
<P><FONT face=Tahoma>However, the truth is that you never know what the client is going to do with their server. And if you write an application that is fast and loose with the rules of case sensitivity in column names and it breaks because the customer installed it on their server which is case sensitive, you may be really unhappy with their reaction. </FONT></P>
<P><FONT face=Tahoma>Even the Access team had a problem with this back in 1999 in their <STRONG>NorthwindCS.sql</STRONG> file that installed a SQL Server version of their NorthWind sample database -- of course they did manage to find that bug before too many people noticed it, and a lot of testers suddenly realized that case sensitivity is a veritable bug farm on a project that thinks it is ready to go, but has not yet tried it. :-)</FONT></P>
<P><FONT face=Tahoma>I have talked to folks on the SQL Server test team in the past and have been told that more tests are run on case sensitive servers than not, for the same reason. </FONT><FONT face=Tahoma>In the end, installing things to not be insensitive to these distinctions will almost universally find more bugs than it hides. Even if your final production work will usually not be set up that way, a lot of the testing during the early phases will help shake out those bugs.</FONT></P>
<P><FONT face=Tahoma>And that way if the client does run that way, you do not have to be embarrassed about the mixed use of case in your own queries and stored procedures!</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT color=#ff0000><FONT face=Tahoma><EM>This post brought to you by</EM> "â‚¨" <EM>(<A href="http://www.fileformat.info/info/unicode/char/20a8/index.htm">U+20a8</A>, a.k.a. RUPEE SIGN)</EM></FONT></FONT></P>
<hr/><p><a id="416308" href="#416308">#</a> <strong>Dean Harding</strong> on 11 May 2005 12:51 AM:</p><div style="margin-left: 1em">You're on fire tonight, Michael!  This must be a record of some kind :)<br><br>I never really understood why SQL Server let you set different collations on the master database anyway.  I guess it makes sense from the point of view that it lets users set it to whatever they want (obviously!), but generally users don't care what sorting their column names and stuff get, that's the realm of the programmer... and do case-sensitive stored procedures really help anyone?</div>
<p><a id="416316" href="#416316">#</a> <strong>Michael S. Kaplan</strong> on 11 May 2005 1:24 AM:</p><div style="margin-left: 1em">Well, it was not really something I woke up to start doing yesterday morning -- I just kept running across interesting points all day. :-)<br><br>But as to the master having user settable collations, there is some benefit in terms of people wanting to query the system tables and see things the way they expect to see them. I think that is how most people use it, without really thinking about it.<br><br>But there are interesting consequences of the way many different factors in the model intersect (including this one!) -- I will cover that at TechEd and probably in a post some time soon. :-)</div>
<p><a id="416644" href="#416644">#</a> <strong>Ambarish Sridharanarayanan</strong> on 11 May 2005 6:10 PM:</p><div style="margin-left: 1em">Interesting that the Tahoma font (on Windows Server 2003) misrepresents the Rupee Sign (U+20a8) using a combination of 'R' and 'p'; as you can see from trying it out on Lucida Sans Unicode and Arial Unicode MS or from a web search for &quot;rupee Rs.&quot;, it should use a combination of 'R' and 's'. Where do I file a bug-report?</div>
<p><a id="417608" href="#417608">#</a> <strong>Michael S. Kaplan</strong> on 15 May 2005 10:36 AM:</p><div style="margin-left: 1em">Ambarish,<br><br>I will forward the report on to the people in typography....</div>
<p><a id="417953" href="#417953">#</a> <strong>Michael S. Kaplan</strong> on 16 May 2005 11:14 AM:</p><div style="margin-left: 1em">Ambarish -- I have info from a reliable source that this problem has been noticed and will be addressed in future versions of the font.<br><br>But I appreciate the report, in any case. Bugs found through blogging rock! :-)</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2007/12/06 <a href="http://archives.miloush.net/michkap/archive/2007/12/06/6661053.html">In SQL Server, A-Z, A-z, a-Z, and a-z may not mean the same thing!</a></p><p>2007/02/16 <a href="http://archives.miloush.net/michkap/archive/2007/02/16/1686988.html">The rumor was that SQL Server passwords are case insensitive?</a></p><p>2006/10/30 <a href="http://archives.miloush.net/michkap/archive/2006/10/30/897681.html">If you are more sensitive, you'll pick up on more problems</a></p><p>2006/05/30 <a href="http://archives.miloush.net/michkap/archive/2006/05/30/610889.html">Avoiding SQL Server collation woes in the TempDB</a></p><p>2005/05/15 <a href="http://archives.miloush.net/michkap/archive/2005/05/15/417601.html">Not all SQL Server collations are created equal</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/05/11/416552.html" title="UCS-2 vs. UTF-16 (not quite Kramer vs. Kramer)">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/05/11/416290.html" title="Achieving case insensitivity">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-05">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-05-11">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/05/11/416293.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>