<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/01/20/357028.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Every character has a story #4: U+feff (alternate title: UTF-8 is the BOM, dude!)</title></head><body>
<h1>Every character has a story #4: U+feff (alternate title: UTF-8 is the BOM, dude!)</h1>
<p><em>by Michael S. Kaplan, published on 2005/01/20 02:07 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/01/20/357028.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><EM>(The alternate title should be spoken with either a circa-1982 Jeff Spicoli or circa-1989 Theodore "Ted" Logan mannerism and&nbsp;accent)</EM></P>
<P><A href="http://www.fileformat.info/info/unicode/char/feff/index.htm">U+feff</A> has two jobs in the Unicode standard:</P>
<P><STRONG>Job #1</STRONG>, and its namesake, is as a ZERO WIDTH NO-BREAK SPACE. The name kind of says it all. After all, we have <A href="http://www.fileformat.info/info/unicode/char/00a0/index.htm">U+00a0</A> (NO-BREAK SPACE) and <A href="http://www.fileformat.info/info/unicode/char/200b/index.htm">U+200b</A> (ZERO WIDTH SPACE). Yet we somehow needed to combine the two to create a character that has no width yet you should not break a line between what is on one side of it and what is on the other. Later they decided to add a different character is the preferred one for this job (<A href="http://www.fileformat.info/info/unicode/char/200d/index.htm">U+200d</A>, ZERO WIDTH JOINER), in part due to <A href="http://www.fileformat.info/info/unicode/char/feff/index.htm">U+feff</A>'s violation of the moonlighting agreement and its apparent lack of focus (see job #2). But at its heart a conformant Unicode application does not have to do anything special with <A href="http://www.fileformat.info/info/unicode/char/feff/index.htm">U+feff</A>&nbsp;because this is a character that <STRONG>has no width</STRONG>. If it is between two characters and you completely ignore it, then you will get identical results to it not being there at all.</P>
<P><EM>Update 21 January 2005 -- TLKH pointed out that the actual character that took over job #1 after </EM><A href="http://www.fileformat.info/info/unicode/char/feff/index.htm"><EM>U+feff</EM></A><EM>&nbsp;was fired (well, depracated) from this job&nbsp;is </EM><A href="http://www.fileformat.info/info/unicode/char/2060/index.htm"><EM>U+2060</EM></A><EM> (WORD JOINER) and not </EM><A href="http://www.fileformat.info/info/unicode/char/200d/index.htm"><EM>U+200d</EM></A><EM> (ZERO WIDTH JOINER).</EM></P>
<P><STRONG>Job #2</STRONG> is to act as a <STRONG>BOM</STRONG>, a <STRONG>B</STRONG>yte <STRONG>O</STRONG>rder <STRONG>M</STRONG>ark. A&nbsp;signature at the beginning of a file with&nbsp;no "wrapper" to indicate its encoding -- someone could look at the byte stream and know by the pattern of bytes what the encoding might be:</P>
<BLOCKQUOTE dir=ltr>
<P><FONT face="Courier New">00 00 fe ff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UTF-32, Big Endian</FONT></P>
<P><FONT face="Courier New">fe ff 00 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UTF-32, Little Endian</FONT></P>
<P><FONT face="Courier New">fe&nbsp;ff ## ##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UTF-16, Big Endian</FONT></P>
<P><FONT face="Courier New">ff fe ## ##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UTF-16, Little Endian</FONT></P>
<P><FONT face="Courier New">ef bb bf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UTF-8</FONT></P></BLOCKQUOTE>
<P>And&nbsp;that last line is&nbsp;where it starts to get weird for people. Because lots of the folks who support UTF-8 in other standards like XML note that you do not <EM>need</EM> the BOM when you have <A href="http://www.w3.org/TR/2004/REC-xml-20040204/#charencoding">other means</A> to document the encoding and which use UTF-8 as their default encoding when none is specified anyway. And lots of other folks who support Unix tools that did not have to be completely changed to support Unicode <EM>by using UTF-8</EM> do not like these extra three bytes at the front of the file. Sometimes that is because they really only support ASCII or ISO-8859-1, other times it is because they just can't handle those three bytes right in front but later on would not matter.</P>
<P>Enter Microsoft.</P>
<P><EM>(Yes, I know -- boo, hiss, etc.)</EM></P>
<P>Microsoft has an application called Notepad. Application is perhaps an overstatement; its&nbsp;just an uber-wrapper for a Win32 <A href="http://msdn.microsoft.com/library/en-us/shellcc/platform/commctls/editcontrols/abouteditcontrols.asp">EDIT control</A>. It stores the text in the edit control, which means if you open a file it must literally load all of the data to stick it into the control (which is by the way why it takes forever to open huge files). Over the years minor features and tweaks have been added. But in its soul it is just a plain old edit control.</P>
<P>When it was ported to NT the option of saving Unicode files had to be there since Unicode was there, so they added it. It was Little Endian UTF-16 (that was all the platfom really supported back then) but they just called it Unicode since it was vaguely more likely that someone might have heard of that.&nbsp;And that is what the rest of the platform was doing. </P>
<P>Then in Windows 2000 they added the ability to save a file as Big Endian UTF-16 and since they were already calling Little Endian UTF-16 <STRONG>Unicode</STRONG> they decided to call the other form <STRONG>Unicode (Big Endian)</STRONG>. I do not think this is so bad, certainly less controversial than calling it unicodeFFFE<FONT size=1><SUP>1</SUP></FONT>, but it definitely did irk some people who did not like one format being called Unicode as if others were not. </P>
<P>Incidentally, I those people are probably right. But the number of people who don't really care what it is called since they will never use it does outnumber all of the people who do care, so I kind of understand the logic behind the lack of detail that would confuse...</P>
<P>But then the worst sin of all was committed -- Notepad also added UTF-8 support. And of course the issue with the BOM had to come up.</P>
<P>The folks on the Shell team who did this recognized that if the file only had ASCII characters that it could be called UTF-8 or it could just be using the default system code page. So if a user intentionally saved it as UTF-8 then they would be confused if opening it again would not appear to remember that it had been saved in such a way. So they add a BOM when it is UTF-8, to tag it as UTF-8 in a way that is 100% conformant with Unicode.</P>
<P>This is completely legal and since Notepad is just a simple "Hans &amp; Franz" wrapper around an EDIT control, it has no other means of understanding "envelope" information to tell anyone what the encoding is. What else could they do? The bug is in the people who use Notepad to edit HTML and XML, because they do not require a BOM. People still use it as a convenient editor of files, but the caveats are pretty clear....</P>
<P>People like <a href="http://blogs.msdn.com/oldnewthing/">Raymond Chen</A> have been posted about how <A id=viewpost href="http://blogs.msdn.com/oldnewthing/archive/2004/03/24/95235.aspx">Some files come up strange in Notepad</A>&nbsp;but generally people do not have complaints about the way Notepad behaves.</P>
<P>But every&nbsp;4-6 months another huge thread on <A href="http://www.unicode.org/consortium/distlist.html">the&nbsp;Unicode List</A> gets started about how bad the BOM is for UTF-8 and how it breaks UNIX tools that have been around and able to support UTF-8 without change for decades<FONT size=1><SUP>2</SUP></FONT> and about how Microsoft is evil for shipping Notepad that causes all of these problems and how neither the W3C nor Unicode would have ever supported a UTF-8 BOM if Microsoft did not have Notepad doing it, and so on, and so on.</P>
<P>We are about 30+ messages into such a thread right now, believe it or not. That did not inspire this post&nbsp;so much as the image of Sean and Keanu talking about it like surfer dudes did, though. :-)</P>
<P>No one ever has answers about the fact that if someone <EM>really</EM> supports Unicode, they should be able to handle a ZERO WIDTH NO-BREAK SPACE without breaking a sweat. If they can't, their tool or utility or application or whatever they have is broken, and it's <EM>their</EM> bug, not Microsoft's. At least, if they claim to support UTF-8, that is. Tools that support "all of UTF-8 as long as it&nbsp;starts with&nbsp;ASCII" and tools that cannot handle these three bytes at all are not really supporting UTF-8.</P>
<P>And by the way, that includes Microsoft applications, too. In my opinion Frontpage 2000 kinda stunk (all things considered) because of this problem. Even though they added the cool "don't screw with my HTML setting that I liked so much. I was <STRONG>very </STRONG>happy when Frontpage 2002 and 2003 fixed this problem. Just like I'm sure most others would be happy if people fixed their tools, as well....</P>
<P>I thought I'd briefly quote one of the posts to the Unicode List that was just done by Peter Constable:</P>
<BLOCKQUOTE dir=ltr>
<P><FONT size=2><EM>As for whether plain text files can have a BOM, that is one of the few unending debates that arise with certain (fortunately not too freguent) regularity, each time with vociferous expressions of deeply-held beliefs&nbsp;but never any resolution. I'll just observe that the formal grammar for XML does not make reference to a BOM, yet the XML spec certainly assumes that a well-formed XML document may begin with a UTF-8 BOM (or a BOM in any Unicode encoding form/scheme). Rather than have a philosophical&nbsp;debate about the definition of "plain text file", I suggest a more pragmatic approach: for better or worse, plain text processes that support UTF-8 are going to encounter UTF-8 data beginning with a BOM: learn to live with it!</EM></FONT></P></BLOCKQUOTE>
<P>I agree 100% with his words and wish I coulsd summarize the issues as cleary and as effectively as he can. :-)</P>
<P>For the record, it has occurred to me in the past that it would not be a bad idea to add an option to save files without the BOM. Of course that would mean having to document it for people who probably struggle with the difference between Unicode&nbsp;and Unicef<FONT size=1><SUP>3</SUP></FONT>. That does make this something of an uphill battle (doc. changes are the hardest and most resource intensive in changes like this), but perhaps worthy of a try. Maybe they could take out some of that "UTF-8 is for legacy" stuff that is in Notepad help now while they are there. What do you think? :-)</P>
<P>&nbsp;</P>
<P><FONT size=1>1 - Believe it or not,&nbsp;unicodeFFFE is actually documented as Internet Explorer's </FONT><A href="http://msdn.microsoft.com/workshop/author/dhtml/reference/charsets/charset4.asp"><FONT size=1>Preferred Charset Label</FONT></A><FONT size=1>&nbsp;for Unicode (Big-Endian). Periodically people report the name as a bug, since there is no such code point in Unicode as <A href="http://www.fileformat.info/info/unicode/char/fffe/index.htm">U+fffe</A>. But the reason for the name is that if you look at a BOM of UTF-16 big&nbsp;endian&nbsp;on a system that is little endian, it will look like FFFE. Since that is not a valid character, it is easy to tell on a Little Endian system that the file must be Big Endian Unicode. The name is just acting as a sensible (if somewhat platformily provincial) labelling of what one sees on almost 100% of all Windows platforms.<BR><BR>2 - Never mind that <STRONG>Unicode</STRONG> has not existed for that long, let alone UTF-8!<BR><BR>3 - Someone once asked me at a conference how saving a file is able to contribute to a charity, and was it like one of those&nbsp;fake email chain letter things on her machine? And I did not laugh, though I admit&nbsp;I smiled pretty broadly as I explained to her about how Unicode was not Unicef. And I did laugh a bit afterward.</FONT></P>
<P>&nbsp;</P>
<P><FONT color=#800080><EM>This post is sponsored by </EM>"﻿"<EM>&nbsp;</EM></FONT><A href="http://www.fileformat.info/info/unicode/char/feff/index.htm"><FONT color=#800080><EM>U+feff</EM></FONT></A><FONT color=#800080><EM>&nbsp;(ZERO WIDTH NO-BREAK SPACE, of course)<BR><FONT size=1>Though he was a little bitter about the lack of visible representation here, I was unable to find the little guy to spray paint him so that you could all see him here today. He is between those quotes, I can promise you that.</FONT></EM></FONT></P>
<hr/><p><a id="357393" href="#357393">#</a> <strong>Mike Dunn</strong> on 20 Jan 2005 10:32 AM:</p><div style="margin-left: 1em">Strange things are afoot at the U+004B U+20DD ;)</div>
<p><a id="357523" href="#357523">#</a> <strong>Centaur</strong> on 20 Jan 2005 1:07 PM:</p><div style="margin-left: 1em">The XML specification explicitly permits a UTF-16 BOM at the beginning of the file or stream. Otherwise, it must start with the XML declaration (&lt;?xml version=…&gt;), no whitespace or other characters allowed. At least that’s how I’d interpret sections 4.3.3 and 2.1.</div>
<p><a id="357597" href="#357597">#</a> <strong>Dean Harding</strong> on 20 Jan 2005 2:45 PM:</p><div style="margin-left: 1em">Heh, I used to work for Unisys.  I always felt bad correcting people when they thought I said &quot;Unicef&quot;, cause suddenly I'm not such the good samaritan that they thought I was...</div>
<p><a id="357804" href="#357804">#</a> <strong>Michael Kaplan</strong> on 20 Jan 2005 5:04 PM:</p><div style="margin-left: 1em">Mike Dunn -- something not Kosher? :-)<br><br>Centaur -- the XML spec allows the BOM; it even describes it. So anyone who does not allow it does so at their peril....</div>
<p><a id="357818" href="#357818">#</a> <strong>Michael Kaplan</strong> on 20 Jan 2005 5:43 PM:</p><div style="margin-left: 1em">The Unicode FAQ talks about this issue a bit, also.<br><br><a target="_new" href="http://www.unicode.org/faq/utf_bom.html#BOM">http://www.unicode.org/faq/utf_bom.html#BOM</a><br><br>With the number of bytes wasted in web/email communication over a character that takes up only 2-4 bytes in storage and no visible space, it is no wonder that people find Unicode to be complicated!</div>
<p><a id="357872" href="#357872">#</a> <strong>Michael Grier [MSFT]</strong> on 20 Jan 2005 8:17 PM:</p><div style="margin-left: 1em">Back in visual studio, we had a few people who were really focussed on getting the editors to be really good Unicode citizens.  My (possibly revisionist) history is that we actually introduced use of the utf-8 BOM over there around the time of win98 (vs 6).  NT caught up when visual studio users were creating &quot;text files&quot; (whatever the heck /that/ means... :-)  that other people couldn't open in notepad.<br><br>Re: so much attention:<br><br>My 1st dev mgr at Microsoft always noted that it was the little picayune issues that drew the most heated debates because everyone felt they understood /all/ the issues.<br><br>to quote Kosh: the avelance has started, it is too late for the pebbles to vote.<br><br>UTF-8 has a BOM and people just need to learn to love it.  (The tricky question is when to preserve/not preserve a BOM found in a byte stream...)  I think you're right; just because something is 8-bit clean doesn't make it a good utf-8 citizen.  It has to be very careful not to split an encoding (just like a good UTF-16 citizen has to know not to split high/low surrogates...)<br><br></div>
<p><a id="357910" href="#357910">#</a> <strong>Michael Kaplan</strong> on 20 Jan 2005 10:29 PM:</p><div style="margin-left: 1em">Interesting! I had not heard this before... but I guess the timing is right. I never remember trying UTF-8 in VS6, did it really work?</div>
<p><a id="357941" href="#357941">#</a> <strong>Mo</strong> on 20 Jan 2005 11:42 PM:</p><div style="margin-left: 1em">I think the confusion reigns because people expect saving a file as UTF-8 to mean &quot;Save it as UTF-8 if it contains non-ASCII characters, and ASCII otherwise&quot;, so they expect the BOM to be only present if characters with values greater than 127 are contained within the file.</div>
<p><a id="357968" href="#357968">#</a> <strong>Serge Wautier</strong> on 21 Jan 2005 12:38 AM:</p><div style="margin-left: 1em">What is supposed to be the caret behaviour when encountering such a character ?<br><br>I pasted the sponsor message into Notepad and I noticed that even though you don't see the BOM, you can definitely 'feel' it when moving the caret : You need to press the arrow key twice between the 2 &quot;.<br><br>Does it mean that it's not completely true to say that apps may safely ignore it, especially at the beginning of a doc: If the app provides edition of the contents, users will have a weird experience and bug reports will flood in !<br><br>Also, how does text rendering work ? The BOM is not in the font I use in Notepad.</div>
<p><a id="357982" href="#357982">#</a> <strong>TLKH</strong> on 21 Jan 2005 1:39 AM:</p><div style="margin-left: 1em">As far as I remember from the time when I implemented unicode line breaking algorithm for my editor, U+200d allows breaking before/after it.<br>The real zero-width-non-breaking-space character (except for BOM) is U+2060, not mentioned in this article.</div>
<p><a id="358099" href="#358099">#</a> <strong>Michael Kaplan</strong> on 21 Jan 2005 6:38 AM:</p><div style="margin-left: 1em">TLKH is right -- U+2060 (WORD JOINER) is the preferred character that took on the job formerly occupied by Job #1 of the ZWNBSP. I will put a correction in on the page).</div>
<p><a id="358103" href="#358103">#</a> <strong>Michael Kaplan</strong> on 21 Jan 2005 6:45 AM:</p><div style="margin-left: 1em">Serge -- hard to say what the caret behavior should be here -- after all it *is* a space, even though it is zero width. The fact that it is deprecated makes it even less likely that implementations will do much more than ignore it....</div>
<p><a id="358591" href="#358591">#</a> <strong>Robert</strong> on 21 Jan 2005 11:51 PM:</p><div style="margin-left: 1em">&quot;For the record, it has occurred to me in the past that it would not be a bad idea to add an option to save files without the BOM.&quot;<br><br>It would be convienient if UTF-8 could be selected as the &quot;ANSI&quot; codepage in the control panel's advanced regional and language options. Then Notepad and many applications designed for ANSI would automatically support UTF-8 (without BOM). I would prefer this because nowerdays I rarely create text files with legacy ANSI encoding.<br><br>For those few applications that make specific assumptions about the ANSI codepage (hard-coded strings with character codes &gt;= 128 etc.), AppLocale provides a good solution:<br><br><a target="_new" href="http://www.microsoft.com/globaldev/tools/apploc.mspx">http://www.microsoft.com/globaldev/tools/apploc.mspx</a><br><br>(A UTF-8 &quot;ANSI&quot; codepage may cause problems if the API implementation depends on assumptions like &quot;ANSI character &lt;= double-byte&quot;).<br></div>
<p><a id="358597" href="#358597">#</a> <strong>Michael Kaplan</strong> on 22 Jan 2005 12:40 AM:</p><div style="margin-left: 1em">Unfortunately, this is not possible -- there are too many bugs in Windows and in apps for components that will not work with UTF-8 here....</div>
<p><a id="359123" href="#359123">#</a> <strong>Michael Grier [MSFT]</strong> on 23 Jan 2005 3:22 PM:</p><div style="margin-left: 1em">Re: vs6 and utf-8:<br><br>It did in the new shell (&quot;vegas&quot; as I recall).  Only Visual Interdev and Visual J++ used the new shell.<br></div>
<p><a id="359128" href="#359128">#</a> <strong>Michael Kaplan</strong> on 23 Jan 2005 3:42 PM:</p><div style="margin-left: 1em">Ah yes, that part is true, and I have actually used that before to look at some of the collation source files back before the VS.NET shell was solid enough for daily use. <br><br>I never knew it drove the Notepad feature, though -- thats cool. Fascinating how one piece of the company drives another, sometimes....</div>
<p><a id="360851" href="#360851">#</a> <strong>Chris Walker</strong> on 26 Jan 2005 8:26 AM:</p><div style="margin-left: 1em">I'm been maintaining Notepad for Windows NT/2000/XP/Server 2003 for more than 10 years, so I know some of the history of it. <br><br>First off, any additional complexity to the interface has always had heavy pushback from management and user. Second, it has had to respond to various changes in commonly used character sets over the years. <br><br>Notepad has to guess the character encoding if it does not know what it is. It uses the <a title="IsTextUnicode" href="http://msdn.microsoft.com/library/en-us/intl/unicode_81np.asp" target="_blank">IsTextUnicode</a>() API to help it, but in the end, it is still a guess. It may be worth a blog entry to discuss just this API and its (mis)usage. <br><br>Notepad only edits Unicode, so all other formats are converted to Unicode when the file is opened and converted back if possible to its original format when saved. If the saved format is some form of Unicode, it will also output the BOM at the beginning of the file. If the file has a BOM, then there is no need to call the unreliable IsTextUnicode() API the next time it is opened. <br><br>Notepad remembers what the format of the file was when it was read in and uses this format as the default to save. If the edited file can not be saved in the same format without data loss, the user is warning when saving. Otherwise, no UI is thrown. The net result is ASCII files stay ASCII and Unicode files stay Unicode <br><br>Notepad will never send the Edit Control the BOM. It will skip the BOM if it exists. <br><br>History: <br><br>NT 3.1 shipped with an ASCII only Notepad. In the fall of 1993, several applications were converted to use Unicode. At this time, Notepad started using the BOM. I can't tell you how this decision was made; my memory isn't that good. We also converted other applications like Cardfile and Paintbrush. These first shipped on NT 3.5. <br><br>With the advent of the popularity of the Internet, other character formats needed to be supported. This was how support of the Big Endian Unicode came from. I'm sorry for the name that was used, but that was the best we could do at the time. The BOM helped a lot for this. I believe the first time Big Endian Unicode support was shipped was NT 5.0, er, Windows 2000. <br><br>It would be easy enough to have Notepad not output a BOM. It would *just* be a UI change in the SaveFile dialog. <br><br>The performance of Notepad on large files is not completely related to the fact that it reads the whole file into memory. Remember that in the ASCII file case, it has to convert the whole file to Unicode before it can start. As it turns out, this is very fast compared to the CPU bound work that the Multiline Edit Control does to build up some internal data structures. Of course, if reading the file into memory requires the OS to page to the pagefile, you are going to be hurting. Even after you get a big file swallowed, your experience editing this file will not be pretty. Just try adding for deleting a character at a time. The Edit Control exposes the memory to the application and is required that it be ready to save at any time. So you can imagine that adding one character will shuffle all the characters above it down one character. Fine for small files, but a killer algorithm for a large file. <br><br>One could add complexity to Notepad and solve some of these problems. One could had a &quot;BOM&quot; checkbox to the save dialog complete with an explanation as to what a BOM is and why the end user should care. One could add options to save ASCII files in various code pages complete with code page documentation. One could add a preview on the Open Dialog and allow the user to pick the proper character encoding. One could scan files looking for encoding text and if found use that as the default. <br><br>Notepad is not just a wrapper for the Edit control. In addition to the file encoding problems, it also has reasonable printing and a text search capability which has some interesting International issues. It hosts just about every Common Dialog (Find, ReplaceText, Print, PageSetup, Open, Save). As far as I can figure, it is only missing ChooseColor. I know this because bugs in Common Dialogs are often reported to me first. <br><br>An interesting blog entry would discuss the different End of Line sequence standards. Windows uses carriage-return/linefeed pairs as the legal EOL, while Un*x implementations tend to use newline. You can see this in Notepad when you load a file that just uses the newline as the EOL since the Edit Control uses the Windows standard and bare newline characters are not considered EOLs.</div>
<p><a id="360861" href="#360861">#</a> <strong>Michael Kaplan</strong> on 26 Jan 2005 8:39 AM:</p><div style="margin-left: 1em">Awesome info, Chris! And I agree that some of the entries you mention would make good future posts <br><br>Especially <a title="IsTextUnicode" href="http://msdn.microsoft.com/library/en-us/intl/unicode_81np.asp" target="_blank">IsTextUnicode</a> (which is kind of a pain for us since we do not own it but everyone assumes we do), the EOL issue in from *nix-created files (which gets some complaints but much less often than the BOM issue).<br><br>Sorry if any of the backtalk about &quot;just an edit control&quot; caused grief -- it is a shorthand we sometimes when talking about rendering issues to distinguish it from WordPad (which is &quot;just&quot; a wrapper around RichEdit, in the same sense). <br><br>Obviously both are more than &quot;just&quot; a wrapper so I will choose those words with more care. As a team that finds most of its bug reported through applications that use us even if the bug is not ours, I can understand bugs being reported that actually are not ours....<br><br>But thankis for the info, it makes the post itself markedly better to have the full story from one who knows rather than after-the-fact guesses and suppositions.<br><br>I don't suppose you know who we should contact now if we wanted to push the BOM issue? (feel free to send it to me offline if you're prefer). :-)</div>
<p><a id="463573" href="#463573">#</a> <strong>Anonymous</strong> on 11 Sep 2005 4:19 AM:</p><div style="margin-left: 1em">Yesterday, Buck Hodges was talking about how TFS Version Control determines a file's encoding: ...</div>
<p><strong>Yuhong Bao</strong> on 11 Mar 2009 11:34 PM:</p><div style="margin-left: 1em"><p>&quot;NT 3.1 shipped with an ASCII only Notepad. In the fall of 1993, several applications were converted to use Unicode. At this time, Notepad started using the BOM. I can't tell you how this decision was made; my memory isn't that good. We also converted other applications like Cardfile and Paintbrush. These first shipped on NT 3.5.&quot;</p>
<p>More on this at:</p>
<p><a rel="nofollow" target="_new" href="http://msdn.microsoft.com/en-us/library/cc194798.aspx">http://msdn.microsoft.com/en-us/library/cc194798.aspx</a></p>
<p>BTW, look at how hard it was to actually insert a Unicode-only character back then. For comparison, today, I use a English Windows PC with Chinese IMEs installed and I use Notepad to create Chinese text files, and the code page of English Windows is 437, which meant that I have to save my Chinese text files as Unicode.</p></div>
<p><strong>Yuhong Bao</strong> on 12 Mar 2009 10:53 PM:</p><div style="margin-left: 1em"><p>&quot;NT 3.1 shipped with an ASCII only Notepad.&quot;</p>
<p>Do you mean ANSI-only?</p></div>
<p><strong>colin</strong> on 30 Jan 2010 4:44 AM:</p><div style="margin-left: 1em"><p>Your article says:</p>
<p>&quot;fe ff 00 00 &nbsp; &nbsp; &nbsp;UTF-32, Little Endian&quot;</p>
<p>I hope you didn't ship software that relies on that!</p>
<p>It's &quot;FF FE 00 00&quot;!</p></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2012/07/16 <a href="http://archives.miloush.net/michkap/archive/2012/07/16/10330046.html">if you see a ZWNBSP in the Release Preview, don't be insensitive and comment it hasn't been eating enough lately!</a></p><p>2010/08/14 <a href="http://archives.miloush.net/michkap/archive/2010/08/14/10050078.html">(It wasn't me)</a></p><p>2009/06/09 <a href="http://archives.miloush.net/michkap/archive/2009/06/09/9712595.html">When keeping things on a level Plane[ 1] doesn't work anymore</a></p><p>2008/03/11 <a href="http://archives.miloush.net/michkap/archive/2008/03/11/8152232.html">Why are UTF-8 encoded Unix shell scripts *ever* written or edited in Notepad?</a></p><p>2007/05/17 <a href="http://archives.miloush.net/michkap/archive/2007/05/17/2692362.html">If a bunch of specific Unicode characters can no longer live in the same apartment together, can they really claim that they needed their space?</a></p><p>2007/01/13 <a href="http://archives.miloush.net/michkap/archive/2007/01/13/1460188.html">RichTextBox breaking ranks?</a></p><p>2006/11/20 <a href="http://archives.miloush.net/michkap/archive/2006/11/20/1108172.html">No byte order marks when using encodings in StreamWriters?</a></p><p>2006/10/28 <a href="http://archives.miloush.net/michkap/archive/2006/10/28/890105.html">You can just byte me</a></p><p>2006/05/26 <a href="http://archives.miloush.net/michkap/archive/2006/05/26/608289.html">7-bit UTF-8?</a></p><p>2006/02/15 <a href="http://archives.miloush.net/michkap/archive/2006/02/15/532394.html">Every character has a story #19: U+200c and U+200d (ZERO WIDTH [NON] JOINER)</a></p><p>2006/01/21 <a href="http://archives.miloush.net/michkap/archive/2006/01/21/515793.html">Return of the Mark</a></p><p>2005/09/11 <a href="http://archives.miloush.net/michkap/archive/2005/09/11/463444.html">unicodeFFFE... is Microsoft off its rocker?</a></p><p>2005/09/11 <a href="http://archives.miloush.net/michkap/archive/2005/09/11/463437.html">Working hard to detect code pages</a></p><p>2005/05/21 <a href="http://archives.miloush.net/michkap/archive/2005/05/21/420708.html">Getting exactly ONE Unicode code point out of UTF-8</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/01/21/357960.html" title="Keyboards: hardware vs. software">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/01/20/357025.html" title="The West Wing last night (19 January 2005)">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-01">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-01-20">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/01/20/357028.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
</html>