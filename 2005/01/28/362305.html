<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/01/28/362305.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>A little bit about the new CharUnicodeInfo class</title></head><body>
<h1>A little bit about the new CharUnicodeInfo class</h1>
<p><em>by Michael S. Kaplan, published on 2005/01/28 05:31 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/01/28/362305.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>CharUnicodeInfo is a new class that is being added to Whidbey. It has one very straightforward job -- pick up property information from the&nbsp;Unicode Character Database. But there is a <STRONG>lot</STRONG> of data there!</P>
<P>The name provides the proper balance between being appropriately descriptive and showing up near the <A title=System href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfSystemCharClassTopic.asp" target=_blank>System.Char</A> struct in the Object Browser.</P>
<P>It is much more functional than the <A title=FoldString href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/resources/strings/stringreference/stringfunctions/foldstring.asp" target=_blank>FoldString</A> API's MAP_FOLDDIGITS (discussed a little bit <a href="http://archives.miloush.net/michkap/archive/2005/01/27/361413.html">yesterday</A>), which simply maps digits from various scripts to 0 - 9. And it carries much more information than System.Char&nbsp;struct methods like <A title=Char href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemcharclassiswhitespacetopic.asp" target=_blank>Char.IsWhiteSpace</A> and <A title=Char href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemcharclassispunctuationtopic.asp" target=_blank>Char.IsPunctuation</A> (plus it is entirely based on Unicode character properties&nbsp;and has none of the backwards compatibility issues of the methods off of the Char struct (e.g. having to consider some characters as white space because other programs used to do so in their parsing). Pure Unicode all the way, baby!</P>
<P>Now you can hardly call a class a secret when even simple searches in Google and MSN find over 100 pages about it. But I'll try to give a rundown of some of its basic functionality....</P>
<P>Here is a list of some of the methods this new class contains:</P>
<P><STRONG>GetDecimalDigitValue</STRONG> -- as the title implies, returns the actual value this character has as a decimal digit (or -1 if it is not a decimal digit at all). This is ever so much more useful than <A title=Char href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemcharclassisdigittopic.asp" target=_blank>Char.IsDigit</A>, which only returns a simple yes/no answer to the question! In official terms, it returns the value of Unicode's Numeric Type/Numeric Value fields whenever the Unicode category is Nd (Number, Decimal).</P>
<P><STRONG>GetDigitValue</STRONG> -- For all those cases where a character is in fact a digit even if it is not just between 0 and 9, the GetDigitValue method can retrieve those values.</P>
<P><STRONG>GetNumericValue</STRONG> -- For the times that it is a number but may not even be a digit (such as fractional values), this method returns a numeric representation.</P>
<P><STRONG>GetBidiCategory</STRONG> -- There are many possible categories that describe the behavior of a character in bidirectional contexts, and every character falls into one of them: LeftToRight (<STRONG>L</STRONG>), LeftToRightEmbedding (<STRONG>LRE</STRONG>), LeftToRightOverride (<STRONG>LRO</STRONG>), RightToLeft (<STRONG>R</STRONG>), RightToLeftArabic (<STRONG>AL</STRONG>), RightToLeftEmbedding (<STRONG>RLE</STRONG>), RightToLeftOverride (<STRONG>RLO</STRONG>), PopDirectionalFormat (<STRONG>PDF</STRONG>), EuropeanNumber (<STRONG>EN</STRONG>), EuropeanNumberSeparator (<STRONG>ES</STRONG>), EuropeanNumberTerminator (<STRONG>ET</STRONG>), ArabicNumber (<STRONG>AN</STRONG>), CommonNumberSeparator (<STRONG>CS</STRONG>), NonSpacingMark (<STRONG>NSM</STRONG>), BoundaryNeutral (<STRONG>BN</STRONG>), ParagraphSeparator (<STRONG>B</STRONG>)<STRONG>,</STRONG> SegmentSeparator (<STRONG>S</STRONG>)<STRONG>,</STRONG> Whitespace (<STRONG>WS</STRONG>), and OtherNeutrals (<STRONG>ON</STRONG>) -- all members of the <STRONG>BidiCategory enumeration</STRONG>.</P>
<P><STRONG>GetUnicodeCategory</STRONG> -- Arguably the most elemental property, a character's General Category (one per character) really defines what a character <STRONG>is</STRONG>. Possible values are&nbsp;UppercaseLetter (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Lu/index.htm">Lu</A></STRONG>), LowercaseLetter (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Ll/index.htm">Ll</A></STRONG>), TitlecaseLetter (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Lt/index.htm">Lt</A></STRONG>), ModifierLetter (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Lm/index.htm">Lm</A></STRONG>), OtherLetter (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Lo/index.htm">Lo</A></STRONG>), NonSpacingMark (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Mn/index.htm">Mn</A></STRONG>), SpacingCombiningMark (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Mc/index.htm">Mc</A></STRONG>),&nbsp; EnclosingMark (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Me/index.htm">Me</A></STRONG>), DecimalDigitNumber (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Nd/index.htm">Nd</A></STRONG>), LetterNumber (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Nl/index.htm">Nl</A></STRONG>), OtherNumber (<STRONG><A href="http://www.fileformat.info/info/unicode/category/No/index.htm">No</A></STRONG>), SpaceSeparator (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Zs/index.htm">Zs</A></STRONG>), LineSeparator (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Zl/index.htm">Zl</A></STRONG>), ParagraphSeparator (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Zp/index.htm">Zp</A></STRONG>), Control (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Cc/index.htm">Cc</A></STRONG>), Format <STRONG>(<A href="http://www.fileformat.info/info/unicode/category/Cf/index.htm">Cf</A>),</STRONG> Surrogate (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Cs/index.htm">Cs</A></STRONG>), PrivateUse (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Co/index.htm">Co</A></STRONG>), ConnectorPunctuation (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Pc/index.htm">Pc</A></STRONG>), DashPunctuation (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Pd/index.htm">Pd</A></STRONG>), OpenPunctuation (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Ps/index.htm">Ps</A></STRONG>), ClosePunctuation (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Pe/index.htm">Pe</A></STRONG>), InitialQuotePunctuation (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Pi/index.htm">Pi</A></STRONG>), FinalQuotePunctuation (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Pf/index.htm">Pf</A></STRONG>), OtherPunctuation (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Po/index.htm">Po</A></STRONG>), MathSymbol (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Sm/index.htm">Sm</A></STRONG>), CurrencySymbol (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Sc/index.htm">Sc</A></STRONG>), ModifierSymbol (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Sk/index.htm">Sk</A></STRONG>), OtherSymbol (<STRONG><A href="http://www.fileformat.info/info/unicode/category/So/index.htm">So</A></STRONG>), and OtherNotAssigned (<STRONG><A href="http://www.fileformat.info/info/unicode/category/Cn/index.htm">Cn</A></STRONG>). And every one of them is a member of the <STRONG><A title=UnicodeCategory href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationunicodecategoryclasstopic.asp" target=_blank>UnicodeCategory</A> enumeration</STRONG>.</P>
<P>Note that every one of these methods has two overrides -- one that accepts a single System.Char, and the other which takes a <A title=System href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemstringclasstopic.asp" target=_blank>System.String</A> and an index value. The latter case is for dealing with supplementary characters, which are made up of a high and low surrogate (also known as a surrogate pair).</P>
<P>Who knows what the future may bring to this class? The possibilities are endless, as the data that sits behind Unicode allows sophisticated text processing engines to use these properties in exciting ways. All written using the .NET Framework. Speaking as someone charged with writing tools such as <A title=MSKLC href="http://www.microsoft.com/globaldev/tools/msklc.mspx" target=_blank>MSKLC</A> in the .NET Framework, I plan to try and be one of CharUnicodeInfo's best and most appreciative customers in the months and years to come. :-)</P>
<P>&nbsp;</P>
<P><FONT color=#800080><EM>This post brought to you by the many </EM></FONT><A href="http://www.fileformat.info/info/unicode/category/"><FONT color=#800080><EM>Unicode Character Categories</EM></FONT></A><FONT color=#800080><EM>....</EM></FONT></P>
<hr/><p><a id="362310" href="#362310">#</a> <strong>Jochen Kalmbach</strong> on 28 Jan 2005 3:40 AM:</p><div style="margin-left: 1em">You should add the links to the class-documentation:<br>CharUnicodeInfo Class:<br><a target="_new" href="http://msdn2.microsoft.com/library/k43c6164.aspx">http://msdn2.microsoft.com/library/k43c6164.aspx</a><br>CharUnicodeInfo Members:<br><a target="_new" href="http://msdn2.microsoft.com/library/wtth5wtz.aspx">http://msdn2.microsoft.com/library/wtth5wtz.aspx</a><br><br>By the way: is there some equivalent to <a title="FoldString" href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/resources/strings/stringreference/stringfunctions/foldstring.asp" target="_blank">FoldString</a>, especially &quot;MAP_PRECOMPOSED&quot; and &quot;MAP_COMPOSITE&quot;? Neither <a title="StringInfo" href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationstringinfoclasstopic.asp" target="_blank">StringInfo</a> nor <a title="TextInfo" href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationtextinfoclasstopic.asp" target="_blank">TextInfo</a> provide such a function, or?</div>
<p><a id="362325" href="#362325">#</a> <strong>Michael Kaplan</strong> on 28 Jan 2005 4:07 AM:</p><div style="margin-left: 1em">Heh -- you have the links in the very first comment. :-)<br><br>The .NET Framework has something even better than <a title="FoldString" href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/resources/strings/stringreference/stringfunctions/foldstring.asp" target="_blank">FoldString</a> here -- I'll post on it tomorrow....<br><br>(I will not approve any spoiler comments until after I post it -- No one spoil the surprise!)</div>
<p><a id="362335" href="#362335">#</a> <strong>Jonathan Wilson</strong> on 28 Jan 2005 4:26 AM:</p><div style="margin-left: 1em">Where does windows keep the actual database with all this information in it?<br>Is there a way to get at the database from straight C/C++ (i.e. no .NET stuff)?<br></div>
<p><a id="362343" href="#362343">#</a> <strong>Michael Kaplan</strong> on 28 Jan 2005 4:38 AM:</p><div style="margin-left: 1em">Jonathan -- Windows does not keep the info -- the .NET Framework does (it keeps its own data). There is no way to get all of the info from unmanaged code, though a lot of the bidi and general category stuff is captured in the <a title="GetStringTypeW" href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/resources/strings/stringreference/stringfunctions/getstringtypew.asp" target="_blank">GetStringTypeW</a>/GetStringTypeEx APIs.</div>
<p><a id="362344" href="#362344">#</a> <strong>Michael Kaplan</strong> on 28 Jan 2005 4:40 AM:</p><div style="margin-left: 1em">Jochen, one more thing -- I talk about the Bidi class stuff, which the docs do not (yet). <br><br>And I have those cool links to the fileformat.info site (there were no similar links for bidi class -- the site has the info per character but they do not have pages that links to all of the characters). :-)</div>
<p><a id="362349" href="#362349">#</a> <strong>Uwe Keim</strong> on 28 Jan 2005 5:00 AM:</p><div style="margin-left: 1em">Michael, I tried, but I failed:<br><br><a target="_new" href="http://lab.msdn.microsoft.com/productfeedback/viewfeedback.aspx?feedbackid=5c156734-8fef-4e31-a30f-789185aa4900">http://lab.msdn.microsoft.com/productfeedback/viewfeedback.aspx?feedbackid=5c156734-8fef-4e31-a30f-789185aa4900</a><br><br>Uwe :-)</div>
<p><a id="362375" href="#362375">#</a> <strong>Michael Kaplan</strong> on 28 Jan 2005 5:57 AM:</p><div style="margin-left: 1em">Ah, I have tried in the past, as well. But *at least* that difficult method does indeed work....</div>
<p><a id="362765" href="#362765">#</a> <strong>Jochen Kalmbach</strong> on 28 Jan 2005 2:10 PM:</p><div style="margin-left: 1em">Michael! This Bidi-Stuff is really new! At least it is not available in Beta1! Hopefully it will be available in Beta2... :-&gt;</div>
<p><a id="362805" href="#362805">#</a> <strong>Michael Kaplan</strong> on 28 Jan 2005 2:50 PM:</p><div style="margin-left: 1em">Indeed, the Bidi stuff is post-Beta1, and will be available in Beta2 of Whidbey.</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2011/11/21 <a href="http://archives.miloush.net/michkap/archive/2011/11/21/10239128.html">One disadvantage to being supplementary...or Japanese?</a></p><p>2008/12/08 <a href="http://archives.miloush.net/michkap/archive/2008/12/08/9183280.html">Lt is TC (and TC is Title Case, or Total Crap -- take your pick!)</a></p><p>2007/01/06 <a href="http://archives.miloush.net/michkap/archive/2007/01/06/1421178.html">Mixing it up with bidirectional text</a></p><p>2006/07/22 <a href="http://archives.miloush.net/michkap/archive/2006/07/22/675085.html">Behind the return of the Unicode IME</a></p><p>2006/06/26 <a href="http://archives.miloush.net/michkap/archive/2006/06/26/648040.html">Not all GetUnicodeCategory methods are created equal</a></p><p>2005/09/09 <a href="http://archives.miloush.net/michkap/archive/2005/09/09/462934.html">Update on the CharUnicodeInfo class</a></p><p>2005/03/12 <a href="http://archives.miloush.net/michkap/archive/2005/03/12/394716.html">Stability of the Unicode Character Database</a></p><p>2005/02/27 <a href="http://archives.miloush.net/michkap/archive/2005/02/27/381189.html">Some suggested updates to the Win32-->.NET mapping for NLS functions....</a></p><p>2005/02/19 <a href="http://archives.miloush.net/michkap/archive/2005/02/19/376617.html">Stripping diacritics....</a></p><p>2005/01/31 <a href="http://archives.miloush.net/michkap/archive/2005/01/31/363701.html">FoldString.NET? No, but Whidbey has Normalization (which is kinda more cooler)</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/01/29/363002.html" title="Sorry folks, MSKLC cannot trap CONTROL+ALT+DELETE">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/01/27/361413.html" title="Notepad folds digits like origami birds">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-01">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-01-28">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/01/28/362305.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
</html>