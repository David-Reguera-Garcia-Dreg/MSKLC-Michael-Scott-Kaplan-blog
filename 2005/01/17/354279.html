<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/01/17/354279.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Keeping it simple, with complex scripts</title></head><body>
<h1>Keeping it simple, with complex scripts</h1>
<p><em>by Michael S. Kaplan, published on 2005/01/17 03:16 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/01/17/354279.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Let's face it, sometimes a language has complex typographical issues in it. If it were all easy to do then typography would not be such a complex and lucrative field that requires both technical understanding of language and artistry which I do not myself have. But every time I learn more about the issues that folks in MS Typography (a part of the GIFT team I am on!) deal with, the more respect I have for them and the folks who support the rendering of these fonts.</P>
<P>There is a help topic on MSDN that captures the essence of the complexity entitled <A href="http://msdn.microsoft.com/library/en-us/intl/uniscrib_1a0j.asp">About Complex Scripts</A>, which starts off with a very succinct summary:</P>
<BLOCKQUOTE>
<P><EM><FONT size=2>A complex script has at least one of the following attributes: </FONT></EM>
<UL>
<LI><EM><FONT size=2>Allows bidirectional rendering. </FONT></EM>
<LI><EM><FONT size=2>Has contextual shaping. </FONT></EM>
<LI><EM><FONT size=2>Has combining characters. </FONT></EM>
<LI><EM><FONT size=2>Has specialized word-breaking and justification rules. </FONT></EM>
<LI><EM><FONT size=2>Filters out illegal character combinations. </FONT></EM></LI></UL></BLOCKQUOTE>
<P>Now the above is great if you are familiar with a language that uses the Hebrew, Thai, or Arabic script, but is not so useful if you only know about a language like English; it therefore goes on and gives other examples, some of which a wider range of people can identify with:</P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT size=2><EM><STRONG>Bidirectional rendering</STRONG> refers to the script's ability to handle text that reads both left-to-right and right-to-left. For example, in the bidirectional rendering of Arabic, the default reading direction for text is right-to-left, but for some numbers, it is left-to-right. Processing a complex script must account for the difference between the logical (keystroke) order and the visual order of the glyphs. In addition, processing must properly deal with caret movement and hit testing. The mapping between screen position and a character index for, say, selection of text or caret display requires knowledge of the layout algorithms.</EM></FONT></P>
<P><FONT size=2><EM><STRONG>Contextual shaping</STRONG> occurs when a script's characters change shape depending on the characters that surround them. This occurs in English cursive writing when a lowercase "l" changes shape depending on the character that precedes it such as an "a" (connects low to the "l") or an "o" (connects high). Arabic is a script that exhibits contextual shaping.</EM></FONT></P>
<P><FONT size=2><EM><STRONG>Combining characters</STRONG> or ligatures are characters that join into one character when placed together. One example is the "ae" combination in English; it is sometimes represented by a single character. Arabic is a script that has many combining characters.</EM></FONT></P>
<P><FONT size=2><EM><STRONG>Specialized word break and justification</STRONG> refers to scripts that have complex rules for dividing words between lines or justifying text on a line. Thai is such a script.</EM></FONT></P>
<P><FONT size=2><EM><STRONG>Filtering out illegal character combinations</STRONG> occurs when a language does not allow certain character combinations. Thai is such a script.</EM></FONT></P></BLOCKQUOTE>
<P>I really like this text (and have for as long as I have known about it), especially the part about contextual shaping. I have personally seen it make a difference in understanding to people who were having trouble grokking the nature of complex scripts and who really did not have the time to learn a language like Thai or Arabic. </P>
<P>Those same people who would actually rail on about how the Arabic is "ridiculous" and "unnecessarily intricate"&nbsp;for having a letter change form depending on its position in a word stopped thinking so when they realized that they had been doing the same sort of thing in cursive writing of their own language since they were children. </P>
<P>People even start to get impressed about cursive fonts like <FONT face="Script MT Bold">Script MT Bold</FONT><SUP>1</SUP> when they realize how&nbsp;much work&nbsp;it is to deal with all of those contextual differences. And they understand why the legacy characters in <A href="http://www.unicode.org/charts/PDF/UFB50.pdf">Arabic Presentation Forms-A</A>&nbsp;and <A href="http://www.unicode.org/charts/PDF/UFE70.pdf">Arabic Presentation Forms-B</A>&nbsp;that encode up to the four different Arabic forms may not be the best way to represent Arabic text, especially when they imagine an&nbsp;analagous compatibility Latin block with multiple forms of many ordinary letters in the English alphabet.</P>
<P>And suddenly people kind of like that there are controls (like RichEdit) and libraries like (Uniscribe and GDI+) and operating systems (like Windows) that deal with most of these issues automatically. There are some basic conventions upon which RichEdit, <A title=Uniscribe href="http://msdn.microsoft.com/library/en-us/intl/uniscrib_35k5.asp" target=_blank>Uniscribe</A>, and GDI+ basically agree:</P>
<UL>
<LI>When moving through text with an arrow key, move through one text element at a time, since the user often thinks of them as a single character.<BR>
<LI>When selecting text, select entire text elements rather than pieces of them.<BR>
<LI>When forced to break lines, try to break at word boundaries; if that is not possible then at least try to break at text element boundaries so that the integrity of what the user thinks of as a character is not destroyed.<BR>
<LI>When hitting the DELETE button to delete the in front of the cursor, delete the entire text element.<BR>
<LI>When hitting the BACKSPACE button to delete behind the cursor, usually delete just the code point since the user may have typed it in that way and may be unhappy in the case of typos to lose multiple code points (though more sophisticated processors like RichEdit will properly delete&nbsp;surrogate pairs&nbsp;in their entirety since they were almost certainly not typed separately).</LI></UL>
<P>Obviously when applications are consistent that helps the user to understand behavior on the computer, and when the operating system provides a library like GDI+ or Uniscribe it helps developers to do all of this without having to program all of the individual behaviors in their own code. So everybody wins!</P>
<P>Well, there are the occasional hiccups, like the one I described a few days ago in&nbsp;'<A id=_adf705ff4549728_HomePageDays_DaysList__ctl2_DayItem_DayList__ctl2_TitleUrl href="http://archives.miloush.net/michkap/archive/2005/01/14/352802.html">CharNext(ch) != ch+1, a lot of the time</A>', behavior which affected many browsers including IE, FireFox, and Opera (heads up to the FireFox people, they would have gotten me to abandon IE on the spot if I knew they were so in tune with&nbsp;international issues that this worked well without&nbsp;someone like me even&nbsp;prompting -- I get downright ornery about poor/inconsistent international support! But alas, you missed your chance...).</P>
<P>The other place I tend to notice problems is in applications like DVArchive, which I use to communicate with a small bank of ReplayTV units (don't know what they are? think Tivo). It is a formerly open source project (now closed source) which reportely runs on any platform that runs Java 1.4.2. Though here is of course a problem where cross-platform projects (whether open source or closed) run into trouble -- they tend to avoid platform-specific features and obviously the complexity of libraries like Uniscribe almost certainly cause them to be platform-specific. I even miss simple keyboard shortcuts that work in every other application but fail in this one. :-(</P>
<P>But that last paragraph is fairly offtopic&nbsp;and is&nbsp;a complex issue of another type, so I will move back to the relatively simpler area of <EM>complex scripts</EM>, now. I'll give more on my thoughts about cross platform applications another time. :-)</P>
<P>There are people who object to the term complex scripts. The reasons vary, but I will mention two categories of those reasons, briefly.</P>
<P>I have known people who are in East Asia who deal with ideographic languages who see it as decreasing emphasis on their languages, which is really not the case since the issues regarding line breaking are still an issue with ideographic languages. In fact,&nbsp;support of these languages with proper line breaking led to some of the first technological attempts at solutions on Windows for complex scripts in general. People may not always lump them in with the conventional notion of complex scripts, but it is a simple fact that ideographic languages will not look as good when Uniscribe is not enabled to help their rendering....</P>
<P>I have also known people who speak one of the languages that is impacted (such as Arabic or Hindi or Tamil) who think of it as being somehow insulting to call their language "complex". But I can promise that no insult is intended -- this is just a recognition that some languages use scripts that require more effort to support correctly. I find certain complex scripts to appear to me to be the most aesthetically pleasing, enough that I am a little afraid to learn how to read a language like Thai since not knowing now to read it allows even something as mundane as a grocery list to appear beautiful to me.</P>
<P>Thanks to the work that has been done on the platform, support of complex scripts can often be as simple as you need it to be!</P>
<P><EM><FONT size=1>1 - If you do not have the Monotype font <STRONG>Script MT Bold</STRONG> on your machine, this will not look like script to you, and the demonstration did not work for you. Sorry!</FONT></EM></P>
<P>&nbsp;</P>
<P><FONT color=#800080><EM>This post brought to you by</EM> "&nbsp;ุุ"&nbsp;<EM>(<A href="http://www.fileformat.info/info/unicode/char/0e38/index.htm">U+0e38</A>, a.k.a. THAI CHARACTER SARA U)<BR><FONT size=1>(Note that THAI CHARACTER SARA U is illegal to start a line with, so attempting to type it by itself in Notepad will fail since it is an illegal sequence -- try copying from this page and pasting it somewhere to see whether your application handles it right!)</FONT></EM></FONT></P>
<hr/><p><a id="354312" href="#354312">#</a> <strong>Jonathan</strong> on 17 Jan 2005 2:08 AM:</p><div style="margin-left: 1em">The main problem with the term &quot;complex script&quot; is that it's not obvious to laymen - which is why I like the actual CPL text: &quot;complex script and right-to-left languages&quot;, which is more obvious, at least for my case (Hebrew).<br><br>Regarding &quot;Complex&quot; as an insult - It will insult those who are looking for something to be insulted by. For example, I know a native Chinese person (from PRC) who calls the Chinese used in Taiwan &quot;complicated&quot;, instead of the official, politically-correct &quot;Traditional&quot;. Or maybe it's insulting on o Taiwan people?</div>
<p><a id="354418" href="#354418">#</a> <strong>Leons Petrazickis</strong> on 17 Jan 2005 7:53 AM:</p><div style="margin-left: 1em">How about 'intricate'? Turning 'intricate' into an insult is a challenge.:)</div>
<p><a id="354694" href="#354694">#</a> <strong>Raymond Chen</strong> on 17 Jan 2005 2:33 PM:</p><div style="margin-left: 1em">(&quot;intricate&quot; can have the connotation of &quot;unnecessarily complicated&quot;)<br><br>How about &quot;rich&quot;, &quot;sumptuous&quot;, &quot;subtle&quot;, &quot;mature&quot;, &quot;refined&quot; or simply &quot;advanced&quot;...</div>
<p><a id="371913" href="#371913">#</a> <strong>Doug</strong> on 13 Feb 2005 9:13 AM:</p><div style="margin-left: 1em">How about &quot;get over it, your script doesn't use 26 plain letters&quot;.</div>
<p><a id="371914" href="#371914">#</a> <strong>Doug</strong> on 13 Feb 2005 9:14 AM:</p><div style="margin-left: 1em">I'm surprised to read that one of the characteristics considered to define a &quot;complex script&quot; is combining characters.<br><br>Latin and Greek both can -- and in some languages/usages, must -- use combining accents with letters. And even English uses ligatures for &quot;fli&quot;, &quot;fi&quot;, etc.<br><br>And Microsoft defines Latin and Greek as &quot;simple scripts&quot;.</div>
<p><a id="6583624" href="#6583624">#</a> <strong>Koji Ishii</strong> on 28 Nov 2007 2:27 PM:</p><div style="margin-left: 1em"><p>Which would you call Japanese, simple or complex?</p>
<p>From your definition, it looks like Japanese is complex due to its &quot;word break and justification.&quot; &nbsp;Sometimes with &quot;combining characters.&quot; &nbsp;I'm not sure if glyph substituion in vertical writing is &quot;contextual shaping,&quot; since it's not contextual, but is shaping.</p>
<p>Maybe Japanese is in between simple and complex; not as complex as bidirectional languages, but also not as simple as Latin languages. &nbsp;I hope you find a good place to classify these languages too, so that they are not forgotten in MSDN.</p></div>
<p><a id="6782974" href="#6782974">#</a> <strong>Tanveer Badar</strong> on 16 Dec 2007 9:05 AM:</p><div style="margin-left: 1em"><p>&quot;Filtering out illegal character combinations occurs when a language does not allow certain character combinations. Thai is such a script.&quot;</p>
<p>Similar rules exist for Urdu too. To list a few</p>
<p>1- No word shall begin with 'ھ' (U+06BE), ء (U+0674)، ے (U+06D2) or ڑ (U+0691).</p>
<p>2- Only certain combinations of 'ھ' are allowed with other characters like ب، پ، ت، ٹ، ج، چ، د، ڈ، ک، گ۔</p>
<p>And the list is not exhaustive and may not be accurate, I don't remember all the combinations at the moment.</p>
<p>3- This character is not a substitute for 'ہ' (U+0647) as sometimes seen in modern writings when people are not so linguistically aware.</p>
</div>
<p><a id="6783530" href="#6783530">#</a> <strong>Michael S. Kaplan</strong> on 16 Dec 2007 11:16 AM:</p><div style="margin-left: 1em"><p>The filtering only happens for Thai, AFAIK -- What is illegal in Urdu may not be illegal in the other 80+ languages that use the Arabic script.....</p>
</div>
<p><a id="6889912" href="#6889912">#</a> <strong>Tanveer Badar</strong> on 28 Dec 2007 6:42 PM:</p><div style="margin-left: 1em"><p>I was giving example of the language I am rather fluent in.</p>
</div>
<p><strong>Hermann Weber</strong> on 27 Mar 2011 10:10 AM:</p><div style="margin-left: 1em"><p>Going through your blog all day long trying to find a solution for my situation, I am still not sure if this can be done at all:</p>
<p>Let&#39;s assume I have a Thai sentence (which doesn&#39;t use a space between words) which does not include Zero-Width-Word-Breakers, is Uniscribe capable of telling me the different words in it?</p>
<p>I wouldn&#39;t have dreamt that this might be possible at all with MS-only techniques, but when I used Ctrl and the arrow keys in Notepad to go to the next word, Notepad did jump to the next word in this sentence, and I wonder how it does it.</p>
<p>Is this a Uniscribe feature?</p></div>
<p><strong>Clearlycrystal</strong> on 28 Oct 2011 12:03 AM:</p><div style="margin-left: 1em"><p>Michael, The people who were raised speaking a language to not consider their language complex. But for people who are learning to read and write the language it is complex.</p></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2007/12/01 <a href="http://archives.miloush.net/michkap/archive/2007/12/01/6632929.html">A whole new spin on the term 'Vertical markets' (aka in SiaO we trust?)</a></p><p>2006/10/02 <a href="http://archives.miloush.net/michkap/archive/2006/10/02/779974.html">Can you name that TUNE?</a></p><p>2006/05/31 <a href="http://archives.miloush.net/michkap/archive/2006/05/31/611340.html">Did he say shaping? It's not in the script!</a></p><p>2005/10/18 <a href="http://archives.miloush.net/michkap/archive/2005/10/18/481654.html">Font Linking vs. Font Fallback, #2</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/01/18/355210.html" title="The jury will give this string no weight">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/01/16/354267.html" title="Blogging -- like MLM? (but probably without the pyramid scheme)">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-01">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-01-17">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/01/17/354279.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
</html>