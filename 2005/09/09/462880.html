<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/09/09/462880.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Safe 'DrawText' function</title></head><body>
<h1>Safe 'DrawText' function</h1>
<p><em>by Michael S. Kaplan, published on 2005/09/09 08:59 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/09/09/462880.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>A recent thought from a reader, sent via the Contact link:</FONT></P><FONT face=Tahoma><FONT size=2>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Times New Roman"><EM>Hi. I actualy tried finding the correct blog post to submit this response too - but I couldn't</EM></FONT></P>
<P><FONT face="Times New Roman"><EM>Anyways - A while ago you had a couple of posts on internationalized text esspecially in the browser however you also mentioned how it can be used to cloak a bad file in explorer etc...</EM></FONT></P>
<P><FONT face="Times New Roman"><EM>Would this make any sense at all? </EM></FONT></P>
<P><FONT face="Times New Roman"><EM>In vista- Create a "Secure Unicode" Rendering function - Sort of a "overriden" implemetation of drawText that will draw a little squiglly under any unicode charecter that is deemed suspious (You linked to a RFC that had some good ideas there) - this suiglly would be draw in the sane pen as the font and it would look similiar to the squiggly that word draws under misspelled words.</EM></FONT></P>
<P><FONT face="Times New Roman"><EM>In any situtation where a unicode char might be used to fool the user into doing something he probablyu does not want to do Windows ,(and third party apps0 can use this version to ensure that the user is notified when a charecter might not be exactly what it looks like.</EM></FONT></P>
<P><FONT face="Times New Roman"><EM>I can see this being used in windows explorer for file listings - or perhpas in login text boxes etc, email address boxes (I can send yo a link asking you to send sensitive info to a email address that looks similiar to an address you trust) etc....</EM></FONT></P>
<P><FONT face="Times New Roman"><EM>Just a thought (obvioussly..)</EM></FONT></P></BLOCKQUOTE></FONT></FONT>
<P><FONT face=Tahoma>This is an interesting suggestion, and it would be a fascinating use of the <a href="http://archives.miloush.net/michkap/archive/2005/08/20/454144.html">mitigation tools for IDN security problems</A>&nbsp;that I posted about last month in any application, whether it was from Microsoft or not, even if a specific Win32 or managed API function were not added to the platform or the .NET Framework.</FONT></P>
<P><FONT face=Tahoma>But with that said, it would be fascinating to see such a function!</FONT></P>
<P><FONT face=Tahoma>I would love to see such an idea with even more functionality, like an underlying "confidence level" that would score the confidence that a string was in fact valid and a way to pass to the function the score required to show the visual difference between the two forms of text. And maybe even two HDC values, one for the <EM>safe text</EM> and the other for the <EM>potentially suspect</EM> text. I think it would be a&nbsp;fascinating extension to the tools that were originally posted for dealing with IDN security problems but which obviously could play a much wider role in software.</FONT></P>
<P><FONT face=Tahoma>So it is just a thought but one that is good enough that I would even give it attribution had the person left a full name. :-)</FONT></P>
<P><FONT face=Tahoma>Now the original functionality was added in these the final days of the 'Whidbey' product cycle so it was really too late to add any more functionality there, and it is unclear what more could be added to Vista in the way of new features, but the idea (as evidenced by the ideas I spitballed in just a few moments two paragraphs ago!) has a lot of potential in my mind as a functionality.</FONT></P>
<P><FONT face=Tahoma>I do not know if such a function is planned, but it may already be in the works. If I hear anything I'll let you know, I think it is a truly&nbsp;intruiging thought, the potential design of which would make for a fascinating interview question, I think.... :-)</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff0000><EM>This post brought to you by</EM> "Ð°" <EM>(<A href="http://www.fileformat.info/info/unicode/char/0430/index.htm">U+0430</A>, a.k.a. CYRILLIC SMALL LETTER A)<BR><FONT size=1>(the original sponsor of the mitigation post, and a letter that truly resents those who would USE it to try to fool users of computers in any kind of phishing expedition!)</FONT></EM></FONT></P>
<hr/><p><a id="462960" href="#462960">#</a> <strong>Gabe</strong> on 9 Sep 2005 12:13 PM:</p><div style="margin-left: 1em">I don't understand how you know something is suspicious. Latin, Greek, and Cyrillic (which was based on Latin and Greek) all have similar letters. I suppose any word containing code points from multiple languages might be suspicious, but the word &quot;Spy&quot; looks the same whether written in Latin (ess, pee, wye) or Cyrillic (dze, er, u). As an English speaker, though, I wouldn't be expecting the Cyrillic characters. Would something only be suspicious if it was written in a non-native charset?</div>
<p><a id="462970" href="#462970">#</a> <strong>Stephane Rodriguez</strong> on 9 Sep 2005 12:30 PM:</p><div style="margin-left: 1em"><br>Michael,<br><br>Ever considered writing a book (&#224; la JoS?). So much good valuable reliable content.<br></div>
<p><a id="462979" href="#462979">#</a> <strong>Michael S. Kaplan</strong> on 9 Sep 2005 12:48 PM:</p><div style="margin-left: 1em">Hi Gabe -- mixed script strings in situations where they would not be expected, especially involding suspicious lookalike characters, would be the best ones to consider suspicious. How suspicious to be would drive a &quot;score&quot; that could be used to explain how serious the suspicion is....<br><br>There are certainly other unsafe things, but the phishing problem with IDN is centered right here....</div>
<p><a id="462980" href="#462980">#</a> <strong>Michael S. Kaplan</strong> on 9 Sep 2005 12:48 PM:</p><div style="margin-left: 1em">Hi Stephane -- see <a rel="nofollow" target="_new" href="http://archives.miloush.net/michkap/archive/2005/08/28/457383.html">http://blogs.msdn.com/michkap/archive/2005/08/28/457383.aspx</a> for more on me [not] writing books any time soon. :-)</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/09/09/462920.html" title="Figuring out when digit substitution is applied">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/09/09/462862.html" title="internationalizaton vs. localizability">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-09">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-09-09">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/09/09/462880.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>