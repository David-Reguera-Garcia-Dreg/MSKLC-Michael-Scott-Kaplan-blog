<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/09/16/469651.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>How long does it take you to grok this code?</title></head><body>
<h1>How long does it take you to grok this code?</h1>
<p><em>by Michael S. Kaplan, published on 2005/09/16 19:42 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/09/16/469651.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>You have to be honest if you want to play on this one. :-)</FONT></P>
<P><FONT face=Tahoma>Look at the snippet of code below, and tell me how long it takes you to grok the </FONT><FONT face=Tahoma>intent:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face="Courier New">if (!((dwFlags &amp; (GLOBAL_FLAG1 | GLOBAL_FLAG2)) &amp;&amp; (!(dwFlags &amp; GLOBAL_FLAG3)))) {<BR>&nbsp;&nbsp;&nbsp; break;<BR>}</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>I got it, but it really did take me a couple of minutes and a white board.</FONT></P>
<P><FONT face=Tahoma>This is not an interview question <STRONG>I</STRONG> would ever give, but it is of a type that I have been given once or twice....</FONT></P>
<hr/><p><a id="469673" href="#469673">#</a> <strong>Maurits [MSFT]</strong> on 16 Sep 2005 8:09 PM:</p><div style="margin-left: 1em">break if flag three is on.<br>break if flags one and two are both off.<br><br>(I despise negative assertions...)<br><br>A simpler rewrite:<br><br>if (dwFlags &amp; GLOBAL_FLAG3) { break; }<br>if (dwFlags &amp; (GLOBAL_FLAG1 | GLOBAL_FLAG2) == 0) { break; }</div>
<p><a id="469688" href="#469688">#</a> <strong>CornedBee</strong> on 16 Sep 2005 8:31 PM:</p><div style="margin-left: 1em">One minute, but I've got a lot of practice in this.</div>
<p><a id="469736" href="#469736">#</a> <strong>James Todd</strong> on 16 Sep 2005 9:42 PM:</p><div style="margin-left: 1em">30 seconds.<br><br>Really. I used my stopwatch.<br><br>If the flags have (FLAG1 and FLAG2), and it does NOT have FLAG3, then continue. Otherwise, break.</div>
<p><a id="469873" href="#469873">#</a> <strong>Centaur</strong> on 17 Sep 2005 1:00 AM:</p><div style="margin-left: 1em">Did not time, but I think I did it in under a minute. Although Iâ€™d say either the condition or its two subconditions want to move into separate boolean functions (possibly leaving the outermost ! and &amp;&amp; behind).<br><br>if (!predicate1(dwFlags) || !predicate2(dwFlags)) break;</div>
<p><a id="469878" href="#469878">#</a> <strong>An Phu</strong> on 17 Sep 2005 1:11 AM:</p><div style="margin-left: 1em">Maurits got it right.<br><br>It took me notepad.exe and two minutes.<br></div>
<p><a id="469915" href="#469915">#</a> <strong>Maurits [MSFT]</strong> on 17 Sep 2005 2:29 AM:</p><div style="margin-left: 1em">;)</div>
<p><a id="470003" href="#470003">#</a> <strong>Mike Weller</strong> on 17 Sep 2005 5:01 AM:</p><div style="margin-left: 1em">30 seconds, but it's not really that hard if you've done alot of this stuff.</div>
<p><a id="470297" href="#470297">#</a> <strong>Tim Smith</strong> on 17 Sep 2005 10:46 AM:</p><div style="margin-left: 1em">Maurits goofed.  His second statement should be:<br><br>if ((dwFlags &amp; (GLOBAL_FLAG1 | GLOBAL_FLAG2)) == 0) { break; }<br><br>If you don't mix your logical operators with numeric results and use the !(a&amp;b) = (!a|!b) rule, you can write:<br><br>if ((dwFlags &amp; (GLOBAL_FLAG1 | GLOBAL_FLAG2)) == 0 || (dwFlags &amp; GLOBAL_FLAG3) != 0)<br>{<br>break;<br>}<br><br>while is much easier to read in my opinion.  </div>
<p><a id="470374" href="#470374">#</a> <strong>Maurits [MSFT]</strong> on 17 Sep 2005 11:43 AM:</p><div style="margin-left: 1em">Yup, == binds more tightly than &amp;.  My bad.</div>
<p><a id="471675" href="#471675">#</a> <strong>Adi Oltean</strong> on 20 Sep 2005 3:45 AM:</p><div style="margin-left: 1em">&gt;&gt;&gt; if (!((dwFlags &amp; (GLOBAL_FLAG1 | GLOBAL_FLAG2)) &amp;&amp; (!(dwFlags &amp; GLOBAL_FLAG3)))) {<br>    break;<br>}<br><br>Whenever I see (!(expr1 &amp;&amp; expr2)) I immediately try to reduce it as (!expr1 || !expr2). <br><br>In our case, this helps a lot since expr2 already contains !, so the original &quot;if&quot; statement simplifies to:<br><br>if ((dwFlags &amp; (GLOBAL_FLAG1 | GLOBAL_FLAG2) == 0) || (dwFlags &amp; GLOBAL_FLAG3))) {<br>    break;<br>}<br><br>which says that if either dwFlags doesn't contain both FLAG1 &amp; FLAG2, or if dwFlags contains FLAG3, then break.<br><br>Generally, an expression is easier to follow up if you reduce it to the normal form: <br><br>(expr11 &amp;&amp; expr12 &amp;&amp; ... ) <br>|| (expr21 &amp;&amp; expr22 &amp;&amp; ... ) <br>...<br>|| (exprN1 &amp;&amp; exprN2 &amp;&amp; ... )<br><br></div>
<p><strong>Tanveer Badar</strong> on 30 Dec 2007 8:38 AM:</p><div style="margin-left: 1em"><p>~25 seconds. I had to read three times highlighting various parenthesis with mouse.</p>
<p>But then, I also finished Harry Potter and the Deathly Hallows in 10:45 hours. :)</p>
</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/09/17/469941.html" title="When is a backslash not a backslash?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/09/16/468578.html" title="Every character has a story #14: U-BOOP (BETTY BOOP)">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-09">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-09-16">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/09/16/469651.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>