<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/09/12/463560.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Theory vs. practice for Korean text collation, Redux</title></head><body>
<h1>Theory vs. practice for Korean text collation, Redux</h1>
<p><em>by Michael S. Kaplan, published on 2005/09/12 03:31 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/09/12/463560.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Back in February, I talked about <a href="http://archives.miloush.net/michkap/archive/2005/02/25/380266.html">theory vs. practice for Korean text collation</A>, comparing Microsoft's implementation of old Hangul versus the one specified by Unicode (which uses normalization to move between the Korean Jamo and the Korean Hangul syllables).</FONT></P>
<P><FONT face=Tahoma>I thought I should maybe say a little more about what is happening here.</FONT></P>
<P><FONT face=Tahoma>After all,&nbsp;I spent some time explaining that the effort is not made to give the two different Unicode Normalization forms identical weights. But I did not mention that the relative weight difference between any two strings in one Normalization form versus the other, so that the fact that the Form "C" character order</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT size=6>가<FONT face=Tahoma> </FONT></FONT><FONT face=Tahoma size=2>&lt;</FONT><FONT size=6><FONT face=Tahoma> </FONT>각<FONT face=Tahoma> </FONT></FONT><FONT face=Tahoma size=2>&lt;</FONT><FONT size=6><FONT face=Tahoma> </FONT>힢<FONT face=Tahoma> </FONT></FONT><FONT face=Tahoma><FONT size=2>&lt;</FONT><FONT size=6> </FONT></FONT><FONT size=6>힣</FONT> 
<P></P>
<P><FONT face=Tahoma><STRONG><A href="http://www.fileformat.info/info/unicode/char/ac00/index.htm">ac00</A></STRONG>&nbsp; <FONT size=2>&lt;</FONT> <STRONG><A href="http://www.fileformat.info/info/unicode/char/ac01/index.htm">ac01</A></STRONG> <FONT size=2>&lt;</FONT> <STRONG><A href="http://www.fileformat.info/info/unicode/char/d7a2/index.htm">d7a2</A></STRONG> <FONT size=2>&lt;</FONT> <STRONG><A href="http://www.fileformat.info/info/unicode/char/d7a3/index.htm">d7a3</A></STRONG> </FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>means that the Form "D" character order will also be the same.</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT size=6>가<FONT face=Tahoma> <FONT size=2>&lt;</FONT></FONT><FONT size=6><FONT face=Tahoma> </FONT></FONT>각<FONT face=Tahoma> <FONT size=2>&lt;</FONT></FONT><FONT size=6><FONT face=Tahoma> </FONT></FONT>힢<FONT face=Tahoma> <FONT size=2>&lt;</FONT></FONT><FONT size=6><FONT face=Tahoma> </FONT></FONT>힣</FONT></P>
<P><FONT face=Tahoma><STRONG><A href="http://www.fileformat.info/info/unicode/char/1100/index.htm">1100</A> <A href="http://www.fileformat.info/info/unicode/char/1161/index.htm">1161</A></STRONG> <FONT size=2>&lt;</FONT> <STRONG><A href="http://www.fileformat.info/info/unicode/char/1100/index.htm">1100</A> <A href="http://www.fileformat.info/info/unicode/char/1161/index.htm">1161</A> <A href="http://www.fileformat.info/info/unicode/char/11a8/index.htm">11a8</A></STRONG> <FONT size=2>&lt;</FONT> <STRONG><A href="http://www.fileformat.info/info/unicode/char/1112/index.htm">1112</A> <A href="http://www.fileformat.info/info/unicode/char/1175/index.htm">1175</A> <A href="http://www.fileformat.info/info/unicode/char/11c1/index.htm">11c1</A></STRONG> <FONT size=2>&lt;</FONT> <STRONG><A href="http://www.fileformat.info/info/unicode/char/1112/index.htm">1112</A> <A href="http://www.fileformat.info/info/unicode/char/1175/index.htm">1175</A> <A href="http://www.fileformat.info/info/unicode/char/11c2/index.htm">11c2</A></STRONG></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>Now as I said the actual absolute weights <EM>will</EM> be different if you are looking at the sort keys, but this is okay since in practice the two forms are not really compared against each other. The fact that the relative weights will be the same is good enough for the real world data that would exist for Korean customers.</FONT></P>
<P><FONT face=Tahoma>(The typographic support for Korean Jamo is not yet there anyway!)</FONT></P>
<P><FONT face=Tahoma>By the way, for those who need it to work for them, the Unicode solution will work as well! As I discussed in the&nbsp;<a href="http://archives.miloush.net/michkap/archive/2005/08/20/454144.html">Mitigation tools for IDN security problems</A>&nbsp;post, the Unicode normalization functions that have been added to the NLS API have been provided for customers running downlevel of Vista. Simply install the tools and both the <A href="http://msdn.microsoft.com/library/en-us/intl/nls_normalize_string.asp">NormalizeString</A>&nbsp;and <A href="http://msdn.microsoft.com/library/en-us/intl/nls_is_normalized_string.asp">IsNormalizedString</A>&nbsp;funtions will be available to use. And since they are completely conformant with Unicode 4.1, you can use them to convert strings if you truly need to do so.</FONT></P>
<P><FONT face=Tahoma>For those of you using managed code, the .NET Framework 2.0 (a.k.a. Whidbey) also has the Unicode Normalization functionality, in the <A href="http://msdn2.microsoft.com/en-us/library/tawttsa3">System.String.Normalize</A> and <A href="http://msdn2.microsoft.com/en-us/library/h74026h0">System.String.IsNormalized</A> methods. They are also completely conformant to the Unicode 4.1 definition.</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff0000><EM>This post brought to you by</EM> "<FONT face="Times New Roman">ᇂ</FONT>" <EM>(U+11c2, a.k.a. HANGUL JONGSEONG HIEUH)<BR><FONT size=1>(a character that looks&nbsp;a lot like HANGUL JUNGSEONG I (U+1175), though since one&nbsp;is a trailing jamo and the other is a vowel jamo, they will never sort as exactly the same!)</FONT></EM></FONT></P>
<hr/><p><a id="466068" href="#466068">#</a> <strong>kurakuraninja</strong> on 14 Sep 2005 10:16 AM:</p><div style="margin-left: 1em">Last February and then again the day before yesterday I talked a bit about how Korean was encoded...</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/04/20 <a href="http://archives.miloush.net/michkap/archive/2010/04/20/9998063.html">You can't get this particular bit of proverbial toothpaste back into the tube</a></p><p>2008/03/03 <a href="http://archives.miloush.net/michkap/archive/2008/03/03/7984960.html">On reversing the irreversible (grabbing the data, part II: the weirdness not so related to locales)</a></p><p>2005/09/14 <a href="http://archives.miloush.net/michkap/archive/2005/09/14/463569.html">One more thing about Korean....</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/09/12/463991.html" title="Is Kana &#39;alphabetic&#39; ? Depends on who you ask....">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/09/12/463483.html" title="How does Microsoft assign new collation weights?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-09">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-09-12">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/09/12/463560.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>