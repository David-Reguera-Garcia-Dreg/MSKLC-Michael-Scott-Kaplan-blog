<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/09/12/463991.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Is Kana 'alphabetic' ? Depends on who you ask....</title></head><body>
<h1>Is Kana 'alphabetic' ? Depends on who you ask....</h1>
<p><em>by Michael S. Kaplan, published on 2005/09/12 10:20 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/09/12/463991.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>In the microsoft.public.win32.programmer.international newsgroup, Christian Kaiser asked:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face=Tahoma><FONT face="Times New Roman">Given the appended small program, I can test whether a Unicode character is AlphaNumerical or not.</FONT></FONT></P>
<P><FONT face=Tahoma><FONT face="Times New Roman" size=2><EM>If I call it using Half-Width Katakana (arg "0xff66" for example), IsCharAlphaNumericW() returns '0' - but according to the Unicode specs (</EM></FONT><A href="http://www.unicode.org/Public/UNIDATA/UnicodeData.txt"><FONT face="Times New Roman" size=2><EM>http://www.unicode.org/Public/UNIDATA/UnicodeData.txt</EM></FONT></A><FONT face="Times New Roman" size=2><EM>), this is a letter:</EM></FONT></FONT></P>
<P><FONT face="Courier New" size=2>FF66;HALFWIDTH KATAKANA LETTER WO;Lo;0;L;&lt;narrow&gt; 30F2;;;;N;;;;;</FONT></P>
<P><FONT face=Tahoma><FONT face="Times New Roman" size=2><EM>Do I make a mistake, or are the internal Unicode chartype pages in Windows wrong? We have a very important customer who has problems because of this...</EM></FONT></FONT></P>
<P><FONT face=Tahoma><FONT face="Times New Roman" size=2><EM>System: Window XP SP2, newest patches applied</EM></FONT></FONT></P>
<P><FONT face=Tahoma><FONT face="Times New Roman" size=2><EM>BTW: GetStringType() does return the correct information:</EM></FONT></FONT></P>
<P><FONT face=Tahoma><FONT face="Times New Roman" size=2><EM>IsCharAlphaNumeric(0xff66) -&gt; 0<BR>GetStringTypeW(1) -&gt; 0x300<BR>GetStringTypeW(3) -&gt; 0x8050</EM></FONT></FONT></P>
<P><FONT face=Tahoma><FONT face="Times New Roman" size=2><EM>Strange? I think yes.</EM></FONT></FONT></P>
<P><FONT face=Tahoma><FONT face="Times New Roman" size=2><EM>Christian</EM></FONT></FONT></P>
<P><FONT face=Tahoma><FONT face="Times New Roman" size=2><EM>----</EM></FONT></FONT></P>
<P><FONT face="Courier New" size=2>#include &lt;windows.h&gt;<BR>#include &lt;tchar.h&gt;<BR>#include &lt;stdio.h&gt;<BR><BR>void main(int arg, char* argv[])<BR>{<BR>&nbsp;&nbsp;&nbsp; WCHAR n = strtol(argv[1],NULL,0);<BR>&nbsp;&nbsp;&nbsp; WORD n1 = 0;<BR><BR>&nbsp;&nbsp;&nbsp; printf("IsCharAlphaNumeric(0x%04x) -&gt; %d\n",n,IsCharAlphaNumericW(n));<BR>&nbsp;&nbsp;&nbsp; if (GetStringTypeW(CT_CTYPE1,&amp;n,1,&amp;n1))<BR>&nbsp;&nbsp;&nbsp; printf("GetStringTypeW(1) -&gt; 0x%x\n",n1);<BR>&nbsp;&nbsp;&nbsp; if (GetStringTypeW(CT_CTYPE3,&amp;n,1,&amp;n1))<BR>&nbsp;&nbsp;&nbsp; printf("GetStringTypeW(3) -&gt; 0x%x\n",n1);<BR>}</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>Christian is right about the difference between the NLS function and IsCharAlphaNumeric.</FONT></P>
<P><FONT face=Tahoma>According to the NLS function:</FONT></P>
<UL>
<LI><FONT face=Tahoma>CT_CTYPE1 to GetStringTypeW returns 0x0300&nbsp;(C1_ALPHA | C1_DEFINED).</FONT></LI>
<LI><FONT face=Tahoma>CT_CTYPE1 to GetStringTypeW returns 0x8050 (C3_KATAKANA | C3_HALFWIDTH | C3_ALPHA).</FONT></LI></UL>
<P><FONT face=Tahoma>so according to NLS, this character is a halfwidth&nbsp;katakana character and it is alphabetic.</FONT></P>
<P><FONT face=Tahoma>However, the logic in IsCharAlphaNumeric explicitly checks to make sure it is either C1_ALPHA or C3_ALPHA and <STRONG>not</STRONG> either C3_KATAKANA or C3_HIRAGANA. So clearly, according to user32.dll neither Hiragana nor Katakana is alphabetic.</FONT></P>
<P><FONT face=Tahoma>Now whether Christian is correct about Unicode's take on the situation is a little less clear -- a general category of Lo (Letter, Other) does not necessarily mean Alphabetic (there is no specific rule as to the meaning of general category via-a-vis a character being alphabetic or not, although Mark Davis of Unicode and others are trying to write up guidelines to&nbsp;map Unicode character data to POSIX style categorizations like Alphabetic for implementations).</FONT></P>
<P><FONT face=Tahoma>So the answer to the question is that it depends on who you ask. Perhaps the best answer is to call GetStringType yourself and decide rather than using the user32.dll Is* function wrappers. Because it seems like every time someone tries to wrap our functions to make it easier, something becomes more complicated....</FONT></P>
<hr/><p><a id="464010" href="#464010">#</a> <strong>Nicholas Allen</strong> on 12 Sep 2005 10:57 AM:</p><div style="margin-left: 1em">That certainly seems like an unhelpful stretching of the meanings of 'alphabet' and 'letter'.  New words were created to distinguish the mechanics of various written languages.  Now, the same term is being used with all languages.  This defeats the original purpose of categorizing things.</div>
<p><a id="464014" href="#464014">#</a> <strong>Michael S. Kaplan</strong> on 12 Sep 2005 11:24 AM:</p><div style="margin-left: 1em">Hi Nicholas -- Which part does not seem helpful, exactly?</div>
<p><a id="464085" href="#464085">#</a> <strong>Nicholas Allen</strong> on 12 Sep 2005 2:06 PM:</p><div style="margin-left: 1em">I guess I'm just fustrated by the solution to this problem.<br><br>We have a relatively new standard that divides symbols up into various categories.  We have old standards that divide symbols up among different sets of categories.  Each are derived from commonly shared linguistic understanding.<br><br>Obviously, things are not going to work out perfectly when it comes to relating the old and new standards.  However, instead of bending the standards to fit, people are trying to bend the definitions of the original words.  <br><br>Now, because of that, I don't know what you mean when say 'letter' or 'alphabet'.  That makes it difficult to hold a discussion.<br><br>Worse, by settling for having multiple interpretations, I can't actually trust software libraries to do anything for me.  Having to decide everything myself is a waste of my time and creates yet another interpretation that people will have to deal with.</div>
<p><a id="464097" href="#464097">#</a> <strong>Michael S. Kaplan</strong> on 12 Sep 2005 2:35 PM:</p><div style="margin-left: 1em">The NLS definition gives you the exact info on what it is. And if you call anything in Japanese the &quot;letters&quot;, you call the Kana that. So I would call them the alphabet for Japanese.<br><br>Note that the main thing I am doing is pointing out the more limited scope in the user32 wrapper. :-)</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2011/11/21 <a href="http://archives.miloush.net/michkap/archive/2011/11/21/10239128.html">One disadvantage to being supplementary...or Japanese?</a></p><p>2011/05/31 <a href="http://archives.miloush.net/michkap/archive/2011/05/31/10169732.html">f y cn rd ths, thn cd tht strps yr vwls my nt bther y s mch....</a></p><p>2008/06/29 <a href="http://archives.miloush.net/michkap/archive/2008/06/29/8666513.html">If they say "it's all relative" then remind them it is not a coincidence that there is a show called Relative Madness on TV</a></p><p>2007/06/19 <a href="http://archives.miloush.net/michkap/archive/2007/06/19/3396819.html">IsCharSomethingOrOther?</a></p><p>2006/10/20 <a href="http://archives.miloush.net/michkap/archive/2006/10/20/847933.html">Complex string mapping</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/09/12/464327.html" title="You probably don&#39;t want to use Microsoft&#39;s code page 21027">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/09/12/463560.html" title="Theory vs. practice for Korean text collation, Redux">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-09">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-09-12">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/09/12/463991.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>