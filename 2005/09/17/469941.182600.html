<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/09/17/469941.182600.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>When is a backslash not a backslash?</title></head><body>
<h1>When is a backslash not a backslash?</h1>
<p><em>by Michael S. Kaplan, published on 2005/09/17 00:01 -07:00, original URI: http://blogs.msdn.com/michkap/archive/2005/09/17/469941.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostOld -->
<P><FONT face=Tahoma>The character in question is <A href="http://www.fileformat.info/info/unicode/char/005c/index.htm">U+005c</A>, the REVERSE SOLIDUS, also known as the backslash or '\'. It is the path separator for Windows, which is encoded at 0x5c across all of the ANSI code pages.</FONT></P>
<P><FONT face=Tahoma>Since path separators are a pretty important requirement, the title of this post may seem a little scary -- how could it not be a backslash, a reverse solidus?</FONT></P>
<P><FONT face=Tahoma>Well, on Japanese code page 932, 0x5c is the YEN SIGN, and on Korean code page 949, 0x5c is the WON SIGN.</FONT></P>
<P><FONT face=Tahoma>Which is not to say that 0x5c does not act as&nbsp;a path separator -- it still does. And which is also not to say that the Unicode code points for the Yen and the Won (<A href="http://www.fileformat.info/info/unicode/char/00a5/index.htm">U+00a5</A> and <A href="http://www.fileformat.info/info/unicode/char/20a9/index.htm">U+20a9</A>) do act as path separators -- because they do not.</FONT></P>
<P><FONT face=Tahoma>Of course the natual round trip mapping between <A href="http://www.fileformat.info/info/unicode/char/005c/index.htm">U+005c</A> and 0x5c happens on all code pages, and both <A href="http://www.fileformat.info/info/unicode/char/00a5/index.htm">U+00a5</A> and <A href="http://www.fileformat.info/info/unicode/char/20a9/index.htm">U+20a9</A> have one-way 'best fit' mappings to 0x5c on their respective code pages. This requirement technically went away with Unicode, when the characters were encoded separately.</FONT></P>
<P><FONT face=Tahoma>However, the issue is not a simple one of there not being space in the old code page and lots of space in Unicode, where customers will instantly move away from the not backslash path separators.</FONT></P>
<P><FONT face=Tahoma>In practice, after many years of code page based systems in Japan and Korea using their respective currency symbols as the path separators, it is believed customers were simply used to this appearance. And there was therefore&nbsp;little interest in changing that appearance (when the system settings were Japanese or Korean) to anything but those symbols.</FONT></P>
<P><FONT face=Tahoma>To support this expectation, Japanese and Korean fonts, whenever the default system locale is set to Japanese or Korean, respectively, will display the currency symbol rather than the backslash when U+005c is shown.</FONT></P>
<P><FONT face=Tahoma>But whether or not this is really what customers want is still an open question. Andrew Tuck of PSS here at Microsoft noted:</FONT></P><FONT face=Tahoma><FONT face="Times New Roman" size=2>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><EM>When one of my customer’s from Korea was visiting here, I asked him if it bothered him that the backslash doesn’t appear as a backslash. It did bother him, and he believes it bothers most of his countrymen. However, he was fatalistic about it, "What can we do to change it. It’s been this way for a long time. We are used to it."</EM></P></BLOCKQUOTE></FONT></FONT>
<P><FONT face=Tahoma>Hardly a glowing recommendation, is it?</FONT></P>
<P><FONT face=Tahoma>And as Norman Diamond noted in his comments on this very blog (in <a href="http://archives.miloush.net/michkap/archive/2004/12/14/284838.html">this post</A>), there are plenty of people in Japan who may not care for the convention, either.</FONT></P>
<P><FONT face=Tahoma>Of course there is no 'right' answer here, and I would imagine that you would find plenty of people who would be unhappy with such&nbsp;a change, just as there are those who would be unhappy with the status quo. Which perhaps explains why the status quo seems to be as it is -- those people who would like a change&nbsp;are resigned to the idea that it may never happen. And so they are now used&nbsp; to it....</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff1493><EM>This post brought to you by</EM> "<FONT size=5>\</FONT>", "<FONT size=5>¥</FONT>", <EM>and</EM> "<FONT size=5>₩</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/005c/index.htm">U+005c</A>, <A href="http://www.fileformat.info/info/unicode/char/00a5/index.htm">U+00a5</A>, and <A href="http://www.fileformat.info/info/unicode/char/20a9/index.htm">U+20a9</A>, a.k.a. REVERSE SOLIDUS,&nbsp;YEN SIGN, and WON SIGN)</EM></FONT></P>
<hr/><p><a id="470086" href="#470086">#</a> <strong>Chris Lundie</strong> on Saturday, September 17, 2005 6:07 AM:</p><div style="margin-left: 1em">Interesting and confusing! I fired up Word, changed the font to MS Gothic, typed a backslash and indeed it displays a Yen symbol. Changing back to Times, it looks like a backslash again.</div>
<p><a id="470255" href="#470255">#</a> <strong>Michael S. Kaplan</strong> on Saturday, September 17, 2005 9:59 AM:</p><div style="margin-left: 1em">Hi Chris -- well, if nothing else, it helps give confidence in the idea that the actual code point value does not change, even if the representative glyph does....</div>
<p><a id="470392" href="#470392">#</a> <strong>Ben Bryant</strong> on Saturday, September 17, 2005 11:50 AM:</p><div style="margin-left: 1em">So when you convert a string like &quot;Yen 100&quot; (where Yen is the symbol) from Shift-JIS to Unicode, the Yen becomes a backslash, and the fact that it was a Yen is unknown. But most users are not the wiser because their font shows the backslash as a Yen. This is bad! I suppose most Japanese Unicode databases must have some major backslash Yen confusion where you might have to implement a policy across unrepaired data like if you know the string is a file path treat U+005c as a backslash, otherwise as a Yen U+20a9. And Unicode string functions that search for the Yen probably are sometimes implemented due to user demand to cheat and look for the backslash too. Crazy stuff.<br>Btw, the Korean ks_c_5601-1987 has an encoding for the Yen, but Japanese Shift-JIS doesn't have one for the Won.<br></div>
<p><a id="470419" href="#470419">#</a> <strong>Michael S. Kaplan</strong> on Saturday, September 17, 2005 12:06 PM:</p><div style="margin-left: 1em">Hi Ben -- Although I admit the situation is not ideal, I think it is pretty obvious that the situation would be a *lot* worse if there were no path separators since that would pretty much destroy a lot more.<br><br>And it was not really up to anyone but JIS to decide what should be done in the Japanese encoding.<br><br>Though if you are using Unicode then you can use the actual Yen character and call it a day! :-)</div>
<p><a id="470461" href="#470461">#</a> <strong>Ben Bryant</strong> on Saturday, September 17, 2005 12:39 PM:</p><div style="margin-left: 1em">Thanks for the quick reply. But you almost answer as if I was blaming you or anyone. No, I agree the right choice was made in the JIS to Unicode conversion; I am just chiming in on the fact that it is a problematic situation. I do take comfort in the fact that the code point 5c is not changed. Anyway, encoding systems are full of these ideosyncracies, but the strange thing about this one is that it involves fonts. So many layers of complexity: a character set can be represented in different encodings and displayed differently by different fonts, what fun!</div>
<p><a id="470492" href="#470492">#</a> <strong>Michael S. Kaplan</strong> on Saturday, September 17, 2005 12:57 PM:</p><div style="margin-left: 1em">No worries, Ben -- I was not taking it as blame or anything. :-)</div>
<p><a id="472326" href="#472326">#</a> <strong>Claus Brod</strong> on Wednesday, September 21, 2005 10:54 AM:</p><div style="margin-left: 1em">Thanks for the interesting post. I've come across another slightly surprising conversion - the tilde character (0x7e) is mapped 1:1 when converting from CP932 to, say, UTF16 (MultiByteToWideChar). However, when I use libiconv to convert a tilde character, and tell it that the source encoding is &quot;SJIS&quot;, it will map the tilde to U+203E. I found a few slightly mysterious references to this behavior, but nothing that would really explain the reasoning behind this mapping...<br><br>Claus<br></div>
<p><a id="481057" href="#481057">#</a> <strong>Steve Loughran</strong> on Friday, October 14, 2005 10:29 AM:</p><div style="margin-left: 1em">This is fascinating. Of course, the whole fact that DOS-derived platforms use \ as a dir separator is iself a bit of a mess -I've always assumed it was because DOS 1.x used / as an argument prefix, so when directories came along in 2.0, they had to use a different char. This is just another unintended consequence of the first, well, error.</div>
<p><a id="481065" href="#481065">#</a> <strong>Rune</strong> on Friday, October 14, 2005 10:40 AM:</p><div style="margin-left: 1em">IIRC, the backslash maps to &quot;&#216;&quot; using a norwegian codepage with 7-bit ASCII. Later (8-bit codepage 865) the &#216; moved to the same spot normally inhabited by the Yen sign (american cp 437).<br><br>So a backslash is probably a lot of things around the world, historically speaking.<br><br>-- <br>Rune</div>
<p><a id="481134" href="#481134">#</a> <strong>Craig Ringer</strong> on Friday, October 14, 2005 1:14 PM:</p><div style="margin-left: 1em">Quite frankly, these days I begin to think that having common characters as path and argument separators is anachronistic and pretty nasty. Any possible choice from the standard character set will be largely arbitrary and will impair &quot;legitimate&quot; use of those characters. It's necessary due to all the legacy code out there and it'd be an unpleasant thing to try to change to dedicated symbols, but that doesn't make it any nicer.<br><br>Nonetheless, I still find it annoying that  \ (or / on UNIX, or : on Mac OS &lt; 10) are &quot;special&quot; to the system and can't be used in filenames. Similarly the need to quote &quot;multi word arguments&quot; seems silly these days. Dedicated delimeters just for those two purposes, and nothing else, would seem a much nicer way to do it if we got the option to do it all again.<br><br>Alas, it's unlikely to ever happen. We'll still want to use 7-bit ASCII serial terminals, still want to use ancient systems that don't understand utf-8 or UCS-2, and so on. Anyway, I swear every time I have to use \these\silly\paths , just as I'm sure many folks here find /these/paths/very/annoying ; getting used to someːotherːpathːseparator (obviously not actually ː , I just use that as an example) would be pretty irritating. Especially having to use some sort of compose sequence or shortcut to type it on &quot;legacy&quot; keyboards...</div>
<p><a id="481161" href="#481161">#</a> <strong>andypennell</strong> on Friday, October 14, 2005 2:02 PM:</p><div style="margin-left: 1em">Why was \ the dir separator in DOS? A friend of a friend once bought a big wooden desk from a sale on Microsoft campus in the early 90s. The desk had not been cleared out: inside it was a pice of paper containing discussion notes on which separator should be used. IBM was mentioned, but I cannot recall the rest of the details.</div>
<p><a id="481184" href="#481184">#</a> <strong>mikeb</strong> on Friday, October 14, 2005 2:47 PM:</p><div style="margin-left: 1em">As far as the '\' character being used as the path separator in DOS (starting with DOS 2.0, since 1.x did not support sub directories), I would have to agree with Steve Loughran that the fact that DOS commands used '/' as a command line option 'switch character' is probably the number 1 reason.<br><br>Remember that internally and at the API level DOS supports using either '/' or '\' as a path separator (I'm not sure if this agnosticism goes all the way back to DOS 2.0) - it's applications that don't like '/'.<br><br>Also remember that early versions of DOS supported setting the 'switch character' to something other than '/'.  Unfortunately each DOS application is responsible for parsing it's command line, and virtually no 3rd party applications supported the switch character setting (Microsoft applications may have been guilty of this, too).  <br><br>At some point MS removed the set switch char API - a *very* rare thing for Microsoft to do (just ask Raymond Chen).  I mean, the old CP/M compatibility DOS calls are still supported even in the WinXP VDM.<br></div>
<p><a id="481275" href="#481275">#</a> <strong>Dewi Morgan</strong> on Friday, October 14, 2005 7:06 PM:</p><div style="margin-left: 1em">Mikeb points out that the problem with path parsing is that it depends on the applications to support it.<br><br>It seems strange that people aren't offered a choice of visual style nowadays, though, since 4c is the character that applications expect.<br><br>Just need a little checkbox in windows versions affected by the 0x4c issue:<br><br>[ ] Display path separator as '\'<br><br>So that wherever 4c was displayed, a '\' would be shown instead of a currency symbol.</div>
<p><a id="481283" href="#481283">#</a> <strong>Michael S. Kaplan</strong> on Friday, October 14, 2005 7:37 PM:</p><div style="margin-left: 1em">I think you meant 0x5c/U+005c, right? :-)<br><br>You do have a choice -- this only happens with CJK fonts....</div>
<p><a id="481321" href="#481321">#</a> <strong>foxyshadis</strong> on Friday, October 14, 2005 11:07 PM:</p><div style="margin-left: 1em">I suppose you could use a tool (eg, fontographer or fontforge) to replace 0x5c in your favorite fonts (tahoma, ms sans serif, maybe times, arial, and verdana) with your favorite path separator. Oh, and paint over your keyboard's \ key. That would be an amusing extension of 'skinning' the OS. =p</div>
<p><a id="481392" href="#481392">#</a> <strong>koji</strong> on Saturday, October 15, 2005 8:19 AM:</p><div style="margin-left: 1em">IIRC, if you go back a little further, ASCII defines 0x5c as one of the &quot;localizable&quot; code point, and that is why several countries have several different glyphs here.<br><br>DOS 2 made a mistake by choosing such a localizable code point as the path separator. Well, I don't think anyone can blame on it though.<br><br>Whether we should fix this glyph or not is as good open question as whether we should fix the path separator to &quot;/&quot;, which is not a localizable code point in ASCII.<br><br>And, although both are good questions, I don't think anyone could fix either.</div>
<p><a id="6119620" href="#6119620">#</a> <strong>not given</strong> on Sunday, November 11, 2007 6:02 PM:</p><div style="margin-left: 1em"><p>Was a work around ever found for this issue? Is there a way to keep Japanese language support in Windows and have the backslash ( \ ) display correctly in address fields instead of the yen symbol?</p>
<p>It works correctly when typing in fourms, but not in the address fields? Why is this?</p></div>
<p><a id="6119801" href="#6119801">#</a> <strong>Michael S. Kaplan</strong> on Sunday, November 11, 2007 6:09 PM:</p><div style="margin-left: 1em"><p>It is all about the font selected and sometimes the technology doing the rendering -- and for every person who considers one behavior to be a bug, there is another who thinks the other is a bug.</p>
<p>Which essentially makes it unfixable, at least for everyone....</p></div>
<p><a id="6997509" href="#6997509">#</a> <strong>Mike</strong> on Saturday, January 05, 2008 6:26 PM:</p><div style="margin-left: 1em"><p>I got the same thing, after playing Clannad the primary fonts seem to be MS Gothic lol, yet it still types as \ here.</p></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2013/10/31 <a href="http://archives.miloush.net/michkap/archive/2013/10/31/10460718.html">At long last, explaining the yen/won/backslash bug plausibly</a></p><p>2007/10/18 <a href="http://archives.miloush.net/michkap/archive/2007/10/18/5512709.html">Trying to get people to use Unicode? Lock and load, baby!</a></p><p>2007/03/28 <a href="http://archives.miloush.net/michkap/archive/2007/03/28/1972239.html">A yen for Yen may be left unsatiated</a></p><p>2006/05/26 <a href="http://archives.miloush.net/michkap/archive/2006/05/26/608230.html">Two chickens in every pot, and an ASCII in every code page</a></p><p>2006/03/17 <a href="http://archives.miloush.net/michkap/archive/2006/03/17/553499.html">On the fuzzier definition of a 'Unicode application' on Win9x....</a></p><p>2005/11/01 <a href="http://archives.miloush.net/michkap/archive/2005/11/01/487665.html">I WON to talk about the YEN</a></p><p>2005/10/14 <a href="http://archives.miloush.net/michkap/archive/2005/10/14/481087.html">The mission of GIFT</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/09/17/469941.html" title="When is a backslash not a backslash?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/09/16/469651.html" title="How long does it take you to grok this code?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-09">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-09-17">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/09/17/469941.182600.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>