<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/09/11/463672.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Fonts that are 'fixed-width' even if they do not claim to be</title></head><body>
<h1>Fonts that are 'fixed-width' even if they do not claim to be</h1>
<p><em>by Michael S. Kaplan, published on 2005/09/11 23:30 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/09/11/463672.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>When you obtain a font in Windows (whether by <A href="http://msdn.microsoft.com/library/en-us/gdi/fontext_8fp0.asp">CreateFont</A>, <A href="http://msdn.microsoft.com/library/en-us/gdi/fontext_4rw4.asp">CreateFontIndirect</A>, <A href="http://msdn.microsoft.com/library/en-us/gdi/fontext_7mm0.asp">CreateFontIndirectEx</A>, any of the font enumeration functions, or whatever your preferred method is), you will almost always have the option of asking for a FIXED_PITCH font in the fdwPitchAndFamily member. The purpose of this is to give you a font with fixed width letters, <FONT face="Courier New"><STRONG>such as the inestimatable Courier New</STRONG></FONT>. The most striking characteristic of these fonts is that every letter has the same width, from the very thin <STRONG>lowercase i</STRONG> to the thickest <STRONG>uppercase W</STRONG>.</FONT></P>
<P><FONT face=Tahoma>Now of course there are many complex script languages that can be quite a challenge when it comes to designing a fixed width font due to the re-ordering, shaping, and/or stacking behavior in the underlying script, but that can be a topic for another day....</FONT></P>
<P><FONT face=Tahoma>Today I am going to talk bout a whole class of fonts that are fixed width in a different way -- some of the fonts for Chinese, Japanese, and Korean. They cannot be requested via a FIXED_PITCH since they are technically not fixed width fonts -- they have two widths:</FONT></P>
<UL>
<LI><FONT face=Tahoma>One for "full width" characters such as ideographs, Hangul, Jamo, Kana, and full width letters and digits;</FONT> 
<LI><FONT face=Tahoma>One for "half width" characters such as all of the non-ideographic language characters and the halfwidth Jamo and Kana.</FONT></LI></UL>
<P><FONT face=Tahoma>By convention, the characters in the full width category are twice as wide as those in the half width category, and as far as I know there is not an intrinsic property of fonts that identifies these "split level" fixed width fonts.</FONT></P>
<P><FONT face=Tahoma>As I mentioned <a href="http://archives.miloush.net/michkap/archive/2005/05/05/414845.html">here</A>&nbsp;and <a href="http://archives.miloush.net/michkap/archive/2005/06/24/432121.html">here</A>, while this was once more of a legacy, encoding based issue (the half width characters were literally the one-byte characters in an otherwise double byte code page for languages like Japanese and Korean), this is obviously no longer the case in Unicode (where all of the relevant characters will need the same number of bytes). However, it is very much an aesthetic issue, where in many contexts characters such as the full width Katakana are described as less pleasant visually.</FONT></P>
<P><FONT face=Tahoma>The first time I ran across that particular issue is when I was working on the Microsoft Access team, where all of the Access&nbsp;property descriptions are listed twice. These dual descriptions are identical for almost all languages but in Japanese the strings that show up in the property sheet use halfwidth katakana, while in other places the fulldwidth katakana strings are used.&nbsp;At the time I asked&nbsp;why they did not just use LCMapString to convert the string, and it was pointed out to me that this would potentially convert ASCII letters, digits, and punctuation&nbsp;to their fullwidth equivalents, which was not really a good idea....</FONT></P>
<P><FONT face=Tahoma>(As an aside, <a href="http://blogs.msdn.com/jesperh/">Jesper Holmberg</A>&nbsp;once told me a story about a localizer who found that none of the inserts were working in strings after they were localized for a managed application. It turns out that they were taking the curly braces used for the inserts (e.g. {0}, {1}, etc.) and converting them to their full width equivalents, converting <A href="http://www.fileformat.info/info/unicode/char/007b/index.htm">U+007b</A> and <A href="http://www.fileformat.info/info/unicode/char/007d/index.htm">U+007d</A> to <A href="http://www.fileformat.info/info/unicode/char/ff5b/index.htm">U+ff5b</A> and <A href="http://www.fileformat.info/info/unicode/char/ff5d/index.htm">U+ff5d</A>. No wonder the inserts did not work!)</FONT></P>
<P><FONT face=Tahoma>Anyway, I thought about posting all of this after reading the post that <a href="http://blogs.msdn.com/buckh/">Buck Hodges</A>&nbsp;did earlier on figuring out <a href="http://blogs.msdn.com/buckh/archive/2005/09/11/463427.aspx">how wide is a string when displayed in the console window</A>, which is a practical application of when you may well need to know this information. Note Buck's final function:</FONT></P>
<P><FONT face="Courier New"><STRONG>&nbsp;&nbsp;&nbsp; static int CalculateConsoleWidth(String text)<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Encoding encoding = Console.Out.Encoding;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (encoding.IsSingleByte)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return text.Length;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return encoding.GetByteCount(text);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }</STRONG></FONT></P>
<P><FONT face=Tahoma>Funny how it ends up using those encoding roots where this half/full width stuff all started, huh? :-)</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff0000><EM>This post brought to you by</EM> "<FONT face="Courier New" size=5><STRONG>｛</STRONG></FONT>" <EM>and</EM> "<FONT face="Courier New" size=5><STRONG>｝</STRONG></FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/ff5b/index.htm">U+ff5b</A> and <A href="http://www.fileformat.info/info/unicode/char/ff5d/index.htm">U+ff5d</A>, a.k.a. FULLWIDTH LEFT AND RIGHT CURLY BRACKETS)</EM></FONT></P>
<hr/><p><a id="463884" href="#463884">#</a> <strong>Dean Harding</strong> on 12 Sep 2005 3:05 AM:</p><div style="margin-left: 1em">Oooh, now I understand!  I saw his post in the main MSDN blogs feed, but I couldn't work out what it was trying to do...<br><br>Now it makes sense - the full-width characters actually take up two columns in the Console, so when you calculate how many columns a string is going to occupy, you need to count the full-width characters twice!<br><br>Thanks, Michael :-)</div>
<p><a id="463941" href="#463941">#</a> <strong>Rosyna</strong> on 12 Sep 2005 6:41 AM:</p><div style="margin-left: 1em">This makes me think of something. What happens to fixed width fonts if the ideal metrics do no match the device metrics?</div>
<p><a id="463944" href="#463944">#</a> <strong>Michael S. Kaplan</strong> on 12 Sep 2005 6:56 AM:</p><div style="margin-left: 1em">Excellent question, Rosyna -- obviously in such a 'negotitaion' the device metrics win since they represent the reality of what can show up on the screen. I wonder how often the font gets blamed in such situations for a lousy appearance?</div>
<p><a id="464043" href="#464043">#</a> <strong>Mihai</strong> on 12 Sep 2005 12:33 PM:</p><div style="margin-left: 1em">CJKV typography is way more complicated than &quot;boxes&quot; and &quot;half boxes.&quot; There are also proportional versions of the font (the MS Pxxx version in the MS fonts).<br>See Ken Lunde's &quot;CJKV Information Processing&quot; (ISBN: 1565922247)<br><br>Then, LCMapString can be used to convert only the Kana to the wide version. I did this for a lot of applications when MS changed the Windows UI from using the narrow kana (Windows 3.x) to wide Kana (Windows 95).<br><br></div>
<p><a id="464045" href="#464045">#</a> <strong>Rosyna</strong> on 12 Sep 2005 12:34 PM:</p><div style="margin-left: 1em">Too often, honestly. However, it becomes REALLY murky when one version of a fixed width font looks great, but then a later version looks like crap because ideal is nothing like device and the snapping causes the fixed part to be lost. But was it because the font stopped lying about its metrics, changed its metrics, or just stopped caring? We need the tootsie roll owl to find that answer (or someone willing to go into all the font tables).</div>
<p><a id="464096" href="#464096">#</a> <strong>Michael S. Kaplan</strong> on 12 Sep 2005 2:32 PM:</p><div style="margin-left: 1em">Mihai -- Yes, I know, but it all started when we talked about the console. ;-)<br><br>Rosyna -- But where is the owl?!?</div>
<p><a id="464177" href="#464177">#</a> <strong>Mihai</strong> on 12 Sep 2005 5:31 PM:</p><div style="margin-left: 1em">MichKap -- Well, sometimes my posts are to make things clear (or fuzzy :-) for other readers, not for you :-)</div>
<p><a id="464401" href="#464401">#</a> <strong>kurakuraninja</strong> on 13 Sep 2005 3:17 AM:</p><div style="margin-left: 1em">On Sunday night I posted about a small fact in CJK fonts, when I talked about Fonts that are 'fixed-width'...</div>
<p><strong>Sonja</strong> on 25 Apr 2010 12:17 AM:</p><div style="margin-left: 1em"><p>Is there a font that provides both East Asian and Latin characters in exactly the same width? For instance, I would want these three examples to line up perfectly:</p>
<p>漢字</p>
<p>ii</p>
<p>齉W</p></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2012/08/14 <a href="http://archives.miloush.net/michkap/archive/2012/08/14/10338893.html">Getting your spidey senses FIXED</a></p><p>2008/06/09 <a href="http://archives.miloush.net/michkap/archive/2008/06/09/8583404.html">Did you lose some WIDTH or something?</a></p><p>2007/11/08 <a href="http://archives.miloush.net/michkap/archive/2007/11/08/5976233.html">The [non-]progress of the über-fixed width fonts</a></p><p>2007/05/01 <a href="http://archives.miloush.net/michkap/archive/2007/05/01/2366714.html">HALFWIDTH != Half the width</a></p><p>2007/04/23 <a href="http://archives.miloush.net/michkap/archive/2007/04/23/2250029.html">How long is it in the console?</a></p><p>2007/03/28 <a href="http://archives.miloush.net/michkap/archive/2007/03/28/1977465.html">Like Cartman, that 'W' letter isn't fat; it's big boned!</a></p><p>2006/08/23 <a href="http://archives.miloush.net/michkap/archive/2006/08/23/712587.html">What would a 'Kartika Fixed' font for Malayalam DO, exactly?</a></p><p>2006/05/09 <a href="http://archives.miloush.net/michkap/archive/2006/05/09/593108.html">The font width is broken? Well, fix it!</a></p><p>2005/09/13 <a href="http://archives.miloush.net/michkap/archive/2005/09/13/463943.html">One more thing about some of those CJK fonts....</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/09/11/463928.html" title="An odd place to draw the line">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/09/11/463670.html" title="I 𐿿 Unicode">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-09">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-09-11">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/09/11/463672.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>