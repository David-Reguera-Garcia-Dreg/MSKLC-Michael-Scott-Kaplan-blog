<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/02/26/381020.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>What the &%#$ does MB_USEGLYPHCHARS do?</title></head><body>
<h1>What the &%#$ does MB_USEGLYPHCHARS do?</h1>
<p><em>by Michael S. Kaplan, published on 2005/02/26 15:26 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/02/26/381020.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>The title of this post is a slightly sanitized version of an actual email title I received, from a developer named Nancy who says she has been a faithful reader of this blog since it started. She noticed that usually passing it has no effect, but it occasionally makes a code page non-functional. And looking at a flag that either does nothing or makes the API do nothing, she wondered whether it was actually a flag that should be renamed to MB_DONTSTARTNONEWONTBENONE.</P>
<P>I'll put in that request right away. :-)</P>
<P>Seriously Nancy, I'll explain what this flag does now....</P>
<P>The <A title=MultiByteToWideChar href="http://msdn.microsoft.com/library/en-us/intl/unicode_17si.asp" target=_blank>MultiByteToWideChar</A> API has a flag&nbsp;that it can be called with, MB_USEGLYPHCHARS. The documentation for this flag is quite vague, saying only:</P>
<BLOCKQUOTE dir=ltr>
<BLOCKQUOTE dir=ltr>
<P><EM><FONT size=2>Use glyph characters instead of control characters.</FONT></EM></P></BLOCKQUOTE></BLOCKQUOTE>
<P>Not very descriptive, is it? :-)</P>
<P>The glyph characters are an OEM&nbsp;code page only contraption, with the same table in every one of them<FONT size=1><SUP>1</SUP></FONT>, even code pages for languages that cannot be used in the console like Hebrew and Arabic. They are great for a little bit of legacy artwork in the console, I suppose. All of this stuff is just inherited from a DOS world and these things are so hardly used that they are not exposed in the .NET Framework at all.</P>
<P>If a code page has such a "glyph" table and you specify the MB_USEGLYPHCHARS flag then these are the only mappings you will get when converting to Unicode. Which is probably why people often don't use the flag -- getting no results back for data does not seem like a very useful exercise....</P>
<P>Here for the sake of completeness is the full "glyph" table:</P>
<UL>
<LI><FONT face="Courier New"><FONT size=4>0x01 </FONT><A href="http://www.fileformat.info/info/unicode/char/263a/index.htm"><FONT size=4>U+263a</FONT></A><FONT size=4> ☺ (WHITE SMILING FACE)</FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x02 </FONT><A href="http://www.fileformat.info/info/unicode/char/263b/index.htm"><FONT size=4>U+263b</FONT></A><FONT size=4> ☻<FONT face="Courier New"> (BLACK SMILING FACE)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x03 </FONT><A href="http://www.fileformat.info/info/unicode/char/2665/index.htm"><FONT size=4>U+2665</FONT></A><FONT size=4> ♥<FONT face="Courier New"> (BLACK HEART SUIT)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x04 </FONT><A href="http://www.fileformat.info/info/unicode/char/2666/index.htm"><FONT size=4>U+2666</FONT></A><FONT size=4> ♦<FONT face="Courier New"> (BLACK DIAMOND SUIT)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x05 </FONT><A href="http://www.fileformat.info/info/unicode/char/2663/index.htm"><FONT size=4>U+2663</FONT></A><FONT size=4> ♣<FONT face="Courier New"> (BLACK CLUB SUIT)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x06 </FONT><A href="http://www.fileformat.info/info/unicode/char/2660/index.htm"><FONT size=4>U+2660</FONT></A><FONT size=4> ♠<FONT face="Courier New"> (BLACK SPADE SUIT)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x07 </FONT><A href="http://www.fileformat.info/info/unicode/char/2022/index.htm"><FONT size=4>U+2022</FONT></A><FONT size=4><FONT face=Tahoma> • </FONT>(BULLET)</FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x08 </FONT><A href="http://www.fileformat.info/info/unicode/char/25d8/index.htm"><FONT size=4>U+25d8</FONT></A><FONT size=4><FONT face=Tahoma> ◘ </FONT>(INVERSE BULLET)</FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x09 </FONT><A href="http://www.fileformat.info/info/unicode/char/25cb/index.htm"><FONT size=4>U+25cb</FONT></A><FONT size=4> ○<FONT face="Courier New"> (WHITE CIRCLE)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x0a </FONT><A href="http://www.fileformat.info/info/unicode/char/25d9/index.htm"><FONT size=4>U+25d9</FONT></A><FONT size=4> ◙<FONT face="Courier New"> (INVERSE WHITE CIRCLE)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x0b </FONT><A href="http://www.fileformat.info/info/unicode/char/2642/index.htm"><FONT size=4>U+2642</FONT></A><FONT size=4> ♂<FONT face="Courier New"> (MALE SIGN)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x0c </FONT><A href="http://www.fileformat.info/info/unicode/char/2640/index.htm"><FONT size=4>U+2640</FONT></A><FONT size=4> ♀<FONT face="Courier New"> (FEMALE SIGN)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x0d </FONT><A href="http://www.fileformat.info/info/unicode/char/266a/index.htm"><FONT size=4>U+266a</FONT></A><FONT size=4> ♪<FONT face="Courier New"> (EIGHTH NOTE)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x0e </FONT><A href="http://www.fileformat.info/info/unicode/char/266b/index.htm"><FONT size=4>U+266b</FONT></A><FONT size=4> ♫<FONT face="Courier New"> (BEAMED EIGHTH NOTES)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x0f </FONT><A href="http://www.fileformat.info/info/unicode/char/263c/index.htm"><FONT size=4>U+263c</FONT></A><FONT size=4> ☼<FONT face="Courier New"> (WHITE SUN WITH RAYS)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x10&nbsp;</FONT><A href="http://www.fileformat.info/info/unicode/char/25ba/index.htm"><FONT size=4>U+25ba</FONT></A><FONT size=4> ►<FONT face="Courier New"> (BLACK RIGHT-POINTING POINTER)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x11&nbsp;</FONT><A href="http://www.fileformat.info/info/unicode/char/25c4/index.htm"><FONT size=4>U+25c4</FONT></A><FONT size=4> ◄<FONT face="Courier New"> (BLACK LEFT-POINTING POINTER)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x12 </FONT><A href="http://www.fileformat.info/info/unicode/char/2195/index.htm"><FONT size=4>U+2195</FONT></A><FONT size=4> ↕<FONT face="Courier New"> (UP DOWN ARROW)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x13 </FONT><A href="http://www.fileformat.info/info/unicode/char/203c/index.htm"><FONT size=4>U+203c</FONT></A><FONT size=4> ‼<FONT face="Courier New"> (DOUBLE EXCLAMATION MARK)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x14 </FONT><A href="http://www.fileformat.info/info/unicode/char/00b6/index.htm"><FONT size=4>U+00b6</FONT></A><FONT size=4> ¶<FONT face="Courier New"> (PILCROW SIGN)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x15 </FONT><A href="http://www.fileformat.info/info/unicode/char/00a7/index.htm"><FONT size=4>U+00a7</FONT></A><FONT size=4> §<FONT face="Courier New"> (SECTION SIGN)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x16 </FONT><A href="http://www.fileformat.info/info/unicode/char/25ac/index.htm"><FONT size=4>U+25ac</FONT></A><FONT size=4> ▬<FONT face="Courier New"> (BLACK RECTANGLE)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x17 </FONT><A href="http://www.fileformat.info/info/unicode/char/21a8/index.htm"><FONT size=4>U+21a8</FONT></A><FONT size=4> ↨<FONT face="Courier New"> (UP DOWN ARROW WITH BASE)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x18 </FONT><A href="http://www.fileformat.info/info/unicode/char/2191/index.htm"><FONT size=4>U+2191</FONT></A><FONT size=4> ↑<FONT face="Courier New"> (UPWARDS ARROW)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x19 </FONT><A href="http://www.fileformat.info/info/unicode/char/2193/index.htm"><FONT size=4>U+2193</FONT></A><FONT size=4> ↓<FONT face="Courier New"> (DOWNWARDS ARROW)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x1a </FONT><A href="http://www.fileformat.info/info/unicode/char/2192/index.htm"><FONT size=4>U+2192</FONT></A><FONT size=4> →<FONT face="Courier New"> (RIGHTWARDS ARROW)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x1b </FONT><A href="http://www.fileformat.info/info/unicode/char/2190/index.htm"><FONT size=4>U+2190</FONT></A><FONT size=4> ←<FONT face="Courier New"> (LEFTWARDS ARROW)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x1c </FONT><A href="http://www.fileformat.info/info/unicode/char/221f/index.htm"><FONT size=4>U+221f</FONT></A><FONT size=4> ∟<FONT face="Courier New"> (RIGHT ANGLE)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x1d </FONT><A href="http://www.fileformat.info/info/unicode/char/2194/index.htm"><FONT size=4>U+2194</FONT></A><FONT size=4> ↔<FONT face="Courier New"> (LEFT RIGHT ARROW)</FONT></FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x1e </FONT><A href="http://www.fileformat.info/info/unicode/char/25b2/index.htm"><FONT size=4>U+25b2</FONT></A><FONT size=4><FONT face=Tahoma> ▲ </FONT>(BLACK UP-POINTING TRIANGLE)</FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x1f </FONT><A href="http://www.fileformat.info/info/unicode/char/25bc/index.htm"><FONT size=4>U+25bc</FONT></A><FONT size=4><FONT face=Tahoma> ▼ </FONT>(BLACK DOWN-POINTING TRIANGLE)</FONT></FONT> 
<LI><FONT face="Courier New"><FONT size=4>0x7f </FONT><A href="http://www.fileformat.info/info/unicode/char/2302/index.htm"><FONT size=4>U+2302</FONT></A><FONT size=4><FONT face=Tahoma> ⌂ </FONT>(HOUSE)</FONT></FONT></LI></UL>
<P>That and "ASCII art" style things is about the best you can do in the console....</P>
<P><FONT size=1></FONT>&nbsp;</P>
<P><FONT size=1>1 - The only exception is code page 864 ("Arabic - OEM") which has a completely broken table that gave me wildly different info when I called MultiByteToWideChar with the MB_USEGLYPHCHARS flag. Given that Arabic does not work well in the console, this probably does not cause a big loss in functionality....</FONT></P>
<P><FONT size=1></FONT>&nbsp;</P>
<P><FONT color=#ff0000><EM>This post brought to you by </EM>"☼"<EM> (<A href="http://www.fileformat.info/info/unicode/char/263c/index.htm">U+263c</A>,&nbsp;a.k.a. WHITE SUN WITH RAYS)<BR><FONT size=1>A proud member of the glyph chars collection for more years than Seattle has seen sun</FONT></EM></FONT></P>
<hr/><p><strong>Edd</strong> on 24 Jan 2009 8:08 AM:</p><div style="margin-left: 1em"><p>First of all, I am very thankful for the time you have put in to explaining the ins and outs of these functions. Your posts have vanquished that uneasy am-I-really-using-this-correctly feeling I have had.</p>
<p>With that said, surely a better place for this information would be on the MSDN pages themselves!? Can you twist the nipples of the people responsible and make it happen? </p>
<p>It's depressing how often I look up a function on MSDN and then have to go elsewhere to answer all the questions that the so-called-explanation raises, simply to attain a basic level of correctness.</p></div>
<p><strong>Mr Ziggy</strong> on 27 May 2012 3:41 PM:</p><div style="margin-left: 1em"><p>Not for every one, just the MSDOS / IBM AT code pages based on CP 437, and the Arabic one wasn&#39;t, I believe... Since the PC was direct video mapped, the IBM people got cute and assigned these for the PC video boards&#39; character generator, as output only extras, and for backwards compatibility the Console does the same. Input and disk stored texts were treated as what is normally listed as the OEM code pages, for the nationalities IBM customized the PCs to, but applications that did direct Int10 and the terminal output $-terminated MS-DOS calls could display these. The documentation for the OEM Code Pages at globaldev should reflect this, as it&#39;s a major difference from the ANSI pages in how they behave. Just a cent, MrZ</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2007/04/19 <a href="http://archives.miloush.net/michkap/archive/2007/04/19/2194275.html">Search and ye shall find, SIAO style!</a></p><p>2005/04/19 <a href="http://archives.miloush.net/michkap/archive/2005/04/19/409566.html">A few of the gotchas of MultiByteToWideChar</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/02/27/381189.html" title="Some suggested updates to the Win32-->.NET mapping for NLS functions....">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/02/26/380867.html" title="East Asian Font Names....">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-02">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-02-26">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/02/26/381020.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
</html>