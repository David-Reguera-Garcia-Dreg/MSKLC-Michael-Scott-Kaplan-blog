<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/02/23/378804.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Calendars.NET -- new platform, new issues</title></head><body>
<h1>Calendars.NET -- new platform, new issues</h1>
<p><em>by Michael S. Kaplan, published on 2005/02/23 06:57 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/02/23/378804.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Last month, I mentioned about <A id=CategoryEntryList href="http://archives.miloush.net/michkap/archive/2005/01/14/353347.html">Calendars on Win32 -- Not all there yet</A>&nbsp;and <A id=CategoryEntryList href="http://archives.miloush.net/michkap/archive/2005/01/14/353216.html">Calendars on Win32 -- just there for show....</A>&nbsp;and really did not do much more than hint about what was going on in the world of .NET. Well,&nbsp;I have good news and bad news.</P>
<P>The good news -- in .NET,&nbsp;calendars are&nbsp;not "just for show." Every date you format is also one you can parse back, and even convert to another calendar. And that is pretty freaking cool.</P>
<P>The bad news -- they still pick up a few of the silly litle quirks that existed in Win32, like the poor localization story for everything other than Gregorian.</P>
<P>Of course, it is not just an issue of recyled bits&nbsp;retaining problems. There are also new issues as well.</P>
<P>Like (for instance) the fact that although none of the various calendars that derive from the <A title=Calendar href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcalendarclasstopic.asp" target=_blank>Calendar</A> class are sealed (so in theory you can inherit and extend any of them), that you cannot do anything useful by extending the interface yourself. Because all of the formatting and parsing work that .NET does is not built into the calendar itself -- there are no interfaces that a developer could implement in their own WayCoolCalendar class to answer the "how do you format ______?" or "How do you parse ______?" questions. The fact that the formating and parsing functionality comes from outside of the calendar itself seems to violate some sort of OO principle, though I would have trouble explaining which one. It just seems wrong to me.</P>
<P>Not to mention the fact that it is hard to "get out of the way" when one is blocking the path so fully! :-)</P>
<P>In my opinion though, the biggest problem is not a limitation, but a thorny conceptual issue --&nbsp;how to distance calendars from cultures when it is appropriate. There are many new calendars being added to Whidbey that are very useful as converters but which cannot be directly plugged into cultures or custom cultures since they (a) do not have parsing/formatting support or (b) make no sense as a primary calendar for a locale. Now the first problem may just be a schedule/resources issue that will be addressed eventually, but the second will not be "fixed" since it makes no sense for the calendar itsef. Unfortunately, there is really no other place to put calendars. Users will simply try to use the new calendars based on the existing paradigm. To fit <EM>that</EM>, we have to fix the intuitive expectation of users that we created by using the same type (Calendar) in so many different places. </P>
<P>Which means we need a way to keep people from intuitively expecting that calendars like for example the <A href="http://msdn2.microsoft.com/library/6bdxdx35.aspx">ChineseLunisolarCalendar</A> would be used for the default calendar of a culture. There has to be a way to describe them as <EM>supplementary</EM> calendars that have real utility without making people think that <EM>all</EM> dates that are formatted for a culture would use them. </P>
<P>And it is not like I would expect the <A title=JulianCalendar href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationjuliancalendarclasstopic.asp" target=_blank>JulianCalendar</A> to be the default for any locale or culture. Though I know of more than a few software products inside and outside of Microsoft over the years that use the Julian calendar for internal build numbers. And I guess software developers make up an interesting <EM>sub</EM>culture, if nothing else....</P>
<P>The dilemma, in a nutshell? How to explain that&nbsp;some calendars are "cultural" without really being expected to influence a <A title=CultureInfo href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcultureinfoclasstopic.asp" target=_blank>CultureInfo</A>. </P>
<P>Perhaps the switch from the word "locale" to "culture" will get in the way here? :-)</P>
<P>&nbsp;</P>
<P><FONT color=#800080><EM>This post brought to you by </EM>"B"<EM> (<A href="http://www.fileformat.info/info/unicode/char/0042/index.htm">U+0042</A>, a.k.a. LATIN CAPITAL LETTER B)</EM></FONT></P>
<hr/><p><a id="378958" href="#378958">#</a> <strong>Leons Petrazickis</strong> on 23 Feb 2005 8:48 AM:</p><div style="margin-left: 1em">Well, one OO concept that is broken by breaking Inheritance is... Inheritance. Encapsulation is also ill-served.</div>
<p><a id="378960" href="#378960">#</a> <strong>Michael Kaplan</strong> on 23 Feb 2005 8:52 AM:</p><div style="margin-left: 1em">Heh -- I did not just mean by breaking inheritance. <br><br>I also meant by having core functionalities for an object captured outside the scope of that object (or anything below it in the tree of ownership. Parsing and formatting need the fundamental information contained in a calendar to do their work and trying to capture it in the other direction (i.e. calendar as data provider) does not work since the algorithm behind the calendar is more important than the data items like the month names (which are also stored in the calendar anyway!).</div>
<p><a id="378965" href="#378965">#</a> <strong>Michael Kaplan</strong> on 23 Feb 2005 9:00 AM:</p><div style="margin-left: 1em">Note that the above *is* a lot of encapsulation is -- I just did not want anyone to think I was stopping at the fact that you could not inherit the class as the reason I was worried.... :-)</div>
<p><a id="381422" href="#381422">#</a> <strong>Douglas Husemann</strong> on 27 Feb 2005 8:55 PM:</p><div style="margin-left: 1em">Michael, <br><br>I know I bugged this in the past believe it was between everett and Whidbey.<br><br>It would be nice if a standard timeline could be implemented. and then calendars could be built on top of that time line. <br><br>It would allow for some of the more estoric Business rules to be applied. Especially as the system becomes more &quot;aware&quot; with the advent of WinFS. <br><br>Believe me I have been around and watched this industry change from the old 4004 chip to when IBM went with the 86 series chips to working at AMD during the 486, 586, 686 days as contractor. <br><br>I understand the design decisions made given the hardware of the time. just wish those decisions were easier to unmake now.<br><br>It would be nice if the OS could understand that while my preferred cultural calendar is Gregorian with English Months. displayed in the US standard with slashes. <br><br>That I could have documents that require an overide on that system setting. Or any of the common in use calendars today.<br><br>Of course as discussed before I have needs outside of the norm. While I don't expect that MS to support Julian Calendars at any level it would be nice to have the capability to add it to the system and allow conversion between any other caledar implemented. either by third party ISV or other software from MS. <br><br>douglas<br><br></div>
<p><a id="381426" href="#381426">#</a> <strong>Michael Kaplan</strong> on 27 Feb 2005 9:07 PM:</p><div style="margin-left: 1em">Hi Douglas,<br><br>Your post kind of went all over the map -- you should number the points next time! :-)<br><br>I am not sure how much of these decisions were truly hardware based, unless you are thinking about the Gregorian nature of SYSTEMTIME on Windows.<br><br>But in the .NET Framework, calendars are definitely rooted in the designs of their unmanaged ancestors.<br><br>Beyond that, there has been an intense interest in Avalon, XAML, and other newer platforms and documents in the notion of document level settings for those cases where people want them. I fear that many people ill misuse this setting and make for poorer international behavior. I will blog on this another time....<br><br>Most of the rest of what you want in regard to conversion is possible by ISV, today. Through any calendar that is supported on the .NET Framework....</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/02/22 <a href="http://archives.miloush.net/michkap/archive/2010/02/22/9967111.html">Will someone take up the job of Calendar support in .Net, please?</a></p><p>2007/12/17 <a href="http://archives.miloush.net/michkap/archive/2007/12/17/6779614.html">No good way to get one's Jalalis playing with calendars in Windows or .NET, really</a></p><p>2007/07/06 <a href="http://archives.miloush.net/michkap/archive/2007/07/06/3720057.html">Upgrading the rank of the people we talk about calendars with</a></p><p>2005/12/02 <a href="http://archives.miloush.net/michkap/archive/2005/12/02/498876.html">Calendars in other languages</a></p><p>2005/10/20 <a href="http://archives.miloush.net/michkap/archive/2005/10/20/482896.html">Behold the PersianCalendar class</a></p><p>2005/03/28 <a href="http://archives.miloush.net/michkap/archive/2005/03/28/402839.html">The WinForms DateTimePicker and MonthCalendar do not support culture settings</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/02/23/378975.html" title="Not all interview questions are created equal">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/02/22/378581.html" title="Last night at Trader Joe&#39;s">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-02">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-02-23">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/02/23/378804.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
</html>