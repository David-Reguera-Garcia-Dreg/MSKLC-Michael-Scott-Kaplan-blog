<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/02/25/380266.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Theory vs. practice for Korean text collation</title></head><body>
<h1>Theory vs. practice for Korean text collation</h1>
<p><em>by Michael S. Kaplan, published on 2005/02/25 04:44 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/02/25/380266.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Let's take a look at Korean for a moment. </P>
<P>Korean is encoded two different ways in Unicode. There are the Jamo (the pieces of characters that are used to make Hangul syllables):</P>
<UL>
<UL>
<LI><A href="http://www.unicode.org/charts/PDF/U1100.pdf">Hangul Jamo</A> 
<LI><A href="http://www.unicode.org/charts/PDF/U3130.pdf">Hangul Compatibility Jamo</A>&nbsp;(present for compatibility with KSC standards from Korea)</LI></UL></UL>
<P>and the actual Hangul syllables:</P>
<UL>
<UL>
<LI><A href="http://www.unicode.org/charts/PDF/UAC00.pdf">Hangul Syllables</A> <FONT color=#ff0000>(7mb!!!)</FONT></LI></UL></UL>
<P>I'll talk more about the specifics of Jamo another day.</P>
<P>Now everything that is modern Hangul can be found in that Hangul syllables block, which was largely based on existing standards from Korea. Each of those can (in theory) also be encoded as the underlying Jamo, though in practice people do not tend to use them that way, in part because IMEs do not use this method and in part because the typography is mostly not there yet.</P>
<P>But Unicode normalization considers the Hangul syllables to be "Form C" (composite/composed) and the underlying Jamo to&nbsp;be "Form D" (decomposed). Thus e.g. the string "Korean" has these two different forms:</P>
<P><FONT face="Times New Roman">한국어</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (<A href="http://www.fileformat.info/info/unicode/char/d55c/index.htm">d55c</A> <A href="http://www.fileformat.info/info/unicode/char/ad6d/index.htm">ad6d</A> <A href="http://www.fileformat.info/info/unicode/char/c5b4/index.htm">c5b4</A>)</P>
<P><FONT face="Times New Roman">한국어</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (<A href="http://www.fileformat.info/info/unicode/char/1112/index.htm">1112</A> <A href="http://www.fileformat.info/info/unicode/char/1161/index.htm">1161</A> <A href="http://www.fileformat.info/info/unicode/char/11ab/index.htm">11ab</A> <A href="http://www.fileformat.info/info/unicode/char/1100/index.htm">1100</A> <A href="http://www.fileformat.info/info/unicode/char/116e/index.htm">116e</A> <A href="http://www.fileformat.info/info/unicode/char/11a8/index.htm">11a8</A> <A href="http://www.fileformat.info/info/unicode/char/110b/index.htm">110b</A> <A href="http://www.fileformat.info/info/unicode/char/1165/index.htm">1165</A>)</P>
<P>Even if&nbsp;you do&nbsp;not know&nbsp;anything about Korean at all, if you can see the text you can probably see how the former is made up of the pieces of the latter.</P>
<P>Now in actual practice, Modern Korean uses the Hangul Syllables. </P>
<P>But the Jamo serve another purpose -- to create Hangul Syllables that are not representable in the modern block. This is usually referred to as Old Hangul. The easiest way to detect whether a string is Old Hangul is try to normalize it to Form C; if that operation does nothing, then it usually means that it is not modern Hangul. For example, a string like "<FONT face="Times New Roman">ᄇᄉᄐ</FONT>" (<A href="http://www.fileformat.info/info/unicode/char/1107/index.htm">1107</A> <A href="http://www.fileformat.info/info/unicode/char/1109/index.htm">1109</A> <A href="http://www.fileformat.info/info/unicode/char/1100/index.htm">1110</A>).</P>
<P>Now there are times that even in Modern Hangul that one might have individual Jamo in with the syllables without it being considered "Old Hangul", something that products like Windows 2000 and SQL Server&nbsp;2000 support.</P>
<P>And then starting in Windows XP, collation of Old Hangul as a scenario is supported, which is interesting since of course (as I said before) we do not yet have a typography story to fully support it. But there is a great deal of data that already exists for Old Hangul and being able to get that into computers is a good thing. And the strings are intelligible, at least.</P>
<P>As a matter of practical implementation, the work to equate the decomposed and&nbsp;composite forms of Korean in collation did not happen. While&nbsp;such an equivalence&nbsp;is interesting in theory, in practice Modern Hangul usually is the composed Hangul syllables. So while it may make for a useful operation&nbsp;in theory, the need to equate the two in collation is less important in practice. It is generally better to have data in Unicode Normalization Form C anyway when one is doing operations like collation in Microsoft products (and most data entered by MS keyboards is in Form C already).</P>
<P>So does Microsoft do the right thing here? Well, I have asked&nbsp;different people this question over the past few years (the last person I asked just days ago). And every time I talk to people who are native speakers of or experts in Korean I am more convinced that we are. Which is not to say that making the equivalence is wrong -- it's not (and no one has said that it is). But it simply does not seem to be something that impacts actual usage, if the equivalence is not made in collation. Those who do need it can of course use Unicode Normalization to have Form C data prior to comparisons, with no need to force everyone to go through this process. This way, everybody wins. :-)</P>
<P>And in my mind, user expectations beat the benefit of following a theoretical practice, every time....</P>
<P>&nbsp;</P>
<P><FONT color=#ff0000><EM>This post brought to you by </EM>"<FONT face="Times New Roman">ᄐ</FONT>"<EM> (</EM><A href="http://www.fileformat.info/info/unicode/char/1100/index.htm"><EM>U+1110</EM></A><EM>, a.k.a. HANGUL CHOSEONG THIEUTH)</EM></FONT></P>
<hr/><p><a id="380387" href="#380387">#</a> <strong>AC</strong> on 25 Feb 2005 7:50 AM:</p><div style="margin-left: 1em">I guess no one can call the cops if you do not follow the rules. I think you said you do not follow the UCA rules anyway!</div>
<p><a id="381194" href="#381194">#</a> <strong>Michael Kaplan</strong> on 27 Feb 2005 5:49 AM:</p><div style="margin-left: 1em">That is correct -- we do not use the UCA. :-)</div>
<p><a id="383863" href="#383863">#</a> <strong>AC</strong> on 2 Mar 2005 12:35 PM:</p><div style="margin-left: 1em">Everything you are saying here makes sense. So why is Unicode so messed up here?<br></div>
<p><a id="389445" href="#389445">#</a> <strong>Michael Kaplan</strong> on 8 Mar 2005 2:48 AM:</p><div style="margin-left: 1em">Well, I don't think Unicode is messed up here, at all. It just did not make sense for Microsoft to do this equivalence. Perhaps other platforms have other situations that drive the need to mnake this equivalence?</div>
<p><a id="466067" href="#466067">#</a> <strong>Ricardo S. San</strong> on 14 Sep 2005 10:16 AM:</p><div style="margin-left: 1em">Last February and then again the day before yesterday I talked a bit about how Korean was encoded...</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/04/20 <a href="http://archives.miloush.net/michkap/archive/2010/04/20/9998063.html">You can't get this particular bit of proverbial toothpaste back into the tube</a></p><p>2008/03/03 <a href="http://archives.miloush.net/michkap/archive/2008/03/03/7984960.html">On reversing the irreversible (grabbing the data, part II: the weirdness not so related to locales)</a></p><p>2006/07/22 <a href="http://archives.miloush.net/michkap/archive/2006/07/22/674270.html">We're off on the road to Korea! We certainly do get around...</a></p><p>2005/09/14 <a href="http://archives.miloush.net/michkap/archive/2005/09/14/463569.html">One more thing about Korean....</a></p><p>2005/09/12 <a href="http://archives.miloush.net/michkap/archive/2005/09/12/463560.html">Theory vs. practice for Korean text collation, Redux</a></p><p>2005/07/20 <a href="http://archives.miloush.net/michkap/archive/2005/07/20/440842.html">More on sort elements</a></p><p>2005/04/30 <a href="http://archives.miloush.net/michkap/archive/2005/04/30/413676.html">Normalization vs. .NET text elements</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/02/25/380314.html" title="Tech Ed 2005 in Orlando? Moi? Perhaps....">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/02/24/379466.html" title="The keyboard does not do what I tell it to!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-02">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-02-25">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/02/25/380266.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
</html>