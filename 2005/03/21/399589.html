<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/03/21/399589.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Linguistic and Unicode considerations (or Language-specific Processing #4)</title></head><body>
<h1>Linguistic and Unicode considerations (or Language-specific Processing #4)</h1>
<p><em>by Michael S. Kaplan, published on 2005/03/21 00:13 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/03/21/399589.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p><em><font size="2">Prior posts in this series:<br />&nbsp;&nbsp; </font></em><A href="http://archives.miloush.net/michkap/archive/2005/03/08/389360.html"><em><font size="2">Before you find, or search, you have to *index* (or, Language-specific processing #0)</font></em></a>&nbsp;<br />&nbsp;&nbsp; </em><A href="http://archives.miloush.net/michkap/archive/2005/03/08/389675.html"><em><font size="2">I coffee, therefore IFilter (or, Language-specific processing #1)</font></em></a>&nbsp;<br />&nbsp; &nbsp;<A href="http://archives.miloush.net/michkap/archive/2005/03/13/394822.html"><em><font size="2">IStemmer'ed the tide (or, Language-specific processing #2)</font></em></a><br /><font size="2"><em>&nbsp;&nbsp; </em></font><A href="http://archives.miloush.net/michkap/archive/2005/03/14/395199.html"><font size="2"><em>You toucha my letters, IWordBreaker you face (or, Language-specific processing, #3)</em></font></a><font size="2"><em> </em></font></p> <p>Looking at a doc site that many of the <a title="IFilter interface" href="http://msdn.microsoft.com/library/en-us/indexsrv/html/ixrefint_9sfm.asp" target="_blank">IFilter interface</a>, <a title="IWordBreaker interface" href="http://msdn.microsoft.com/library/en-us/indexsrv/html/ixrefint_93xu.asp" target="_blank">IWordBreaker interface</a>, and <a title="IStemmer interface" href="http://msdn.microsoft.com/library/en-us/indexsrv/html/ixrefint_4b76.asp" target="_blank">IStemmer interface</a> topics link to, there is a page entitled&nbsp;<a href="http://msdn.microsoft.com/library/en-us/indexsrv/html/wbrscenario_18fn.asp">Linguistic and Unicode Considerations</a>&nbsp;that is worth taking a really good look at. </p> <p><em>One annoying bit about a few of these pages is that they are in different encodings yet are not marked as such. It looks like this is caused by the content wrapper rather than the content itself, incidentally. The page is marked "charset=windows-1252" even though it is clearly not in several cases (even if the "frame" is, a side effect of the wider decision to not using HTML frames here?). My IE 6.0.3790.0 browser requires me to change the encodings by right clicking. When I had to do this, I put the information below in <font color="#008000"><strong>green</strong></font>. YMMV, but it will probably be about the same distance. :-)</em></p> <p>The initial page is a link to a bunch of topics, which I am going to list here, with some thoughts on each....</p> <blockquote dir="ltr" style="MARGIN-RIGHT: 0px"> <p><a href="http://msdn.microsoft.com/library/en-us/indexsrv/html/wbrscenario_0x4e.asp">Surface Form Normalization</a>&nbsp;talks about hyphenation, possessives, diacritics, and clitics (the latter two are the only ones that really hint at best practices in other languages -- I would have loved to see some non-English hyphenation of possessive examples!). <strong><font color="#008000">The last two topics are UTF-8, the difference between "Ã¼ber" and "über", between "donnÃ©s" and "donnés".</font></strong></p> <p><a href="http://msdn.microsoft.com/library/en-us/indexsrv/html/wbrscenario_5966.asp">Phrase Identification</a>&nbsp;talks about the best time to identify phrases (at query time, according to the topic). No non-English examples, which seemed a little unfortunate to me.</p> <p><a href="http://msdn.microsoft.com/library/en-us/indexsrv/html/wbrscenario_06k3.asp">Agglutinative Languages</a>&nbsp;is very much about languages other than English (like Finnish,&nbsp;a language which would be an interesting challenge to do a good word breaker for!).</p> <p><a href="http://msdn.microsoft.com/library/en-us/indexsrv/html/wbrscenario_2dgz.asp">Numbers and Dates</a>&nbsp;gives a not intuitive to everyone but&nbsp;interesting and sensible recommendation -- to store numbers, dates, and times in a locale-independent manner. What makes this sensible is that at query time the person querying will use their own preferences, which may not match those of the document. Although doing this makes sense, that does not make it easy. This can be quite a challenge in Win32 (which has no locale sensitive parsing APIs) but would be much easier in the .NET Framework (which contains such functionality). Not sure how big managed IStemmers are, though. Might be good to find out? :-)</p> <p><a href="http://msdn.microsoft.com/library/en-us/indexsrv/html/wbrscenario_3qib.asp">Compound Words</a> are very common in languages like German and Dutch, and the recommendations in such cases are simple -- index all the component parts of such words. This would definitely require good knowledge of the language in question to do, for obvious reasons.</p> <p><a href="http://msdn.microsoft.com/library/en-us/indexsrv/html/wbrscenario_14c3.asp">Compound Phrases</a>&nbsp;mainly talks about such phrases in agglutinative languages like Korean. The topic explains how a good word breaker will have to be able analyze the text different ways and then have techniques to weigh them and properly index the text. <font color="#008000"><strong>The topics actually wants a Korean encoding, and the difference for me was "Á¦ÀÛÀÚÀÇ" versus "제작자의".</strong></font></p> <p><a href="http://msdn.microsoft.com/library/en-us/indexsrv/html/wbrscenario_2zhw.asp">Special Characters and Words</a>&nbsp;mainly talks bout how you usually want to ignore symbols and punctuation, though it does explain how there are exceptions that can be blamed on programming languages (e.g. "C++") or on Microsoft (e.g. ".NET") or on both (e.g. "C#"). Obviously there are other types of exceptions, many of which might be domain-specific. A generic word breaker may have less interest than one that caters to a particular domain.</p> <p><a href="http://msdn.microsoft.com/library/en-us/indexsrv/html/wbrscenario_7d83.asp">Acronyms and Abbreviations</a>&nbsp;gives some interesting thoughts about how acronyms and abbreviations might be handled (some of the same domain-specific rules may apply).</p> <p><a href="http://msdn.microsoft.com/library/en-us/indexsrv/html/wbrscenario_2uy6.asp">Capitalization</a>&nbsp;talks about how Indexing Service does not preserve capitalization for the full-text index, a fact that I will tentatively consider depressing for Turkic languages like Azeri and Turkish but might hope for linguistic casing rules that would do the right thing for these scenarios. :-)</p> <p><a href="http://msdn.microsoft.com/library/en-us/indexsrv/html/wbrscenario_8zlf.asp">Nonbreaking Spaces</a> actually talks about all sorts of characters that might imply continuity of on sort while preserving separation of another, like the underscore in welcome_home_sis.txt, where the indexing recommendation is to index the words both with and without breaks. It also seems a little arbitrary to see this split out from two related topics (Hyphenation and Phrase Identification) since some key phrases may be linked in other ways beyond nonbreaking spaces and underscores, yet the other topics do not hint at this. As a side note, such a rule should not be universally applied to similar seeming but entirely different&nbsp;characters like <a href="http://www.fileformat.info/info/unicode/char/200d/index.htm">U+200d</a> (ZERO WIDTH JOINER) and <a href="http://www.fileformat.info/info/unicode/char/200c/index.htm">U+200c</a> (ZERO WIDTH NON-JOINER), which do not break semantic content. </p> <p><a href="http://msdn.microsoft.com/library/en-us/indexsrv/html/wbrscenario_01df.asp">Surrogate Pairs</a>&nbsp;implicitly relies on the fact that the MS Search service is intrinsically UTF-16 based, and gives the&nbsp;rules about surrogate pairs (one high surrogate followed by on low surrogate). It does flunk the Unicode terminology test with sentences like "Surrogate pairs extend the character set beyond the Unicode character". The text comes close to implying that such pairs should be indexed separately even though each one is some cases only a single letter -- which clearly implies that they should just be indexed as they would be given the need to index characters and&nbsp;words in a language. This will become more important as larger corpuses of text are produced in many of the historic and other languages that use supplementary characters for their representation.</p></blockquote> <p>What I found most interesting about all of these topics was the balance they had to strike between </p> <ol> <li>hinting at complexities for the sake of people who are either unaware of them in other languages or even their own; <li>not wanting to go too far off topic for people focused on a particular language to whom not all items would apply; <li>recognizing that anyone truly contemplating building a word breaker in a language will understand many of the linguistic issues and thus not need&nbsp;a primer about them but instead more examples of how the concepts are applied;</li></ol> <p>How did they do? Well, I think they did not really give enough detail to help much with #3 (in these topics or in the other ones in the Platform SDK), and I would have loved more of #1 as a part of the "fascinated by linguistic concepts" fetish I have going. I think both may have been due to not enough time to do more, in which case I would love to see more issues covered, for more languages. Were I more of an expert I would offer to help with that. :-)</p> <p>Though I may help with some of the Unicode topics -- more would be interesting a better terminology would also be cool. Now, to track down the owner....</p> <p>&nbsp;</p> <p><font color="#ff0000"><em>This post sponsored by </em></font><a href="http://www.fileformat.info/info/unicode/char/200d/index.htm"><em>U+200d</em></a><font color="#ff0000"><em> (ZERO WIDTH JOINER) and </em></font><a href="http://www.fileformat.info/info/unicode/char/200c/index.htm"><em>U+200c</em></a><font color="#ff0000"><em> (ZERO WIDTH NON-JOINER)<br /><font size="1">Two characters that would love more visibility, which is no small feat when you are invisible like they are!</font></em></font></p>
<hr/><p><a id="399745" href="#399745">#</a> <strong>AC</strong> on 21 Mar 2005 8:44 AM:</p><div style="margin-left: 1em">Michael, get to it! You should be writing some documentation. And fixing the charset bug in MSDN online while you are there.</div>
<p><a id="399759" href="#399759">#</a> <strong>Michael Kaplan</strong> on 21 Mar 2005 8:55 AM:</p><div style="margin-left: 1em">Well, I will try to help, but I am not going to pretend I could write all the docs!<br><br>As for the charset bug, I do not know enough about the content delivery mechanism to even guess at solutions....</div>
<p><a id="403681" href="#403681">#</a> <strong>Mike Dimmick</strong> on 30 Mar 2005 4:02 AM:</p><div style="margin-left: 1em">Re: MSDN charset bug - my guess is that there's a double-encoding bug in there. I was reading some of the Patterns &amp; Practices Enterprise Library documentation earlier, which referred to a 'fa&#231;ade'. Or would have, if an encoding bug hadn't intervened.<br><br>What was actually shown was &quot;fa&#195;ƒ&#194;&#167;ade&quot;. The page was marked Windows-1252 in the HTML using the &lt;META&gt; element (Fiddler reveals that no encoding was specified at the HTTP level). Manually switching the encoding to UTF-8 gets us to fa&#195;&#167;ade. I'm guessing that the source material (in XML?) was in UTF-8, but that the XML-&gt;HTML renderer interprets it as Windows-1252 and re-encodes the misinterpreted data as UTF-8. Undoing the UTF-8 transformation one more time gets us 0xC3 0xA7 =&gt; 0xE7 = &#231;.<br><br>It looks like this particular page (<a target="_new" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnpag2/html/updaterv2.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnpag2/html/updaterv2.asp</a>) went wrong when it was decompiled from the offline documentation (implied by Tim Ewald at <a target="_new" href="http://pluralsight.com/blogs/tewald/archive/2004/09/23/2368.aspx">http://pluralsight.com/blogs/tewald/archive/2004/09/23/2368.aspx</a>). The offline documentation, in Document Explorer 7.0 (HxS) format, is encoded as Windows-1252.<br><br>The last couple of times I've reported this to MSDN they've simply patched the topic to use ASCII characters (removed diacritic marks, converted en or em hyphens to regular hyphens, smart quotes to straight quotes, replacement of &#174; with (R) and &#169; with (C), etc).<br><br>I think, however, that little work will now be done to the live MSDN Library site CMS as there's already a replacement which runs msdn2.microsoft.com (and according to Tim Ewald, also TechNet).<br><br>Just as a side note - I notice that the typeface for the MSDN logo has changed recently. You can still see the old logo at msdn2.microsoft.com. The new one looks like the same face as the Windows Server System logo - the old one was consistent with Windows XP and Windows 2000.</div>
<p><a id="403695" href="#403695">#</a> <strong>Michael Kaplan</strong> on 30 Mar 2005 5:52 AM:</p><div style="margin-left: 1em">No double encoding bug in these cases (everything was fixed with the one conversion). But if memory serves the original MSDN site used frames, which could of course have charset headers at the subpage level. Now there is only the top level, and if there is no good communication mechanism than the only way to make it work is to always use UTF-8 (which they do not seem to want to do).<br><br>Ah well, five steps forward, two steps back. Thats my motto!</div>
<p><strong>Yuhong Bao</strong> on 30 Jul 2010 2:23 PM:</p><div style="margin-left: 1em"><p>&quot;Compound Phrases mainly talks about such phrases in agglutinative languages like Korean. The topic explains how a good word breaker will have to be able analyze the text different ways and then have techniques to weigh them and properly index the text. The topics actually wants a Korean encoding, and the difference for me was &quot;&Aacute;&brvbar;&Agrave;&Ucirc;&Agrave;&Uacute;&Agrave;&Ccedil;&quot; versus &quot;제작자의&quot;.&quot;</p>
<p>This one is still there. Have you reported it to the MSDN folks? Luckily the UTF-8 ones are fixed by now.</p></div>
<p><strong>Michael S. Kaplan</strong> on 30 Jul 2010 3:16 PM:</p><div style="margin-left: 1em"><p>The problems were reported but apparently not fixed. :-(</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2011/07/08 <a href="http://archives.miloush.net/michkap/archive/2011/07/08/10184413.html">Not dumb, but dumb quotes! (aka Sorry Mr. Boehner, this one may be our fault)</a></p><p>2008/04/23 <a href="http://archives.miloush.net/michkap/archive/2008/04/23/8417318.html">That brings new meaning to having "a ç-section" (Ãç§), doesn't it?</a></p><p>2007/10/17 <a href="http://archives.miloush.net/michkap/archive/2007/10/17/5499362.html">CSI: Unicode?</a></p><p>2007/08/11 <a href="http://archives.miloush.net/michkap/archive/2007/08/11/4342275.html">Should old aquaintance *not* be forgot, code pages may screw up their names anyhow</a></p><p>2006/12/23 <a href="http://archives.miloush.net/michkap/archive/2006/12/23/1354366.html">Do not adjust your browser, a.k.a. sometimes two wrongs DO make a right, a.k.a. dumb quotes</a></p><p>2006/06/04 <a href="http://archives.miloush.net/michkap/archive/2006/06/04/616892.html">What's the encoding, again?</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/03/22/400316.html" title="Just part of &quot;the background bitmap&quot; in Access">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/03/20/399518.html" title="Mixed feelings about the splitting out of features on Longhorn">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-03">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-03-21">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/03/21/399589.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
</html>