<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/03/01/382289.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Code pages are really not enough....</title></head><body>
<h1>Code pages are really not enough....</h1>
<p><em>by Michael S. Kaplan, published on 2005/03/01 06:29 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/03/01/382289.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Helen Custer, in <U>Inside Windows NT</U>, describes the situation back then in an interesting way:</P>
<BLOCKQUOTE dir=ltr>
<P><FONT size=2>The lowest layer of localization is the representation of individual characters, the code sets. The United States has traditionally employed the ASCII (American Standard Code for Information Interchange) for representing data. For European and other countries, however, ASCII is not adequate&nbsp;because it lacks the common symbols and punctuation. For example, the British pound sign is omitted, as are the diacritical marks used in french, German, Dutch, and Spanish.</FONT></P>
<P><FONT size=2>The International Standards Organization (ISO) establish a code set called Latin1 (ISO standard 8859-1), which defines codes for all of the European characters omitted by ASCII. Microsoft Windows uses a slight modification of Latin1 called the Windows ANSI code set. Windows ANSI is a <EM>single-byte coding scheme</EM> because it uses 8 bits to represent each character. The maximum numbr of characters that can be expressed using 8 bits is 256 (2<SUP>8</SUP>).</FONT></P>
<P><FONT size=2>A <EM>script</EM> is a set of letters required to write in a particular language. The same script is often used for several languages. (For example the Cyrillic script is used for both the Russian and Ukranian languages.) Windows ANSI and other single-byte coding schemes can encode enough charactrs to express the letters in Western scripts. However, Eastern scripts such as Japanese and Chinese, which employ thousands of separate characters, cannot be encoded usng a single-byte encoding scheme. These scripts are typically stored using a double-byte encoding scheme, which uses 16 bits for each character, or a multibyte encoding scheme, in which some characters are represented by an 8-bit sequence and others are represnted by a 16-bit, 24-bit, or 32-bit sequence. The latter scheme requires complicated parsing algorithms to determine the storage width of a particular character. Furthermore, a proliferation of different code sets means that a particular&nbsp;code might yield entirely different characters on two different computers, depending on the code set each computer uses.</FONT></P></BLOCKQUOTE>
<P>I thought it was interesting the way some of the technology terms were framed. It definitely does not fit the terminology we use today for several different terms. But what really caught my eye was the implicit idea that each of these code pages was enough for a language, and that the only real problems were the lack of good cross-code page support and the difficulty of parsing some of the more complex cases.</P>
<P>The truth is much further from these points than you might guess. Because there are very few languages for which a code page (especially one of the '<A href="http://www.microsoft.com/globaldev/reference/WinCP.mspx">Windows ANSI</A>'&nbsp;code pages)&nbsp;actually has adequate coverage. I'd say that these code pages are perhaps 'good enough' for some languages but do not really contain all of the characters one might want to use to fully express information in&nbsp;most languages. Unicode in this context becomes more than just a luxury -- if you are missing letters you need in your language then it becomes a necessity. </P>
<P>There was a recent thread in the microsoft.public.win32.programmer.international forum entitled "Developing ANSI application for multi-national Windows" where someone was strongly advocating <EM>not</EM> moving to Unicode because they believed their application (written in C, over 1 million lines, with over 50,000 strings, heavily relying on pragmas giving the code page and locale per source file to get their work done) was better served by keeping it all out of Unicode and relying on code page support. Of course&nbsp;almost&nbsp;immediately there were problems:</P>
<BLOCKQUOTE dir=ltr>
<P><FONT size=2>My biggest wonderment, which perhaps you can answer or even solve, is why a non-Unicode localized application (for MBCS languages) will only run properly if the *system* default locale is set to the proper language.</FONT></P>
<P><FONT size=2>I run the international versions of XP and 2000, but only Unicode applications run properly unless the system default locale is set; there are no provisions that I have found that let me say, "This application uses Japanese.Japan.932." Dialog boxes, drawn text, and other problems are abundant.</FONT></P>
<P><FONT size=2>These issues are obviated by Unicode, but for a project my size that is an undertaking that will take quite a while and detract from product enhancements that are necessary for the marketplace.</FONT></P></BLOCKQUOTE>
<P>Though people did point&nbsp;to <A href="http://www.microsoft.com/globaldev/tools/apploc.mspx">AppLocale</A>&nbsp;as a workaround, the fundamental problems in trying to make a complex application work with such methods will (in my opinion) quickly outweigh the "benefits" of avoiding the move to Unicode. Because in the end,&nbsp;code pages are not really enough....</P>
<P>&nbsp;</P>
<P><FONT color=#ff0000><EM>This post brought to you by </EM>"Â©"<EM> (<A href="http://www.fileformat.info/info/unicode/char/00a9/index.htm">U+00a9</A>, a.k.a. COPYRIGHT SIGN)<BR><FONT size=1>One of the most common code points people complain they lose in their non-Unicode applications since it is not on all ACPs</FONT></EM></FONT></P>
<hr/><p><a id="382318" href="#382318">#</a> <strong>CN</strong> on 1 Mar 2005 5:41 AM:</p><div style="margin-left: 1em">One could make a lot of silly jokes about what code pages would most appropriately lack the (c) symbol, in relation to their intellectual property laws...</div>
<p><a id="382319" href="#382319">#</a> <strong>Jonathan Payne</strong> on 1 Mar 2005 5:42 AM:</p><div style="margin-left: 1em">Why did Microsoft use the term 'Windows ANSI' when the character set is not ANSI?<br><br>Why does the Microsoft documentation sometimes use the term 'Unicode' when it is really talking about Unicode limited to 2 bytes per character (UCS-16?)?</div>
<p><a id="382327" href="#382327">#</a> <strong>Michael Kaplan</strong> on 1 Mar 2005 6:05 AM:</p><div style="margin-left: 1em">Well, if you look at code pages like Microsoft Shift-JIS, they became an industry standard. I don't think cp1252 was any worse than that. I think Helen's text gives the most coherent plausible source for calling it ANSI.<br><br>I personally find cp1252 to be more useful than ISO 8859-1. No one needs those control characters, and it supports more languages. The only bad thing is when web pages misreporte which they were.<br><br>As for the Unicode -- both UCS-2 (what I think you meant) and UTF-16 *are* Unicode. So why do the docs call it that? Because they are being correct.<br><br>But Windows is not limited to UCS-2 and has not been since Windows 2000 (or even NT4 in IE and Office).</div>
<p><a id="389696" href="#389696">#</a> <strong>Mihai</strong> on 8 Mar 2005 10:17 AM:</p><div style="margin-left: 1em">And in the quoted text there is the same problem that confuses everybody:<br>==================<br>&quot;Microsoft Windows uses a slight modification of Latin1 called the Windows ANSI code set&quot;<br><br>&quot;Windows ANSI is a single-byte coding scheme&quot;<br><br>&quot;Windows ANSI and other single-byte coding schemes can encode enough charactrs to express the letters in Western scripts.&quot;<br>==================<br>For Windows &quot;ANSI Code Page = System Active Code Page (ACP)&quot;, so it can be double byte or non-Latin 1.<br>This is for the readers, not for Michael, he knows it too well :-)<br><a target="_new" href="http://archives.miloush.net/michkap/archive/2005/02/08/369197.html">http://blogs.msdn.com/michkap/archive/2005/02/08/369197.aspx</a><br></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2011/11/30 <a href="http://archives.miloush.net/michkap/archive/2011/11/30/10242902.html">On not being well served by the mantra "must support Unicode"</a></p><p>2008/04/30 <a href="http://archives.miloush.net/michkap/archive/2008/04/30/8440675.html">Why WC2MB needs a CP, chaver sheli!</a></p><p>2007/07/14 <a href="http://archives.miloush.net/michkap/archive/2007/07/14/3873217.html">Code pages don't overlap all that much</a></p><p>2006/07/05 <a href="http://archives.miloush.net/michkap/archive/2006/07/05/656283.html">Custom code pages?</a></p><p>2006/01/07 <a href="http://archives.miloush.net/michkap/archive/2006/01/07/510411.html">Getting the characters in a code page</a></p><p>2005/09/10 <a href="http://archives.miloush.net/michkap/archive/2005/09/10/463371.html">Does size matter? And if so, how do you measure it?</a></p><p>2005/05/22 <a href="http://archives.miloush.net/michkap/archive/2005/05/22/420822.html">You may want to rethink your choice of UTF, #2 (Speed of operations)</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/03/02/383458.html" title="Why do LCIDs skip around so much?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/03/01/382200.html" title="Takes your breath away">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-03">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-03-01">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/03/01/382289.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
</html>