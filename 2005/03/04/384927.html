<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/03/04/384927.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>"Michael, why does ToTitleCase suck so much?"</title></head><body>
<h1>"Michael, why does ToTitleCase suck so much?"</h1>
<p><em>by Michael S. Kaplan, published on 2005/03/04 02:02 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/03/04/384927.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P dir=ltr>In the title of this post I am actually quoting email I have received on the topic, mail similar to others I have been sent many times ever since I started posting about case issues over the last few months. And that is one of the tamer ones&nbsp;I have received!</P>
<P>People seem to hate the <A title=TextInfo href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationtextinfoclasstopic.asp" target=_blank>TextInfo</A> class for its <A title=ToTitleCase href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfSystemGlobalizationTextInfoClassToTitleCaseTopic.asp" target=_blank>ToTitleCase</A> method.</P>
<P>To quote a slightly "nicer" version of the question, someone named Ruben posted the following in the suggestion box:</P>
<BLOCKQUOTE dir=ltr>
<P><FONT size=2><EM>Perhaps an article on the problems when using things like ToTitleCase, which is at war with just about any style guide, just loves acronyms (albeit the feeling is not mutual), and breaks spelling for languages like Dutch and Gaelic (e.g., IJmuiden and Oileán na gCapall, which are perfectly regular capitalizations in their respective languages; as an illustration on why Unicode doesn't solve linguistic issues, despite many people's assumptions that it does).</EM></FONT></P></BLOCKQUOTE>
<P>You can probably see&nbsp;why I put the word "nicer" in quotes, since many will feel as I do that you do not have to use foul language to post text that is harsh and biting!</P>
<P>For the origins of attemps at this method, we will need to head into the way-back machine to look at the old VB/VBA function, <A href="http://msdn.microsoft.com/library/en-us/vbenlr98/html/vafctstrconv.asp">StrConv</A>&nbsp;and its vbProperCase conversion. This function "Converts the first letter of every word in string to uppercase." It does so by defining the word breaking characters as follows:</P>
<BLOCKQUOTE dir=ltr>
<P><EM><FONT size=2>The following are valid word separators for proper casing: </FONT></EM><A href="http://msdn.microsoft.com/library/en-us/veendf98/html/defnull.asp"><EM><FONT size=2>Null</FONT></EM></A><EM><FONT size=2> (<B>Chr$(</B>0<B>)</B>), horizontal tab (<B>Chr$(</B>9<B>)</B>), linefeed (<B>Chr$(</B>10<B>)</B>), vertical tab (<B>Chr$(</B>11<B>)</B>), form feed (<B>Chr$(</B>12<B>)</B>), carriage return (<B>Chr$(</B>13<B>)</B>), space (SBCS) (<B>Chr$(</B>32<B>)</B>). The actual value for a space varies by country for </FONT></EM><A href="http://msdn.microsoft.com/library/en-us/veendf98/html/defdbcs.asp"><EM><FONT size=2>DBCS</FONT></EM></A><EM><FONT size=2>.</FONT></EM></P></BLOCKQUOTE>
<P>Note that this function shows the same qualities of international ignorance, and even though the function has an LCID parameter, the actual amount of variation between locales is pretty small.</P>
<P>The VB function gets a little better in VB.Net (cf: <A href="http://msdn.microsoft.com/library/en-us/vblr7/html/vafctstrconv.asp">VB.Net's StrConv</A>), in that it now has a linguistic casing option, which is great for Turkic....</P>
<P>And then there is <A title="the Unicode Standard" href="http://www.unicode.org/" target=_blank>the Unicode Standard</A>, which defines the title case property values in Unicode and the <A title="Unicode Character Database" href="http://www.unicode.org/ucd/" target=_blank>Unicode Character Database</A> with the following excerpted quotes:</P>
<BLOCKQUOTE dir=ltr>
<P><FONT size=2><EM>"Because of the inclusion of certain composite characters for compatibility, such as <A href="http://www.fileformat.info/info/unicode/char/01f1/index.htm">U+01F1</A> "DZ" LATIN CAPITAL LETTER DZ, there is a third case, called titlecase, which is used where the first character of a word is to be capitalized. An example of such a character is: <A href="http://www.fileformat.info/info/unicode/char/01f2/index.htm">U+01F2</A> "Dz" LATIN CAPITAL LETTER D WITH SMALL LETTER Z. "</EM></FONT></P>
<P><FONT size=2><EM>"The choice of which words to titlecase is language-dependent. For example, "Taming of the Shrew" would be the appropriate capitalization in English, not "Taming Of The Shrew". Moreover, the determination of what actually constitutes a word is also language-dependent. For example, l'arbre might be considered two words in French, while can't is considered one word in English."</EM></FONT></P>
<P><FONT size=2><EM>"In most cases, the titlecase is the same as the uppercase, but not always. For example, the titlecase of <A href="http://www.fileformat.info/info/unicode/char/01f1/index.htm">U+01F1</A> "DZ" capital dz is <A href="http://www.fileformat.info/info/unicode/char/01f2/index.htm">U+01F2</A> "Dz" capital d with small z."</EM></FONT></P>
<P><FONT size=2><EM>"There are even single words like vederLa in Italian or the name McGowan in English, which are neither upper, lower, nor titlecase. This format is sometimes called innerCaps, and is often used in programming and in Web names. Once the string "McGowan" has been uppercased, lowercased or titlecased, the original cannot be recovered by applying another uppercase, lowercase, or titlecase operation. There are also single characters that do not have reversible mappings, such as the Greek sigmas above."</EM></FONT></P></BLOCKQUOTE>
<P>Obviously Unicode hints at the complexities of title case in languages, but it does not really do much to support it in data (a task that would obviously require dictionaries, rules, and data. This even maks an interesting interview question, for people who are looking into those. :-)</P>
<P>While the text does talk a mean game, the actual data in Unicode for title casing is limited to a few of the digraphs like Ǳ (<A href="http://www.fileformat.info/info/unicode/char/01f1/index.htm">U+01f1</A>,&nbsp;LATIN CAPITAL LETTER&nbsp;DZ), which through the miracle of title casing becomes ǲ&nbsp;(<A href="http://www.fileformat.info/info/unicode/char/01f2/index.htm">U+01f2</A>, LATIN CAPITAL LETTER D WITH SMALL LETTER Z. In this context the Unicode data is little more than making sure that diagaphs get their own say....</P>
<P>Now let us move to the TextInfo method ToTitleCase method, which explains itself as follows:</P>
<BLOCKQUOTE dir=ltr>
<P><FONT size=2><EM>Generally, title casing converts the first character of a word to uppercase and converts the rest of the letters to lowercase.</EM></FONT></P>
<P><FONT size=2><EM>The returned string might differ in length from the input string. For more information on casing, refer to the Unicode Technical Report #21 "Case Mappings," published by the Unicode Consortium (http://www.unicode.org). The current implementation preserves the length of the string; however, this behavior is not guaranteed and could change in future implementations.</EM></FONT></P>
<P><FONT size=2><EM>Casing semantics depend on the culture in use. If using the invariant culture, the casing semantics are not culture-sensitive. If using a specific culture, the casing semantics are sensitive to that culture. Words that are selected for title casing depend on the language.</EM></FONT></P>
<P><FONT size=2><EM>If a security decision depends on a string comparison or a case-change operation, use the </EM></FONT><A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcultureinfoclassinvariantculturetopic.asp"><FONT size=2><EM>InvariantCulture</EM></FONT></A><FONT size=2><EM> to ensure that the behavior will be consistent regardless of the culture settings of the system. However, the invariant culture must be used only by processes that require culture-independent results, such as system services; otherwise, it produces results that might be linguistically incorrect or culturally inappropriate.</EM></FONT></P></BLOCKQUOTE>
<P>Now, currently the only culturally different casing behavior is the same rule one sees in Turkic languages, as I described in <A id=CategoryEntryList href="http://archives.miloush.net/michkap/archive/2004/12/03/274288.html">The [Upper]Case of the Turkish İ (or: Casing, the 2nd)</A>. While the potential for richer behavior exists such as some of the cases Ruben is referring to, none of them currently happen. But the way is open in the future for such things to <EM>possibly</EM> happen. </P>
<P>This would, however, be an expensive operation to get right in terms of the amount of research that would be required. The help topic is therefore at best optimistic about such work happening.&nbsp;It may be best to set expectations more realistically and not talk about how culturally sensitive this method is (since it is not, at least not yet!).</P>
<P>Perhaps&nbsp;we could point out how it goes along wih Unicode's somewhat vague definition, so that at this point it is really just lame by the transitive theory of developing to a standard. </P>
<P>It makes a catchy slogan -- do you think we can we put </P>
<BLOCKQUOTE dir=ltr>
<P><EM>TextInfo.ToTitleCase&nbsp;-- No lamer than Unicode</EM></P></BLOCKQUOTE>
<P>on a T-shirt? :-)</P>
<P>&nbsp;</P>
<P><FONT color=#ff0000><FONT size=2><EM>This post brought to you by </EM>"Ǌ"<EM>, </EM>"ǌ"<EM>, and</EM> "ǋ" </FONT></FONT><EM><FONT color=#ff0000><FONT size=2>(</FONT><A href="http://www.fileformat.info/info/unicode/char/01ca/index.htm"><FONT size=2>U+01ca</FONT></A><FONT size=2>, </FONT><A href="http://www.fileformat.info/info/unicode/char/01cc/index.htm"><FONT size=2>U+01cc</FONT></A><FONT size=2>, and </FONT><A href="http://www.fileformat.info/info/unicode/char/01cb/index.htm"><FONT size=2>U+01cb</FONT></A><FONT size=2>, a.k.a. LATIN CAPITAL LETTER NJ, LATIN SMALL LETTER NJ, and&nbsp;LATIN CAPITAL LETTER N WITH SMALL LETTER J)<BR></FONT><FONT size=1>(a.k.a. the Unicode UPPERcase, LOWERcase, and TITLEcase forms of the letter)</FONT></FONT></EM></P>
<hr/><p><a id="385193" href="#385193">#</a> <strong>AC</strong> on 4 Mar 2005 8:20 AM:</p><div style="margin-left: 1em">Or maybe you could get:<br><br>Unicode: No lamer than Microsoft<br><br>put on a shirt, instead.</div>
<p><a id="385454" href="#385454">#</a> <strong>Sebastian Redl</strong> on 4 Mar 2005 12:29 PM:</p><div style="margin-left: 1em">Don't you think that &quot;If it can't be implemented properly, don't implement it.&quot; would be a good maxim to follow?</div>
<p><a id="385458" href="#385458">#</a> <strong>Michael Kaplan</strong> on 4 Mar 2005 12:32 PM:</p><div style="margin-left: 1em">Well, from the point of view of implementing a property that exists in Unicode, it *is* implemented. <br><br>The parts that have apirations to higher principles of cultural sensitivity, on the other hand... :-)</div>
<p><a id="385584" href="#385584">#</a> <strong>Ruben</strong> on 4 Mar 2005 4:30 PM:</p><div style="margin-left: 1em">And you're calling *my* language harsh and biting? IMHO, neither Unicode nor <a title="ToTitleCase" href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfSystemGlobalizationTextInfoClassToTitleCaseTopic.asp" target="_blank">ToTitleCase</a> is lame. They're great once you know how (and when) to use them. It's the crappy documentation that accompanies them that's lame.</div>
<p><a id="385586" href="#385586">#</a> <strong>Michael Kaplan</strong> on 4 Mar 2005 4:35 PM:</p><div style="margin-left: 1em">Heh heh heh -- ok, I guess I am harder on stuff I own. Given how it they are both documented (Unicode introduces the concept by talking about the same sort of linguistic issues that the .NET Framework hints at and that your posts gives additional concrete answers about).<br><br>Both are lame in that they hint at an important issue and then fail to deliver on it. <br><br>Your post reflects that fact, and is only biting at what (in my opinion) deserves to be bitten. :-)</div>
<p><a id="386058" href="#386058">#</a> <strong>Norbert</strong> on 5 Mar 2005 10:32 PM:</p><div style="margin-left: 1em">So the only localized behavior right now is for Turkish &quot;i&quot;? It should be very easy to implement a far better <a title="ToTitleCase" href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfSystemGlobalizationTextInfoClassToTitleCaseTopic.asp" target="_blank">ToTitleCase</a> for German - capitalize the first letter of the string passed in and return the remainder unmodified. German uses the same casing rules for titles as for normal sentences. I think the same is true for a large set of other languages.</div>
<p><a id="386059" href="#386059">#</a> <strong>Michael Kaplan</strong> on 5 Mar 2005 10:35 PM:</p><div style="margin-left: 1em">Norbert -- that much is there now (heck, that much was in the original VB function). It is all of the other special rules for various languages that are not followed.<br></div>
<p><a id="8333770" href="#8333770">#</a> <strong>Joshua Drake</strong> on 24 Mar 2008 12:18 PM:</p><div style="margin-left: 1em"><P>You forgot to mention that it ignores UPPERCASE strings.</P></div>
<p><a id="8333831" href="#8333831">#</a> <strong>Michael S. Kaplan</strong> on 24 Mar 2008 12:48 PM:</p><div style="margin-left: 1em"><p>Well, &quot;ignores&quot; is a relative term here, right?</p>
<p>Certainly based on the VB-type &quot;proper case&quot; functionality they wanted to emulate, it is broken.</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/08/08 <a href="http://archives.miloush.net/michkap/archive/2008/08/08/8842654.html">What's in a name?</a></p><p>2006/08/18 <a href="http://archives.miloush.net/michkap/archive/2006/08/18/706383.html">Sometimes, uppercasing sucks</a></p><p>2005/04/04 <a href="http://archives.miloush.net/michkap/archive/2005/04/04/405174.html">When casing does not need to roundtrip in .NET</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/03/04/385131.html" title="Yet another site integrates Blogmap support">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/03/03/384392.html" title="The most robust software project I ever worked on">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-03">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-03-04">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/03/04/384927.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:42 GMT -->
</html>