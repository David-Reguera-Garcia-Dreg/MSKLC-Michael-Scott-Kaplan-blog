<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/06/26/432874.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Client side locale settings on the server?</title></head><body>
<h1>Client side locale settings on the server?</h1>
<p><em>by Michael S. Kaplan, published on 2005/06/26 21:20 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/06/26/432874.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Recently overheard in the microsoft.public.dotnet.internationalization newsgroup:</FONT></P>
<BLOCKQUOTE dir=ltr>
<P><FONT face=Tahoma><FONT face="Times New Roman">Hi,</FONT></FONT></P>
<P><FONT face=Tahoma><FONT face="Times New Roman">I'm developing a web application, in that I have to display the&nbsp;short date according to the customized date format of client machine's culture.</FONT></FONT></P>
<P><FONT face=Tahoma><FONT face="Times New Roman">For example&nbsp;Culture = "fr-CA"&nbsp;&nbsp; and default Short date format =&nbsp; "yyyy-MM-dd", when&nbsp;you customize the shortdate format to "dd.MM.yy". Then the short date should&nbsp;be displayed in the format "dd.MM.yy" to the client.</FONT></FONT></P>
<P><FONT face=Tahoma><FONT face="Times New Roman">I'm able to display the date in the custom short date format while&nbsp;executing through the VS2005 IDE. But after deploying the same web application, the date is displayed only in the default short date format, though the short date format is customized.</FONT></P></BLOCKQUOTE></FONT>
<P><FONT face=Tahoma>A commonly asked question, though unfortunately the answer is not really&nbsp;one that will make peron asking happy&nbsp;-- those settings (basically user overrides) are not available on the server. They are retrieved through a call to the Win32 NLS <A href="http://msdn.microsoft.com/library/en-us/intl/nls_34rz.asp">GetLocaleInfo</A> function (for the short date you would pass the LOCALE_SSHORTDATE flag).</FONT></P>
<P><FONT face=Tahoma>The only piece of information that the server gets related to locale is the HTTP_ACCEPT_LANGUAGE (which, as I mentioned in the article <a href="http://archives.miloush.net/michkap/archive/2005/02/04/366922.html">GEOID -- The LCIDs maligned little brother....</A>) is currently based on the user locale. Anyway, right now it is based on the setting that you can set your <A href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemglobalizationcultureinfoclasscurrentculturetopic.asp">CurrentCulture</A> to, but there is no way to get the overrides....</FONT></P>
<P><FONT face=Tahoma>Of course if you have a client side component you could send the information to the server but that has all kinds of dependencies on what is running on the client side, which ASP.NET tries to avoid when it can.</FONT></P>
<P><FONT face=Tahoma>Another option is to have UI in the application that allows your users to set their preferred format if they would like to do so. Most users probably would not bother (most users do not change the setting in the Regional and Language Options UI, either) but those who would like to change a setting would probably not mind doing so.</FONT></P>
<P><FONT face=Tahoma>If anyone complains, you can either blame the IETF for not having an HTTP header with the info, or on the makers of all the big browsers for not agreeing on some sort of standard for passing the data. :-)</FONT></P>
<P><FONT face=Tahoma size=2><EM>On a side note, in that post about GEOIDs I meant what I said about the fact that many settings probably should be configured to use the GEOID where they are using an LCID today. That PM (Matt Ayers) is right. I tend to raz Matt a lot because we just have that kind of a relationship, but I do like to give him credit when I think he's right. We really ought be more region based when it makes sense to be so....</EM></FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma><FONT color=#ff0000><EM>This post brought to you by</EM> "<FONT size=5>â™ƒ</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/2643/index.htm">U+2643</A>, a.k.a. JUPITER)</EM></FONT></FONT></P>
<hr/><p><a id="432988" href="#432988">#</a> <strong>David</strong> on 27 Jun 2005 5:13 AM:</p><div style="margin-left: 1em">Just one side note here: Outlook Web Access displays its UI in the language that is set on the browser one is using. This is a horribly broken design. Whenever I travel in some foregin country and try to check email from an internet cafe, I get the UI in some language I don't have a clue about. So, just as a general thought: I really believe language choices ought to either be asked from the user, stored in some sort of user profile, but should in most cases NOT depend on the locals of the system someone is using to access a site.</div>
<p><a id="432990" href="#432990">#</a> <strong>Michael S. Kaplan</strong> on 27 Jun 2005 5:21 AM:</p><div style="margin-left: 1em">Hi David,<br><br>Of course you can go to Tools|Internet Options..., hit the Languages... button, and select the language you want to see it in.<br><br>It really does boil down to a problem with no standard for communicating all of the different possible language settings. Just about every product can be said to be broken since they tend to default to using the one setting that is available....</div>
<p><a id="433002" href="#433002">#</a> <strong>David</strong> on 27 Jun 2005 6:30 AM:</p><div style="margin-left: 1em">Well, not on a locked down computer in an internet cafe... I agree that the initial language for a web page is difficult to choose, but once any site is in a user context, it should store the language preference for that user and use that.</div>
<p><a id="433003" href="#433003">#</a> <strong>CornedBee</strong> on 27 Jun 2005 6:33 AM:</p><div style="margin-left: 1em">To be precise, the value of the Accept-Language HTTP header depends on the browser settings. IE, by default, sends the Windows locale setting, but Mozilla, for example, uses its own internal setting. IE can be overridden as well.<br><br>The problem mentioned in the first comment is a result of poor web application design. Locale should of course default to the Accept-Language setting - that's what it's there for. However, every web application should allow the user to override this in their personal account settings.</div>
<p><a id="6833300" href="#6833300">#</a> <strong>Tanveer Badar</strong> on 22 Dec 2007 1:06 AM:</p><div style="margin-left: 1em"><p>There is supposed to be an implementation of &lt;globalization enableClientBasedCulture/&gt; in some future version of netfx. But MSDN says (<a rel="nofollow" target="_new" href="http://msdn2.microsoft.com/en-us/library/hy4kkhe0.aspx">http://msdn2.microsoft.com/en-us/library/hy4kkhe0.aspx</a>) this is not in use (read not implemented) at the moment.</p>
</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/06/27/432986.html" title="A quick look at Whidbey&#39;s TextRenderer">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/06/25/432723.html" title="Line breaking, according to DrawText">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-06">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-06-26">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/06/26/432874.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>