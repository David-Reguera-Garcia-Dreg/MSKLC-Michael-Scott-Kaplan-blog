<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/06/27/432986.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>A quick look at Whidbey's TextRenderer</title></head><body>
<h1>A quick look at Whidbey's TextRenderer</h1>
<p><em>by Michael S. Kaplan, published on 2005/06/27 06:59 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/06/27/432986.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Over the weekend, TheMuuj mentioned in a <a href="http://archives.miloush.net/michkap/archive/2005/06/25/432723.html#432727">comment</A>:</FONT></P>
<BLOCKQUOTE dir=ltr>
<P><FONT face=Tahoma><EM><FONT size=2><FONT face="Times New Roman">As far as I know, there are new classes in Whidbey for drawing text with GDI (as a result of GDI+'s questionable screen rendering in some cases). Are these based on DrawText? </FONT></FONT></EM></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>This is not exactly the reason. There are two basic problems that come into play with GDI+:</FONT></P>
<UL>
<LI><FONT face=Tahoma>There are some performance issues caused by the somewhat stateless nature of GDI+, where device contexts would be set and then the original restored after each call.</FONT></LI>
<LI><FONT face=Tahoma>The shaping engines for international text have been updated many times for Windows/Uniscribe and for Avalon, but have not been updated for GDI+, which causes international rendering support for new languages to not have the same level of quality.</FONT></LI></UL>
<P><FONT face=Tahoma>The object is the <A href="http://msdn2.microsoft.com/library/exkzzayx(en-us,vs.80).aspx">System.Windows.Forms.TextRenderer</A> class, which has two methods that can be used to render text using GDI/Uniscribe rather than GDI+:</FONT></P>
<UL>
<LI><FONT face=Tahoma><A href="http://msdn2.microsoft.com/library/4eab953f(en-us,vs.80).aspx">DrawText</A> - Draws the specified text at the specified location using the specified device context, font, and color.</FONT></LI>
<LI><FONT face=Tahoma><A href="http://msdn2.microsoft.com/library/0y4ehd2x(en-us,vs.80).aspx">MeasureText</A> - Measures the specified text when drawn with the specified font. </FONT></LI></UL>
<P><FONT face=Tahoma>This class and these methods (which have several different overrides) allow WinForms to support new languages as the OS support is added. For example, the <a href="http://archives.miloush.net/michkap/archive/2005/01/26/360685.html">ELK support</A> in Windows XP SP2 added font and rendering support to the operating system for Bengali and Malayalam, but versions 1.0 and 1.1 of the .NET Framework would not render these scripts properly, even when the right font was being used. However, version 2.0 (Whidbey) will be able to properly support these scripts whenever the OS can support them....</FONT></P>
<P><FONT face=Tahoma>I have not personally experienced the performance issues but have beentold by people who have that the support can also very useful. I am more of a "language support" guy myself, though. :-)</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma color=#ff0000><EM>This post brought to you by</EM> "<FONT size=4>আ</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/0986/index.htm">U+0986</A>, BENGALI LETTER AA)<BR><FONT size=1>(A letter that was happy to see proper&nbsp;rendering support of Bengali and Assamese conuncts in managed code using XP SP2 and Whidbey!)</FONT></EM></FONT></P>
<hr/><p><a id="433022" href="#433022">#</a> <strong>TheMuuj</strong> on 27 Jun 2005 12:41 PM:</p><div style="margin-left: 1em">So these *are* Uniscribe wrappers?  That's good to hear, but it's not readily apparent in the beta-2 documentation.  Honestly, it's not immediately apparent in looking at them in Reflector, either.<br><br>As a (possibly unintended) bonus, these new methods do seem to solve the pixel-layout problems when displaying and measuring text for screen rendering.  While this was not a critical issue, it was a general annoyance to a lot of developers and users.<br><br>Part of me feels that it is a shame that these are in System.Windows.Forms and not System.Drawing so that they'd be more available to ASP.NET applications generating graphics on the fly, but I also suspect there's a good reason for this.  I suppose I need to research and find out what CAS permissions are required to call these methods.</div>
<p><a id="433023" href="#433023">#</a> <strong>Michael S. Kaplan</strong> on 27 Jun 2005 12:51 PM:</p><div style="margin-left: 1em">Well, remember that Uniscribe is plugged in to be able to be used from many of the core GDI functions that eventually get to ExtExtOutW, including DrawText, et. al. The doc issue will hopefully improve. :-) I can't comment on where it is in the object model, though. I am not sure of the exact reasoning....</div>
<p><strong>vchrung</strong> on 24 Apr 2009 6:27 AM:</p><div style="margin-left: 1em"><p>hi,</p>
<p>i have developed a software for one institution here in kerala...So, i have used malayalam font ..i did this in c# in visual studio 2008..and for the malayalam i use the keyman 6.0 and the malayalam font phonetic malayalam.Bt there are some characters in malayalm like “ര്‍,ല്‍“..which gets saved to the access file bt cannot get a report or print fromit...the error says..&quot;unhandled exception&quot; and &quot;a generic error occured in GDI+&quot;...please help...</p></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2007/11/07 <a href="http://archives.miloush.net/michkap/archive/2007/11/07/5958318.html">Often 'X doesn't work' in the docs actually implies 'We couldn't get X to work' :-)</a></p><p>2007/08/26 <a href="http://archives.miloush.net/michkap/archive/2007/08/26/4570979.html">Blame Kannada! (ಕನ್ನಡ)</a></p><p>2007/04/14 <a href="http://archives.miloush.net/michkap/archive/2007/04/14/2134278.html">Rhymes with Amharic #3 (a.k.a. Read and write a language w/o even getting out of my [em]bed? Kewl!)</a></p><p>2006/06/16 <a href="http://archives.miloush.net/michkap/archive/2006/06/16/634291.html">Microsoft *does* support OpenType!</a></p><p>2006/06/12 <a href="http://archives.miloush.net/michkap/archive/2006/06/12/628714.html">Uniscribe from Visual Basic</a></p><p>2005/12/19 <a href="http://archives.miloush.net/michkap/archive/2005/12/19/505309.html">Customizing shaping behvior in Uniscribe</a></p><p>2005/11/20 <a href="http://archives.miloush.net/michkap/archive/2005/11/20/494829.html">Private fonts: for members only</a></p><p>2005/06/27 <a href="http://archives.miloush.net/michkap/archive/2005/06/27/433208.html">GDI, GDI+, EUDC, TextRenderer. Connection?</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/06/27/433186.html" title="A few words about enduserdefined characters">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/06/26/432874.html" title="Client side locale settings on the server?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-06">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-06-27">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/06/27/432986.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>