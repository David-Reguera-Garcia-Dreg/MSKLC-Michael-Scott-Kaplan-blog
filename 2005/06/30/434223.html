<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/06/30/434223.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Query collation source data?</title></head><body>
<h1>Query collation source data?</h1>
<p><em>by Michael S. Kaplan, published on 2005/06/30 10:50 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/06/30/434223.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>Recently someone asked a question via the Contact link:</FONT></P><FONT size=2>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><EM>Hi, I was wondering if you know of a way to get the stroke count of a chinese character? This function seem to be in Word (chinese index), and also in .NET (string sort according to stroke and bopomofo)</EM></P>
<P><EM>But I can't seem to find any API functions exposed to retrieve the stroke count nor bopomofo?</EM></P></BLOCKQUOTE></FONT>
<P><FONT face=Tahoma>Of course they could have asked in the Suggestion Box and suggested it as a topic, but I suspect they were not considering that at the time. But it is a question I have been itching to answer anyway, so I'll take this as a bit of serendipity. :-)</FONT></P>
<P><FONT face=Tahoma>The quick answer: </FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face=Tahoma>You can't.</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>The fast paced answer that is a bit less of a sprint: </FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face=Tahoma>Although the collation tables for the various CJK languages are based on source data that has the various pronunciations and stroke counts, the source data is gone after the weights are assigned.</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>The long answer:</FONT></P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px">
<P><FONT face=Tahoma>I'll tell you a secret -- that original source data is not just gone from the product, it is actually gone from this plane of existence, as far as I have been able to gather. No one seems to know where it is anymore, and the person who did a lot of the work is also gone. Access to the source&nbsp;code would only get you those weights. And the collation APIs work quite well at using that data in every single way except getting the original source back....</FONT></P>
<P><FONT face=Tahoma>Maybe it will show up somewhere and people find stuff all the time. And obviously it can be reconstructed by working from the same original standards -- it is based on a known entity. </FONT></P>
<P><FONT face=Tahoma>There is one exception to this: Korean, where Hanja sorting is based on the Hanguel pronunciation and thus in the case of Korean the pronunication is fairly intrinsic and easy to get to, since the Hanguel is right there. The source is built in and fairly easy to reconstruct using the information I mention in my explanation of <a href="http://archives.miloush.net/michkap/archive/2004/11/30/272207.html">why&nbsp;NORM_IGNORENONSPACE makes Korean text sort in apparently random order</A>. In this one case, the data is right there.</FONT></P>
<P><FONT face=Tahoma>The same is not true of (for example)&nbsp;Bopomofo, since the actual Bopomofo script is not sorted in with the Han ideographs; this does not meet user expectations. Kind of a shame in a way, it would be cool to have the Bopomofo interlaced ad one might do&nbsp;in a Bopomofo dictionary or address book. But its not what the users expect, which does really rule our plans in such cases. And it is not true of Pinyin, which is of course Latin letters (if they started sorting in the middle of Han text the natural order of the universe would seem fragmented!). It is kind of true for stroke-based counts since obviously one can just count the strokes and work backwards, but that is hardly a function in the API....</FONT></P></BLOCKQUOTE>
<P dir=ltr><FONT face=Tahoma>Now I actually have been doing a step better than reconstructing that data -- I have been working to try to expand it, for future versions. And of course to make sure it is kept, since it is the secular equivalent of the 'Collation Holy Scripture'. There are not currently&nbsp;plans to expose the source data directly, though it may be something worthy to think about at some point. I'll consider this request as another data point in that decision, when/if something is decided. :-)</FONT></P>
<P dir=ltr><FONT face=Tahoma></FONT>&nbsp;</P>
<P dir=ltr><FONT face=Tahoma color=#ff0000><EM>This post brought to you by</EM> "ã„…" <EM>(<A href="http://www.fileformat.info/info/unicode/char/3105/index.htm">U+3105</A>, a.k.a. BOPOMOFO LETTER B)</EM></FONT></P>
<hr/><p><a id="434288" href="#434288">#</a> <strong>J</strong> on 30 Jun 2005 1:04 PM:</p><div style="margin-left: 1em">Hi, maybe I'm missing something obvious as I'm no specialist, but: (assuming the maximum stroke count is 40), prepare 40 strings each of them with a character with N strokes (where N is the string #). Sort the target character with them. Its position should be the stroke count?<br><br>The strings can be precomputed, one can do binary search on them, and it would probably be necessary to store both the first and the last character of a certain stroke count to actually know what count the target character belongs to.<br><br>I hope this is not obviously dumb, I'm no expert :)</div>
<p><a id="434409" href="#434409">#</a> <strong>Michael S. Kaplan</strong> on 30 Jun 2005 6:51 PM:</p><div style="margin-left: 1em">Well, you aren't missing anything. But it won't work, because the existing weights were generated by putting all the characters in the right order and then just giving them sequential numbers. So unless you know where the &quot;break points&quot; are between each stroke count or pronunciation, you cannot decide what bucket things fall into.<br><br>Now data like what those &quot;brea kpoints&quot; are might be cool to think about, but definitely it would be a lot of work to do....</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/06/30/434453.html" title="Michael Penn wants his space....">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/06/29/433824.html" title="Update on Community Server issues that seem to affect this blog">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-06">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-06-30">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/06/30/434223.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>