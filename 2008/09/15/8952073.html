<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/09/15/8952073.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>UCS-2 to UTF-16, Part 2: A&P of a 'linguistic character'</title></head><body>
<h1>UCS-2 to UTF-16, Part 2: A&P of a 'linguistic character'</h1>
<p><em>by Michael S. Kaplan, published on 2008/09/15 07:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2008/09/15/8952073.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
Previous blogs in this series of blogs on this Blog: 
<UL>
<LI><B><A href="http://archives.miloush.net/michkap/archive/2008/08/30/8907667.html" mce_href="http://archives.miloush.net/michkap/archive/2008/08/30/8907667.html">Part 0: The intro, sans content</A></B></LI>
<LI><B><A href="http://archives.miloush.net/michkap/archive/2008/09/08/8931641.html" mce_href="http://archives.miloush.net/michkap/archive/2008/09/08/8931641.html">Part 1: Getting the obvious out of the way</A></B><BR></LI></UL>
<P><SMALL><FONT color=#ff0000><I>A&amp;P in the title stands for Anatomy and Physiology, since in some alternate universe I went ahead and got a medical degree and made a good friend (a friend who, in that alternate universe, is still alive) proud of me. Ignore it, the deeper meaning of the title, even when it exists, isn't really important. :-)<BR></I></FONT></SMALL></P>
<P>Now that I've made everyone thinking "Let's update to support UTF-16 instead of UCS-2" they need to just back the hell off a few steps with the previous blog, I thought it might be good to go a little deeper in so you can see that even though you may have been completely and totally wrong, that there is a good basis for you thinking the way you were, and that you can use that knowledge to feel better about future steps. :-)</P>
<P>In theory, there is very little difference between the general case of <B>linguistic character</B> as I defined it last time and the specific case that got everyone freaking out about UCS-2 (surrogate pairs).</P>
<P>In practice, all <B>linguistic characters</B> fall into one of <FONT color=#999999><STRIKE>two</STRIKE></FONT>three categories:</P>
<UL>
<LI>A <B>Surrogate Pair</B> (two code units, a high and a low surrogate), neither of which is itself a character, linguistic or otherwise. The cheese may stand alone, but surrogate code units didn't teach it how, if you know what I mean;</LI>
<LI>A <B>Grapheme Cluster</B> (to use Unicode's term) aka <B>Text Element</B> (to use Microsoft's in the .NET Framework), made of two or more code units, at least some though not all of which can be independently thought of as being <B>linguistic characters</B> themselves;</LI>
<LI>A <B>Sort Element</B> (to use my term, via this blog) aka <B>Compression</B> (to use Microsoft's term) aka <B>Contraction</B> (to use Unicode's), made up of two or more code units, all of which can be independently thought of as being <B>linguistic characters</B> themselves.</LI></UL>To show an example of each: 
<UL>
<LI><FONT size=4>êéÄ</FONT>, aka UGARITIC LETTER ALPA, aka U+10380, aka U+d800 U+df80 -- this one is four bytes in UTF-8, two code units in UTF-16, and one code unit in UTF-32 -- interestingly, always four bytes!</LI>
<LI><FONT size=4>·π∏</FONT>, aka the fully decomposed form of U+1e78 (LATIN CAPITAL LETTER U WITH TILDE AND ACUTE), aka U+0055 U+0303 U+0301 -- this one is five bytes in UTF-8, three code units or six bytes in UTF-16, and three code units or 12 bytes in UTF-32;</LI>
<LI><FONT size=4>dzs</FONT>, a sequence of letters that collates together in Hungarian, aka U+0064 U+007a U+0073 -- this one is three bytes in UTF-8, three code units or six bytes in UTF-16, and three code units or 12 bytes in UTF-32.</LI></UL>
<P>Now one can argue at length on relative consequences of truncation of any of these sequences of code units. You might even make an argument that truncation is most serious in the first case and then gets less and less serious as you go down the list.</P>
<P><I>Truncation in this case is a superset of any operation that splits apart the component pieces before a user's eyes, including cursor movement through the string, deletion of a single "character" via the delete key, cutting off the end to fit in a buffer, or whatever. Anything that would show a lack of respect for a <B>linguistic character</B>'s boundaries. Everyone gets involved here -- fonts, keyboards, you name it...</I><BR></P>
<P>From one point of view you might be right if that is your argument. <BR></P>
<P>But as long as we are choosing to call them <B>linguistic characters</B> I am going to channel that <I>Spock-with-a-beard</I> version of me that managed to avoid the scandal with the Dean's daughter and got a PhD in linguistics, and claim that they each have the potential to have unique meaning to a user who took the time and effort to put them into data.</P>
<P>In my opinion, you get no points for vicious truncation just because it doesn't look as bad.<BR></P>
<P>And in which case anyone with eager willingness to truncate should consider themselves to be a bloodthirsty linguistic character murderer. Sentence suspended by me since there really isn't a competent court with the authority to punish for this crime. :-)</P>
<P>Because if you are working on or using a computer program displaying or storing or in any way using data then you have a right to not have someone change the meaning of that data in the name of expediency.</P>
<P>And truncating a linguistic character has the potential to do just that.<BR></P>
<P>Okay, now that I have been all crazy about this, I'll point out that only the first two of these three categories have any supported way for a program looking for safe truncation points to detect them.</P>
<P>Which means if I made you feel guilty, you can take some solace in the fact that just about everyone is going to be doing it some of the time....</P>
<P>But it is worth considering that fact when one carefully does one's best avoiding problems with the categories that you can easily help with.<BR></P>
<P>Okay, that's it for now, next time I'll talk about those various operations an how to go about them....</P>
<P><BR></P>
<P><FONT color=#ff00ff><I>This blog brought to ou by</I><FONT size=7> ·π∏ </FONT><I>(<A href="http://www.fileformat.info/info/unicode/char/1e78" mce_href="http://www.fileformat.info/info/unicode/char/1e78">U+1e78</A>, aka LATIN CAPITAL LETTER U WITH TILDE AND ACUTE)</I><BR></FONT></P>
<hr/><p><a id="8952894" href="#8952894">#</a> <strong>Mihai</strong> on 15 Sep 2008 1:29 PM:</p><div style="margin-left: 1em"><p>And let's not forget the IVS (Ideographic Variation Sequences) :-)</p></div>
<p><a id="8952911" href="#8952911">#</a> <strong>Michael S. Kaplan</strong> on 15 Sep 2008 1:35 PM:</p><div style="margin-left: 1em"><p>No worries there -- for our present purposes, they fall into Category #2. :-)</p>
</div>
<p><a id="8952946" href="#8952946">#</a> <strong>John Cowan</strong> on 15 Sep 2008 2:17 PM:</p><div style="margin-left: 1em"><p>&quot;[...] at least some though not all of which can be independently thought of as being linguistic characters themselves&quot; isn't strictly true. &nbsp;Decomposed Korean syllables are grapheme clusters, but each component is a linguistic character.</p></div>
<p><a id="8952976" href="#8952976">#</a> <strong>Michael S. Kaplan</strong> on 15 Sep 2008 2:54 PM:</p><div style="margin-left: 1em"><p>Ah yes, that is true. Though most users would consider the net effect of truncation to be just as destructive to meaning....</p>
</div>
<p><a id="8953369" href="#8953369">#</a> <strong>John Cowan</strong> on 15 Sep 2008 10:23 PM:</p><div style="margin-left: 1em"><p>Well, the same is true of almost any sort of trunca</p></div>
<p><a id="8953444" href="#8953444">#</a> <strong>Michael S. Kaplan</strong> on 16 Sep 2008 12:18 AM:</p><div style="margin-left: 1em"><p>Exactly my point. :-)</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2009/06/29 <a href="http://archives.miloush.net/michkap/archive/2009/06/29/9800913.html">UCS-2 to UTF-16, Part 11: Turning it up to Eleven!</a></p><p>2009/06/10 <a href="http://archives.miloush.net/michkap/archive/2009/06/10/9723321.html">UCS-2 to UTF-16, Part 10: Variation[ Selector] on a theme...</a></p><p>2008/12/16 <a href="http://archives.miloush.net/michkap/archive/2008/12/16/9223301.html">UCS-2 to UTF-16, Part 9: The torrents of breaking CharNext/CharPrev</a></p><p>2008/12/09 <a href="http://archives.miloush.net/michkap/archive/2008/12/09/9187379.html">UCS-2 to UTF-16, Part 8: It's the end of the string as we know it (and I feel ellipses)</a></p><p>2008/12/04 <a href="http://archives.miloush.net/michkap/archive/2008/12/04/9173687.html">UCS-2 to UTF-16, Part 7: If it makes the SQL Server columns too small then it made the Oracle columns either too smallER or too smallEST</a></p><p>2008/11/24 <a href="http://archives.miloush.net/michkap/archive/2008/11/24/9134826.html">UCS-2 to UTF-16, Part 6: An exercise left for whoever needs some exercise</a></p><p>2008/10/15 <a href="http://archives.miloush.net/michkap/archive/2008/10/15/9000371.html">UCS-2 to UTF-16, Part 5: What's on the Next Level?</a></p><p>2008/10/06 <a href="http://archives.miloush.net/michkap/archive/2008/10/06/8977552.html">UCS-2 to UTF-16, Part 4: Talking about the ask</a></p><p>2008/09/18 <a href="http://archives.miloush.net/michkap/archive/2008/09/18/8956650.html">UCS-2 to UTF-16, Part 3: It starts with cursor movement (where MS simultaneously gets better and worse)</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/09/16/8953434.html" title="Is the flaw is in the constructs, or in the one who constructs? (aka I shoulda schwa that one coming)">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/09/15/8952073.html" title="UCS-2 to UTF-16, Part 2: A&amp;P of a &#39;linguistic character&#39;">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-09">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-09-15">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/09/15/8952073.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
</html>