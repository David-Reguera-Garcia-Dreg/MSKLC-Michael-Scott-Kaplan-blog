<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/12/16/9225748.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Grody to the Max[Date]!</title></head><body>
<h1>Grody to the Max[Date]!</h1>
<p><em>by Michael S. Kaplan, published on 2008/12/16 10:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2008/12/16/9225748.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p>Ben's question was a reasonable one:</p><blockquote><p><i><font face="times new roman,times">Hello,<br><br>I am currently running into an issue on an Arabic localized box in which an ArgumentOutOfRangeException is being thrown when DateTime.ToString() is called on a DateTime object with the value set to MaxValue.&nbsp; I understand that the valid range for DateTime values varies from culture to culture and I suspect that the MaxValue being set is not in the valid range for the Arabic locale’s calendar.&nbsp; Given the variety of different calendars that need to be supported, are there are any guidelines for choosing default Max/Min DateTime values that will be valid for all cultures?<br><br>Thanks,<br>Ben</font></i></p></blockquote><p>If you are a regular reader then this may seem like a kind of familiar problem (ref: <b><a href="http://archives.miloush.net/michkap/archive/2006/04/14/576627.html" mce_href="http://archives.miloush.net/michkap/archive/2006/04/14/576627.html">Long term planning is not always done</a></b>).</p><p>But in the meantime, Melitta stepped up with a very good and practical answer to the question:</p><blockquote><p><font face="times new roman,times">Hi Ben,<br><br>If you look at the documentation for DateTime.MaxValue (<a href="http://msdn.microsoft.com/en-us/library/system.datetime.maxvalue.aspx" mce_href="http://msdn.microsoft.com/en-us/library/system.datetime.maxvalue.aspx">http://msdn.microsoft.com/en-us/library/system.datetime.maxvalue.aspx</a>), the Remarks section mentions a similar problem.&nbsp; <br><br>Remarks:<br>The value of this constant is equivalent to 23:59:59.9999999, December 31, 9999, exactly one 100-nanosecond tick before 00:00:00, January 1, 10000.<br><br>Some calendars, such as the UmAlQuraCalendar, support an upper date range that is earlier than MaxValue. In these cases, trying to access MaxValue in variable assignments or formatting and parsing operations can throw an ArgumentOutOfRangeException. Rather than retrieving the value of DateTime..::.MaxValue, you can retrieve the value of the specified culture's latest valid date value from the System.Globalization.CultureInfo.DateTimeFormat.Calendar.MaxSupportedDateTime property. <br><br>So if you wanted to get, for example, the CurrentCulture’s Calendar’s MaxSupprotedDateTime you could have:<br><br>System.Globalization.CultureInfo.CurrentCulture.Calendar.MaxSupportedDateTime;&nbsp; System.Globalization.CultureInfo.CurrentCulture.Calendar.MinSupportedDateTime;<br><br>Or you could replace System.Globalization.CultureInfo.CurrentCulture with any culture of your choice.<br><br>Here are links to the documentation on those properties:<br><br><a href="http://msdn.microsoft.com/en-us/library/system.globalization.calendar.maxsupporteddatetime.aspx" mce_href="http://msdn.microsoft.com/en-us/library/system.globalization.calendar.maxsupporteddatetime.aspx">http://msdn.microsoft.com/en-us/library/system.globalization.calendar.maxsupporteddatetime.aspx</a><br><a href="http://msdn.microsoft.com/en-us/library/system.globalization.calendar.minsupporteddatetime.aspx" mce_href="http://msdn.microsoft.com/en-us/library/system.globalization.calendar.minsupporteddatetime.aspx">http://msdn.microsoft.com/en-us/library/system.globalization.calendar.minsupporteddatetime.aspx</a><br><br>This doesn’t help if you need to have a known, hard-coded default.&nbsp; But since you were using DateTime.MaxValue already, it seems like you’d be able to handle getting the data at runtime.&nbsp; I hope this helps.<br><br>Thanks,<br>Melitta</font> <br></p></blockquote><p>Now this is correct -- and helpful.</p><p>It would even nicely work around the issues I mention in <b><a href="http://archives.miloush.net/michkap/archive/2007/07/21/3991927.html" mce_href="http://archives.miloush.net/michkap/archive/2007/07/21/3991927.html">Theory vs. practice in software development</a></b> if these dates took those issues into account (unfortunately they do not, in most cases). This meansd it will help work around the bug being reported, but not the design flaw that is the cause.<br></p><p>And also with an additional caveat -- note that it still won't help in the case of the Japanese Emperor calendar, which is based on the rule (and potentially the life) of the Emperor and is therefore not a known value until it happens (for more on that see <b><a href="http://archives.miloush.net/michkap/archive/2006/05/14/597278.html" mce_href="http://archives.miloush.net/michkap/archive/2006/05/14/597278.html">Long live the Emperor</a></b>).</p><p>But there really is nothing to help with that particular case. At least not that I would want to know about. :-) <br></p><p>So in the end it is reasonable to question the original requirement, since there will be cases where it is impossible to fulfill.....<br></p><p>&nbsp;</p><p><font color="#ff1493" face="Tahoma"><i>This post brought to you by</i><font size="7"> 平 </font><i>(<a href="http://www.fileformat.info/info/unicode/char/5e73">U+5e73</a>, a.k.a. CJK 
IDEOGRAPH meaning 'flat, level, even; peaceful')</i></font> <br></p>
<hr/><p><strong>Joshua</strong> on 15 Jun 2011 8:52 AM:</p><div style="margin-left: 1em"><p>That&#39;s just a display problem. Why do you ever need to display MaxDate?</p>
<p>Serialization should always use invariant and almost always use UTC.</p>
</div>
<p><strong>Michael S. Kaplan</strong> on 15 Jun 2011 11:19 PM:</p><div style="margin-left: 1em"><p>And an uncaught exception!</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2011/06/15 <a href="http://archives.miloush.net/michkap/archive/2011/06/15/10174716.html">Does your code avoid the [government sanctioned] Y1.45K bug?</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/12/17/9232191.html" title="Call Marlett symbolic or the problems might be quite real...">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/12/16/9223301.html" title="UCS-2 to UTF-16, Part 9: The torrents of breaking CharNext/CharPrev">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-12">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-12-16">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/12/16/9225748.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
</html>