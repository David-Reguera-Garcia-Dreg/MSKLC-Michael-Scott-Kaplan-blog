<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/11/11/9056745.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Trying to ignore the small stuff is harder, if you're Arabic</title></head><body>
<h1>Trying to ignore the small stuff is harder, if you're Arabic</h1>
<p><em>by Michael S. Kaplan, published on 2008/11/11 10:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2008/11/11/9056745.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p>Via the Contact link, Alain asked:</p>
<blockquote>
<blockquote>
<p><i><font face="times new roman,times">Hello Michael,<br><br>I ask you about a problem I searched on the net all morning and get no response.<br><br>We work ├а UNESCO (Paris/France) on a multi-lingual database (SQL Server 2005). We actually add Arabic to a English/French/Spanish/Russian thesaurus.<br><br>We have Arab people at Alexandria test our application and they complained about not getting response when searching in Arabic with letters having not the same diacritics (e.g. Alif with and without Hamzah).<br><br>We use SQL_Latin1_General_CP1_CI_AI, but I tried with Latin1_General_CI_AI and Arabic_CI_AI and got the same result.<br><br>My questions : is there a way to add my own collation to a SLQ 2005 server. Or is there a collation just ignoring *all* diacritics for every UNICODE character ? And why does Arabic_CI_AI&nbsp; not ignore Hamzah on Alif ?<br><br>I wonder if I am the only guy around the world searching Arabic text on a SQL Server database. I am not an Arabic reader not speaker, but it seems the the requirment is very basic for Arabic...<br><br>Thank you and, please, forgive my poor English</font></i></p>
</blockquote>
</blockquote>
<p>Very good bunch of issues in there that all deserve some coverage! :-)</p>
<p>Starting with the easiest part: SQL collations are terrible and essentially useless in most cases. My words in <a href="http://archives.miloush.net/michkap/archive/2006/10/29/897317.html" class="" mce_href="http://archives.miloush.net/michkap/archive/2006/10/29/897317.html"><b>SQL 
Server: compatibility collations vs. Window collations</b></a> are probably 
the best answer here to explain why not to use them. It 
is just that given how awful the SQL compatibility collations are for text 
outside of English, they are pretty much only the default in the US (otherwise 
<a href="http://archives.miloush.net/michkap/archive/2005/11/08/490305.html" class="" mce_href="http://archives.miloush.net/michkap/archive/2005/11/08/490305.html"><b>SQL 
Compatibility collations are a bit too retro</b></a>&nbsp;because <a href="http://archives.miloush.net/michkap/archive/2006/06/06/618798.html" class="" mce_href="http://archives.miloush.net/michkap/archive/2006/06/06/618798.html"><b>Unicode 
and SQL Collations have nothing to do with each other</b></a>).</p><p>So less than ideal results there are kind of par for the course.... <br></p><p>Then there is the fact that <b>Latin1_General_CI_AI</b> and <b>Arabic_CI_AI</b> return the same results. This is actually also expected since both collations use the default table and the only difference between them in SQL Server is how they have different code pages attached to them for non-Unicode columns (1252 for the one, 1256 for the other).</p><p>Therefore, this too is expected. </p><p>Ok, enough stalling -- let's get too the actual issue -- the incorrect results!</p><p>This is a longstanding bug that I have previously described in <b><a href="http://archives.miloush.net/michkap/archive/2006/05/24/605603.html" mce_href="http://archives.miloush.net/michkap/archive/2006/05/24/605603.html">Is it punctuation, symbol, or diacritic?</a></b>, which explains the nature of the problem and describes how in some cases NORM_IGNORESYMBOLS will help here when one is dealing with Windows 2000, XP, or Server 2003. </p><p>Unfortunately there is no way to set this flag in SQL Server, so in the end there is no collation setting to work around the bug in SQL Server 7.0, 2000, or 2005.</p><p>However, <b><a href="http://archives.miloush.net/michkap/archive/2006/05/24/605603.html" mce_href="http://archives.miloush.net/michkap/archive/2006/05/24/605603.html">Is it punctuation, symbol, or diacritic?</a></b> explains how Vista and Server 2008 actually fix this longstanding issue. and the cost of fixing eight separate problems with Arabic script collations was just one bug, in Persian (ref: <b><a href="http://archives.miloush.net/michkap/archive/2007/08/12/4352905.html" mce_href="http://archives.miloush.net/michkap/archive/2007/08/12/4352905.html">Hello Madda, Hello Father (Iranian style)</a></b>).</p><p>and how does SQL Server get this fix?</p><p>Ah, for that you can find the answer in <b><a href="http://archives.miloush.net/michkap/archive/2008/03/16/8238240.html" mce_href="http://archives.miloush.net/michkap/archive/2008/03/16/8238240.html">On changing the world, or at least the way people order things in it</a></b>, which explains that SQL Server 2008 has the absolute latest version of the tables to date when SQL Server shipped, and thus has the fix for this bug in it.</p><p>There is, however, no downlevel fix for this problem that has really been around in Windows for as long as Arabic support has been in the product and in SQL Server for as long as Arabic support has been in that product.</p><p>Custom collations or any way to modify collations? That is a feature that does not exist in either windows or SQL Server....</p><p><br></p><p><font color="#ff00ff"><i>This blog brought to you by</i><font size="6"> пе </font><i>(<a href="http://www.fileformat.info/info/unicode/char/0628" mce_href="http://www.fileformat.info/info/unicode/char/0628">U+0628</a>, aka ARABIC LETTER BEH)</i></font> <br></p>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/11/11/9059132.html" title="On blowing a font cache, and overwhelming a Fonts folder with the raw power of typography">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/11/10/9056619.html" title="From I SCOOT to IBOT, #4 of ?? (with some pictures!)">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-11">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-11-11">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/11/11/9056745.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
</html>