<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/07/03/8682656.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Ignore what the label says -- it's Japanese</title></head><body>
<h1>Ignore what the label says -- it's Japanese</h1>
<p><em>by Michael S. Kaplan, published on 2008/07/03 03:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2008/07/03/8682656.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p>Julien asks via the Contact link:</p>
<blockquote><span lang="EN"><span lang="EN">
<p><font face="times new roman,times">Dear Mr Kaplan,<br><br>I would like to display Japanese Characters in the reporting solution of my company. The DB is SQL Server 2000 and datasource is an ERP wish provide data in DBCS format. Default Collation is French_CI_AS on server and client machines.<br><br>Stored data in varchar format appeared on this way in Enterprise Manager :<br><br></font><font face="times new roman,times"><font size="6">à_áÉá?áZ áEáìáóá,án<br></font><font color="#ff0000"><strong>&lt;&lt;strange characters removed due to reports that they break the feed&gt;</strong></font><br>Is it possible to display Japanese Character and how?<br><br>Thanks a lot for your help and information you broadcast on the web on this topic.<br><br>Julien, from France</font></p></span></span></blockquote>
<p>Well, first of all, I'm not Mr. Kaplan. I was gonna say that my father is Mr. Kaplan but now that I was about to type that I realized that I don't even think of my father as Mr. Kaplan -- I don't even think of the VP name Kaplan as Mr. Kaplan since he sent mail not too long ago to all the Kaplans at Microsoft and he signed the mail with first name. Essentially, there are no Mr. Kaplans in my world at the moment! :-)</p>
<p>Julien, you can call me Michael; all the people I like do....</p>
<p>Okay, now back to the topic.</p>
<p>This is a rough situation.</p>
<p>Basically you have non-Unicode data that is stored in a column with a specific defined code page, in this case that would be COLLATIONPROPERTY(&#39;FRENCH_CI_AS&#39;, &#39;CodePage&#39;) or 1252.</p>
<p>And the data itself is actually in some other code page.</p>
<p>Offhand, the first problem is the one I mention in <a href="http://archives.miloush.net/michkap/archive/2005/11/23/495193.html"><strong>100% roundtrip ASCII? 100% roundtrip ANSI?</strong></a>: that these code pages have byte sequences that are not valid in them. And since their "invalid" bits do not always overlap, one can lose data if one (using Unicode as a pivot) moves in and out of them.</p>
<p>So the only &quot;fix&quot; would be to take the data out as is (say via direct BCP transfer that does not go through COM or anything else that will try to convert it to Unicode), with a plan to later on bring it back in using preferably Unicode columns but if all else fails one that can handle Japanese data.</p>
<p>But the Unicode columns would be best in any case. If you look at all of the characters that the Japanese standards define as characters used by Japanese, only Unicode can store them all in a SQL Server  column. And the Japanese and I have in common a dislike for valid characters being converted into question marks, if you know what I mean.</p>
<p>And now we get to the next problem -- with the small sample Julien provided, I couldn&#39;t produce something that looked all that Japanese, testing with either shift-JIS or EUC-JAP. so someone would have to probably give some information about what encoding the data is in for sure, so it could then be converted.</p>
<p>Without knowing the encoding it is in, how could one ever hope for a computer program to read it?</p>
<p> </p>
<p><font color="#ff1493"><font face="Tahoma"><em>This post brought to you by</em><font size="6"> ¿ </font><em>(</em></font></font><a href="http://www.fileformat.info/info/unicode/char/00bf"><em><font face="Tahoma">U+00bf</font></em></a><em><font face="Tahoma" color="#ff1493">, INVERTED QUESTION MARK)</font></em></p>
<hr/><p><strong>Michael Madsen</strong> on 3 Jul 2008 5:05 AM:</p><div style="margin-left: 1em"><p>Actually, testing in JWPce (which lets me choose the character set to use when copy/pasting) EUC does give me something that at least only contains Japanese characters, if you remove the two symbols in either end:</p>
<p>珎疉畤痒 疆瘡癈甃瘤</p>
<p>However, neither Google Translate, Babelfish, nor Excite Japan can make much sense of it.</p>
<p>The characters do seem somewhat related though: they work out to precious/valuable/rare, repeat/duplicate/repetitious, festival grounds, itchy, boundary, wound/boil/syphilis, chronic illness, floor tile, and lump (EDICT doesn't seem to know any kanji compounds that could be made from all this, so if it's the real deal, I believe they should be read individually). With a little imagination, you could work out a way all of these could be related - something about a rare disease resulting in chronic, itchy boils appearing due to an infected floor tile found at the edge of some festival grounds, with a similar event having happened before - but although I'm only a beginner at Japanese, I have a feeling that doesn't add up :)</p></div>
<p><strong>Michael S. Kaplan</strong> on 3 Jul 2008 8:32 AM:</p><div style="margin-left: 1em"><p>In the end, I think Julien needs to find out exactly what the data is rather than try to reverse engineer it. Even when they are all Han, I am not at all sure they are meaningful Kanji. And there are the first and last characters too....</p>
</div>
<p><strong>Michael Madsen</strong> on 3 Jul 2008 12:39 PM:</p><div style="margin-left: 1em"><p>FYI, this post breaks your RSS feed. Those extra symbols get converted to HTML entities &amp;#xE; and &amp;#xF; (which won't work in RSS).</p>
<p>Probably not something you yourself can do much to change it without changing the meaning (except converting them to images, but that's kinda ugly), but seeing as how you work for Microsoft, you probably have better links to the blog team than I do in case they have an idea. :)</p>
<p><a rel="nofollow" target="_new" href="http://feedvalidator.org/check.cgi?url=http%3A%2F%2Fblogs.msdn.com%2Fmichkap%2Frss.xml">http://feedvalidator.org/check.cgi?url=http%3A%2F%2Fblogs.msdn.com%2Fmichkap%2Frss.xml</a></p></div>
<p><strong>Michael S. Kaplan</strong> on 3 Jul 2008 1:13 PM:</p><div style="margin-left: 1em"><p>Well, for now I just took the characters out. :-)</p>
</div>
<p><strong>Tracy</strong> on 4 Aug 2008 9:00 PM:</p><div style="margin-left: 1em"><p>Those characters don't look Japanese. &nbsp;Maybe they're Chinese?</p></div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/07/03/8682763.html" title="On installing and removing fonts, Part 1: Do I know you, or some version of you at least?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/07/02/8681646.html" title="On installing and removing fonts, Part 0: A long journey begins with the zeroeth step">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-07-03">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/07/03/8682656.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
</html>