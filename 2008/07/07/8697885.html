<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/07/07/8697885.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>The bigger they are, the worse they are when they're dead?</title></head><body>
<h1>The bigger they are, the worse they are when they're dead?</h1>
<p><em>by Michael S. Kaplan, published on 2008/07/07 03:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2008/07/07/8697885.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><EM><FONT color=#ff0000>Any NLS </FONT><FONT color=#ff0000>testers around want to put in the bug&nbsp;based on&nbsp;</FONT></EM><FONT color=#ff0000><EM>this blog? </EM>:-)</FONT></P>
<P>Kim's&nbsp;message via the Contact link definitely got my attention. The message was:</P>
<BLOCKQUOTE>
<P><FONT face="times new roman,times"><EM>Hi Michael,<BR><BR>I have been caught out more than once by a strange gotcha when designing kbd layouts that use dead keys. It happened again the other day when I made a layout for Ancient Greek. This required a whole lot of dead keys -- 14 I think -- and I assigned base characters to them that made sense to me. For example, the dead key for a bunch of vowel letters surmounted with the smooth breathing ('psili' -- but I learnt my Ancient Greek in English ;) ) I gave the base character U+1FBF, i.e. the smooth breathing. So smooth breathing + U+03B1 (lowercase alpha) -&gt; U+1F00 (lowercase alpha with smooth breathing). And so on for the other 13. Everything worked as expected in the MSKLC test pane. But after building and installing the layout, nothing worked as expected in WinXP (SP3). Specifically, none of the dead keys worked. The keystroke sequence above produced a plain lowercase alpha with no breathing, i.e. the dead key was ignored.<BR><BR>After puzzling for a while, I eventually recalled a similar incident a few years back, when I discovered that characters above a certain limit -- I suspect it is U+0FFF but haven't confirmed this -- just won't work as base characters for dead keys. When I redefined the above dead key with U+0313 ('combining comma above') as its base character, it worked. Not all of my dead keys could be given 'sensible' base characters -- there's no reasonable look-alike for U+1FCE ('greek psili and oxia' -- smooth breathing and acute accent), nor for most of the other multi-diacritic combinations, but I just have to live with that. I've assigned them arbitrary characters (archaic Greek characters in the U+0300 range), and they work.<BR><BR>This is obviously a restriction in WinXP and not a bug in MSKLC. But shouldn't MSKLC issue a warning when a dead key is defined with a base character that is going to stop it from working? It's very puzzling when everything validates and test perfectly, but the installed layout doesn't work.<BR><BR>Thanks<BR>Kim</EM></FONT></P></BLOCKQUOTE>
<P>Yikes, this seems like&nbsp;a real problem!</P>
<P>To make it all easy enough to verify, I created a keyboard to try and reproduce the problem -- seven Greek letters (upper and lower case) with four dead keys:</P>
<UL>
<LI>´ (<A class="" href="http://www.fileformat.info/info/unicode/char/1ffd" mce_href="http://www.fileformat.info/info/unicode/char/1ffd">U+1ffd</A>,&nbsp;aka GREEK OXIA)</LI>
<LI>` (<A class="" href="http://www.fileformat.info/info/unicode/char/1fef" mce_href="http://www.fileformat.info/info/unicode/char/1fef">U+1fef</A>, aka GREEK VARIA)</LI>
<LI>῾ (<A class="" href="http://www.fileformat.info/info/unicode/char/1ffe" mce_href="http://www.fileformat.info/info/unicode/char/1ffe">U+1ffe</A>, aka GREEK DASIA)</LI>
<LI>᾿ (<A class="" href="http://www.fileformat.info/info/unicode/char/1fbf" mce_href="http://www.fileformat.info/info/unicode/char/1fbf">U+1fbf</A>, aka GREEK PSILI)</LI></UL>
<P>And I tried it on a Vista machine, unlike the XP machine Kim reported the problem on.</P>
<P><EM>For people following along at home you can download the .KLC file I created from </EM><A class="" href="http://www.trigeminal.com/samples/mygreek.zip" mce_href="http://www.trigeminal.com/samples/mygreek.zip"><EM>here</EM></A><EM>. Fair warning -- this was hurriedly done and&nbsp;not all of the letters are right!</EM></P>
<P>Anyway, here you can see the four dead keys:</P>
<P><IMG src="http://trigeminal.fmsinc.com/images/mygreek01.png">&nbsp;<IMG src="http://trigeminal.fmsinc.com/images/mygreek02.png">&nbsp;<IMG src="http://trigeminal.fmsinc.com/images/mygreek03.png">&nbsp;<IMG src="http://trigeminal.fmsinc.com/images/mygreek04.png"></P>
<P>Now for good measure, in the SHIFT state, I put four nealy identical dead keys -- though in each I used the "alternate" character that even Unicode uses for the decompositions for the four dead key characters instead:</P>
<UL>
<LI>´ (<A class="" href="http://www.fileformat.info/info/unicode/char/00b4" mce_href="http://www.fileformat.info/info/unicode/char/00b4">U+00b4</A>, aka ACUTE ACCENT)</LI>
<LI>` (<A class="" href="http://www.fileformat.info/info/unicode/char/0060" mce_href="http://www.fileformat.info/info/unicode/char/0060">U+0060</A>, aka GRAVE ACCENT)</LI>
<LI>ʽ (<A class="" href="http://www.fileformat.info/info/unicode/char/02bd" mce_href="http://www.fileformat.info/info/unicode/char/02bd">U+02bd</A>, aka MODIFIER LETTER REVERSED COMMA)</LI>
<LI>ʼ (<A class="" href="http://www.fileformat.info/info/unicode/char/02bc" mce_href="http://www.fileformat.info/info/unicode/char/02bc">U+02bc</A>, aka MODIFIER LETTER APOSTROPHE)</LI></UL>
<P>Here you can see them on the keyboard:</P>
<P><IMG src="http://trigeminal.fmsinc.com/images/mygreek05.png">&nbsp;<IMG src="http://trigeminal.fmsinc.com/images/mygreek06.png">&nbsp;<IMG src="http://trigeminal.fmsinc.com/images/mygreek07.png">&nbsp;&nbsp;<IMG src="http://trigeminal.fmsinc.com/images/mygreek08.png"></P>
<P>I then tried out the dead keys.</P>
<P>Just as Kim indicated,&nbsp;all eight&nbsp;work just fine in the MSKLC test surface.</P>
<P>But the first four do not work properly as dead keys in the compiled layout (though the second four work just fine).</P>
<P>Now this is a genuine bug, certainly.</P>
<P>Though if you look at the letters in question and their Unicode decompositions, e.g.</P>
<UL>
<LI><A class="" href="http://www.fileformat.info/info/unicode/char/1f00" mce_href="http://www.fileformat.info/info/unicode/char/1f00">U+1f00</A> ----&gt; <A class="" href="http://www.fileformat.info/info/unicode/char/03b1" mce_href="http://www.fileformat.info/info/unicode/char/03b1">U+03b1</A> <A class="" href="http://www.fileformat.info/info/unicode/char/0313" mce_href="http://www.fileformat.info/info/unicode/char/0313">U+0313</A>, not <A class="" href="http://www.fileformat.info/info/unicode/char/03b1" mce_href="http://www.fileformat.info/info/unicode/char/03b1">U+03b1</A> <A class="" href="http://www.fileformat.info/info/unicode/char/1fbf" mce_href="http://www.fileformat.info/info/unicode/char/1fbf">U+1fbf</A></LI>
<LI><A class="" href="http://www.fileformat.info/info/unicode/char/1f19" mce_href="http://www.fileformat.info/info/unicode/char/1f19">U+1f19</A> ----&gt; <A class="" href="http://www.fileformat.info/info/unicode/char/0395" mce_href="http://www.fileformat.info/info/unicode/char/0395">U+0395</A> <A class="" href="http://www.fileformat.info/info/unicode/char/0314" mce_href="http://www.fileformat.info/info/unicode/char/0314">U+0314</A>, not <A class="" href="http://www.fileformat.info/info/unicode/char/0395" mce_href="http://www.fileformat.info/info/unicode/char/0395">U+0395</A> <A class="" href="http://www.fileformat.info/info/unicode/char/1ffe" mce_href="http://www.fileformat.info/info/unicode/char/1ffe">U+1ffe</A></LI>
<LI><A class="" href="http://www.fileformat.info/info/unicode/char/1fda" mce_href="http://www.fileformat.info/info/unicode/char/1fda">U+1fda</A> ----&gt; <A class="" href="http://www.fileformat.info/info/unicode/char/0399" mce_href="http://www.fileformat.info/info/unicode/char/0399">U+0399</A> <A class="" href="http://www.fileformat.info/info/unicode/char/0300" mce_href="http://www.fileformat.info/info/unicode/char/0300">U+0300</A>, not <A class="" href="http://www.fileformat.info/info/unicode/char/0399" mce_href="http://www.fileformat.info/info/unicode/char/0399">U+0399</A> <A class="" href="http://www.fileformat.info/info/unicode/char/1fef" mce_href="http://www.fileformat.info/info/unicode/char/1fef">U+1fef</A></LI></UL>
<P>and so on.</P>
<P>In other words, there is a definite set of characters that can be used instead of these compatibility characters that do not seem to work properly....</P>
<P>Though from a linguistic standpoint it might seem wrong to make some of these substitutions -- either the ones I did in the uppercase dead keys or the ones that Unicode does in th eull chasrscter decompositions -- because fonts that contain the compatibility characters re much more likely to look correct without needing a special Greek font.</P>
<P>So Kim -- a genuine bug, but at least one with a workaround in the meantime, right? :-)</P>
<P><EM><FONT color=#ff0000>To any NLS testers reading this -- I have not verified Kim's supposition of a literal cutoff at U+0fff and I don't think that is necessarily&nbsp;true since I vaguely recall an old Khmer keyboard of Paul Nelson's that was entirely dead key based, and the Khmer subrange is <A class="" href="http://www.fileformat.info/info/unicode/char/1780" mce_href="http://www.fileformat.info/info/unicode/char/1780">U+1780</A> to <A class="" href="http://www.fileformat.info/info/unicode/char/17ff" mce_href="http://www.fileformat.info/info/unicode/char/17ff">U+17ff</A>. So I think there is something&nbsp;slightly&nbsp;different&nbsp;going on here....</FONT></EM></P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This blog brought to you by</EM><FONT size=6> ἀ </FONT><EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/1f00" mce_href="http://www.fileformat.info/info/unicode/char/1f00">U+1f00</A>, aka GREEK SMALL LETTER ALPHA WITH PSILI)</EM></FONT></P>
<hr/><p><strong>John Cowan</strong> on 7 Jul 2008 10:14 AM:</p><div style="margin-left: 1em"><p>Am I to understand from this that you *can't* put the bug into the bug database yourself? &nbsp;That seems ... limiting.</p></div>
<p><strong>Michael S. Kaplan</strong> on 7 Jul 2008 10:21 AM:</p><div style="margin-left: 1em"><p>Oh, not at all -- I can put in bugs.</p>
<p>But testers, especially area owners, will do a bit more than just enter a bug, so when something is in their area it gives them the heads up so they can *do* those things.... :-)</p>
</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/07/07/8699735.html" title="On installing and removing fonts, Part 2: Are you done using me yet?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/07/06/8697627.html" title="Park the scooter on the slip and come aboard....">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-07">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-07-07">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/07/07/8697885.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
</html>