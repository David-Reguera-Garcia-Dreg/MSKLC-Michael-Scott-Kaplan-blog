<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/05/23/8536649.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>SQL vs. Windows collations: the tricycle versus the Porsche</title></head><body>
<h1>SQL vs. Windows collations: the tricycle versus the Porsche</h1>
<p><em>by Michael S. Kaplan, published on 2008/05/23 10:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2008/05/23/8536649.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Now with gas prices being what they are, there may be some real advantages to considering riding&nbsp;the tricycle instead of the Porsche, especially if one can fit in the smaller space and one does not have to take it as far. And if one does not need the extra features.</P>
<P>But in the end one still has a tricycle. And one might not fit in it very well, and has to decide if it is the best plan....</P>
<P>The mail from the other day via the contact link was:</P>
<BLOCKQUOTE>
<BLOCKQUOTE>
<P><FONT face="times new roman,times"><EM>Someone posted this:</EM><BR>----------<BR><FONT face="consolas,lucida console,courier new,courier"><STRONG>&nbsp; CREATE TABLE #TEMP (name varchar(80))<BR>&nbsp; INSERT INTO #TEMP values ('Malteser Schloßschule')<BR>&nbsp; INSERT INTO #TEMP values ('Malteser Schlossschule')<BR><BR>&nbsp; CREATE TABLE #TEMP1 (name nvarchar(160))<BR>&nbsp; INSERT INTO #TEMP1 values ('Malteser Schloßschule')<BR>&nbsp; INSERT INTO #TEMP1 values ('Malteser Schlossschule')<BR><BR></STRONG></FONT><FONT face="courier new,courier"><STRONG><EM>Query 1:<BR></EM>&nbsp; SELECT * FROM #TEMP WHERE name ='Malteser Schlossschule'<BR>--&nbsp; Results :- 'Malteser Schlossschule'<BR><BR>Query 2:<BR>&nbsp; SELECT * FROM #TEMP1 WHERE name ='Malteser Schlossschule'<BR>--&nbsp; Results :- Malteser Schloßschule<BR>--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Malteser Schlossschule</STRONG></FONT><BR><BR><EM>The collation of tempdb is SQL_Latin1_General_CP1_CI_AS. I'm using SQL Server 2005.<BR></EM>---------------------------<BR><BR><EM>Why does this happen? I'd expect that it would work in the reverse way. 2 rows with varchar and 1 with nvarchar.</EM></FONT></P></BLOCKQUOTE></BLOCKQUOTE>
<P>This is actually quite expected, believe it or not. There are several contributing issues here:</P>
<P>First, as described in <A class="" href="http://archives.miloush.net/michkap/archive/2005/11/08/490305.html" mce_href="http://archives.miloush.net/michkap/archive/2005/11/08/490305.html"><STRONG>SQL Compatibility collations are a bit too retro for me</STRONG></A>, the order in the SQL compatibility collations is not a very good one. Among other things is the fact that they do not support the German Sharp S in any real sense, which makes them kind of bad for German. There are many other examples, but this is the basic reason why the first query returns one row.</P>
<P>Second, as described in <A class="" href="http://archives.miloush.net/michkap/archive/2006/06/06/618798.html" mce_href="http://archives.miloush.net/michkap/archive/2006/06/06/618798.html"><STRONG>Unicode and SQL Collations have nothing to do with each other</STRONG></A>, there is no Unicode support in the SQL compatibility collations. The server is forced to go with the closest Windows collation in this case, and all Windows collations have the Sharp S support in the default table, which is why the second query returns two rows.</P>
<P>Thirdly, as described in <A class="" href="http://archives.miloush.net/michkap/archive/2006/10/29/897317.html" mce_href="http://archives.miloush.net/michkap/archive/2006/10/29/897317.html"><STRONG>SQL Server: compatibility collations vs. Window collations</STRONG></A>, there are a whole lot of differences between these two when they are compared head to head -- it isn't just like comparing apples and oranges; it is like comparing bicycles and earmuffs.</P>
<P>There really is no way to put these two different kinds of collations in an attempt to compare them. They are way too different....</P>
<P>In the end, even non-Unicode data is better with a Windows collation -- just like even the toddler who fits well in the tricycle is better off getting a ride to preschool from a parent in the Porsche. Sure there is a bit of extra work with car seats and such, but it is much better for getting the job done than trying to force this less adequate mechanism to do everything.</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM><FONT size=6> ር </FONT><EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/122d" mce_href="http://www.fileformat.info/info/unicode/char/122d">U+122d</A>, a.k.a. ETHIOPIC SYLLABLE RE)</EM></FONT></P>
<hr/><div style="margin-left: 1em"><em>no comments</em></div><hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/05/23/8537281.html" title="When the LANGID in the LOWORD of the KLID doesn&#39;t match the LANGID you want keyboard under?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/05/22/8521124.html" title="It&#39;s a known fact (disputed but not disproven) that Clippy&#39;s removal from Office was due to Earl knocking up Scribble">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-05">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-05-23">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/05/23/8536649.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
</html>