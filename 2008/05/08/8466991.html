<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/05/08/8466991.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>In hindsight, they may have BEST FIT these files where the sun never shines</title></head><body>
<h1>In hindsight, they may have BEST FIT these files where the sun never shines</h1>
<p><em>by Michael S. Kaplan, published on 2008/05/08 10:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2008/05/08/8466991.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Recently while paying attention to <A class="" href="http://www.unicode.org/consortium/distlist.html" mce_href="http://www.unicode.org/consortium/distlist.html">The Unicode List</A> I was once again reminded why I don't pay more attention to <A class="" href="http://www.unicode.org/consortium/distlist.html" mce_href="http://www.unicode.org/consortium/distlist.html">The Unicode List</A>. :-)</P>
<P>Specifically it was a thread started by Andreas Prilop:</P>
<BLOCKQUOTE>
<P><FONT face="times new roman,times"><EM>I refer to<BR>&nbsp;</EM></FONT><A href="http://www.unicode.org/Public/MAPPINGS/ISO8859/8859-1.TXT" mce_href="http://www.unicode.org/Public/MAPPINGS/ISO8859/8859-1.TXT"><FONT face="times new roman,times"><EM>http://www.unicode.org/Public/MAPPINGS/ISO8859/8859-1.TXT</EM></FONT></A><BR><FONT face="times new roman,times"><EM>&nbsp;</EM></FONT><A href="http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1252.TXT" mce_href="http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1252.TXT"><FONT face="times new roman,times"><EM>http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1252.TXT</EM></FONT></A><BR><BR><FONT face="times new roman,times"><EM>In ISO-8859-1, code position 0x90 is mapped to U+0090.<BR>In Windows-1252, code position 0x90 is listed as "undefined".<BR><BR>Why are they treated differently? International Standard ISO/IEC 8859-1 does *not* define code position 0x90. So it might also be listed as "undefined".<BR><BR>Or, for purely practical reasons, 0x90 in Windows-1252 might also be mapped to U+0090.<BR><BR>This different behaviour for undefined code positions may occasionally cause trouble - please see<BR>&nbsp;</EM></FONT><A href="http://lists.w3.org/Archives/Public/www-validator/2008Apr/" mce_href="http://lists.w3.org/Archives/Public/www-validator/2008Apr/"><FONT face="times new roman,times"><EM>http://lists.w3.org/Archives/Public/www-validator/2008Apr/</EM></FONT></A><BR><FONT face="times new roman,times"><EM>&nbsp;</EM></FONT><A href="http://lists.w3.org/Archives/Public/www-validator/2008May/" mce_href="http://lists.w3.org/Archives/Public/www-validator/2008May/"><FONT face="times new roman,times"><EM>http://lists.w3.org/Archives/Public/www-validator/2008May/</EM></FONT></A><BR><FONT face="times new roman,times"><EM>Thread "Fallback to UTF-8".</EM></FONT></P></BLOCKQUOTE>
<P>Richard Wordingham then responded in a message that should probably could have resolved the issue (had it not been <A class="" href="http://www.unicode.org/consortium/distlist.html" mce_href="http://www.unicode.org/consortium/distlist.html">The Unicode List</A>):</P>
<BLOCKQUOTE>
<P><FONT face="times new roman,times">0x90 is defined in the IANA version of ISO-8859-1, which calls up the description in RFC1345.&nbsp; In a web context, I believe the IANA definition should take precedence over ISO/IEC.<BR><BR>On the other hand, Windows-1252 might be extended again and assign a meaning to 0x90, so it is probably better not to map any Unicode codepoint to that value.<BR><BR></FONT><FONT face="times new roman,times"><EM>&gt; Or, for purely practical reasons, 0x90 in Windows-1252 might<BR>&gt; also be mapped to U+0090.</EM><BR><BR>Which is reported to be what Windows *currently* actually does.</FONT></P></BLOCKQUOTE>
<P>And Unicode cool guy Ken Whistler put in some thoughts here as well:</P>
<BLOCKQUOTE>
<P><FONT face="times new roman,times"><EM>&gt; &gt; Why are they treated differently?</EM><BR><BR>Different theory by the maintainers of the two sets of files.<BR><BR>I am the most recent maintainer of record for the 8859-X mapping files posted on the Unicode website. For those I follow the consensus of the UTC that mappings for control code points in the 8859-X family of ASCII-derived encodings to/from Unicode is least problematical if 0x00 &lt;--&gt; U+0000, 0x01 &lt;--&gt; U+0001, etc. This is, in fact, the way that almost all commercial conversions handle the control code conversions for 8859-X character sets.<BR><BR>Since 8859-1.TXT and the other mapping tables posted on the Unicode website are intended to provide practical *mapping* guidelines for implementers, it would be pedantic in the extreme (and counterproductive) to post them up as documentation of the 8859-X standards *without* the control code mappings.<BR><BR>The Microsoft mapping tables are contributed by and maintained by Microsoft, and follow Microsoft standards practice for table definition. 0x00..0x1F are mapped through to U+0000..U+001F, but because most Microsoft code pages contain graphic characters in the 0x80..0x9F range, those characters are mapped, but unassigned code points are simply left #UNDEFINED, as is also the case for Microsoft double-byte code pages. This allows a distinction to be made between that status and #DBCS LEAD BYTE values.<BR><BR>In practice, of course, when actually implmenting conversion tables from Microsoft code pages to/from Unicode, nearly all commercial implementations, including Microsoft's, map undefined values in the 0x80..0x9F range (for non-DBCS code pages) to the corresponding Unicode U+0080..U+009F control code character, rather than to U+FFFD.<BR><BR></FONT><FONT face="times new roman,times"><EM>&gt; &gt; International Standard ISO/IEC 8859-1 does *not* define<BR>&gt; &gt; code position 0x90. So it might also be listed as "undefined".<BR>&gt; <BR>&gt; 0x90 is defined in the IANA version of ISO-8859-1, which calls up the <BR>&gt; description in RFC1345.&nbsp; In a web context, I believe the IANA definition <BR>&gt; should take precedence over ISO/IEC.</EM><BR><BR>While I agree with the conclusion that for web usage, mappings that map through control codes rather than treating them as undefined is the correct thing to do -- I do so for different reasons.<BR><BR>RFC 1345 is *extremely* dated. It is from 1992, and refers to prepublication versions of 10646. The first edition of 10646 wasn't even published until 1993, and at that point we are talking about a Unicode 1.1-level repertoire. The character mnemonic table in RFC 1345 is full of errors, and the mapping tables for various charsets at the end of RFC 1345 have not been updated to track the updates of the 8859 standards nor the updates in mapping practice for some charsets that resulted from extensions to 10646.<BR><BR></FONT><FONT face="times new roman,times"><EM>&gt; <BR>&gt; On the other hand, Windows-1252 might be extended again and assign a meaning <BR>&gt; to 0x90, so it is probably better not to map any Unicode codepoint to that <BR>&gt; value.<BR></EM><BR>I disagree. If you do not map U+0090 to 0x90 for Windows-1252, all you are doing in ensuring an interoperability bug both with Windows and with other commercial applications doing conversions.</FONT></P></BLOCKQUOTE>
<P>After that, David Starner and Doug Ewell made contributions pointing out that if one was truly expecting C1 control characters like U+0090 to be in cp1252 then one probably had bigger problems with one's data, anyway.</P>
<P>Mark Davis pointed out that ICU does indeed map 0x90 to U+0090 and vice versa, since "<EM>in ICU we always go by what people do, and not what they say.... Windows itself maps 0x90 to U+0090."</EM></P>
<P><EM>Good to know! :-)</EM></P>
<P>Andreas came back with one more contribution to explain the reasoning behind the original concern:</P>
<BLOCKQUOTE>
<P><EM><FONT face="times new roman,times">The problem was/is: What to do when a byte 0x90 is found in a file that has<BR><BR>(a) erroneously charset=ISO-8859-1<BR>(b) erroneously charset=Windows-1252<BR>(c) no encoding/charset at all specified<BR><BR>Surprisingly, the W3C validator gives up with Windows-1252 but does perform a check with ISO-8859-1.<BR><BR>See the test document&nbsp;&nbsp;</FONT></EM><A href="http://www.unics.uni-hannover.de/nhtcapri/test.htm" mce_href="http://www.unics.uni-hannover.de/nhtcapri/test.htm"><EM><FONT face="times new roman,times">http://www.unics.uni-hannover.de/nhtcapri/test.htm</FONT></EM></A><EM><FONT face="times new roman,times">&nbsp;and follow the links "Validate as ISO-8859-1" and "Validate as Windows-1252".<BR><BR>The validation report with Windows-1252 would be more helpful, in my opinion, if 0x90 in cp1252 is mapped to something - to U+0090 or whatever.</FONT></EM></P></BLOCKQUOTE>
<P>And Richard made the final contribution to date in response to the "surprise" in that last message from Andreas:</P>
<BLOCKQUOTE>
<P><FONT face="times new roman,times">It's not surprising at all.&nbsp; These charsets designations have the *IANA*&nbsp;definitions, which are not necessarily identical to international (e.g. ISO-8859 series) or national (e.g. TIS-620) standards.&nbsp; Thus 0x90 is undefined for Windows-1252 but merely an illegal character for HTML in the IANA definition of ISO-88591.</FONT></P></BLOCKQUOTE>
<P>It is funny how these things go, really.</P>
<P>Though&nbsp;this one was mercifully short, at least. :-)</P>
<P>I was surprised (though not surprised enough to extend the thread by volunteering the information!) that even better than the referenced:</P>
<P><A href="http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1252.TXT">http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1252.TXT</A></P>
<P>or the nicer, more graphical though functionally equivalent:</P>
<P><A href="http://www.microsoft.com/globaldev/reference/sbcs/1252.mspx">http://www.microsoft.com/globaldev/reference/sbcs/1252.mspx</A></P>
<P>There is an even better reference to look at, one also hosted on the Unicode site:</P>
<P><A href="http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/bestfit1252.txt">http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/bestfit1252.txt</A></P>
<P>This file, along with the rest of the mappings at</P>
<P><A href="http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/">http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/</A></P>
<P>come directly from Microsoft.</P>
<P>And while they were provided <STRONG>primarily to officially document in public the "best fit" mappings in these code pages</STRONG>, they have additional benefits, as they are the literal source files used to build the code page data files, with no lines removed. </P>
<P>In particular, you can see entries like the following in there if cp1252:</P>
<BLOCKQUOTE>
<P><STRONG><FONT face="courier new,courier">0x81 0x0081<BR>0x8d 0x008d<BR>0x8f 0x008f<BR>0x90 0x0090<BR>0x9d 0x009d</FONT></STRONG></P></BLOCKQUOTE>
<P>Now compared with the one that the file they referenced had:</P>
<BLOCKQUOTE>
<P><STRONG><FONT face="courier new,courier">0x81 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #UNDEFINED<BR>0x8D &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #UNDEFINED<BR>0x8F &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #UNDEFINED<BR>0x90 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #UNDEFINED<BR>0x9D &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #UNDEFINED</FONT></STRONG></P></BLOCKQUOTE>
<P>I think it seem much nicer and definitely matches the assertion that several people raised about the de facto behavior of the code page.</P>
<P>These files also define all the "best fit" mappings, so that (for example) cp1252 file lists all of the following:</P>
<BLOCKQUOTE>
<P><FONT face="courier new,courier"><STRONG>0x0041 0x41 ;Latin Capital Letter A<BR>0x0100 0x41 ;Latin Capital Letter A With Macron<BR>0x0102 0x41 ;Latin Capital Letter A With Breve<BR>0x0104 0x41 ;Latin Capital Letter A With Ogonek<BR>0x01cd 0x41 ;Latin Capital Letter A With Caron<BR>0x01de 0x41 ;Latin Capital Letter A With Diaeresis And Macron<BR>0xff21 0x41 ;Fullwidth Latin Capital Letter A</STRONG></FONT></P></BLOCKQUOTE>
<P>which makes all of these characters other than the one that can do round trip mapping to U+0041 map to somewhere. It is why the WCTABLE&nbsp;has 698 entries even though the MBTABLE only has 256. :-)</P>
<P>Maybe I should have volunteered the information. :-)</P>
<P>But <A class="" href="http://www.unicode.org/consortium/distlist.html" mce_href="http://www.unicode.org/consortium/distlist.html">The Unicode List</A> just plain scares me. </P>
<P>Even more that clowns do, and you know how creepy clowns are....</P>
<P>Now I have talked about best fit mappings in Windows code pages in all of the following blogs in this Blog:</P>
<UL>
<LI><A class="" href="http://archives.miloush.net/michkap/archive/2007/11/22/6463359.html" mce_href="http://archives.miloush.net/michkap/archive/2007/11/22/6463359.html"><STRONG>If it does [best] fit, it may be off a bit! (aka Parlez-ゔ japonais?)</STRONG></A></LI>
<LI><A class="" href="http://archives.miloush.net/michkap/archive/2005/02/13/371895.html" mce_href="http://archives.miloush.net/michkap/archive/2005/02/13/371895.html"><STRONG>If the shoe [best-]fits...</STRONG></A></LI>
<LI><A href="http://archives.miloush.net/michkap/archive/2005/02/15/373713.html"><STRONG><FONT face=Tahoma><STRIKE>Best</STRIKE>Better than nothing fit mappings, unleashed, #1</FONT></STRONG></A></LI>
<LI><A class="" href="http://archives.miloush.net/michkap/archive/2007/07/25/4037646.html" mce_href="http://archives.miloush.net/michkap/archive/2007/07/25/4037646.html"><STRONG>What's up with MB_ERR_INVALID_CHARS?</STRONG></A></LI>
<LI><A class="" href="http://archives.miloush.net/michkap/archive/2007/03/12/1862122.html" mce_href="http://archives.miloush.net/michkap/archive/2007/03/12/1862122.html"><STRONG>ASCII? no questions; I tell UNICODE lies</STRONG></A></LI>
<LI><A class="" href="http://archives.miloush.net/michkap/archive/2007/06/08/3162451.html" mce_href="http://archives.miloush.net/michkap/archive/2007/06/08/3162451.html"><STRONG>año del ano, a.k.a. This sentence has several non-skarklish Spanish flutzpahs....</STRONG></A></LI>
<LI><A class="" href="http://archives.miloush.net/michkap/archive/2005/10/29/486617.html" mce_href="http://archives.miloush.net/michkap/archive/2005/10/29/486617.html"><STRONG>Why an 8-hour day seems to take forever</STRONG></A></LI></UL>
<P>and more -- I just got tired of putting in links. :-)</P>
<P>Anyway, if one uses these "hidden" yet publicly posted files, the guesswork and reverse engineering requirements are gone, as is the idle speculation. You can just look it up if you want the answer!</P>
<P>Though on <A class="" href="http://www.unicode.org/consortium/distlist.html" mce_href="http://www.unicode.org/consortium/distlist.html">The Unicode List</A>&nbsp;I am sure that idle speculation will continue, on other topics if not this one....</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This blog brought to you by <A class="" href="http://www.fileformat.info/info/unicode/char/0090" mce_href="http://www.fileformat.info/info/unicode/char/0090">U+0090</A>, of course!</EM></FONT></P>
<hr/><p><a id="8474758" href="#8474758">#</a> <strong>Andrew West</strong> on 8 May 2008 5:34 PM:</p><div style="margin-left: 1em"><p>I'm not sure about the Unicode list, but I'm with you 100% on the clown thing.</p></div>
<p><a id="8474764" href="#8474764">#</a> <strong>Zooba</strong> on 8 May 2008 5:35 PM:</p><div style="margin-left: 1em"><p>Unless you've snipped out part of the original post, the question is very unclear. Personally I prefer to clarify (or abuse, depending on how unclear) before I move on to a long answer.</p>
<p>Also, <a rel="nofollow" target="_new" href="http://www.grods.com/post/2472/">http://www.grods.com/post/2472/</a> can help you with your clown problem :-)</p></div>
<p><a id="8474879" href="#8474879">#</a> <strong>Michael S. Kaplan</strong> on 8 May 2008 5:54 PM:</p><div style="margin-left: 1em"><p>Actually, I have found clowns to be creepy since before I ever saw that Seinfeld episode (which was funny but the whole &quot;crazy clown&quot; thing is not exactly why I think they are creepy).</p>
<p>But they really are creepy, kind of the way I'd find sexual harassment panda to be if he were not a fictional creature...</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2012/02/20 <a href="http://archives.miloush.net/michkap/archive/2012/02/20/10269748.html">Where short file names can fail</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/05/09/8477363.html" title="The etymology of the Homo-Sus hypothesis">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/05/08/8459104.html" title="Support of Holi^h^h^^hDAZE, in Outlook (aka Situations when competition might help customers)">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-05">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-05-08">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/05/08/8466991.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
</html>