<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/05/21/8520660.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>String.StartsWith || String.EndsWith != String.Equals, either</title></head><body>
<h1>String.StartsWith || String.EndsWith != String.Equals, either</h1>
<p><em>by Michael S. Kaplan, published on 2008/05/21 10:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2008/05/21/8520660.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Research Developer Mahmoud's question was quite reasonable on its face:</P>
<BLOCKQUOTE>
<P><FONT face="times new roman,times"><EM>Hi All,<BR>I was having a problem, and I kept debugging it till I reached to a very strange problem, below is a simplified code that explains the problem I am facing.<BR></EM></FONT>&nbsp;<BR><FONT face="consolas,lucida console,courier new,courier"><STRONG>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; static void Main(string[] args) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; char c1 = (char)0x0629; //Arabic letter Taa-Marbouta<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; char c2 = (char)0x062a; //Arabic letter Taa-Maftohaa<BR>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string s1 = c1.ToString();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string s2 = c2.ToString();<BR>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (s1.Equals(s2)) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // s1 doesn't equal s2 so it won't enter<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("Won't enter the if statement because the two strings are not equal");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (s1.EndsWith(s2)) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Although s1 doesn't equal s2, and both of them are <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 1 char string, s1 is considered ending with s2 ??<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("Shouldn't enter here also, however, it enters and prints this line!!");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (s2.EndsWith(s1)) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Although s1 doesn't equal s2, and both of them are<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp;1 char string, s2 is considered ending with s1 ??<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("Shouldn't enter here also, however, it enters and prints this line!!");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Print their length, just to make sure both of them contains only one character<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("s1 length : " + s1.Length);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("s2 length : " + s2.Length);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</STRONG></FONT><BR>&nbsp;<BR><FONT face="times new roman,times"><EM>As you can see from the code, Although s1 and s2 are to different strings, they are considered ending with each others. Does anyone have any ideas?<BR><BR>Thank you,<BR>Mahmoud</EM></FONT></P></BLOCKQUOTE>
<P mce_keep="true">This behavior is actually expected, and by design.</P>
<P mce_keep="true">It is somewhat related to something I was talking about in <A class="" href="http://archives.miloush.net/michkap/archive/2007/05/31/3019659.html" mce_href="http://archives.miloush.net/michkap/archive/2007/05/31/3019659.html"><STRONG>Something .NET does less intuitively than they ought</STRONG></A>, where I referenced Josh Free's <A class="" href="http://blogs.msdn.com/bclteam/archive/2007/05/31/string-compare-string-equals-josh-free.aspx" mce_href="http://blogs.msdn.com/bclteam/archive/2007/05/31/string-compare-string-equals-josh-free.aspx">String.Compare() != String.Equals()</A>.</P>
<P mce_keep="true">Because in <STRONG>most <FONT color=#cc0000>though not all</FONT></STRONG>&nbsp;versions of the .NET Framework in the world today, all of the following methods from the <A class="" href="http://msdn.microsoft.com/library/system.string_members.aspx" mce_href="http://msdn.microsoft.com/library/system.string_members.aspx">String class</A>:</P>
<UL>
<LI>
<DIV mce_keep="true"><A class="" href="http://msdn.microsoft.com/library/system.string.endswith.aspx" mce_href="http://msdn.microsoft.com/library/system.string.endswith.aspx">String.EndsWith</A></DIV></LI>
<LI>
<DIV mce_keep="true"><A class="" href="http://msdn.microsoft.com/library/system.string.compare.aspx" mce_href="http://msdn.microsoft.com/library/system.string.compare.aspx">String.Compare</A></DIV></LI>
<LI>
<DIV mce_keep="true"><A class="" href="http://msdn.microsoft.com/library/system.string.indexof.aspx" mce_href="http://msdn.microsoft.com/library/system.string.indexof.aspx">String.IndexOf</A></DIV></LI>
<LI>
<DIV mce_keep="true"><A class="" href="http://msdn.microsoft.com/library/system.string.lastindexof.aspx" mce_href="http://msdn.microsoft.com/library/system.string.lastindexof.aspx">String.LastIndexOf</A></DIV></LI>
<LI>
<DIV mce_keep="true"><A class="" href="http://msdn.microsoft.com/library/system.string.startswith.aspx" mce_href="http://msdn.microsoft.com/library/system.string.startswith.aspx">String.StartsWith</A></DIV></LI></UL>
<P mce_keep="true">are in the same kind of "linguistic comparison" family, a family that <A class="" href="http://msdn.microsoft.com/library/system.string.equals.aspx" mce_href="http://msdn.microsoft.com/library/system.string.equals.aspx">String.Equals</A> just is not a member of, in any version....</P>
<P mce_keep="true">The two characters in question:</P>
<P mce_keep="true"><A class="" href="http://www.fileformat.info/info/unicode/char/0629" mce_href="http://www.fileformat.info/info/unicode/char/0629">U+0629</A>&nbsp;&nbsp;&nbsp; <FONT size=5>ة</FONT>&nbsp;&nbsp;&nbsp; ARABIC LETTER TEH MARBUTA</P>
<P mce_keep="true"><A class="" href="http://www.fileformat.info/info/unicode/char/062a" mce_href="http://www.fileformat.info/info/unicode/char/062a">U+062a</A>&nbsp;&nbsp;&nbsp; <FONT size=5>ت</FONT>&nbsp;&nbsp;&nbsp; ARABIC LETTER TEH</P>
<P mce_keep="true">are considered linguistically equal to each other prior to Vista and almost equal to each other in Vista and later -- which is where the seemingly odd equivalences are coming from above. </P>
<P mce_keep="true"><EM>Since Arabic is in the default collation table, one can even test this in .NET on Vista by comparing <STRONG>en-US</STRONG> results to <STRONG>en-IN</STRONG> results, since the&nbsp;<STRONG>en-IN</STRONG> will go through the synthetic, "Windows only" path and will get the updated collation results that Vista provides.</EM></P>
<P mce_keep="true">Now the pseudo-mathematical expression in the title:</P>
<BLOCKQUOTE>
<P mce_keep="true">String.StartsWith || String.EndsWith != String.Equals</P></BLOCKQUOTE>
<P mce_keep="true">is really not entirely accurate since of course these are not analogous methods that do the same type of thing anyway.</P>
<P mce_keep="true">Perhaps</P>
<BLOCKQUOTE>
<P mce_keep="true">String.StartsWith || String.EndsWith !≘ String.Equals</P></BLOCKQUOTE>
<P mce_keep="true">would be a bit better? :-)</P>
<P mce_keep="true"><EM>I'll explain that "most though not all" stuff in a future blog post.</EM></P>
<P mce_keep="true"><FONT color=#ff00ff><EM>This blog brought to you by</EM><FONT size=7> ≘ </FONT><EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/2258" mce_href="http://www.fileformat.info/info/unicode/char/2258">U+2258</A>, aka CORRESPONDS TO)</EM></FONT></P>
<hr/><p><a id="8529182" href="#8529182">#</a> <strong>Ben Bryant</strong> on 21 May 2008 3:02 PM:</p><div style="margin-left: 1em"><p>just wish there was a method name prefix or suffix to identify the &quot;linguistic comparison&quot; family of the function, a la CompareStringOrdinal vs CompareString?</p>
<p>I discussed this kind of &quot;family&quot; problem for an older family split in an old post called: &quot;The secret family split in Windows code page functions&quot; at <a rel="nofollow" target="_new" href="http://codesnipers.com/?q=node/46">http://codesnipers.com/?q=node/46</a></p></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/09/25 <a href="http://archives.miloush.net/michkap/archive/2008/09/25/8964291.html">You're not my type if you have no culture</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/05/21/8525127.html" title="Summer vacation, the 1st">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/05/20/8521480.html" title="When your friends know your meds, you have no privacy">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-05">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-05-21">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/05/21/8520660.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
</html>