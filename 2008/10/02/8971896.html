<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/10/02/8971896.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>When swimming in a sea of CONTEXT, applications can drown (and there is no lifeguard)</title></head><body>
<h1>When swimming in a sea of CONTEXT, applications can drown (and there is no lifeguard)</h1>
<p><em>by Michael S. Kaplan, published on 2008/10/02, original URI: http://blogs.msdn.com/b/michkap/archive/2008/10/02/8971896.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNewMonth -->
<p>Now I have talked about the good, the bad, the ugly, the pretty, the ins, and the outs of <b>digit substitution</b> many times over the past few years:</p>
<ul>
<li><font size="1">01 December 2004 -- <a href="http://archives.miloush.net/michkap/archive/2004/12/01/272864.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2004/12/01/272864.html">Crossing the DIGITal divide...</a><br></font> </li>
<li><font size="1">24 April 2005 -- <a href="http://archives.miloush.net/michkap/archive/2005/04/24/411329.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2005/04/24/411329.html">Is Whidbey's international support finished?</a><br></font> </li>
<li><font size="1">09 July 2005 -- <a href="http://archives.miloush.net/michkap/archive/2005/07/09/437071.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2005/07/09/437071.html">Why doesn't FoldString take an LCID?</a><br></font> </li>
<li><font size="1">09 September 2005 -- <a href="http://archives.miloush.net/michkap/archive/2005/09/09/462920.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2005/09/09/462920.html">Figuring out when digit substitution is applied</a><br></font> </li>
<li><font size="1">18 January 2006 -- <a href="http://archives.miloush.net/michkap/archive/2006/01/18/514171.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2006/01/18/514171.html">Digits -- there is no substitute</a><br></font> </li>
<li><font size="1">22 February 2006 -- <a href="http://archives.miloush.net/michkap/archive/2006/02/22/536877.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2006/02/22/536877.html">And the digits just keep on coming</a>&nbsp;</font></li>
<li><font size="1">26 April 2006 -- <a href="http://archives.miloush.net/michkap/archive/2006/04/26/583390.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2006/04/26/583390.html">How to NOT Parse Unicode Digits, or How to: Parse Unicode Digits... NOT!</a><br></font> </li>
<li><font size="1">18 June 2006 -- <a href="http://archives.miloush.net/michkap/archive/2006/06/18/636180.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2006/06/18/636180.html">The Phantom of the Digits</a>&nbsp;</font></li>
<li><font size="1">19 June 2006 -- <a href="http://archives.miloush.net/michkap/archive/2006/06/19/636785.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2006/06/19/636785.html">Correct? Intuitive? Both? Neither?</a><br></font> </li>
<li><font size="1">14 February 2007 -- <a href="http://archives.miloush.net/michkap/archive/2007/02/14/1675303.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2007/02/14/1675303.html">Nothing seems to be parsing the crap out of *this* number</a><br></font> </li>
<li><font size="1">21 Apr 2008 -- <a href="http://archives.miloush.net/michkap/archive/2008/04/21/8413510.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2008/04/21/8413510.html">Windows doesn't let you choose the pinch hitter in digit substitution cases</a>&nbsp;</font></li>
<li><font size="1">21 Apr 2008 -- <a href="http://archives.miloush.net/michkap/archive/2008/04/21/8413627.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2008/04/21/8413627.html">The pros and cons of context, aka CONTEXT is a four-letter-word</a><br></font> </li>
<li><font size="1">16 June 2008 -- <a href="http://archives.miloush.net/michkap/archive/2008/06/16/8603298.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2008/06/16/8603298.html">Sometimes, GDI respects users (even if no one else does!)<br></a></font></li>
<li><font size="1">25 June 2008 -- <a href="http://archives.miloush.net/michkap/archive/2008/06/25/8650800.html" style="font-weight: bold;" mce_href="http://archives.miloush.net/michkap/archive/2008/06/25/8650800.html">So logical that even Mr. Spock (and my fiancée?) would approve</a>&nbsp;</font></li>
</ul>
<p>There are others, but get the point.</p>
<p>Interestingly, none of them covered the issue that I found in my inbox yesterday morning at 5:05 AM (in fairness the email was from someone in India so it was actually more like after 5:00 PM there!).</p>
<p>The mail went something like this:</p>
<p style="margin-left: 40px;"><span style="font-family: times new roman,times; font-style: italic;">I’m a dev facing an internationalization issue in our application.&nbsp; On asking around, I gathered that you might be the person who can help – and hence this mail. </span><br style="font-family: times new roman,times; font-style: italic;"><br style="font-family: times new roman,times; font-style: italic;"><span style="font-family: times new roman,times; font-style: italic;">In “intl.cpl” we have a setting called “Use Native Digits”.&nbsp; It can take 3 different values – “context”, “none” and “national”.&nbsp; Do you know of any way to change this setting from within an application without affecting all the other applications running in the system?</span><br style="font-family: times new roman,times; font-style: italic;"><br style="font-family: times new roman,times; font-style: italic;"><span style="font-family: times new roman,times; font-style: italic;">A call like the one below does change the setting but the effect is global:</span><br style="font-family: times new roman,times; font-style: italic;"><br style="font-family: times new roman,times; font-style: italic;"><span style="font-family: consolas,lucida console,courier new,courier; font-weight: bold;">SetLocaleInfo(LOCALE_USER_DEFAULT, LOCALE_IDIGITSUBSTITUTION, L"2");</span><br style="font-family: times new roman,times; font-style: italic;"><br style="font-family: times new roman,times; font-style: italic;"><span style="font-family: times new roman,times; font-style: italic;">Why do we want to set “Use Native Digits” to “national”?&nbsp; Well, because if the value is “context”, edit boxes end up mixing Arabic and English numerals based on what’s been entered previously – an effect we do not want.</span><br style="font-family: times new roman,times; font-style: italic;"><br style="font-family: times new roman,times; font-style: italic;"><span style="font-family: times new roman,times; font-style: italic;">Thanks &amp; Regards,</span> <br></p>
<p>Now this is an issue that hasn't really come up before.</p><p>I mean not <span style="font-style: italic;">really</span>.</p><p>The way that when we talk about digit substitution being set the <span style="font-weight: bold;">context</span> (which is defined in the documentation as "The shape depends on the previous text in the same output"), what isn't really discussed is one important factoid:</p><p style="margin-left: 40px;"><font size="5">The context border is at the level of a single control.</font><br></p><p>In a single application with several controls on it, this may or may not make sense.</p><p>If they each do separate things, then perhaps they will make sense if they are different.</p><p>Take the dialog in Regional Options date customization for a second:</p><p><img src="http://trigeminal.fmsinc.com/images/context01.png" mce_src="http://trigeminal.fmsinc.com/images/context01.png" width="477" border="0" height="581">&nbsp;&nbsp; <img src="http://trigeminal.fmsinc.com/images/context02.png" mce_src="http://trigeminal.fmsinc.com/images/context02.png" width="477" border="0" height="581"></p><p>Now the first one is with an Arabic UI language, and the second with an English one.</p><p>Both have the default <b>Arabic - Saudi Arabia</b> locale and you can see how the various controls do very different things throughout, given the <b>Context</b> setting here.</p><p>Perhaps since each example is self contained and meant to show differences, this is okay (though some find even this confusing).<br></p><p>But imagine the kind of UI being reported here, where all of the controls are together, almost like a grid of them. Having their behavior change based on content would be like watching different boxes in an Excel spreadsheet show different behavior. Ugly!</p><p>Unfortunately there is no place to define a different behavior here, other than some more low level ways you can get to if you call the Uniscribe functions directly and change the dfcigit substitution settings there.</p><p>But certainly less than ideal -- you lose a lot more features than you gain if you go that route.</p><p>This an area that could really use some actual solutions -- and help from the folks in NLS and GDI and Uniscribe, probably. Though this is just one more item in a long list of things that needs to be fixed in digit substitution, so it is hard to say when/if people will get to it.... :-(<br></p><p><br></p><p><font color="#ff00ff"><i>This blog brought to you by</i><font size="5"> # </font><i>(aka <a href="http://www.fileformat.info/info/unicode/char/0023" mce_href="http://www.fileformat.info/info/unicode/char/0023">U+0023</a>, aka NUMBER SIGN)</i></font> <br></p>
<hr/><div style="margin-left: 1em"><em>comments not archived</em></div><hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/11/12 <a href="http://archives.miloush.net/michkap/archive/2010/11/12/10088056.html">Suddenly, in a bit more time than a blink of an eye, "standards support" becomes "less i18n support"</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/10/02/8974377.html" title="Not the monks... or The Monks... or The Monks... or The Mumps...">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/10/01/8971236.html" title="Parents, to be perfectly blunt, suck at names, sometimes">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-10">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-10-02">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/10/02/8971896.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
</html>