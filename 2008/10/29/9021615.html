<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/10/29/9021615.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Wonder why something is not in the Compact Framework? The answer is in the question!</title></head><body>
<h1>Wonder why something is not in the Compact Framework? The answer is in the question!</h1>
<p><em>by Michael S. Kaplan, published on 2008/10/29 03:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2008/10/29/9021615.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p>Regular reader Jan Kučera, in response to <b><a href="http://archives.miloush.net/michkap/archive/2007/05/14/2629747.html" mce_href="http://archives.miloush.net/michkap/archive/2007/05/14/2629747.html">Stripping is an interesting job (aka On the meaning of meaningless, aka All Mn characters are non-spacing, but some are more non-spacing than others)</a></b>, asked in a <a href="http://archives.miloush.net/michkap/archive/2007/05/14/2629747.html#9021275" mce_href="http://archives.miloush.net/michkap/archive/2007/05/14/2629747.html#9021275">comment</a>:</p><blockquote><p><i><font face="times new roman,times">Any way for the .NET Compact Framework people out there? (as the normalization does not seem to be available for them...)</font></i></p></blockquote><p>Yes it is true, Unicode normalization support like <a href="http://msdn.microsoft.com/en-us/library/system.string.normalize.aspx" mce_href="http://msdn.microsoft.com/en-us/library/system.string.normalize.aspx">System.String.Normalize</a> does not exist in the Compact Framework.</p><p><i>By the way, I know Jan did not ask the question in the title!</i> <br></p><p>But I suppose that is why they call it compact, in part -- because they didn't put everything in there. :-)</p><p>One can always do it oneself, I suppose -- <a href="http://www.unicode.org/reports/tr15/" mce_href="http://www.unicode.org/reports/tr15/">Unicode Nornalization</a> can be implemented by anyone!</p><p>And as I mentioned almost four years ago in <b><a href="http://archives.miloush.net/michkap/archive/2004/11/29/271476.html" mce_href="http://archives.miloush.net/michkap/archive/2004/11/29/271476.html">Normalization and Microsoft -- whats the story?</a></b>, one can always just call FoldString and get a bunch of the functionality -- just not everything since the tables aren't as up to date.</p><p>Or one could find some third party library and call it. Anyone have a favorite?</p><p>All of this is a lot of work to perform a destructive job like <b>stripping</b> -- note that although I never judged Valerie for her choices vis-a-vis stripping and school, I do tend to judge code that strips out diacritics that actually might contain meaning. Negatively.<br></p><p>In other words, I may have provided the code to do it (code that to be frank is much better than <a href="http://www.codeproject.com/KB/cs/UnicodeNormalization.aspx" mce_href="http://www.codeproject.com/KB/cs/UnicodeNormalization.aspx">this</a> code, for several reasons that I'll get into some other time), but I still judge the people who use it.</p><p>This is the very combination of logic and meanness that can drive nice people insane -- good thing I'm not nice! :-)</p><p><br></p><p><font color="#ff00ff"><i>This post brought to you by</i><font size="6"> ピ </font><i>(<a href="http://www.fileformat.info/info/unicode/char/30d4" class="" mce_href="http://www.fileformat.info/info/unicode/char/30d4">U+30d4</a>, a.k.a. 
KATAKANA LETTER PI)</i></font> <br></p>
<hr/><p><strong>Jan Kučera</strong> on 29 Oct 2008 4:12 AM:</p><div style="margin-left: 1em"><p>Hi, searching your past posts in this area I've already got the idea that FoldString might do the trick, plus checked the documentation that this one is on Windows CE for quite a time as well.</p>
<p>What's quite confusing is the documentation, since on desktop, it is located in Kernel32.dll, and the only hints in CE documentation is that the header is in Winnls.h and link library is Coreloc.lib... which is not as helpful as one might think - to a managed stranger thronged in a compact space. :)</p>
<p>So anybody knowing the dll I might use for PInvoke signature? That would be nice ending to this story...</p>
<p>Thanks!</p></div>
<p><strong>Jan Kučera</strong> on 29 Oct 2008 4:33 AM:</p><div style="margin-left: 1em"><p>PS. As for the judging, I am not a fun of this stripping either, but one must strip here to save some money on sms... - you can send two and fourth message for the same money if you consent to strip.</p>
<p>I have no idea why such space wasting encoding as UCS-2 was chosen here (yeah, probably to earn a lot of money), but if you establish a movement to support national text messages then I would be the first one who would join you! :)</p>
<p>Moreover, I don't think every religion is that much comfortable with stripping, either...</p></div>
<p><strong>John Cowan</strong> on 29 Oct 2008 10:21 AM:</p><div style="margin-left: 1em"><p>UCS-2 was the only Unicode encoding that existed back in 1985 when the standards for SMS were set. &nbsp;The first SMS message was sent in 1992, only a few months after Ken Thompson devised UTF-8. &nbsp;And making backwards-incompatible changes to all the world's cell phones is unthinkable at this point. &nbsp;So people texting in alphabetic languages that don't fit in the constraints of the GSM 3.38 encoding can either strip diacritics (sometimes with murderous results, as this blog has noted) or put up with the 70-character maximum of UCS-2 SMS.</p></div>
<p><strong>Michael S. Kaplan</strong> on 29 Oct 2008 11:33 AM:</p><div style="margin-left: 1em"><p>Hey Jan --</p>
<p>The 3.0 eMbedded Visual Tools included a copy of WIN32API.TXT tailored for the CE platform. I can't grab a copy of it at the moment but ads articles like Paul Yao's (<a rel="nofollow" target="_new" href="http://msdn.microsoft.com/magazine/cc301473.aspx">http://msdn.microsoft.com/magazine/cc301473.aspx</a>) point out that it is largely replacing the DLl name with &quot;coredll&quot; and calling it a day....</p>
<p>For the stripping issue vis-a-vis religion, it is a choice and a judgment call, I think. Valerie was very well aware that working as a stripper would actually make her more than her physical therapy degree would provide, but she stopped doing it after she graduated since it was just a means to an end. Although we would vigorously discuss the issue at times, I never judged her for it, though as you point out some would...</p>
</div>
<p><strong>Jan Kučera</strong> on 29 Oct 2008 4:09 PM:</p><div style="margin-left: 1em"><p>John, thanks for the info, I was not aware of this timing. However, UCS-2 was also a backwards-incompatible change and I think the only real problem with any new change is, that it would lower profits of the operators, which is just unacceptable, no matter how right thing it might be.</p>
<p>(leaving aside that there are characters which do not fit into UCS-2 at all and they are still encoding...)</p></div>
<p><strong>Michael S. Kaplan</strong> on 29 Oct 2008 4:43 PM:</p><div style="margin-left: 1em"><p>Any implementation that has the fonts/rendering info will support supplementary characters just fine, so the UCS-2 is not a blocker (surrogate code units are for UCS-2 just random undefined code points).</p>
</div>
<p><strong>Jan Kučera</strong> on 30 Oct 2008 9:20 AM:</p><div style="margin-left: 1em"><p>Actually if both of us are on Windows Mobile we could use UCS-2 transfer to hold our custom encoding/decoding... cool, I might try this one. :)</p>
<p>And thanks for the &quot;coredll&quot; tip, it works... now I can see stripping even on phone... not that quality as on desktop, you know, but good enough for my purposes! ;-)</p>
<p>Thanks.</p>
<p>PS. And I also wanted to add, that it's not me just nitpicking, we really do have phones here (and not that old at all!), which are not capable of receiving UCS-2 messages...</p></div>
<p><strong>Michael S. Kaplan</strong> on 30 Oct 2008 1:58 PM:</p><div style="margin-left: 1em"><p>Sounds like we have some hardware providers to take out back and beat the crap out of!</p>
</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/10/29/9022296.html" title="How the @#%&amp;*! does CBS_SORT choose to sort it all out?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/10/28/9020410.html" title="Ready... set... Reboot Redux, part Deux!">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-10">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-10-29">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/10/29/9021615.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
</html>