<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/01/17/7141157.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Expertise isn't always everything (aka When the one who is learning teaches us something important)</title></head><body>
<h1>Expertise isn't always everything (aka When the one who is learning teaches us something important)</h1>
<p><em>by Michael S. Kaplan, published on 2008/01/17 06:46 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2008/01/17/7141157.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>The other day I was chatting by email with a developer on a unique problem -- she was trying to support vertical text.</P>
<P>She&nbsp;had seen my blog <A class="" href="http://archives.miloush.net/michkap/archive/2005/08/04/447759.html" mce_href="http://archives.miloush.net/michkap/archive/2005/08/04/447759.html"><STRONG>Let's get vertical</STRONG></A>, but had not been able to find the TATE sample in the Platform SDK that I mentioned.</P>
<P><EM>This was something I mentioned after I found out for myself in the more recent blog <A class="" href="http://archives.miloush.net/michkap/archive/2007/03/31/2000190.html" mce_href="http://archives.miloush.net/michkap/archive/2007/03/31/2000190.html"><STRONG>Rotate it when vertical?</STRONG></A>.</EM></P>
<P>Anyway, I was giving the explanation about how CJK ideographs on the BMP do not use Uniscribe functionality, they use GDI -- both for the vertical support obtained by prefixing the font name with an <STRONG>@</STRONG> sign, and for the font linking support provided by GDI itself since not every font supports every character....</P>
<P>But she was getting results that were simply unexpected:</P>
<BLOCKQUOTE>
<P><FONT face="times new roman,times">I noticed that "@" in front of font name will help with glyph retrieval - without it I will not be able to see japanese characters. Does Uniscribe expose a flag that tells us when to use "@"?&nbsp; It will help a little bit of explanation of the meaning of "@" in this instance.</FONT></P></BLOCKQUOTE>
<P>From that description, I was at a loss -- it seemed to fly in the fact of what I knew about ideographic&nbsp;characters on the Windows platform and the nature of GDI text rendering and GDI font linking.</P>
<P>The problem?</P>
<P>Well, in my mind I was imagining the switch between&nbsp;different forms of the same font name and what the <STRONG>@</STRONG> sign does, i.e.</P>
<UL>
<LI>"<STRONG>MS UI Gothic</STRONG>" vs. "<STRONG>@MS UI Gothic</STRONG>" and</LI>
<LI>"<STRONG>PMingLiU</STRONG>" vs. "<STRONG>@PMingLiU</STRONG>" and</LI>
<LI>"<STRONG>SimSun</STRONG>" vs. "<STRONG>@SimSun</STRONG>" and</LI>
<LI>"<STRONG>Gulim</STRONG>" vs. "<STRONG>@Gulim</STRONG>"</LI></UL>
<P mce_keep="true">but if you look at the text&nbsp;<A class="" href="http://archives.miloush.net/michkap/archive/2005/08/04/447759.html" mce_href="http://archives.miloush.net/michkap/archive/2005/08/04/447759.html"><STRONG>Let's get vertical</STRONG></A> then you'll see that I never mentioned the font name, and honestly the original text in the 1st edition of&nbsp;<STRONG>Developing International Software</STRONG> didn't really get into it, either.</P>
<P mce_keep="true">My developer comrade had, through that great mix of (for lack of a better description) ignorance<FONT size=1><SUP>1</SUP></FONT> and brilliance, made a simple test using Japanese ideographic text and </P>
<UL>
<LI>
<DIV mce_keep="true">"<STRONG>Arial</STRONG>" vs. "<STRONG>@Arial</STRONG>"</DIV></LI></UL>
<P mce_keep="true">I was shocked. The idea of doing this had simply never occurred to me. Even when questions that people asked suggested the notion, nobody had ever reported the behavior....</P>
<P mce_keep="true">If you look at the text of&nbsp;<A class="" href="http://archives.miloush.net/michkap/archive/2005/06/18/430507.html" mce_href="http://archives.miloush.net/michkap/archive/2005/06/18/430507.html"><STRONG>Font substitution and linking #3</STRONG></A> you can see all of the fonts that are affected by GDI font linking outside of those four big East Asian fonts. And <A class="" href="http://www.ms-studio.com/articles.html" mce_href="http://www.ms-studio.com/articles.html">The Scourge of Arial</A>, the Helvetica knockoff that has been part of Windows for so long, is not on that list.</P>
<P mce_keep="true">So <STRONG>Arial</STRONG> gets no GDI font linking behavior.</P>
<P mce_keep="true">But once you put that <STRONG>@</STRONG> prefix in place, GDI now knows it is doing that vertical support that has been part of the CJK legacy experience for over a decade -- and so it ends up invoking the other longstanding legacy behavior with a CJK focus behind it, and runs through&nbsp;the GDI&nbsp;font linking chain.</P>
<P mce_keep="true">Nobody I have talked to remembers this coming up before. I am very curious whether anyone has ever even noticed, let alone tested this whole unknown secret way into the functionality. If not, then simple application of the first <A class="" href="http://archives.miloush.net/michkap/archive/2005/11/12/491519.html" mce_href="http://archives.miloush.net/michkap/archive/2005/11/12/491519.html"><STRONG>Tester's Axiom</STRONG></A> (<EM>If you have not tested it, assume it is broken.</EM>) leads one to the obvious conclusion that there are probably (and almost certainly)&nbsp;bugs here related to this usage.</P>
<P mce_keep="true">The advice to&nbsp;this developer and her team was easy enough in terms of picking the "right" font, though even now as I write this I am staggered to wonder how many other my longstanding assumptions and the longstanding assumptions of my colleagues in international development and test might also have in them bugs that are blocked by our assumptions -- blocked by&nbsp;the very&nbsp;knowledge of the area that makes us good at our jobs!</P>
<P mce_keep="true">In the end, this behavior is the sort of thing that deserves thought and then at least documentation and obvious investigation into possible bugs by the unintentional cross-pollination of these two functionalities with overlapping targets. </P>
<P mce_keep="true">And on the whole I am much happier that I am less dismissive now than I used to be of people who are struggling to get our support working before they always understand how it is supposed to be used. Because there are bound to be cases like this one.</P>
<P mce_keep="true">And to that developer, if she is reading this&nbsp;-- be sure to forward this to your manager; you definitely earned your salary that day.... :-)</P>
<P mce_keep="true">&nbsp;</P>
<P mce_keep="true"><FONT size=1>1 - This word is not intended pejoratively, just in the sense of someone coming into an area with a real blank slate in place, with no pre-conceived notions.</FONT></P>
<P mce_keep="true">&nbsp;</P>
<P mce_keep="true"><FONT face=Tahoma><FONT color=#ff00ff><EM>This post brought to you by</EM><FONT size=5> ＠ </FONT><EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/ff20" mce_href="http://www.fileformat.info/info/unicode/char/ff20">U+ff20</A>, FULLWIDTH COMMERCIAL AT)</EM></FONT></FONT></P>
<hr/><p><a id="7492988" href="#7492988">#</a> <strong>jmdesp</strong> on 6 Feb 2008 10:57 AM:</p><div style="margin-left: 1em"><p>I'm a bit puzzled. I never investigated it, but I've seen somewhere a long while ago that the '@' version of those fonts exists to be used for vertical text. So that vertical text starts to work better when you select that version is really, really not surprising for me.</p>
<p>IMO the japanese teams at Microsoft know about it very well and have tested it fully.</p></div>
<p><a id="7496549" href="#7496549">#</a> <strong>Michael S. Kaplan</strong> on 6 Feb 2008 2:17 PM:</p><div style="margin-left: 1em"><P>Tested adding it to unrelated fonts that do not claim any vertical support at all? That is a lot less likely. I know they certainly test the EA fonts that are used for vertical....</P></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/09/22 <a href="http://archives.miloush.net/michkap/archive/2010/09/22/10066037.html">Looking at life a bit more vertically, for a moment...</a></p><p>2009/09/23 <a href="http://archives.miloush.net/michkap/archive/2009/09/23/9898441.html">Search engines still don't know what it is, or more to the point where it's @</a></p><p>2008/05/12 <a href="http://archives.miloush.net/michkap/archive/2008/05/12/8490406.html">What happens when you involve an unenabled Uniscribe with vertical text, given that Uniscribe doesn't handle vertical text?</a></p><p>2008/03/19 <a href="http://archives.miloush.net/michkap/archive/2008/03/19/8323216.html">The forensic typographers found no link to Lucida Console, and the D.A. had nothing to fallback to</a></p><p>2008/02/28 <a href="http://archives.miloush.net/michkap/archive/2008/02/28/7934894.html">Font size scaling -- GDI vs. GDI+</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/01/18/7152427.html" title="It is exciting when at least half the people in the room have a more interesting/compelling story than you do">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/01/17/7126999.html" title="Virtual PC + Word 2007 ≠ AltGr support?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-01">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-01-17">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/01/17/7141157.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
</html>