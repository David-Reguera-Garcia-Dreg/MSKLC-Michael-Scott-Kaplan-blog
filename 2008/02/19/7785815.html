<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/02/19/7785815.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Insanity defined: In the real world -0 == 0, in Vista -0 < 0, and in Windows Server 2008 -0 ≮ 0</title></head><body>
<h1>Insanity defined: In the real world -0 == 0, in Vista -0 < 0, and in Windows Server 2008 -0 ≮ 0</h1>
<p><em>by Michael S. Kaplan, published on 2008/02/19 10:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2008/02/19/7785815.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Somewhere in between&nbsp;zero and the&nbsp;smallest possible negative number there lies another number.</P>
<P>NEGATIVE ZERO.</P>
<P>I am being facetious here; it is not a number that is any different than zero. In the end,</P>
<P><FONT face="courier new,courier" size=5><STRONG>0 == -0</STRONG></FONT></P>
<P>as just about any normal person in the world will tell you (I learned it in the first day I learned about negative numbers, myself). It has as much meaning as <STRONG>+0</STRONG> does, in the end. Either way, it is still zero.</P>
<P>But that doesn't stop programmatic folk from coming up with explanations in the BCL Team blog like <A class="" href="http://blogs.msdn.com/bclteam/archive/2006/10/12/decimal-negative-zero-representation-lakshan-fernando.aspx" mce_href="http://blogs.msdn.com/bclteam/archive/2006/10/12/decimal-negative-zero-representation-lakshan-fernando.aspx">Decimal Negative Zero Representation</A>, "by design" issues such as <A class="" href="https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=292276" mce_href="https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=292276">In VS2005 C++, Zero reported as negative zero for double type</A> and bugs like <A class="" href="https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=318478" mce_href="https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=318478">Math functions make a distinction between 0 and -0</A>.</P>
<P>We even had an issue in collation, believe it or not!</P>
<P>You see, when people are not using the whole <A class="" href="http://archives.miloush.net/michkap/archive/2005/01/05/346933.html" mce_href="http://archives.miloush.net/michkap/archive/2005/01/05/346933.html"><STRONG>sort digits like numbers</STRONG></A> functionality brought to you by the <A class="" href="http://msdn2.microsoft.com/library/bb759947.aspx" mce_href="http://msdn2.microsoft.com/library/bb759947.aspx">StrCmpLogicalW function</A>, then digits and all of the rest of the numbers in Unicode have to get sorted as text.</P>
<P>Conceptually it makes total sense to sort all of the values -- so that <STRONG>⓴</STRONG> (<A class="" href="http://www.fileformat.info/info/unicode/char/24f4" mce_href="http://www.fileformat.info/info/unicode/char/24f4">U+24f4</A>, aka NEGATIVE CIRCLED NUMBER TWENTY) comes first and then all of the other numbers greater than that like <STRONG>8</STRONG> (<A class="" href="http://www.fileformat.info/info/unicode/char/0038" mce_href="http://www.fileformat.info/info/unicode/char/0038">U+0038</A>, aka DIGIT EIGHT) until at the far end you have <STRONG>∞</STRONG> (<A class="" href="http://www.fileformat.info/info/unicode/char/221e" mce_href="http://www.fileformat.info/info/unicode/char/221e">U+221e</A>, aka INFINITY). And that is how it works in collation -- with numbers that have the same digit values, like</P>
<UL>
<UL>
<LI><FONT face="courier new,courier"><A class="" href="http://www.fileformat.info/info/unicode/char/0032" mce_href="http://www.fileformat.info/info/unicode/char/0032">U+0032</A>&nbsp;&nbsp;&nbsp; DIGIT TWO&nbsp;&nbsp; &nbsp;2</FONT></LI>
<LI><FONT face="courier new,courier"><A class="" href="http://www.fileformat.info/info/unicode/char/01bb" mce_href="http://www.fileformat.info/info/unicode/char/01bb">U+01bb</A>&nbsp;&nbsp;&nbsp; LATIN LETTER TWO WITH STROKE&nbsp;&nbsp;&nbsp; ƻ</FONT></LI>
<LI><FONT face="courier new,courier"><A class="" href="http://www.fileformat.info/info/unicode/char/ff12" mce_href="http://www.fileformat.info/info/unicode/char/ff12">U+ff12</A>&nbsp;&nbsp;&nbsp; FULLWIDTH DIGIT TWO&nbsp;&nbsp;&nbsp; ２</FONT></LI>
<LI><FONT face="courier new,courier"><A class="" href="http://www.fileformat.info/info/unicode/char/2082" mce_href="http://www.fileformat.info/info/unicode/char/2082">U+2082</A>&nbsp;&nbsp;&nbsp; SUBSCRIPT TWO&nbsp;&nbsp;&nbsp; ₂</FONT></LI>
<LI><FONT face="courier new,courier"><A class="" href="http://www.fileformat.info/info/unicode/char/2461" mce_href="http://www.fileformat.info/info/unicode/char/2461">U+2461</A>&nbsp;&nbsp;&nbsp; CIRCLED DIGIT TWO&nbsp;&nbsp;&nbsp; ②</FONT></LI>
<LI><FONT face="courier new,courier"><A class="" href="http://www.fileformat.info/info/unicode/char/24f6" mce_href="http://www.fileformat.info/info/unicode/char/24f6">U+24f6</A>&nbsp;&nbsp;&nbsp; DOUBLE CIRCLED DIGIT TWO&nbsp;&nbsp;&nbsp; ⓶</FONT></LI>
<LI><FONT face="courier new,courier"><A class="" href="http://www.fileformat.info/info/unicode/char/2781" mce_href="http://www.fileformat.info/info/unicode/char/2781">U+2781</A>&nbsp;&nbsp;&nbsp; DINGBAT CIRCLED SANS-SERIF DIGIT TWO&nbsp;&nbsp;&nbsp; ➁</FONT></LI>
<LI><FONT face="courier new,courier"><A class="" href="http://www.fileformat.info/info/unicode/char/00b2" mce_href="http://www.fileformat.info/info/unicode/char/00b2">U+00b2</A>&nbsp;&nbsp;&nbsp; SUPERSCRIPT TWO&nbsp;&nbsp;&nbsp; ²</FONT></LI></UL></UL>
<P>given the same&nbsp;primary weight but alternate other weights, in some kind of weird attempt to give them some kind of numerosoity kind of thing.</P>
<P>But then there is <STRONG>⓿</STRONG> (<A class="" href="http://www.fileformat.info/info/unicode/char/24ff" mce_href="http://www.fileformat.info/info/unicode/char/24ff">U+24ff</A>, aka NEGATIVE CIRCLED DIGIT ZERO).</P>
<P>It was obviously kind of zeroish. Like <STRONG>0</STRONG> (<A class="" href="http://www.fileformat.info/info/unicode/char/0030" mce_href="http://www.fileformat.info/info/unicode/char/0030">U+0030</A>, aka DIGIT ZERO). But the special&nbsp;extra weight slot&nbsp;for circled digits was already taken up by ⓪&nbsp; (<A class="" href="http://www.fileformat.info/info/unicode/char/24ea" mce_href="http://www.fileformat.info/info/unicode/char/24ea">U+24ea</A>, aka CIRCLED DIGIT ZERO).</P>
<P>Uh oh, what to do?</P>
<P>So in the end, in Vista, because of the notion that <STRONG>-0</STRONG> somehow (conceptually) needs to come before <STRONG>0</STRONG>, the weights for the ASCII digits were all incremented a bit so there would be room for NEGATIVE ZERO while still giving&nbsp;the digits&nbsp;consistent weights.</P>
<P>This, as it turns out, was&nbsp;not such a great idea, since it increased the size of sort keys that contain innocent items in them like GUIDs. So in Server 2008 it gets stuck somewhere after <STRONG>0</STRONG> (<A class="" href="http://www.fileformat.info/info/unicode/char/0030" mce_href="http://www.fileformat.info/info/unicode/char/0030">U+0030</A>, aka DIGIT ZERO), where there is lots of room for zero-ish things like this.</P>
<P>This (and a handful of other bugs like <A class="" href="http://archives.miloush.net/michkap/archive/2007/05/05/2430935.html" mce_href="http://archives.miloush.net/michkap/archive/2007/05/05/2430935.html"><STRONG>this one</STRONG></A>, only fixed in Server 2008 as I explained <A class="" href="http://archives.miloush.net/michkap/archive/2007/09/08/4831056.html" mce_href="http://archives.miloush.net/michkap/archive/2007/09/08/4831056.html"><STRONG>here</STRONG></A>) is why Server 2008 has an updated major sorting version.</P>
<P>All because there was no room in the weights to make <STRONG>-0 &lt; 0</STRONG>!</P>
<P>So in the end, in the real world -0 == 0, in Vista -0 &lt; 0, and in Windows Server 2008 -0 ≮ 0!</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This post brought to you by</EM><FONT size=5> ⓿ </FONT><EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/24ff" mce_href="http://www.fileformat.info/info/unicode/char/24ff">U+24ff</A>, aka NEGATIVE CIRCLED DIGIT ZERO)</EM></FONT></P>
<hr/><p><strong>Someone</strong> on 19 Feb 2008 1:20 PM:</p><div style="margin-left: 1em"><P>The notion of "minus zero" is quite normal in computers. See for instance &lt;<A class="" title=http://en.wikipedia.org/wiki/−0_%28number%29 href="http://en.wikipedia.org/wiki/â0_(number)">http://en.wikipedia.org/wiki/−0_%28number%29</A>&gt; and &lt;<A href="http://www.fourmilab.ch/documents/univac/minuszero.html>" target=_new rel=nofollow mce_href="http://www.fourmilab.ch/documents/univac/minuszero.html>">http://www.fourmilab.ch/documents/univac/minuszero.html&gt;</A></P>
<P>Nitpick:</P>
<P>"Somewhere in between zero and the smallest possible negative number there lies another number"</P>
<P>1) that should be "…and the _largest_ possible negative number".</P>
<P>2) even that is not really true if, as you imply by naming this "negative zero", you consider "minus zero" a negative number.</P></div>
<p><strong>John Cowan</strong> on 19 Feb 2008 2:15 PM:</p><div style="margin-left: 1em"><p>Man, this is beyond stupid.</p>
<p>The NEGATIVE in the Unicode digits means negative as in photographic negative; they are displayed with white digits on black circles, and certainly they shouldn't have negative numeric values -- and indeed in UnicodeData they don't. &nbsp;So that's just a bug.</p>
<p>As for floating-point -0.0, that is in one sense less than +0.0, because it means &quot;any negative value larger than -FLOAT_MIN&quot; just as +0.0 means &quot;zero, or any positive value less than +FLOAT_MIN&quot;. &nbsp;But in another sense, of course, -0.0 = +0.0 = 0. &nbsp;Such is the price of trying to do real arithmetic with inexact numbers.</p></div>
<p><strong>Dean Harding</strong> on 19 Feb 2008 5:42 PM:</p><div style="margin-left: 1em"><p>&quot;Man, this is beyond stupid.&quot;</p>
<p>Dude, lighten up. I'm quite sure Michael knows the difference between negative numbers and photographic negatives. He was just trying to add a bit of spice to the post. Nowhere did he say they had &quot;negative numeric values&quot;, so where's the bug, exactly?</p></div>
<p><strong>Michael S. Kaplan</strong> on 19 Feb 2008 6:38 PM:</p><div style="margin-left: 1em"><p>I suppose I should count myself as lucky that whole &quot;when they are text this is all kind of arbitrary&quot;, huh :-)</p>
<p>Good info for a bug report, in any case. Thanks!</p></div>
<p><strong>John Cowan</strong> on 4 Mar 2008 1:23 PM:</p><div style="margin-left: 1em"><p>Dean Harding:</p>
<p>Michael knows I mean no offense.</p>
<p>In any case, he is saying that in the wonderful world of Microsoft, NEGATIVE CIRCLED NUMBER TWENTY sorts before DIGIT ZERO, which can only reflect someone's mistaken belief that it is a circled -20. &nbsp;It should sort the same as CIRCLED NUMBER TWENTY.</p></div>
<p><strong>Michael S. Kaplan</strong> on 5 Mar 2008 11:14 AM:</p><div style="margin-left: 1em"><p>In the end, there is a bug here. Though like I said I guess we're lucky about the arbitrary collation rules of symbols....</p>
<p>To that I would add what a bad idea it is to be negative. :-)</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/04/28 <a href="http://archives.miloush.net/michkap/archive/2008/04/28/8435937.html">Much ado about zero, aka These zeroes won't ever amount to anything</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/02/19/7791306.html" title="The most important language in the whole wide world is yours, and you hardly even know yours! -- NOT!">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/02/19/7781219.html" title="Overheard: You don&#39;t go and change the color of the carpet when you are invited over for dinner.">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-02">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-02-19">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/02/19/7785815.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
</html>