<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/02/19/7791306.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>The most important language in the whole wide world is yours, and you hardly even know yours! -- NOT!</title></head><body>
<h1>The most important language in the whole wide world is yours, and you hardly even know yours! -- NOT!</h1>
<p><em>by Michael S. Kaplan, published on 2008/02/19 10:16 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2008/02/19/7791306.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Some of you who grew up with Sesame Street may recall the old short they ran with the catchy lyric that inspired the title:</P>
<BLOCKQUOTE>
<P><EM>The most important person in the whole wide world is you, and you hardly even know you!</EM></P></BLOCKQUOTE>
<P>It is something that Paul C. Vitz (in his Psychology as Religion: The Cult of Self-Worship)&nbsp;has denigrated due to how it "<EM>...fills the empty self, but it perpetuates passivity and weakness.</EM>" </P>
<P>Harsh words, but perhaps good ones to hear (I kind of ignored the Sesame Street bit, since even at a young age I <STRONG>knew</STRONG> that I was the most important person in the whole wide world <STRONG>to me even if not to the other misguided souls that are held by gravity to the third rock from the sun</STRONG> and didn't have a ton of respect for the people who needed this kind of thing to feel good about themselves, much preferring to "hanker for a hunka cheese" as the other little short would point out. In fact I suspect that this kind of sappy crap is actually where my cynicism was first born? :-)</P>
<P>Besides, as I just overheard, <A class="" href="http://archives.miloush.net/michkap/archive/2008/02/19/7781219.html" mce_href="http://archives.miloush.net/michkap/archive/2008/02/19/7781219.html"><STRONG>You don't go and change the color of the carpet when you are invited over for dinner</STRONG></A>. If you really were the most important person in the whole wide world, such behavior <EM>would</EM> be quite socially acceptable, as long as <STRONG>you</STRONG> did it. Do we need further proof in the flw in the reasoning? :-)</P>
<P>In any case, I was thinking about all of this just yesterday, when a question came in to product support from a customer who was seeing some strange behavior changes between versions of Windows:</P>
<BLOCKQUOTE>
<P><FONT face="times new roman,times"><EM>Below are two lines of code that customer used to reproduce the discrepancy between Vista and XP. <BR>Why the difference in behavior?&nbsp; Is there a good work around?<BR></EM></FONT><BR><FONT face="courier new,courier"><STRONG>printf("&nbsp; using 0x409: %d\n", CompareStringW(0x409, 0, L"대담한", -1, L"Roman", -1));<BR>printf("&nbsp; using 0x412: %d\n", CompareStringW(0x412, 0, L"대담한", -1, L"Roman", -1));<BR></STRONG></FONT><BR><FONT face="times new roman,times"><EM>Using these two lines of code on Windows XP (32-bit) the output was:<BR></EM></FONT><STRONG><FONT face="courier new,courier">&nbsp; using 0x409: 3<BR>&nbsp; using 0x412: 1<BR></STRONG></FONT><BR><FONT face="times new roman,times"><EM>Under Vista (64-bit) the output was:<BR></EM></FONT><FONT face="courier new,courier"><STRONG>&nbsp; using 0x409: 3<BR>&nbsp; using 0x412: 3<BR></STRONG></FONT><BR><FONT face="times new roman,times"><EM>Under Vista (32-bit) the output was:<BR></EM></FONT><FONT face="courier new,courier"><STRONG>&nbsp; using 0x409: 3<BR>&nbsp; using 0x412: 3</STRONG></FONT></P></BLOCKQUOTE>
<P>Just to decipher some of the hard-coded numbers for people who don't speak the MicrosoftReturnValue or MicrosoftLCID dialects, as described in MSDN in the <A class="" href="http://msdn2.microsoft.com/library/ms776294.aspx" mce_href="http://msdn2.microsoft.com/library/ms776294.aspx">Language Identifier Constants and Strings</A> topic and the <A class="" href="http://msdn2.microsoft.com/library/ms647476.aspx" mce_href="http://msdn2.microsoft.com/library/ms647476.aspx">CompareString</A>/<A class="" href="http://msdn2.microsoft.com/library/ms647477.aspx" mce_href="http://msdn2.microsoft.com/library/ms647477.aspx">CompareStringEx</A> topics:</P>
<BLOCKQUOTE>
<P><FONT face="courier new,courier"><STRONG>0x0409 == MAKELANGID(LANG_ENGLISH, SUBLANG_ENGLISH_US)</STRONG></FONT></P>
<P><FONT face="courier new,courier"><STRONG>0x0412 == MAKELANGID(LANG_KOREAN, SUBLANG_KOREAN)</STRONG></FONT></P>
<P><FONT face="courier new,courier"><STRONG>1 == CSTR_LESS_THAN</STRONG></FONT></P>
<P><FONT face="courier new,courier"><STRONG>3 == CSTR_GREATER_THAN</STRONG></FONT></P></BLOCKQUOTE>
<P>Some may recall a previous blog, in fact one of the blogs from the very first month I started blogging, entitled <A class="" href="http://archives.miloush.net/michkap/archive/2004/12/31/344888.html" mce_href="http://archives.miloush.net/michkap/archive/2004/12/31/344888.html"><STRONG>Unlike LCMapString, the sort keys for English characters precede the sort keys for Korean</STRONG></A>. The blog was trying to explain some confusing text in the depths of the notes for the managed <A class="" href="http://msdn2.microsoft.com/library/system.globalization.sortkey.aspx" mce_href="http://msdn2.microsoft.com/library/system.globalization.sortkey.aspx">SortKey class</A> help topic:</P>
<BLOCKQUOTE>
<P><EM>Working with the value of a SortKey object is equivalent to calling the Windows API LCMapString method with the LCMAP_SORTKEY value specified. However, for the SortKey object, the sort keys for English characters precede the sort keys for Korean characters.</EM></P></BLOCKQUOTE>
<P>The truth is that this Windows behavior that puts Han and Hangul first before all the other scripts in the Korean locale exists for both both sortkey generation and string comparison, even though it is only really ever documented in obscure places like that <A class="" href="http://msdn2.microsoft.com/library/system.globalization.sortkey.aspx" mce_href="http://msdn2.microsoft.com/library/system.globalization.sortkey.aspx">SortKey</A>&nbsp;topic, that blog post reference above, and my later <A class="" href="http://archives.miloush.net/michkap/archive/2007/10/08/5270854.html" mce_href="http://archives.miloush.net/michkap/archive/2007/10/08/5270854.html"><STRONG>A&amp;P of Sort Keys, part 12 (aka Han sorts first!)</STRONG></A>.</P>
<BLOCKQUOTE>
<P><EM>Between you and me, the idea of "documentation" that is only contained in this blog is not something I am entirely comfortable with, and not only for the reasons that inspire disclaimer's like <A class="" href="http://blogs.msdn.com/oldnewthing/pages/4520252.aspx" mce_href="http://blogs.msdn.com/oldnewthing/pages/4520252.aspx">Raymond's</A>. This is a topic that I plan to blog about another day since it includes just the mix of <STRONG>Policy</STRONG>, <STRONG>LCA</STRONG>, <STRONG>insanity</STRONG>, and <STRONG>inanity</STRONG> so as to delight and inspire the cynic in me. Stay tuned if this topic interests you! :-)</EM></P></BLOCKQUOTE>
<P>Now which script comes first -- Latin or Hangul, Han/Hangul vs. everything else, is entirely arbitrary. And the exact reasoning and nature of the Korean behavior being different, being at least a decade old, is no longer fully understood or known beyond the vague nature of a "request from the subsidiary" that&nbsp;people within the subsidiary can't recall the exact information about (or at least they didn't the last time I asked!) though given the generic idea that being first is somehow "better" is as good of a theory as any. I suppose we are just lucky that no other subsidiary had such a thing done for their language, too!</P>
<P>Reader George commented in that early blog:</P>
<BLOCKQUOTE>
<P><EM><FONT face="times new roman,times">Why can't you just remove this re-ordering in a future version? It seems like a weird step best removed.</FONT></EM></P></BLOCKQUOTE>
<P>Funny George should mention that, huh?</P>
<P>That is exactly what happened in Windows &gt;= Vista -- this weird re-ordering was removed from the product. </P>
<P>Of course as a side effect we are seeing the very issue that is central to the original customer complaint that inspired this blog!</P>
<P>There is no real "workaround", though. The update to the collation tables&nbsp;that happened in Vista was accompanied a major version change as well, which means such changes can be expected....</P>
<P>Now you may disagree with this direction, in which case you should leave your address in the comments with an invitation to dinner and I will&nbsp;come by to change the color of your carpets as you explain your point of view on the matter&nbsp;to me. :-)</P>
<P mce_keep="true">&nbsp;</P>
<P><FONT color=#ff00ff><EM>This blog brought to you by</EM><FONT size=5> 대 </FONT><EM>(<A class="" href="http://www.fileformat.info/info/unicode/char/b300" mce_href="http://www.fileformat.info/info/unicode/char/b300">U+b300</A>, aka HANGUL SYLLABLE TIKEUT AE)</EM></FONT></P>
<hr/><p><a id="7803731" href="#7803731">#</a> <strong>Zooba</strong> on 19 Feb 2008 5:18 PM:</p><div style="margin-left: 1em"><p>I'd love some new carpet, but unfortunately I agree completely :-P</p></div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/11/09 <a href="http://archives.miloush.net/michkap/archive/2010/11/09/10087473.html">I [will have] told you so! Well, perhaps too late (all things considered)...</a></p><p>2008/02/20 <a href="http://archives.miloush.net/michkap/archive/2008/02/20/7810085.html">Officially unofficial? Or Unofficially official?</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2008/02/20/7810085.html" title="Officially unofficial? Or Unofficially official?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2008/02/19/7785815.html" title="Insanity defined: In the real world -0 == 0, in Vista -0 &lt; 0, and in Windows Server 2008 -0 ≮ 0">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-02">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2008-02-19">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2008/02/19/7791306.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:36 GMT -->
</html>