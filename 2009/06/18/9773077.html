<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2009/06/18/9773077.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Those keys aren't going to be extended; they're dead!</title></head><body>
<h1>Those keys aren't going to be extended; they're dead!</h1>
<p><em>by Michael S. Kaplan, published on 2009/06/18 10:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2009/06/18/9773077.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p>Rimas Kudelis asked over in the Suggestion Box:</p><blockquote><p><i><font face="times new roman,times">Hi Michael,<br><br>I was wondering if you know if there are any plans to extend the Windows keyboard driver in future? In particular, I'm interested about the limitations related to dead keys.<br><br>Back in 2006 (in Only ONE WCHAR per dead key) you said that the dead key infrastructure is actually here only for legacy reasons. However, I'm pretty sure that you know how widely it's being used. One case where dead keys are very handy is adding stress marks to letters. For example, Lithuanian alphabet has 32 pairs of upper/lower letters, and that's fine, they all have distinct positions in Unicode. However, there also exist 34+34 possible combinations of these letters with the three stress marks used in Lithuanian, only 33 of them having distinct Unicode positions. Employing dead keys to enter them is a very intuitive solution. However, it doesn't work for 35 cases that have to be composed from the base letter and a combining accent mark...</font></i> <br></p></blockquote><p>The answer is not going to inspire warm fuzzies, sorry. :-( </p><p>The blog in question (<b><a href="http://archives.miloush.net/michkap/archive/2006/03/28/561725.html" mce_href="http://archives.miloush.net/michkap/archive/2006/03/28/561725.html">Only ONE WCHAR per dead key</a></b>) and the ones it links to (in particular <b><a href="http://archives.miloush.net/michkap/archive/2004/12/17/323257.html" mce_href="http://archives.miloush.net/michkap/archive/2004/12/17/323257.html">Dead keys are not intuitive</a></b>) clearly explain the architectural limitation, and the basis for the feature.<br></p><p>And they explain that the only reason this feature exists at all is a legacy of typewriters not smart enough to handle not advancing on a letter when the accent is typed after the letter.</p><p>I mean, is it really expected that people would WRITE the language this way? Would you write the accents and stress marks and then write the letter?</p><p>Of course not!</p><p>So, as I have said before many times, the way to do this is the way that even children in school learn to write the language, and that Unicode encodes scripts -- first type the base and then type the combining character or characters.</p><p>It works well, it is well supported, and it gets the job done. For Vietnamese, and Lithuanian, and all of the other languages that need this functionality....<br></p>
<hr/><p><a id="9784842" href="#9784842">#</a> <strong>Tom Gewecke</strong> on 19 Jun 2009 6:34 AM:</p><div style="margin-left: 1em"><p>Deadkeys don't require that you type the accent first, do they? &nbsp;On a Mac you can make layouts where the vowel is the deadkey and what diacritic is added depends on the next key you hit.</p></div>
<p><a id="9787409" href="#9787409">#</a> <strong>gbella</strong> on 19 Jun 2009 9:29 AM:</p><div style="margin-left: 1em"><p>Hi, I just discovered your blog while searching for a solution for a MSKLC-related bug (? to be confirmed). I wonder if this is the right place to post such reports, but it will also allow me to reflect on your opinion about dead keys.</p>
<p>So let’s see this dead key issue first. Yes, combining characters are great, and I have nothing against the Unicode principle of them following the base character. However, and I’m sure you know this just as well as me, dead keys are commonplace for several non-US (e.g.,&nbsp;French) keyboards. People are pretty well used to them, and these kinds of habits just don’t go away. Moreover, support for combining characters is a very recent addition to Windows: I am told they work under Word 2007 but, in my experience, not under Word 2003, which an awful lot of people still use. Also, under XP (e.g.,&nbsp;Notepad), the equivalence of the base+combining pair and the precomposed character is not respected, which is a major issue (when searching for the word passé I won’t find passé, see the difference?).</p>
<p>Recently I considered deploying combining character-equipped custom keyboard layouts in a big company, but I immediately discarded the idea once I realised that these issues could not be resolved.</p>
<p>Which brings me to my main topic: while developing a custom French keyboard with MSKLC, I ran into a strange error which might be a bug. I was trying to reproduce some Word-specific French character combinations such as Ctrl+' which is basically a dead key for the acute accent. So in MSKLC I defined Ctrl+' (that is, VK4) as a dead key that gives ÁÉÍÓÚáéíóú when followed by AEIOUaeiou. Also, I wanted to used the same dead key to type a regular (i.e.,&nbsp;typographic) apostrophe U+2019 when followed by a space:</p>
<p>U+00B4 (dead) followed by&nbsp;U+0020&nbsp;=&gt;&nbsp;U+2019</p>
<p>It all works perfectly fine in the test window of MSKLC. However, when I create and install the DLL, the behaviour is altered: Ctrl+' is not a dead key anymore, and pressing it results in two (!) apostrophes (U+2019) being displayed. Upon opening the installed keyboard with MSKLC, I see that the key’s definition has indeed changed: Ctrl+VK4 gives U+2019&nbsp;U+2019.</p>
<p>A similar, although not equivalent, problem occured when trying to define Ctrl+è (that is, VK7) as a dead key for the grave accent. This time, once the custom keyboard installed, the combination Ctrl+è becomes AltGr+è.</p>
<p>The KLC source file contains the right information. These alterations occur with the installed package only.</p>
<p>Any solutions or ideas? I can provide you with more information or the source KLC file if necessary.</p>
<p>Thanks a lot in advance, cheers,</p>
<p>Gábor</p></div>
<p><a id="9787744" href="#9787744">#</a> <strong>Michael Everson</strong> on 19 Jun 2009 10:05 AM:</p><div style="margin-left: 1em"><p>Lots of people are very happy with dead keys, and have been for decades. Irish keyboards, for instance, and most of the keyboards on the Mac OS, used deadkeys. You might (and do, as you say) prefer other methods of input, but there's a big difference between that and telling those who don't that they are benighted and should adopt different methods of input.</p></div>
<p><a id="9793920" href="#9793920">#</a> <strong>Michael S. Kaplan</strong> on 20 Jun 2009 1:55 PM:</p><div style="margin-left: 1em"><p>Hey Tom -- on Windows, the dead key architecture is only accent+base. The Mac has many clever additions that make dead keys more usable, but as I said Microsoft does not consider the are worth expanding on, so they do not plan to....</p>
</div>
<p><a id="9793922" href="#9793922">#</a> <strong>Michael S. Kaplan</strong> on 20 Jun 2009 1:59 PM:</p><div style="margin-left: 1em"><p>Michael, I don't know what to tell you -- I am describing things as they are and (barring some tumultuous intervening event by someone a lot more powerful than either of us) as they will be on Windows.</p>
<p>People who want to work on Windows can use the dead key support that is there and which works for many languages, or they can use other methods. There are realistically no other options....</p>
</div>
<p><a id="9793924" href="#9793924">#</a> <strong>Michael S. Kaplan</strong> on 20 Jun 2009 2:06 PM:</p><div style="margin-left: 1em"><p>Gábor, for your bug you should see other blogs I wrote like <b><a href="http://archives.miloush.net/michkap/archive/2008/01/30/7323699.html">this one</a></b> and <b><a href="http://archives.miloush.net/michkap/archive/2008/08/07/8840039.html">this other one</a></b>....</p></div>
<p><a id="9804945" href="#9804945">#</a> <strong>RQ</strong> on 26 Jun 2009 4:00 AM:</p><div style="margin-left: 1em"><p>Michael,</p>
<p>thanks for answering! :)</p>
<p>I had read many of your posts (especially those related to the question) before, but the reason why I re-asked this question was because it seemed to me that this limitation is mostly kept just to be kept. You said:</p>
<p>Even if this ever were changed in a future release of Windows, it could not be used on existing versions due to the backcompat break that this would cause -- and the future version of MSKLC would have to support different keyboard layout DLLs for different versions of Windows. &nbsp;Which as I am sure people can imagine is not a terribly popular plan....</p>
<p>So, it seems to me that it's not being updated purely for the sake of backwards compatibility, and while backcompat is a good thing, I don't believe that it should block progress (otherwise we would still be using DOS, wouldn't we?). Sure, I understand that even if Windows 8 would extend the possibilities here, we would still have to work around the limitation for Windows 7, Vista, XP etc. That's normal. Not so normal is limitations in legacy systems causing limitations in new ones. I hope you get my point... :)</p></div>
<p><a id="9806658" href="#9806658">#</a> <strong>Michael S. Kaplan</strong> on 27 Jun 2009 12:14 PM:</p><div style="margin-left: 1em"><p>The code is very solid as is and rearchitecting it to support a new scenario is considered out of scope (plus would add huge complexity to layout maintenance given the forward and backward compatibility issues.</p>
<p>This is not &quot;kept just to be kept&quot; this is kept to avoid a huge engineering cost for Microsoft and third parties and a huger authoring/maintenance cost for third parties.</p>
<p>It will not happen for the USER-based keyboarding architecture on Windows.</p>
<p>Now this does not mean the general problem has no possibility of solution; it just means that the one technology in question does not have it. There are methods to make the old architecture work (as I mentioned) and explorable avenues to use new architectures (like the text-based TIPs I have discussed previously)....</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/09/28 <a href="http://archives.miloush.net/michkap/archive/2010/09/28/10068553.html">Like one of those standards that can't/won't be fully implemented</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2009/06/23/9797156.html" title="EZ fwide[R]? It ain&#39;t all that. Roll it up and smoke it, you won&#39;t get very high....">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2009/06/12/9729466.html" title="ทำไห้เผ็ดมาก (&quot;Make it very spicy&quot;, with my crappy attempt at a Thai accent)">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2009-06">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2009-06-18">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2009/06/18/9773077.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
</html>