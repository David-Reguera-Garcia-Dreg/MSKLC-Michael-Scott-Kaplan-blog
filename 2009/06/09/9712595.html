<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2009/06/09/9712595.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>When keeping things on a level Plane[ 1] doesn't work anymore</title></head><body>
<h1>When keeping things on a level Plane[ 1] doesn't work anymore</h1>
<p><em>by Michael S. Kaplan, published on 2009/06/09 10:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2009/06/09/9712595.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p>It has been over three years (in <b><a href="http://archives.miloush.net/michkap/archive/2005/01/20/357028.html" mce_href="http://archives.miloush.net/michkap/archive/2005/01/20/357028.html">Every character has a story #4: U+feff (alternate title: UTF-8 is the BOM, dude!)</a></b>) that I mentioned in an offhand manner about Notepad "Application is perhaps an overstatement; its&nbsp;just an uber-wrapper for a Win32 <a href="http://msdn.microsoft.com/library/bb775456.aspx" mce_href="http://msdn.microsoft.com/library/bb775456.aspx">EDIT 
control</a>."</p><p>It never occurred to me that Chris Walker, the development owner of Notepad for over a decade, was a reader of my blog. He was. And he noticed. and <a href="http://archives.miloush.net/michkap/archive/2005/01/20/357028.html#360851" mce_href="http://archives.miloush.net/michkap/archive/2005/01/20/357028.html#360851">commented</a>.</p><p>Oops.</p><p>Now what I said was true only in the comparative sense of which technology is doing the drawing. But in addition to being wrong in the sense that Chris noticed (and has since forgiven me for!), I was also wrong in another sense, which I'll get to in a moment.<br></p><p>By the way (I mention in a not entirely offhand manner), I'm actually on the Windows team.</p><p>I checked in and reviewed code that will ship with Windows 7, and I officially signed off on a few features in Vista (I suppose I could have used the development equivalent of jury nullification and refused to sign off but it seemed kind of silly given the fact the things I owned kind of worked?). For Windows 7 I find myself in triage meetings pretty regularly, and in shiprooms as infrequently a I can get away with.<br></p><p>Now you may wonder why I pointed this out.</p><p>Well it had something to do with the mail I got the other day from someone who we will call Bob. Why? Because that is his name:<br></p><blockquote><blockquote><p><i><font face="times new roman,times">Hi Michael<br><br>More a topic for the Windows 7 guys rather than your blog. Using the RC Build.<br><br>As an example, consider U+10901 PHOENICIAN LETTER BET introduced in Unicode 5.0. Displays in WordPad and Paint but not in Notepad. I used the Aegean font http://users.teilar.gr/~g1951d/download.html.<br><br>Indeed, someone has broken Notepad! Guess this means the Edit control is down the tubes too.<br><br>Furthermore I've been looking at Unicode 5.2 Egyptian Hieroglyphs and same problem in Notepad using the font I built with Fontlab when wrote the proposal with Michael Everson. In this case Paint and Wordpad appear broken too.<br><br>Any idea how to report this problem? Pretty major incompatibility with Vista apart from being bad news for users of recent and upcoming versions of Unicode.<br><br>Regards</font></i><br></p></blockquote></blockquote><p>I work on Windows 7!</p><p>Since this is actually about the ScriptString* functions in Uniscribe that do simpler higher level uniswcribe work and how Uniscribe deals with Plane 1 of Unicode, I am probably a good person to forward the note onto the people in Uniscribe who are (I trust they will pardon the expression I will use here) most culpable for the "<i>pretty major incompatibility with Vista</i>" as Bob put it.</p><p>One of them can fill in the details here, but.... <br></p><p>Applications that rely on Uniscribe, which has quite a bit of knowledge about Unicode, are somewhat at the mercy of the fact that Uniscribe has some knowledgte about Plane 1 but a lot of targeted ignorance about other parts not being covered -- because then suddenly things that used to work by accident but never by specific deisgn will suddenly stop, once it starts paying attention to the plane.</p><p>An occupational hazard for anything that "works by accident" I suppose.... <br></p><p>The workaround is simple enough at the micro level: <a href="http://msdn.microsoft.com/library/en-us/gdi/fontext_2ks4.asp" mce_href="http://msdn.microsoft.com/library/en-us/gdi/fontext_2ks4.asp">ExtTextOutW</a> with the ETO_IGNORELANGUAGE flag I have mentioned <b><a href="http://archives.miloush.net/michkap/archive/2006/05/31/611340.html" mce_href="http://archives.miloush.net/michkap/archive/2006/05/31/611340.html">before</a></b>. -- I even "renamed" the flag to ETO_STOPTREATINGMELIKEIAMSOCOMPLEXYOUMISERABLECONTROLFREAK for entertainment purposes, though in this case it would sound more reasonable, I think. :-)<br></p><p>At the macro level, like Notepad, Paint, and Wordpad, this is not of much help, of course.</p><p>Now sometimes (and I am not saying this time, but you never know?) there are specific things you can do in the font that will make things work better without turning things off -- once ranges get around to being covered in the OpenType docs....</p><p>I almost forgot to explain the other place I was wrong about Notepad -- it was that "uber-wrapper for a Win32 <a href="http://msdn.microsoft.com/library/bb775456.aspx" mce_href="http://msdn.microsoft.com/library/bb775456.aspx">EDIT 
control</a>" bit. It is actually a wrapper around the Shell EDIT control, which is not exactly the same thing. Though it tries to be and most usually is. Perhaps I'll explain why another day....<span style="font-style: italic;"></span><br></p><p>&nbsp;</p><p><font color="#ff00ff"><i>This post was specifically not sponsored by any Unicode character, for hopefully obvious reasons</i></font> <br></p>
<hr/><p><strong>John Cowan</strong> on 9 Jun 2009 9:07 PM:</p><div style="margin-left: 1em"><p>Another day? &nbsp;&lt;i&gt;Another day?!!&lt;/i&gt;. &nbsp; Better be, like the very next tech posting!</p></div>
<p><strong>Michael S. Kaplan</strong> on 10 Jun 2009 12:20 AM:</p><div style="margin-left: 1em"><p>Better be or what, Mr. Cowan? Are you in a position to control content here? :-)</p>
<p>I'll get to it eventually. I have a backlog I have to deal with, too!</p>
</div>
<hr/><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2009/06/10/9723321.html" title="UCS-2 to UTF-16, Part 10: Variation[ Selector] on a theme...">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2009/06/08/9707348.html" title="Text can sometimes just look wrong when it seems like it shouldn&#39;t. Why?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2009-06">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2009-06-09">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2009/06/09/9712595.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
</html>