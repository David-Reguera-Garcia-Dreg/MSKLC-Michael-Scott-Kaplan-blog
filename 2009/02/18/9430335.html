<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2009/02/18/9430335.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>In search of the Swedish Tipping Point....</title></head><body>
<h1>In search of the Swedish Tipping Point....</h1>
<p><em>by Michael S. Kaplan, published on 2009/02/18 03:01 -05:00, original URI: http://blogs.msdn.com/b/michkap/archive/2009/02/18/9430335.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<p>By necessity, my blogs are often about something on the micro scale -- one customer report, one phenomenon that interests me, one event, one bug, one concert, one wheelchair, one function. Even the occasional groupings of these things are quite small.</p><p>And then there are trends. Thus <b><a href="http://archives.miloush.net/michkap/archive/2006/04/25/583307.html" mce_href="http://archives.miloush.net/michkap/archive/2006/04/25/583307.html">Why do we call w 'double u' -- doesn't it look more like a 'double v'?</a></b>, where I talked about the Swedish Academy's change to the way the letters W and V were to be handled in collation, and the impact on Microsoft software when this change eventually makes it to the point where it needs to be integrated and that one day this "theoretical" issue that is a punch line in a blog post 
from <a href="http://blogs.msdn.com/oldnewthing" mce_href="http://blogs.msdn.com/oldnewthing">Raymond</a> or <a href="http://blogs.msdn.com/michkap" mce_href="http://blogs.msdn.com/michkap">I</a> would have far reaching design 
consequences led to <b><a href="http://archives.miloush.net/michkap/archive/2006/04/27/584439.html" mce_href="http://archives.miloush.net/michkap/archive/2006/04/27/584439.html">The disunification of Norwegian and Danish sorting</a></b> a few days later where I noted a "Nordic" scenario where it was happening already not so far from Sweden. The follow-up on this theoretical scenario turning real and being fixed in Vista then saw its culmination to the fix for SQL Server in <b><a href="http://archives.miloush.net/michkap/archive/2008/03/27/8338664.html" mce_href="http://archives.miloush.net/michkap/archive/2008/03/27/8338664.html">The disunification of Norwegian and Danish sorting ( SQL Server 2008 Edition!)</a></b>.</p><p>Meanwhile, back in Malmo (a place in Sweden that I have visited several times over the years, for the festival)....</p><p>Several years prior to the fix in SQL Server, in <b><a href="http://archives.miloush.net/michkap/archive/2006/06/06/618798.html" mce_href="http://archives.miloush.net/michkap/archive/2006/06/06/618798.html">Unicode and SQL Collations have nothing to do with each other</a></b>, I pointed out to a customer who was confused about how the <b>SQL_SwedishStd_Pref_CP1_CI_AS</b> collation returned different results for Unicode and non-Unicode columns because Unicode columns go through the Windows collations, always.</p><p>Note how the assumption was that the Unicode column and thus the Windows collation behavior was correct.</p><p>Now, less than three years later, another customer reports:</p><blockquote><blockquote><p><font face="times new roman,times"><i>Thanks for all the research on this issue, we really appreciate it! As I see it ‘v’ and ‘w’ should not be treated the same in the Swedish language and as was pointed out in the article http://blogs.msdn.com/michkap/archive/2006/04/25/583307.aspx referred below and subsidiary in http://www.saol.se/saol13_pres.html (written in Swedish from the Swedish Academy) the two letters ‘v’ and ‘w’ should be distinct letters and not treated as equally in e.g. sorting. That the Finnish government does not seem to have changed there meaning must mean that Sweden and Finland can not share the same collation in SQL Server. I must say that it is really strange that this has not been corrected for so long.<br><br>As we see it this behaviour should be changed to the right one as soon as possible through the use of e.g. a specific Swedish collation that is different from the Finnish one. What is the process to get this to work? Does that go through Microsoft Sweden office or Connect? I guess that this is not changed over a night, so that we will have to live with this for a while, but I should definitely recommend a change. Can you help with this?</i></font><br></p></blockquote></blockquote><p>I have forwarded the information on to the appropriate owners, so this first customer report of an assumption that the suggested change has been duly noted by the people who need to know about it.</p><p>But the zeroeth customer report (to use the zero-based counting system that I recall seeing in elevators (lifts) in Sweden!) is of course not the <a href="http://en.wikipedia.org/wiki/Tipping_point_(sociology)" mce_href="http://en.wikipedia.org/wiki/Tipping_point_(sociology)">tipping point</a> for determining when the change is most appropriate to make -- so there will obviousl need to be some research to determine when would be the best release in which to make the change. And when it has been long enough.</p><p>This will require more than the "micro " report that made its way to this blog.</p><p>Though of course one the change is made, the fact that there is a mitigation for those not read for the change -- the fact that the Finns look like they are not changing the same way -- should ease the pain a bit! :-)<br></p><p>In the meantime, the customer asked if there was a workaround, a wa to get the newer behavior sooner.</p><p>I found one, reall the only one I could think of.</p><p>A way to make a letter that is not a <b>V</b> and that has a unique alphabetic weight that could masquerade like a "new Swedish collation style <b>W</b>".</p><p>It starts with <font size="6"><b>℣</b></font>, aka <a href="http://www.fileformat.info/info/unicode/char/2123" mce_href="http://www.fileformat.info/info/unicode/char/2123">U+2123</a> (VERSICLE).</p><p>It has a unique alphabetic weight just after <b>V</b> but before <b>W</b>.</p><p>In fact, it has always had such a weight, since as far back as NT 3.1!</p><p>Now there is no lowercase version (only an uppercase one), but if one built a calculated column that replaced all instance of both <b>W</b> and <b>w</b> with <b>℣</b> then indexing on that calculated column will allow every case-insensitive Swedish Windows-style collation in SQL Server to return the expected results, and every case-sensitive Swedish Windows-style collation in SQL Server to return almost the expected results. </p><p>For completeness, replacing <b>Ŵ</b> and <b>ŵ</b> (<a href="http://www.fileformat.info/info/unicode/char/0174" mce_href="http://www.fileformat.info/info/unicode/char/0174">U+0174</a> and <a href="http://www.fileformat.info/info/unicode/char/0175" mce_href="http://www.fileformat.info/info/unicode/char/0175">U+0175</a>, aka CAPITAL and SMALL LATIN LETTER W WITH CIRCUMFLEX) with  <b>℣</b> plus some diacritic (like <a href="http://www.fileformat.info/info/unicode/char/0302" mce_href="http://www.fileformat.info/info/unicode/char/0302">U+0302</a> -- COMBINING CIRCUMFLEX ACCENT) would handle the other "W-style" letter moved by Swedish/Finnish today....</p><p>So here's to the lookout for that tipping point! </p><p>&nbsp;</p><p><font color="#ff00ff"><i>This blog brought to you by</i></font><font size="6" color="#ff00ff"> ℣ </font><font color="#ff00ff"><i>(<a href="http://www.fileformat.info/info/unicode/char/2123" mce_href="http://www.fileformat.info/info/unicode/char/2123">U+2123</a>, aka VERSICLE)</i><br></font></p>
<hr/><p><strong>Rene</strong> on 17 Mar 2009 10:56 PM:</p><div style="margin-left: 1em"><p>Hello Michael,</p>
<p>A little off topic here! I spet practically the whole day trying to find the Windows default casing/collation tables that you talk about frequently on you posts.</p>
<p>Where are these tables? Are they located in some file in the OS? &nbsp;Are they in some place in the registry?</p>
<p>Please heeeeeeeeeeeeeelp me.</p>
<p>Thanks</p></div>
<p><strong>Rune</strong> on 6 Sep 2013 1:09 PM:</p><div style="margin-left: 1em"><p>So Michael, whatever happened to this issue?</p>
<p>We have an existing system used by public libraries in Sweden. Currently we use a DBMS from a different vendor, but we are evaluating MS SQL Server. However, the outdated Swedish collation turns out to be a royal pain in the posterior.</p>
<p>You see, some of our customers run libraries for schools. They need to separate grades. Each grade can be divided so that there are no more than twentyish students in the classroom. I.e. &quot;Class 1A&quot;, &quot;1B&quot;, &quot;1C&quot; and so on...all the way to &quot;1V&quot;...&quot;1W&quot;... oh wait... I can&#39;t put an index on this field, because the string &quot;Class 1V&quot; is identical to &quot;Class 1W&quot;. Ooops.</p>
<p>So we tried to specify Latin1 as the collation for this particular column (and a handful other columns that need to be unique). Which leaves me dealing with lots of horrible error messages from MSSQL saying &quot;Cannot resolve collation conflict between &quot;Latin1_General_CI_AS&quot; and &quot;Finnish_Swedish_100_CI_AI&quot; in add operator occurring in SELECT statement&quot;. It gets even worse once I blend Entity Framework into the mix.</p>
<p>Basically, from our POV, Windows&#39; Swedish collation is broken and unusable. (No worries mate, PostgreSQL and MySQL has virtually non-existing collation support in comparision, so we long abandoned them as potential candidates).</p>
</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2010/03/15 <a href="http://archives.miloush.net/michkap/archive/2010/03/15/9974423.html">Thus the problems resist solution, and the workarounds are often inadequate</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2009/04/07/9534846.html" title="Double Bite Character Set">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2009/02/16/9424838.html" title="In search of: SiaO&#39;s mythology">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2009-02">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2009-02-18">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2009/02/18/9430335.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:35 GMT -->
</html>